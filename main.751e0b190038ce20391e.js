(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"0d2Z":function(e,t,n){var r;window,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e){if(Array.isArray(e))return r(e)}},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"./node_modules/@babel/runtime/helpers/createClass.js":function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},"./node_modules/@babel/runtime/helpers/iterableToArray.js":function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)t.indexOf(n=s[i])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}},"./node_modules/@babel/runtime/helpers/slicedToArray.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),i=n("./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),o=n("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),s=n("./node_modules/@babel/runtime/helpers/nonIterableRest.js");e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||s()}},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),i=n("./node_modules/@babel/runtime/helpers/iterableToArray.js"),o=n("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),s=n("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");e.exports=function(e){return r(e)||i(e)||o(e)||s()}},"./node_modules/@babel/runtime/helpers/typeof.js":function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},"./node_modules/backbone-undo/Backbone.Undo.js":function(e,t,n){var r,i,o;i=[n("./node_modules/underscore/modules/index-all.js"),n("./node_modules/backbone/backbone.js")],void 0===(o="function"==typeof(r=function(e,t){var n=Array.prototype.slice;function r(e,t,n){return n.length<=4?e.call(t,n[0],n[1],n[2],n[3]):e.apply(t,n)}function i(e,t){return n.call(e,t)}function o(t,n){return null!=t&&(e.isArray(n)||(n=i(arguments,1)),e.all(n,(function(e){return e in t})))}var s,a,l=(s=!1,a=-1,function(){return s||(a++,s=!0,e.defer((function(){s=!1}))),a});function c(){this.registeredObjects=[],this.cidIndexes=[]}function u(t,n,r,i){for(var o,s=0,a=n.length;s<a;s++)if(o=n[s]){if("on"===t){if(!i.objectRegistry.register(o))continue}else if(!i.objectRegistry.unregister(o))continue;e.isFunction(o[t])&&o[t]("all",r,i)}}function d(t,n){var r=n.type,i=n.undoTypes,o=!i[r]||i[r][t];e.isFunction(o)&&o(n.object,n.before,n.after,n.options)}function h(t,r,i,o,s){if(!(i.isCurrentlyUndoRedoing||"undo"===t&&-1===i.pointer||"redo"===t&&i.pointer===i.length-1)){i.isCurrentlyUndoRedoing=!0;var a,l,c="undo"===t;for(s?l=c&&i.pointer===i.length-1||!c&&-1===i.pointer?e.clone(i.models):n.apply(i.models,c?[0,i.pointer]:[i.pointer,i.length-1]):(a=i.at(c?i.pointer:i.pointer+1),l=o?i.where({magicFusionIndex:a.get("magicFusionIndex")}):[a]),i.pointer+=(c?-1:1)*l.length;a=c?l.pop():l.shift();)a[t]();i.isCurrentlyUndoRedoing=!1,r.trigger(t,r)}}function f(e,t,n,i){if(e.track&&!e.isCurrentlyUndoRedoing&&t in i&&function(e,t){var n=e.condition,i=typeof n;return"function"===i?!!r(n,e,t):"boolean"!==i||n}(i[t],n)){var s=r(i[t].on,i[t],n);if(o(s,"object","before","after")){if(s.type=t,s.magicFusionIndex=l(),s.undoTypes=i,e.pointer<e.length-1)for(var a=e.length-e.pointer-1;a--;)e.pop();e.pointer=e.length,e.add(s),e.length>e.maximumStackLength&&(e.shift(),e.pointer--)}}}c.prototype={isRegistered:function(t){return t&&t.cid?this.registeredObjects[t.cid]:e.contains(this.registeredObjects,t)},register:function(e){return!this.isRegistered(e)&&(e&&e.cid?(this.registeredObjects[e.cid]=e,this.cidIndexes.push(e.cid)):this.registeredObjects.push(e),!0)},unregister:function(t){if(this.isRegistered(t)){if(t&&t.cid)delete this.registeredObjects[t.cid],this.cidIndexes.splice(e.indexOf(this.cidIndexes,t.cid),1);else{var n=e.indexOf(this.registeredObjects,t);this.registeredObjects.splice(n,1)}return!0}return!1},get:function(){return e.map(this.cidIndexes,(function(e){return this.registeredObjects[e]}),this).concat(this.registeredObjects)}};var p={add:{undo:function(e,t,n,r){e.remove(n,r)},redo:function(e,t,n,r){r.index&&(r.at=r.index),e.add(n,r)},on:function(t,n,r){return{object:n,before:void 0,after:t,options:e.clone(r)}}},remove:{undo:function(e,t,n,r){"index"in r&&(r.at=r.index),e.add(t,r)},redo:function(e,t,n,r){e.remove(t,r)},on:function(t,n,r){return{object:n,before:t,after:void 0,options:e.clone(r)}}},change:{undo:function(t,n,r,i){e.isEmpty(n)?e.each(e.keys(r),t.unset,t):(t.set(n),i&&i.unsetData&&i.unsetData.before&&i.unsetData.before.length&&e.each(i.unsetData.before,t.unset,t))},redo:function(t,n,r,i){e.isEmpty(r)?e.each(e.keys(n),t.unset,t):(t.set(r),i&&i.unsetData&&i.unsetData.after&&i.unsetData.after.length&&e.each(i.unsetData.after,t.unset,t))},on:function(t,n){var r=t.changedAttributes(),i=e.keys(r),o=e.pick(t.previousAttributes(),i),s=e.keys(o),a=(n||(n={})).unsetData={after:[],before:[]};return i.length!=s.length&&(i.length>s.length?e.each(i,(function(e){e in o||a.before.push(e)}),this):e.each(s,(function(e){e in r||a.after.push(e)}))),{object:t,before:o,after:r,options:e.clone(n)}}},reset:{undo:function(e,t,n){e.reset(t)},redo:function(e,t,n){e.reset(n)},on:function(t,n){return{object:t,before:n.previousModels,after:e.clone(t.models)}}}};function g(){}function m(t,n,r,i){if("object"==typeof n)return e.each(n,(function(e,n){2===t?m(t,e,r,i):m(t,n,e,r)}));switch(t){case 0:o(r,"undo","redo","on")&&e.all(e.pick(r,"undo","redo","on"),e.isFunction)&&(i[n]=r);break;case 1:i[n]&&e.isObject(r)&&(i[n]=e.extend({},i[n],r));break;case 2:delete i[n]}return this}g.prototype=p;var v=t.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(e){d("undo",this.attributes)},redo:function(e){d("redo",this.attributes)}}),b=t.Collection.extend({model:v,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(e){this.maximumStackLength=e}}),y=t.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(t){this.stack=new b,this.objectRegistry=new c,this.undoTypes=new g,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",(function(e,t){this.stack.setMaxLength(t)}),this),t&&t.track&&this.startTracking(),t&&t.register&&(e.isArray(t.register)||e.isArguments(t.register)?r(this.register,this,t.register):this.register(t.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(e){f(this.stack,e,i(arguments,1),this.undoTypes)},register:function(){u("on",arguments,this._addToStack,this)},unregister:function(){u("off",arguments,this._addToStack,this)},unregisterAll:function(){r(this.unregister,this,this.objectRegistry.get())},undo:function(e){h("undo",this,this.stack,e)},undoAll:function(){h("undo",this,this.stack,!1,!0)},redo:function(e){h("redo",this,this.stack,e)},redoAll:function(){h("redo",this,this.stack,!1,!0)},isAvailable:function(e){var t=this.stack,n=t.length;switch(e){case"undo":return n>0&&t.pointer>-1;case"redo":return n>0&&t.pointer<n-1;default:return!1}},merge:function(t){for(var n,r=e.isArray(t)?t:i(arguments);n=r.pop();)n instanceof y&&n.stack instanceof b&&(n.stack=this.stack)},addUndoType:function(e,t){m(0,e,t,this.undoTypes)},changeUndoType:function(e,t){m(1,e,t,this.undoTypes)},removeUndoType:function(e){m(2,e,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return e.extend(y,{defaults:function(t){e.extend(y.prototype.defaults,t)},addUndoType:function(e,t){m(0,e,t,p)},changeUndoType:function(e,t){m(1,e,t,p)},removeUndoType:function(e){m(2,e,void 0,p)}}),t.UndoManager=y})?r.apply(t,i):r)||(e.exports=o)},"./node_modules/backbone/backbone.js":function(e,t,n){(function(r){var i,o,s;s="object"==typeof self&&self.self===self&&self||"object"==typeof r&&r.global===r&&r,i=[n("./node_modules/underscore/modules/index-all.js"),n("./node_modules/cash-dom/dist/cash.esm.js"),t],void 0===(o=(function(e,t,n){s.Backbone=function(e,t,n,r){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,r){n.each(t,(function(t,i){n[i]&&(e.prototype[i]=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],a(e,this),i)};case 4:return function(e,i,o){return n[t](this[r],a(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}}(t,i,r))}))},a=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?l(e):n.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},c=t.Events={},u=/\s+/,d=function(e,t,r,i,o){var s,a=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(s=n.keys(r);a<s.length;a++)t=d(e,t,s[a],r[s[a]],o)}else if(r&&u.test(r))for(s=r.split(u);a<s.length;a++)t=e(t,s[a],i,o);else t=e(t,r,i,o);return t};c.on=function(e,t,n){return h(this,e,t,n)};var h=function(e,t,n,r,i){return e._events=d(f,e._events||{},t,n,{context:r,ctx:e,listening:i}),i&&((e._listeners||(e._listeners={}))[i.id]=i),e};c.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[i];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=o[i]={obj:e,objId:i,id:a,listeningTo:o,count:0}}return h(e,t,r,this,s),this};var f=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return e};c.off=function(e,t,n){return this._events?(this._events=d(p,this._events,e,t,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:n.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(t,r,this)}return this};var p=function(e,t,r,i){if(e){var o,s=0,a=i.context,l=i.listeners;if(t||r||a){for(var c=t?[t]:n.keys(e);s<c.length;s++){var u=e[t=c[s]];if(!u)break;for(var d=[],h=0;h<u.length;h++){var f=u[h];r&&r!==f.callback&&r!==f.callback._callback||a&&a!==f.context?d.push(f):(o=f.listening)&&0==--o.count&&(delete l[o.id],delete o.listeningTo[o.objId])}d.length?e[t]=d:delete e[t]}return e}for(var p=n.keys(l);s<p.length;s++)delete l[(o=l[p[s]]).id],delete o.listeningTo[o.objId]}};c.once=function(e,t,r){var i=d(g,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},c.listenToOnce=function(e,t,r){var i=d(g,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var g=function(e,t,r,i){if(r){var o=e[t]=n.once((function(){i(t,o),r.apply(this,arguments)}));o._callback=r}return e};c.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return d(m,this._events,e,void 0,n),this};var m=function(e,t,n,r){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&v(i,r),o&&v(o,[t].concat(r))}return e},v=function(e,t){var n,r=-1,i=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};c.bind=c.on,c.unbind=c.off,n.extend(t,c);var b=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,s=r.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,d=this._previousAttributes;for(var h in i)n.isEqual(c[h],t=i[h])||a.push(h),n.isEqual(d[h],t)?delete u[h]:u[h]=t,o?delete c[h]:c[h]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=r);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,c[a[f]],r)}if(l)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var o=e[i];n.isEqual(t[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},R(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var s=this,a=r.success,l=this.attributes;r.success=function(e){s.attributes=l;var t=r.parse?s.parse(e,r):e;if(o&&(t=n.extend({},i,t)),t&&!s.set(t,r))return!1;a&&a.call(r.context,s,e,r),s.trigger("sync",s,e,r)},R(this,r),i&&o&&(this.attributes=n.extend({},l,i));var c=this.isNew()?"create":r.patch?"patch":"update";"patch"!==c||r.attrs||(r.attrs=i);var u=this.sync(c,this,r);return this.attributes=l,u},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&o(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var s=!1;return this.isNew()?n.defer(e.success):(R(this,e),s=this.sync("delete",this,e)),i||o(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||N();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}}),s(b,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},O=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r,i=Array(e.length-n),o=t.length;for(r=0;r<i.length;r++)i[r]=e[r+n];for(r=0;r<o;r++)e[r+n]=t[r];for(r=0;r<i.length;r++)e[r+o+n]=i[r]};n.extend(y.prototype,c,{model:b,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){(t=n.extend({},w,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,s,a=[],l=[],c=[],u=[],d={},h=t.add,f=t.merge,p=t.remove,g=!1,m=this.comparator&&null==i&&!1!==t.sort,v=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){var b=this.get(o=e[s]);if(b){if(f&&o!==b){var y=this._isModel(o)?o.attributes:o;t.parse&&(y=b.parse(y,t)),b.set(y,t),c.push(b),m&&!g&&(g=b.hasChanged(v))}d[b.cid]||(d[b.cid]=!0,a.push(b)),e[s]=b}else h&&(o=e[s]=this._prepareModel(o,t))&&(l.push(o),this._addReference(o,t),d[o.cid]=!0,a.push(o))}if(p){for(s=0;s<this.length;s++)d[(o=this.models[s]).cid]||u.push(o);u.length&&this._removeModels(u,t)}var x=!1;if(a.length&&!m&&h&&p?(x=this.length!==a.length||n.some(this.models,(function(e,t){return e!==a[t]})),this.models.length=0,O(this.models,a,0),this.length=this.models.length):l.length&&(m&&(g=!0),O(this.models,l,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!t.silent){for(s=0;s<l.length;s++)null!=i&&(t.index=i+s),(o=l[s]).trigger("add",o,this,t);(g||x)&&this.trigger("sort",this,t),(l.length||u.length||c.length)&&(t.changes={added:l,removed:u,merged:c},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,r=this;return e.success=function(n){r[e.reset?"reset":"set"](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},R(this,e),this.sync("read",this,e)},create:function(e,t){var r=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;r||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,n){r&&i.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=o,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}}),s(y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments)},_=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(_);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var o=j[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||N()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1);var l=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,l&&l.call(i.context,e,t,n)};var c=i.xhr=t.ajax(n.extend(s,i));return r.trigger("request",r,c,i),c};var j={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,P=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,c,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,(function(n){var s=o._extractParameters(e,n);!1!==o.execute(i,s,r)&&(o.trigger.apply(o,["route:"+r].concat(s)),o.trigger("route",r,s),t.history.trigger("route",o,r,s))})),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(T,"(?:$1)?").replace(E,(function(e,t){return t?e:"([^/?]+)"})).replace(P,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,(function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null}))}});var M=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,L=/#.*$/;M.started=!1,n.extend(M.prototype,c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(D,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");if(M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(I,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0})))},navigate:function(e,t){if(!M.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(L,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M,b.extend=y.extend=k.extend=C.extend=M.extend=function(e,t){var r,i=this;return r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t),r.prototype=n.create(i.prototype,e),r.prototype.constructor=r,r.__super__=i.prototype,r};var N=function(){throw new Error('A "url" property or function must be specified')},R=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}(s,n,e,t)}).apply(t,i))||(e.exports=o)}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/cash-dom/dist/cash.esm.js":function(e,t,n){"use strict";n.r(t);var r=document,i=window,o=Array.prototype,s=o.filter,a=o.indexOf,l=o.map,c=o.push,u=o.reverse,d=o.slice,h=/^#[\w-]*$/,f=/^\.[\w-]*$/,p=/<.+>/,g=/^\w+$/;function m(e,t){return void 0===t&&(t=r),f.test(e)?t.getElementsByClassName(e.slice(1)):g.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e)}function v(e,t){if(void 0===t&&(t=r),e){if(e.__cash)return e;var n=e;if(k(e)){if(t.__cash&&(t=t[0]),!(n=h.test(e)?t.getElementById(e.slice(1)):p.test(e)?le(e):m(e,t)))return}else if(j(e))return this.ready(e);(n.nodeType||n===i)&&(n=[n]),this.length=n.length;for(var o=0,s=this.length;o<s;o++)this[o]=n[o]}}function b(e,t){return new v(e,t)}var y=b.fn=b.prototype=v.prototype={constructor:b,__cash:!0,length:0,splice:o.splice};y.get=function(e){return void 0===e?d.call(this):this[e<0?e+this.length:e]},y.eq=function(e){return b(this.get(e))},y.first=function(){return this.eq(0)},y.last=function(){return this.eq(-1)},y.map=function(e){return b(l.call(this,(function(t,n){return e.call(t,n,t)})))},y.slice=function(){return b(d.apply(this,arguments))};var w=/(?:^\w|[A-Z]|\b\w)/g,x=/[\s-_]+/g;function O(e){return e.replace(w,(function(e,t){return e[t?"toUpperCase":"toLowerCase"]()})).replace(x,"")}function C(e,t){for(var n=0,r=e.length;n<r&&!1!==t.call(e[n],e[n],n,e);n++);}b.camelCase=O,b.each=C,y.each=function(e){return C(this,(function(t,n){return e.call(t,n,t)})),this},y.removeProp=function(e){return this.each((function(t,n){delete n[e]}))},b.extend=y.extend=function(e){void 0===e&&(e=this);for(var t=arguments,n=t.length,r=n<2?0:1;r<n;r++)for(var i in t[r])e[i]=t[r][i];return e};var _=1;function S(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector);return!!n&&n.call(e,t)}function j(e){return"function"==typeof e}function k(e){return"string"==typeof e}function T(e){return!isNaN(parseFloat(e))&&isFinite(e)}b.guid=_,b.matches=S,b.isFunction=j,b.isString=k,b.isNumeric=T;var E=Array.isArray;function P(e){return k(e)?function(t,n){return S(n,e)}:e.__cash?function(t,n){return e.is(n)}:function(e,t,n){return t===n}}b.isArray=E,y.prop=function(e,t){if(e){if(k(e))return arguments.length<2?this[0]&&this[0][e]:this.each((function(n,r){r[e]=t}));for(var n in e)this.prop(n,e[n]);return this}},y.filter=function(e){if(!e)return b();var t=j(e)?e:P(e);return b(s.call(this,(function(n,r){return t.call(n,r,n,e)})))};var A=/\S+/g;function M(e){return k(e)&&e.match(A)||[]}function D(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}function I(e,t,n){if(1===e.nodeType){var r=i.getComputedStyle(e,null);return t?n?r.getPropertyValue(t):r[t]:r}}function L(e,t){return parseInt(I(e,t),10)||0}y.hasClass=function(e){var t=M(e),n=!1;return t.length&&this.each((function(e,r){return!(n=r.classList.contains(t[0]))})),n},y.removeAttr=function(e){var t=M(e);return t.length?this.each((function(e,n){C(t,(function(e){n.removeAttribute(e)}))})):this},y.attr=function(e,t){if(e){if(k(e)){if(arguments.length<2){if(!this[0])return;var n=this[0].getAttribute(e);return null===n?void 0:n}return null===t?this.removeAttr(e):this.each((function(n,r){r.setAttribute(e,t)}))}for(var r in e)this.attr(r,e[r]);return this}},y.toggleClass=function(e,t){var n=M(e),r=void 0!==t;return n.length?this.each((function(e,i){C(n,(function(e){r?t?i.classList.add(e):i.classList.remove(e):i.classList.toggle(e)}))})):this},y.addClass=function(e){return this.toggleClass(e,!0)},y.removeClass=function(e){return arguments.length?this.toggleClass(e,!1):this.attr("class","")},b.unique=D,y.add=function(e,t){return b(D(this.get().concat(b(e,t).get())))};var N=/^--/;function R(e){return N.test(e)}var F={},V=r.createElement("div").style,z=["webkit","moz","ms","o"];function B(e,t){if(void 0===t&&(t=R(e)),t)return e;if(!F[e]){var n=O(e),r=""+n.charAt(0).toUpperCase()+n.slice(1);C((n+" "+z.join(r+" ")+r).split(" "),(function(t){if(t in V)return F[e]=t,!1}))}return F[e]}b.prefixedProp=B;var H={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function U(e,t,n){return void 0===n&&(n=R(e)),n||H[e]||!T(t)?t:t+"px"}y.css=function(e,t){if(k(e)){var n=R(e);return e=B(e,n),arguments.length<2?this[0]&&I(this[0],e,n):e?(t=U(e,t,n),this.each((function(r,i){1===i.nodeType&&(n?i.style.setProperty(e,t):i.style[e]=t)}))):this}for(var r in e)this.css(r,e[r]);return this};var $=/^data-(.*)/;function W(e){return e.__cashData=e.__cashData||{}}function q(e,t){var n=W(e);if(t){if(!(t in n)){var r=e.dataset?e.dataset[t]||e.dataset[O(t)]:b(e).attr("data-"+t);if(void 0!==r){try{r=JSON.parse(r)}catch(i){}n[t]=r}}return n[t]}return n}function G(e,t){return L(e,"border"+(t?"Left":"Top")+"Width")+L(e,"padding"+(t?"Left":"Top"))+L(e,"padding"+(t?"Right":"Bottom"))+L(e,"border"+(t?"Right":"Bottom")+"Width")}function K(e,t){for(var n=0,r=t.length;n<r;n++)if(e.indexOf(t[n])<0)return!1;return!0}function Y(e,t,n){C(e[n],(function(e){t.removeEventListener(n,e[1])})),delete e[n]}function Z(e){return e.__cashEvents=e.__cashEvents||{}}function X(e){var t=e.split(".");return[t[0],t.slice(1).sort()]}function J(e,t,n,r){var i=Z(e);if(t){var o=i[t];if(!o)return;r&&(r.guid=r.guid||_++),i[t]=o.filter((function(i){var o=i[1];if(r&&o.guid!==r.guid||!K(i[0],n))return!0;e.removeEventListener(t,o)}))}else if(n&&n.length)for(t in i)J(e,t,n,r);else for(t in i)Y(i,e,t)}b.hasData=function(e){return"__cashData"in e},y.data=function(e,t){var n=this;if(!e){if(!this[0])return;return C(this[0].attributes,(function(e){var t=e.name.match($);t&&n.data(t[1])})),q(this[0])}if(k(e))return void 0===t?this[0]&&q(this[0],e):this.each((function(n,r){return function(e,t,n){W(e)[t]=n}(r,e,t)}));for(var r in e)this.data(r,e[r]);return this},y.removeData=function(e){return this.each((function(t,n){return function(e,t){void 0===t?delete e.__cashData:delete W(e)[t]}(n,e)}))},C(["Width","Height"],(function(e){y["inner"+e]=function(){if(this[0])return this[0]===i?i["inner"+e]:this[0]["client"+e]}})),C(["width","height"],(function(e,t){y[e]=function(n){return this[0]?arguments.length?(n=parseInt(n,10),this.each((function(r,i){if(1===i.nodeType){var o=I(i,"boxSizing");i.style[e]=U(e,n+("border-box"===o?G(i,!t):0))}}))):this[0]===i?this[0][O("outer-"+e)]:this[0].getBoundingClientRect()[e]-G(this[0],!t):void 0===n?void 0:this}})),C(["Width","Height"],(function(e,t){y["outer"+e]=function(n){if(this[0])return this[0]===i?i["outer"+e]:this[0]["offset"+e]+(n?L(this[0],"margin"+(t?"Top":"Left"))+L(this[0],"margin"+(t?"Bottom":"Right")):0)}})),y.off=function(e,t){var n=this;return void 0===e?this.each((function(e,t){return J(t)})):C(M(e),(function(e){var r=X(e),i=r[0],o=r[1];n.each((function(e,n){return J(n,i,o,t)}))})),this},y.on=function(e,t,n,r){var i=this;if(!k(e)){for(var o in e)this.on(o,t,e[o]);return this}return j(t)&&(n=t,t=!1),C(M(e),(function(e){var o=X(e),s=o[0],a=o[1];i.each((function(e,i){var o=function e(o){if(!o.namespace||K(a,o.namespace.split("."))){var l=i;if(t){for(var c=o.target;!S(c,t);){if(c===i)return;if(!(c=c.parentNode))return}l=c}o.namespace=o.namespace||"";var u=n.call(l,o,o.data);r&&J(i,s,a,e),!1===u&&(o.preventDefault(),o.stopPropagation())}};o.guid=n.guid=n.guid||_++,function(e,t,n,r){r.guid=r.guid||_++;var i=Z(e);i[t]=i[t]||[],i[t].push([n,r]),e.addEventListener(t,r)}(i,s,a,o)}))})),this},y.one=function(e,t,n){return this.on(e,t,n,!0)},y.ready=function(e){var t=function(){return e(b)};return"loading"!==r.readyState?setTimeout(t):r.addEventListener("DOMContentLoaded",t),this},y.trigger=function(e,t){var n=e;if(k(e)){var i=X(e),o=i[0],s=i[1];(n=r.createEvent("HTMLEvents")).initEvent(o,!0,!0),n.namespace=s.join(".")}return n.data=t,this.each((function(e,t){t.dispatchEvent(n)}))};var Q=/select-one/i,ee=/select-multiple/i;function te(e){var t=e.type;return Q.test(t)?function(e){return e.selectedIndex<0?null:e.options[e.selectedIndex].value}(e):ee.test(t)?function(e){var t=[];return C(e.options,(function(e){!e.selected||e.disabled||e.parentNode.disabled||t.push(e.value)})),t}(e):e.value}var ne=/%20/g,re=/file|reset|submit|button|image/i,ie=/radio|checkbox/i;y.serialize=function(){var e="";return this.each((function(t,n){C(n.elements||[n],(function(t){if(!t.disabled&&t.name&&"FIELDSET"!==t.tagName&&!re.test(t.type)&&(!ie.test(t.type)||t.checked)){var n=te(t);void 0!==n&&C(E(n)?n:[n],(function(n){e+=function(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t).replace(ne,"+")}(t.name,n)}))}}))})),e.substr(1)},y.val=function(e){return void 0===e?this[0]&&te(this[0]):this.each((function(t,n){var r=ee.test(n.type),i=null===e?r?[]:"":e;r&&E(i)?C(n.options,(function(e){e.selected=i.indexOf(e.value)>=0})):n.value=i}))},y.clone=function(){return this.map((function(e,t){return t.cloneNode(!0)}))},y.detach=function(){return this.each((function(e,t){t.parentNode&&t.parentNode.removeChild(t)}))};var oe,se=/^\s*<(\w+)[^>]*>/,ae=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function le(e){if(function(){if(!oe){var e=r.createElement("table"),t=r.createElement("tr");oe={"*":r.createElement("div"),tr:r.createElement("tbody"),td:t,th:t,thead:e,tbody:e,tfoot:e}}}(),!k(e))return[];if(ae.test(e))return[r.createElement(RegExp.$1)];var t=se.test(e)&&RegExp.$1,n=oe[t]||oe["*"];return n.innerHTML=e,b(n.childNodes).detach().get()}function ce(e,t,n){if(void 0!==t){var r=k(t);!r&&t.length?C(t,(function(t){return ce(e,t,n)})):C(e,r?function(e){e.insertAdjacentHTML(n?"afterbegin":"beforeend",t)}:function(e,r){return function(e,t,n){n?e.insertBefore(t,e.childNodes[0]):e.appendChild(t)}(e,r?t.cloneNode(!0):t,n)})}}b.parseHTML=le,y.empty=function(){var e=this[0];if(e)for(;e.firstChild;)e.removeChild(e.firstChild);return this},y.append=function(){var e=this;return C(arguments,(function(t){ce(e,t)})),this},y.appendTo=function(e){return ce(b(e),this),this},y.html=function(e){if(void 0===e)return this[0]&&this[0].innerHTML;var t=e.nodeType?e[0].outerHTML:e;return this.each((function(e,n){n.innerHTML=t}))},y.insertAfter=function(e){var t=this;return b(e).each((function(e,n){var r=n.parentNode;t.each((function(t,i){r.insertBefore(e?i.cloneNode(!0):i,n.nextSibling)}))})),this},y.after=function(){var e=this;return C(u.apply(arguments),(function(t){u.apply(b(t).slice()).insertAfter(e)})),this},y.insertBefore=function(e){var t=this;return b(e).each((function(e,n){var r=n.parentNode;t.each((function(t,i){r.insertBefore(e?i.cloneNode(!0):i,n)}))})),this},y.before=function(){var e=this;return C(arguments,(function(t){b(t).insertBefore(e)})),this},y.prepend=function(){var e=this;return C(arguments,(function(t){ce(e,t,!0)})),this},y.prependTo=function(e){return ce(b(e),u.apply(this.slice()),!0),this},y.remove=function(){return this.detach().off()},y.replaceWith=function(e){var t=this;return this.each((function(n,r){var i=r.parentNode;if(i){var o=n?b(e).clone():b(e);if(!o[0])return t.remove(),!1;i.replaceChild(o[0],r),b(o[0]).after(o.slice(1))}}))},y.replaceAll=function(e){return b(e).replaceWith(this),this},y.text=function(e){return void 0===e?this[0]?this[0].textContent:"":this.each((function(t,n){n.textContent=e}))};var ue=r.documentElement;y.offset=function(){var e=this[0];if(e){var t=e.getBoundingClientRect();return{top:t.top+i.pageYOffset-ue.clientTop,left:t.left+i.pageXOffset-ue.clientLeft}}},y.offsetParent=function(){return b(this[0]&&this[0].offsetParent)},y.position=function(){var e=this[0];if(e)return{left:e.offsetLeft,top:e.offsetTop}},y.children=function(e){var t=[];return this.each((function(e,n){c.apply(t,n.children)})),t=b(D(t)),e?t.filter((function(t,n){return S(n,e)})):t},y.contents=function(){var e=[];return this.each((function(t,n){c.apply(e,"IFRAME"===n.tagName?[n.contentDocument]:n.childNodes)})),b(e.length&&D(e))},y.find=function(e){for(var t=[],n=0,r=this.length;n<r;n++){var i=m(e,this[n]);i.length&&c.apply(t,i)}return b(t.length&&D(t))},y.has=function(e){var t=k(e)?function(t,n){return!!m(e,n).length}:function(t,n){return n.contains(e)};return this.filter(t)},y.is=function(e){if(!e||!this[0])return!1;var t=P(e),n=!1;return this.each((function(r,i){return!(n=t(r,i,e))})),n},y.next=function(){return b(this[0]&&this[0].nextElementSibling)},y.not=function(e){if(!e||!this[0])return this;var t=P(e);return this.filter((function(n,r){return!t(n,r,e)}))},y.parent=function(){var e=[];return this.each((function(t,n){n&&n.parentNode&&e.push(n.parentNode)})),b(D(e))},y.index=function(e){var t=e?b(e)[0]:this[0],n=e?this:b(t).parent().children();return a.call(n,t)},y.closest=function(e){return e&&this[0]?this.is(e)?this.filter(e):this.parent().closest(e):b()},y.parents=function(e){var t,n=[];return this.each((function(i,o){for(t=o;t&&t.parentNode&&t!==r.body.parentNode;)t=t.parentNode,(!e||e&&S(t,e))&&n.push(t)})),b(D(n))},y.prev=function(){return b(this[0]&&this[0].previousElementSibling)},y.siblings=function(){var e=this[0];return this.parent().children().filter((function(t,n){return n!==e}))},t.default=b},"./node_modules/codemirror-formatting/formatting.js":function(e,t,n){!function(e){e.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),e.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,r){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):(";"!=t||!r.lexical||")"!=r.lexical.type)&&/^[;{}]$/.test(t)&&!/^;/.test(n)}});var t=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;e.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(e,n,r,i){var o=!1;return"html"==this.configuration&&(o=!!i.context&&t.test(i.context.tagName)),!o&&("tag"==e&&/>$/.test(n)&&i.context||/^</.test(r))}}),e.defineExtension("commentRange",(function(t,n,r){var i=this,o=e.innerMode(i.getMode(),i.getTokenAt(n).state).mode;i.operation((function(){if(t)i.replaceRange(o.commentEnd,r),i.replaceRange(o.commentStart,n),n.line==r.line&&n.ch==r.ch&&i.setCursor(n.line,n.ch+o.commentStart.length);else{var e=i.getRange(n,r),s=e.indexOf(o.commentStart),a=e.lastIndexOf(o.commentEnd);s>-1&&a>-1&&a>s&&(e=e.substr(0,s)+e.substring(s+o.commentStart.length,a)+e.substr(a+o.commentEnd.length)),i.replaceRange(e,n,r)}}))})),e.defineExtension("autoIndentRange",(function(e,t){var n=this;this.operation((function(){for(var r=e.line;r<=t.line;r++)n.indentLine(r,"smart")}))})),e.defineExtension("autoFormatRange",(function(t,n){var r=this,i=r.getMode(),o=r.getRange(t,n).split("\n"),s=e.copyState(i,r.getTokenAt(t).state),a=r.getOption("tabSize"),l="",c=0,u=0===t.ch;function d(){l+="\n",u=!0,++c}for(var h=0;h<o.length;++h){for(var f=new e.StringStream(o[h],a);!f.eol();){var p=e.innerMode(i,s),g=i.token(f,s),m=f.current();f.start=f.pos,u&&!/\S/.test(m)||(l+=m,u=!1),!u&&p.mode.newlineAfterToken&&p.mode.newlineAfterToken(g,m,f.string.slice(f.pos)||o[h+1]||"",p.state)&&d()}!f.pos&&i.blankLine&&i.blankLine(s),!u&&h<o.length-1&&d()}r.operation((function(){r.replaceRange(l,t,n);for(var e=t.line+1,i=t.line+c;e<=i;++e)r.indentLine(e,"smart");r.setSelection(t,r.getCursor(!1))}))}))}(n("./node_modules/codemirror/lib/codemirror.js"))},"./node_modules/codemirror/lib/codemirror.js":function(e,t,n){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=r||i||o,a=s&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),d=/Opera\//.test(e),h=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),g=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=/Android/.test(e),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=g||/Mac/.test(t),y=/\bCrOS\b/.test(e),w=/win/i.test(t),x=d&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(d=!1,l=!0);var O=b&&(c||d&&(null==x||x<12.11)),C=n||s&&a>=9;function _(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var S,j=function(e,t){var n=e.className,r=_(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function k(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function T(e,t){return k(e).appendChild(t)}function E(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function P(e,t,n,r){var i=E(e,t,n,r);return i.setAttribute("role","presentation"),i}function A(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function M(){var e;try{e=document.activeElement}catch(Pe){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function D(e,t){var n=e.className;_(t).test(n)||(e.className+=(n?" ":"")+t)}function I(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!_(n[r]).test(t)&&(t+=" "+n[r]);return t}S=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(Pe){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var L=function(e){e.select()};function N(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function R(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function F(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,s=i||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}g?L=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(L=function(e){try{e.select()}catch(t){}});var V=function(){this.id=null,this.f=null,this.time=0,this.handler=N(this.onTimeout,this)};function z(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}V.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},V.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var B={toString:function(){return"CodeMirror.Pass"}},H={scroll:!1},U={origin:"*mouse"},$={origin:"+move"};function W(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var s=o-r;if(o==e.length||i+s>=t)return r+Math.min(s,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var q=[""];function G(e){for(;q.length<=e;)q.push(K(q)+" ");return q[e]}function K(e){return e[e.length-1]}function Y(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Z(){}function X(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&R(t,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Q(e))||t.test(e):Q(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ne=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function re(e){return e.charCodeAt(0)>=768&&ne.test(e)}function ie(e,t,n){for(;(n<0?t>0:t<e.length)&&re(e.charAt(t));)t+=n;return t}function oe(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}var se=null;function ae(e,t,n){var r;se=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:se=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:se=i)}return null!=r?r:se}var le=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function o(e,t,n){this.level=e,this.from=t,this.to=n}return function(s,a){var l,c="ltr"==a?"L":"R";if(0==s.length||"ltr"==a&&!e.test(s))return!1;for(var u=s.length,d=[],h=0;h<u;++h)d.push((l=s.charCodeAt(h))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var f=0,p=c;f<u;++f){var g=d[f];"m"==g?d[f]=p:p=g}for(var m=0,v=c;m<u;++m){var b=d[m];"1"==b&&"r"==v?d[m]="n":n.test(b)&&(v=b,"r"==b&&(d[m]="R"))}for(var y=1,w=d[0];y<u-1;++y){var x=d[y];"+"==x&&"1"==w&&"1"==d[y+1]?d[y]="1":","!=x||w!=d[y+1]||"1"!=w&&"n"!=w||(d[y]=w),w=x}for(var O=0;O<u;++O){var C=d[O];if(","==C)d[O]="N";else if("%"==C){var _=void 0;for(_=O+1;_<u&&"%"==d[_];++_);for(var S=O&&"!"==d[O-1]||_<u&&"1"==d[_]?"1":"N",j=O;j<_;++j)d[j]=S;O=_-1}}for(var k=0,T=c;k<u;++k){var E=d[k];"L"==T&&"1"==E?d[k]="L":n.test(E)&&(T=E)}for(var P=0;P<u;++P)if(t.test(d[P])){var A=void 0;for(A=P+1;A<u&&t.test(d[A]);++A);for(var M="L"==(P?d[P-1]:c),D=M==("L"==(A<u?d[A]:c))?M?"L":"R":c,I=P;I<A;++I)d[I]=D;P=A-1}for(var L,N=[],R=0;R<u;)if(r.test(d[R])){var F=R;for(++R;R<u&&r.test(d[R]);++R);N.push(new o(0,F,R))}else{var V=R,z=N.length,B="rtl"==a?1:0;for(++R;R<u&&"L"!=d[R];++R);for(var H=V;H<R;)if(i.test(d[H])){V<H&&(N.splice(z,0,new o(1,V,H)),z+=B);var U=H;for(++H;H<R&&i.test(d[H]);++H);N.splice(z,0,new o(2,U,H)),z+=B,V=H}else++H;V<R&&N.splice(z,0,new o(1,V,R))}return"ltr"==a&&(1==N[0].level&&(L=s.match(/^\s+/))&&(N[0].from=L[0].length,N.unshift(new o(0,0,L[0].length))),1==K(N).level&&(L=s.match(/\s+$/))&&(K(N).to-=L[0].length,N.push(new o(0,u-L[0].length,u)))),"rtl"==a?N.reverse():N}}();function ce(e,t){var n=e.order;return null==n&&(n=e.order=le(e.text,t)),n}var ue=[],de=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||ue).concat(n)}};function he(e,t){return e._handlers&&e._handlers[t]||ue}function fe(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=z(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function pe(e,t){var n=he(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ge(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),pe(e,n||t.type,e,t),xe(t)||t.codemirrorIgnore}function me(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==z(n,t[r])&&n.push(t[r])}function ve(e,t){return he(e,t).length>0}function be(e){e.prototype.on=function(e,t){de(this,e,t)},e.prototype.off=function(e,t){fe(this,e,t)}}function ye(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function we(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function xe(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Oe(e){ye(e),we(e)}function Ce(e){return e.target||e.srcElement}function _e(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Se,je,ke=function(){if(s&&a<9)return!1;var e=E("div");return"draggable"in e||"dragDrop"in e}();function Te(e){if(null==Se){var t=E("span","\u200b");T(e,E("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Se=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=Se?E("span","\u200b"):E("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ee(e){if(null!=je)return je;var t=T(e,document.createTextNode("A\u062eA")),n=S(t,0,1).getBoundingClientRect(),r=S(t,1,2).getBoundingClientRect();return k(e),!(!n||n.left==n.right)&&(je=r.right-n.right<3)}var Pe,Ae=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Me=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(Pe){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(Pe){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},De="oncopy"in(Pe=E("div"))||(Pe.setAttribute("oncopy","return;"),"function"==typeof Pe.oncopy),Ie=null,Le={},Ne={};function Re(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Le[e]=t}function Fe(e){if("string"==typeof e&&Ne.hasOwnProperty(e))e=Ne[e];else if(e&&"string"==typeof e.name&&Ne.hasOwnProperty(e.name)){var t=Ne[e.name];"string"==typeof t&&(t={name:t}),(e=X(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Fe("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Fe("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ve(e,t){t=Fe(t);var n=Le[t.name];if(!n)return Ve(e,"text/plain");var r=n(e,t);if(ze.hasOwnProperty(t.name)){var i=ze[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r}var ze={};function Be(e,t){R(t,ze.hasOwnProperty(e)?ze[e]:ze[e]={})}function He(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Ue(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function $e(e,t,n){return!e.startState||e.startState(t,n)}var We=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function qe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function Ge(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i})),r}function Ke(e,t,n){var r=[];return e.iter(t,n,(function(e){r.push(e.text)})),r}function Ye(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Ze(e){if(null==e.parent)return null;for(var t=e.parent,n=z(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Xe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return n+s}function Je(e,t){return t>=e.first&&t<e.first+e.size}function Qe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function et(e,t,n){if(void 0===n&&(n=null),!(this instanceof et))return new et(e,t,n);this.line=e,this.ch=t,this.sticky=n}function tt(e,t){return e.line-t.line||e.ch-t.ch}function nt(e,t){return e.sticky==t.sticky&&0==tt(e,t)}function rt(e){return et(e.line,e.ch)}function it(e,t){return tt(e,t)<0?t:e}function ot(e,t){return tt(e,t)<0?e:t}function st(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function at(e,t){if(t.line<e.first)return et(e.first,0);var n=e.first+e.size-1;return t.line>n?et(n,qe(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?et(e.line,t):n<0?et(e.line,0):e}(t,qe(e,t.line).text.length)}function lt(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=at(e,t[r]);return n}We.prototype.eol=function(){return this.pos>=this.string.length},We.prototype.sol=function(){return this.pos==this.lineStart},We.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},We.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},We.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},We.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},We.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},We.prototype.skipToEnd=function(){this.pos=this.string.length},We.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},We.prototype.backUp=function(e){this.pos-=e},We.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},We.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},We.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},We.prototype.current=function(){return this.string.slice(this.start,this.pos)},We.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},We.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},We.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ct=function(e,t){this.state=e,this.lookAhead=t},ut=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function dt(e,t,n,r){var i=[e.state.modeGen],o={};wt(e,t.text,e.doc.mode,n,(function(e,t){return i.push(e,t)}),o,r);for(var s=n.state,a=function(r){n.baseTokens=i;var a=e.state.overlays[r],l=1,c=0;n.state=!0,wt(e,t.text,a.mode,n,(function(e,t){for(var n=l;c<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(a.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)a(l);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function ht(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=ft(e,Ze(t)),i=t.text.length>e.options.maxHighlightLength&&He(e.doc.mode,r.state),o=dt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ft(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new ut(r,!0,t);var o=function(e,t,n){for(var r,i,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=qe(o,a-1),c=l.stateAfter;if(c&&(!n||a+(c instanceof ct?c.lookAhead:0)<=o.modeFrontier))return a;var u=F(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=a-1,r=u)}return i}(e,t,n),s=o>r.first&&qe(r,o-1).stateAfter,a=s?ut.fromSaved(r,s,o):new ut(r,$e(r.mode),o);return r.iter(o,t,(function(n){pt(e,n.text,a);var r=a.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?a.save():null,a.nextLine()})),n&&(r.modeFrontier=a.line),a}function pt(e,t,n,r){var i=e.doc.mode,o=new We(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&gt(i,n.state);!o.eol();)mt(i,o,n.state),o.start=o.pos}function gt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ue(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function mt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Ue(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ut.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ut.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ut.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ut.fromSaved=function(e,t,n){return t instanceof ct?new ut(e,He(e.mode,t.state),n,t.lookAhead):new ut(e,He(e.mode,t),n)},ut.prototype.save=function(e){var t=!1!==e?He(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ct(t,this.maxLookAhead):t};var vt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function bt(e,t,n,r){var i,o,s=e.doc,a=s.mode,l=qe(s,(t=at(s,t)).line),c=ft(e,t.line,n),u=new We(l.text,e.options.tabSize,c);for(r&&(o=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=mt(a,u,c.state),r&&o.push(new vt(u,i,He(s.mode,c.state)));return r?o:new vt(u,i,c.state)}function yt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function wt(e,t,n,r,i,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,d=new We(t,e.options.tabSize,r),h=e.options.addModeClass&&[null];for(""==t&&yt(gt(n,r.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,s&&pt(e,t,r,d.pos),d.pos=t.length,l=null):l=yt(mt(n,d,r.state,h),o),h){var f=h[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||u!=l){for(;c<d.start;)i(c=Math.min(d.start,c+5e3),u);u=l}d.start=d.pos}for(;c<d.pos;){var p=Math.min(d.pos,c+5e3);i(p,u),c=p}}var xt=!1,Ot=!1;function Ct(e,t,n){this.marker=e,this.from=t,this.to=n}function _t(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function St(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function jt(e,t){if(t.full)return null;var n=Je(e,t.from.line)&&qe(e,t.from.line).markedSpans,r=Je(e,t.to.line)&&qe(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,s=0==tt(t.from,t.to),a=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;null!=o.from&&!(s.inclusiveLeft?o.from<=t:o.from<t)&&(o.from!=t||"bookmark"!=s.type||n&&o.marker.insertLeft)||(r||(r=[])).push(new Ct(s,o.from,null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)?null:o.to))}return r}(n,i,s),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft))&&(r||(r=[])).push(new Ct(s,null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)?null:o.from-t,null==o.to?null:o.to-t))}return r}(r,o,s),c=1==t.text.length,u=K(t.text).length+(c?i:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var f=_t(l,h.marker);f?c&&(h.to=null==f.to?null:f.to+u):h.to=i}}if(l)for(var p=0;p<l.length;++p){var g=l[p];null!=g.to&&(g.to+=u),null==g.from?_t(a,g.marker)||(g.from=u,c&&(a||(a=[])).push(g)):(g.from+=u,c&&(a||(a=[])).push(g))}a&&(a=kt(a)),l&&l!=a&&(l=kt(l));var m=[a];if(!c){var v,b=t.text.length-2;if(b>0&&a)for(var y=0;y<a.length;++y)null==a[y].to&&(v||(v=[])).push(new Ct(a[y].marker,null,null));for(var w=0;w<b;++w)m.push(v);m.push(l)}return m}function kt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Tt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Et(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Pt(e){return e.inclusiveLeft?-1:0}function At(e){return e.inclusiveRight?1:0}function Mt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=tt(r.from,i.from)||Pt(e)-Pt(t);return o?-o:tt(r.to,i.to)||At(e)-At(t)||t.id-e.id}function Dt(e,t){var n,r=Ot&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Mt(n,i.marker)<0)&&(n=i.marker);return n}function It(e){return Dt(e,!0)}function Lt(e){return Dt(e,!1)}function Nt(e,t){var n,r=Ot&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Mt(n,o.marker)<0)&&(n=o.marker)}return n}function Rt(e,t,n,r,i){var o=qe(e,t),s=Ot&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=tt(c.from,n)||Pt(l.marker)-Pt(i),d=tt(c.to,r)||At(l.marker)-At(i);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?tt(c.to,n)>=0:tt(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?tt(c.from,r)<=0:tt(c.from,r)<0)))return!0}}}function Ft(e){for(var t;t=It(e);)e=t.find(-1,!0).line;return e}function Vt(e,t){var n=qe(e,t),r=Ft(n);return n==r?t:Ze(r)}function zt(e,t){if(t>e.lastLine())return t;var n,r=qe(e,t);if(!Bt(e,r))return t;for(;n=Lt(r);)r=n.find(1,!0).line;return Ze(r)+1}function Bt(e,t){var n=Ot&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Ht(e,t,r))return!0}}function Ht(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Ht(e,r.line,_t(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ht(e,t,i))return!0}function Ut(e){for(var t=0,n=(e=Ft(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function $t(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=It(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Lt(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Wt(e){var t=e.display,n=e.doc;t.maxLine=qe(n,n.first),t.maxLineLength=$t(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=$t(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var qt=function(e,t,n){this.text=e,Et(this,t),this.height=n?n(this):1};function Gt(e){e.parent=null,Tt(e)}qt.prototype.lineNo=function(){return Ze(this)},be(qt);var Kt={},Yt={};function Zt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Yt:Kt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Xt(e,t){var n=P("span",null,null,l?"padding-right: .1px":null),r={pre:P("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,s=void 0;r.pos=0,r.addToken=Qt,Ee(e.display.measure)&&(s=ce(o,e.doc.direction))&&(r.addToken=en(r.addToken,s)),r.map=[],nn(o,r,ht(e,o,t!=e.display.externalMeasured&&Ze(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=I(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=I(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Te(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var a=r.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return pe(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=I(r.pre.className,r.textClass||"")),r}function Jt(e){var t=E("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,r,i,o,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o="\xa0"),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,d=e.cm.state.specialChars,h=!1;if(d.test(t)){c=document.createDocumentFragment();for(var f=0;;){d.lastIndex=f;var p=d.exec(t),g=p?p.index-f:t.length-f;if(g){var m=document.createTextNode(u.slice(f,f+g));c.appendChild(s&&a<9?E("span",[m]):m),e.map.push(e.pos,e.pos+g,m),e.col+=g,e.pos+=g}if(!p)break;f+=g+1;var v=void 0;if("\t"==p[0]){var b=e.cm.options.tabSize,y=b-e.col%b;(v=c.appendChild(E("span",G(y),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=y}else"\r"==p[0]||"\n"==p[0]?((v=c.appendChild(E("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),c.appendChild(s&&a<9?E("span",[v]):v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),s&&a<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||h||o){var w=n||"";r&&(w+=r),i&&(w+=i);var x=E("span",[c],w,o);if(l)for(var O in l)l.hasOwnProperty(O)&&"style"!=O&&"class"!=O&&x.setAttribute(O,l[O]);return e.content.appendChild(x)}e.content.appendChild(c)}}function en(e,t){return function(n,r,i,o,s,a,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var d=void 0,h=0;h<t.length&&!((d=t[h]).to>c&&d.from<=c);h++);if(d.to>=u)return e(n,r,i,o,s,a,l);e(n,r.slice(0,d.to-c),i,o,null,a,l),o=null,r=r.slice(d.to-c),c=d.to}}}function tn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var s,a,l,c,u,d,h,f=i.length,p=0,g=1,m="",v=0;;){if(v==p){l=c=u=a="",h=null,d=null,v=1/0;for(var b=[],y=void 0,w=0;w<r.length;++w){var x=r[w],O=x.marker;if("bookmark"==O.type&&x.from==p&&O.widgetNode)b.push(O);else if(x.from<=p&&(null==x.to||x.to>p||O.collapsed&&x.to==p&&x.from==p)){if(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),O.className&&(l+=" "+O.className),O.css&&(a=(a?a+";":"")+O.css),O.startStyle&&x.from==p&&(u+=" "+O.startStyle),O.endStyle&&x.to==v&&(y||(y=[])).push(O.endStyle,x.to),O.title&&((h||(h={})).title=O.title),O.attributes)for(var C in O.attributes)(h||(h={}))[C]=O.attributes[C];O.collapsed&&(!d||Mt(d.marker,O)<0)&&(d=x)}else x.from>p&&v>x.from&&(v=x.from)}if(y)for(var _=0;_<y.length;_+=2)y[_+1]==v&&(c+=" "+y[_]);if(!d||d.from==p)for(var S=0;S<b.length;++S)tn(t,0,b[S]);if(d&&(d.from||0)==p){if(tn(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=f)break;for(var j=Math.min(f,v);;){if(m){var k=p+m.length;if(!d){var T=k>j?m.slice(0,j-p):m;t.addToken(t,T,s?s+l:l,u,p+T.length==v?c:"",a,h)}if(k>=j){m=m.slice(j-p),p=j;break}p=k,u=""}m=i.slice(o,o=n[g++]),s=Zt(n[g++],t.cm.options)}}else for(var E=1;E<n.length;E+=2)t.addToken(t,i.slice(o,o=n[E]),Zt(n[E+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Lt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Ze(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Bt(e,t)}function on(e,t,n){for(var r,i=[],o=t;o<n;o=r){var s=new rn(e.doc,qe(e.doc,o),o);r=o+s.size,i.push(s)}return i}var sn=null,an=null;function ln(e,t){var n=he(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);sn?r=sn.delayedCallbacks:an?r=an:(r=an=[],setTimeout(cn,0));for(var o=function(e){r.push((function(){return n[e].apply(null,i)}))},s=0;s<n.length;++s)o(s)}}function cn(){var e=an;an=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?fn(e,t):"gutter"==o?gn(e,t,n,r):"class"==o?pn(e,t):"widget"==o&&mn(e,t,r)}t.changes=null}function dn(e){return e.node==e.text&&(e.node=E("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function hn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Xt(e,t)}function fn(e,t){var n=t.text.className,r=hn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,pn(e,t)):n&&(t.text.className=n)}function pn(e,t){(function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=dn(t);t.background=r.insertBefore(E("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?dn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function gn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=dn(t);t.gutterBackground=E("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=dn(t),a=t.gutter=E("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(E("div",Qe(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.display.gutterSpecs.length;++l){var c=e.display.gutterSpecs[l].className,u=o.hasOwnProperty(c)&&o[c];u&&a.appendChild(E("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function mn(e,t,n){t.alignable&&(t.alignable=null);for(var r=_("CodeMirror-linewidget"),i=t.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);bn(e,t,n)}function vn(e,t,n,r){var i=hn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),pn(e,t),gn(e,t,n,r),bn(e,t,r),t.node}function bn(e,t,n){if(yn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)yn(e,t.rest[r],t,n,!1)}function yn(e,t,n,r,i){if(t.widgets)for(var o=dn(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=E("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),wn(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),ln(l,"redraw")}}function wn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function xn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!A(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),T(t.display.measure,E("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function On(e,t){for(var n=Ce(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Cn(e){return e.lineSpace.offsetTop}function _n(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Sn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=T(e.measure,E("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function jn(e){return 50-e.display.nativeBarWidth}function kn(e){return e.display.scroller.clientWidth-jn(e)-e.display.barWidth}function Tn(e){return e.display.scroller.clientHeight-jn(e)-e.display.barHeight}function En(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(Ze(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Pn(e,t,n,r){return Dn(e,Mn(e,t),n,r)}function An(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ur(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Mn(e,t){var n=Ze(t),r=An(e,n);r&&!r.text?r=null:r&&r.changes&&(un(e,r,n,or(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=Ze(t=Ft(t)),r=e.display.externalMeasured=new rn(e.doc,t,n);r.lineN=n;var i=r.built=Xt(e,r);return r.text=i.pre,T(e.display.lineMeasure,i.pre),r}(e,t));var i=En(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Dn(e,t,n,r,i){t.before&&(n=-1);var o,l=n+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&kn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Nn(t.map,n,r),l=o.node,c=o.start,u=o.end,d=o.collapse;if(3==l.nodeType){for(var h=0;h<4;h++){for(;c&&re(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&re(t.line.text.charAt(o.coverStart+u));)++u;if((i=s&&a<9&&0==c&&u==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Rn(S(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,d="right"}s&&a<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ie)return Ie;var t=T(e,E("span","x")),n=t.getBoundingClientRect(),r=S(t,0,1).getBoundingClientRect();return Ie=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var f;c>0&&(d=r="right"),i=e.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==r?f.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!c&&(!i||!i.left&&!i.right)){var p=l.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+ir(e.display),top:p.top,bottom:p.bottom}:Ln}for(var g=i.top-t.rect.top,m=i.bottom-t.rect.top,v=(g+m)/2,b=t.view.measure.heights,y=0;y<b.length-1&&!(v<b[y]);y++);var w={left:("right"==d?i.right:i.left)-t.rect.left,right:("left"==d?i.left:i.right)-t.rect.left,top:y?b[y-1]:0,bottom:b[y]};return i.left||i.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=g,w.rbottom=m),w}(e,t,n,r)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var In,Ln={left:0,right:0,top:0,bottom:0};function Nn(e,t,n){for(var r,i,o,s,a,l,c=0;c<e.length;c+=3)if(l=e[c+1],t<(a=e[c])?(i=0,o=1,s="left"):t<l?o=1+(i=t-a):(c==e.length-3||t==l&&e[c+3]>t)&&(i=(o=l-a)-1,t>=l&&(s="right")),null!=i){if(r=e[c+2],a==l&&n==(r.insertLeft?"left":"right")&&(s=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],s="left";if("right"==n&&i==l-a)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],s="right";break}return{node:r,start:i,end:o,collapse:s,coverStart:a,coverEnd:l}}function Rn(e,t){var n=Ln;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function Fn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Vn(e){e.display.externalMeasure=null,k(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Fn(e.display.view[t])}function zn(e){Vn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Bn(){return u&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Hn(){return u&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Un(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=xn(e.widgets[n]));return t}function $n(e,t,n,r,i){if(!i){var o=Un(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var s=Ut(t);if("local"==r?s+=Cn(e.display):s-=e.display.viewOffset,"page"==r||"window"==r){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==r?0:Hn());var l=a.left+("window"==r?0:Bn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function Wn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Bn(),i-=Hn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:r-s.left,top:i-s.top}}function qn(e,t,n,r,i){return r||(r=qe(e.doc,t.line)),$n(e,r,Pn(e,r,t.ch,i),n)}function Gn(e,t,n,r,i,o){function s(t,s){var a=Dn(e,i,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,$n(e,r,a,n)}r=r||qe(e.doc,t.line),i||(i=Mn(e,r));var a=ce(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return s("before"==c?l-1:l,"before"==c);function u(e,t,n){return s(n?e-1:e,1==a[t].level!=n)}var d=ae(a,l,c),h=se,f=u(l,d,"before"==c);return null!=h&&(f.other=u(l,h,"before"!=c)),f}function Kn(e,t){var n=0;t=at(e.doc,t),e.options.lineWrapping||(n=ir(e.display)*t.ch);var r=qe(e.doc,t.line),i=Ut(r)+Cn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Yn(e,t,n,r,i){var o=et(e,t,n);return o.xRel=i,r&&(o.outside=r),o}function Zn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Yn(r.first,0,null,-1,-1);var i=Xe(r,n),o=r.first+r.size-1;if(i>o)return Yn(r.first+r.size-1,qe(r,o).text.length,null,1,1);t<0&&(t=0);for(var s=qe(r,i);;){var a=er(e,s,i,t,n),l=Nt(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!l)return a;var c=l.find(1);if(c.line==i)return c;s=qe(r,i=c.line)}}function Xn(e,t,n,r){r-=Un(t);var i=t.text.length,o=oe((function(t){return Dn(e,n,t-1).bottom<=r}),i,0);return{begin:o,end:i=oe((function(t){return Dn(e,n,t).top>r}),o,i)}}function Jn(e,t,n,r){return n||(n=Mn(e,t)),Xn(e,t,n,$n(e,t,Dn(e,n,r),"line").top)}function Qn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function er(e,t,n,r,i){i-=Ut(t);var o=Mn(e,t),s=Un(t),a=0,l=t.text.length,c=!0,u=ce(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?nr:tr)(e,t,n,o,u,r,i);a=(c=1!=d.level)?d.from:d.to-1,l=c?d.to:d.from-1}var h,f,p=null,g=null,m=oe((function(t){var n=Dn(e,o,t);return n.top+=s,n.bottom+=s,!!Qn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(p=t,g=n),!0)}),a,l),v=!1;if(g){var b=r-g.left<g.right-r,y=b==c;m=p+(y?0:1),f=y?"after":"before",h=b?g.left:g.right}else{c||m!=l&&m!=a||m++,f=0==m?"after":m==t.text.length?"before":Dn(e,o,m-(c?1:0)).bottom+s<=i==c?"after":"before";var w=Gn(e,et(n,m,f),"line",t,o);h=w.left,v=i<w.top?-1:i>=w.bottom?1:0}return Yn(n,m=ie(t.text,m,1),f,v,r-h)}function tr(e,t,n,r,i,o,s){var a=oe((function(a){var l=i[a],c=1!=l.level;return Qn(Gn(e,et(n,c?l.to:l.from,c?"before":"after"),"line",t,r),o,s,!0)}),0,i.length-1),l=i[a];if(a>0){var c=1!=l.level,u=Gn(e,et(n,c?l.from:l.to,c?"after":"before"),"line",t,r);Qn(u,o,s,!0)&&u.top>s&&(l=i[a-1])}return l}function nr(e,t,n,r,i,o,s){var a=Xn(e,t,r,s),l=a.begin,c=a.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,d=null,h=0;h<i.length;h++){var f=i[h];if(!(f.from>=c||f.to<=l)){var p=Dn(e,r,1!=f.level?Math.min(c,f.to)-1:Math.max(l,f.from)).right,g=p<o?o-p+1e9:p-o;(!u||d>g)&&(u=f,d=g)}}return u||(u=i[i.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}function rr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==In){In=E("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)In.appendChild(document.createTextNode("x")),In.appendChild(E("br"));In.appendChild(document.createTextNode("x"))}T(e.measure,In);var n=In.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),k(e.measure),n||1}function ir(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=E("span","xxxxxxxxxx"),n=E("pre",[t],"CodeMirror-line-like");T(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function or(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+i,r[a]=o.clientWidth}return{fixedPos:sr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function sr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ar(e){var t=rr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/ir(e.display)-3);return function(i){if(Bt(e.doc,i))return 0;var o=0;if(i.widgets)for(var s=0;s<i.widgets.length;s++)i.widgets[s].height&&(o+=i.widgets[s].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function lr(e){var t=e.doc,n=ar(e);t.iter((function(e){var t=n(e);t!=e.height&&Ye(e,t)}))}function cr(e,t,n,r){var i=e.display;if(!n&&"true"==Ce(t).getAttribute("cm-not-content"))return null;var o,s,a=i.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(d){return null}var l,c=Zn(e,o,s);if(r&&c.xRel>0&&(l=qe(e.doc,c.line).text).length==c.ch){var u=F(l,l.length,e.options.tabSize)-l.length;c=et(c.line,Math.max(0,Math.round((o-Sn(e.display).left)/ir(e.display))-u))}return c}function ur(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function dr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Ot&&Vt(e.doc,t)<i.viewTo&&fr(e);else if(n<=i.viewFrom)Ot&&zt(e.doc,n+r)>i.viewFrom?fr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)fr(e);else if(t<=i.viewFrom){var o=pr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):fr(e)}else if(n>=i.viewTo){var s=pr(e,t,t,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):fr(e)}else{var a=pr(e,t,t,-1),l=pr(e,n,n+r,1);a&&l?(i.view=i.view.slice(0,a.index).concat(on(e,a.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):fr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function hr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[ur(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==z(s,n)&&s.push(n)}}}function fr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function pr(e,t,n,r){var i,o=ur(e,t),s=e.display.view;if(!Ot||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=t){if(r>0){if(o==s.length-1)return null;i=a+s[o].size-t,o++}else i=a-t;t+=i,n+=i}for(;Vt(e.doc,n)!=n;){if(o==(r<0?0:s.length-1))return null;n+=r*s[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function gr(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function mr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function vr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&br(e,a.head,i),l||wr(e,a,o)}}return r}function br(e,t,n){var r=Gn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(E("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(E("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function yr(e,t){return e.top-t.top||e.left-t.left}function wr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),s=Sn(e.display),a=s.left,l=Math.max(r.sizerWidth,kn(e)-r.sizer.offsetLeft)-s.right,c="ltr"==i.direction;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(E("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function d(t,n,r){var o,s,d=qe(i,t),h=d.text.length;function f(n,r){return qn(e,et(t,n),"div",d,r)}function p(t,n,r){var i=Jn(e,d,null,t),o="ltr"==n==("after"==r)?"left":"right";return f("after"==r?i.begin:i.end-(/\s/.test(d.text.charAt(i.end-1))?2:1),o)[o]}var g=ce(d,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(r(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(g,n||0,null==r?h:r,(function(e,t,i,d){var m="ltr"==i,v=f(e,m?"left":"right"),b=f(t-1,m?"right":"left"),y=null==n&&0==e,w=null==r&&t==h,x=0==d,O=!g||d==g.length-1;if(b.top-v.top<=3){var C=(c?y:w)&&x?a:(m?v:b).left;u(C,v.top,((c?w:y)&&O?l:(m?b:v).right)-C,v.bottom)}else{var _,S,j,k;m?(_=c&&y&&x?a:v.left,S=c?l:p(e,i,"before"),j=c?a:p(t,i,"after"),k=c&&w&&O?l:b.right):(_=c?p(e,i,"before"):a,S=!c&&y&&x?l:v.right,j=!c&&w&&O?a:b.left,k=c?p(t,i,"after"):l),u(_,v.top,S-_,v.bottom),v.bottom<b.top&&u(a,v.bottom,null,b.top),u(j,b.top,k-j,b.bottom)}(!o||yr(v,o)<0)&&(o=v),yr(b,o)<0&&(o=b),(!s||yr(v,s)<0)&&(s=v),yr(b,s)<0&&(s=b)})),{start:o,end:s}}var h=t.from(),f=t.to();if(h.line==f.line)d(h.line,h.ch,f.ch);else{var p=qe(i,h.line),g=qe(i,f.line),m=Ft(p)==Ft(g),v=d(h.line,h.ch,m?p.text.length+1:null).end,b=d(f.line,m?0:null,f.ch).start;m&&(v.top<b.top-2?(u(v.right,v.top,null,v.bottom),u(a,b.top,b.left,b.bottom)):u(v.right,v.top,b.left-v.right,v.bottom)),v.bottom<b.top&&u(a,v.bottom,null,b.top)}n.appendChild(o)}function xr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Or(e){e.state.focused||(e.display.input.focus(),_r(e))}function Cr(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Sr(e))}),100)}function _r(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(pe(e,"focus",e,t),e.state.focused=!0,D(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),xr(e))}function Sr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(pe(e,"blur",e,t),e.state.focused=!1,j(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function jr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=e.options.lineWrapping,l=void 0,c=0;if(!i.hidden){if(s&&a<8){var u=i.node.offsetTop+i.node.offsetHeight;l=u-n,n=u}else{var d=i.node.getBoundingClientRect();l=d.bottom-d.top,!o&&i.text.firstChild&&(c=i.text.firstChild.getBoundingClientRect().right-d.left-1)}var h=i.line.height-l;if((h>.005||h<-.005)&&(Ye(i.line,l),kr(i.line),i.rest))for(var f=0;f<i.rest.length;f++)kr(i.rest[f]);if(c>e.display.sizerWidth){var p=Math.ceil(c/ir(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=i.line,e.display.maxLineChanged=!0)}}}}function kr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Tr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Cn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=Xe(t,r),s=Xe(t,i);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=Xe(t,Ut(qe(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=Xe(t,Ut(qe(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function Er(e,t){var n=e.display,r=rr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Tn(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+_n(n),l=t.bottom>a-r;if(t.top<i)s.scrollTop=t.top<r?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(l?a:t.bottom)-o);c!=i&&(s.scrollTop=c)}var u=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,d=kn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),h=t.right-t.left>d;return h&&(t.right=t.left+d),t.left<10?s.scrollLeft=0:t.left<u?s.scrollLeft=Math.max(0,t.left-(h?0:10)):t.right>d+u-3&&(s.scrollLeft=t.right+(h?0:10)-d),s}function Pr(e,t){null!=t&&(Dr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ar(e){Dr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Mr(e,t,n){null==t&&null==n||Dr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Dr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ir(e,Kn(e,t.from),Kn(e,t.to),t.margin))}function Ir(e,t,n,r){var i=Er(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Mr(e,i.scrollLeft,i.scrollTop)}function Lr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||li(e,{top:t}),Nr(e,t,!0),n&&li(e),ri(e,100))}function Nr(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Rr(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,di(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Fr(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+_n(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+jn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Vr=function(e,t,n){this.cm=n;var r=this.vert=E("div",[E("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=E("div",[E("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),de(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),de(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Vr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?r:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Vr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Vr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Vr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=b&&!f?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new V,this.disableVert=new V},Vr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,(function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)}))},Vr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var zr=function(){};function Br(e,t){t||(t=Fr(e));var n=e.display.barWidth,r=e.display.barHeight;Hr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&jr(e),Hr(e,Fr(e)),n=e.display.barWidth,r=e.display.barHeight}function Hr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}zr.prototype.update=function(){return{bottom:0,right:0}},zr.prototype.setScrollLeft=function(){},zr.prototype.setScrollTop=function(){},zr.prototype.clear=function(){};var Ur={native:Vr,null:zr};function $r(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&j(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Ur[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),de(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?Rr(e,t):Lr(e,t)}),e),e.display.scrollbars.addClass&&D(e.display.wrapper,e.display.scrollbars.addClass)}var Wr=0;function qr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Wr},t=e.curOp,sn?sn.ops.push(t):t.ownsGroup=sn={ops:[t],delayedCallbacks:[]}}function Gr(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{sn=null,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Kr(t[n]);for(var r=0;r<t.length;r++)Yr(t[r]);for(var i=0;i<t.length;i++)Zr(t[i]);for(var o=0;o<t.length;o++)Xr(t[o]);for(var s=0;s<t.length;s++)Jr(t[s])}(e)}(n)}}(t)}function Kr(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=jn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=jn(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&Wt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new oi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Yr(e){e.updatedDisplay=e.mustUpdate&&si(e.cm,e.update)}function Zr(e){var t=e.cm,n=t.display;e.updatedDisplay&&jr(t),e.barMeasure=Fr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Pn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+jn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-kn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Xr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Rr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==M();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Br(t,e.barMeasure),e.updatedDisplay&&ui(t,e.barMeasure),e.selectionChanged&&xr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Or(e.cm)}function Jr(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&ai(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Nr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Rr(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!ge(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=E("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Cn(e.display))+"px;\n                         height: "+(t.bottom-t.top+jn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?et(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?et(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var s=!1,a=Gn(e,t),l=n&&n!=t?Gn(e,n):a,c=Er(e,i={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-r,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+r}),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=c.scrollTop&&(Lr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(s=!0)),null!=c.scrollLeft&&(Rr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return i}(t,at(r,e.scrollToPos.from),at(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var s=0;s<i.length;++s)i[s].lines.length||pe(i[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&pe(o[a],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&pe(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Qr(e,t){if(e.curOp)return t();qr(e);try{return t()}finally{Gr(e)}}function ei(e,t){return function(){if(e.curOp)return t.apply(e,arguments);qr(e);try{return t.apply(e,arguments)}finally{Gr(e)}}}function ti(e){return function(){if(this.curOp)return e.apply(this,arguments);qr(this);try{return e.apply(this,arguments)}finally{Gr(this)}}}function ni(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);qr(t);try{return e.apply(this,arguments)}finally{Gr(t)}}}function ri(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,N(ii,e))}function ii(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=ft(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(r.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?He(t.mode,r.state):null,l=dt(e,o,r,!0);a&&(r.state=a),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var d=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),h=0;!d&&h<s.length;++h)d=s[h]!=o.styles[h];d&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&pt(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(e,e.options.workDelay),!0})),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Qr(e,(function(){for(var t=0;t<i.length;t++)hr(e,i[t],"text")}))}}var oi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Tr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=kn(e),this.force=n,this.dims=or(e),this.events=[]};function si(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return fr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==gr(e))return!1;hi(e)&&(fr(e),t.dims=or(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),s=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(i,n.viewTo)),Ot&&(o=Vt(e.doc,o),s=zt(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=on(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=on(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(ur(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(on(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,ur(e,n)))),r.viewTo=n})(e,o,s),n.viewOffset=Ut(qe(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=gr(e);if(!a&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=M();if(!t||!A(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&A(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,d=0;d<c.length;d++){var h=c[d];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;s!=h.node;)s=a(s);var f=i&&null!=t&&t<=u&&h.lineNumber;h.changes&&(z(h.changes,"gutter")>-1&&(f=!1),un(e,h,u,n)),f&&(k(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(Qe(e.options,u)))),s=h.node.nextSibling}else{var p=vn(e,h,u,n);o.insertBefore(p,s)}u+=h.size}for(;s;)s=a(s)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=M()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&A(document.body,e.anchorNode)&&A(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),k(n.cursorDiv),k(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ri(e,400)),n.updateLineNumbers=null,!0}function ai(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=kn(e))r&&(t.visible=Tr(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+_n(e.display)-Tn(e),n.top)}),t.visible=Tr(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!si(e,t))break;jr(e);var i=Fr(e);mr(e),Br(e,i),ui(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function li(e,t){var n=new oi(e,t);if(si(e,n)){jr(e),ai(e,n);var r=Fr(e);mr(e),Br(e,r),ui(e,r),n.finish()}}function ci(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px"}function ui(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+jn(e)+"px"}function di(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=sr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function hi(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Qe(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(E("div",[E("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,s=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ci(e.display),!0}return!1}function fi(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var o=e[i],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;r=!0}n.push({className:o,style:s})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function pi(e){var t=e.gutters,n=e.gutterSpecs;k(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],o=i.className,s=i.style,a=t.appendChild(E("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",ci(e)}function gi(e){pi(e.display),dr(e),di(e)}function mi(e,t,r,i){var o=this;this.input=r,o.scrollbarFiller=E("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=E("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=P("div",null,"CodeMirror-code"),o.selectionDiv=E("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=E("div",null,"CodeMirror-cursors"),o.measure=E("div",null,"CodeMirror-measure"),o.lineMeasure=E("div",null,"CodeMirror-measure"),o.lineSpace=P("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var c=P("div",[o.lineSpace],"CodeMirror-lines");o.mover=E("div",[c],null,"position: relative"),o.sizer=E("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=E("div",null,null,"position: absolute; height: 50px; width: 1px;"),o.gutters=E("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=E("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=E("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&v||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=fi(i.gutters,i.lineNumbers),pi(o),r.init(o)}oi.prototype.signal=function(e,t){ve(e,t)&&this.events.push(arguments)},oi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)pe.apply(null,this.events[e])};var vi=0,bi=null;function yi(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function wi(e){var t=yi(e);return t.x*=bi,t.y*=bi,t}function xi(e,t){var r=yi(t),i=r.x,o=r.y,s=e.display,a=s.scroller,c=a.scrollHeight>a.clientHeight;if(i&&a.scrollWidth>a.clientWidth||o&&c){if(o&&b&&l)e:for(var u=t.target,h=s.view;u!=a;u=u.parentNode)for(var f=0;f<h.length;f++)if(h[f].node==u){e.display.currentWheelTarget=u;break e}if(i&&!n&&!d&&null!=bi)return o&&c&&Lr(e,Math.max(0,a.scrollTop+o*bi)),Rr(e,Math.max(0,a.scrollLeft+i*bi)),(!o||o&&c)&&ye(t),void(s.wheelStartX=null);if(o&&null!=bi){var p=o*bi,g=e.doc.scrollTop,m=g+s.wrapper.clientHeight;p<0?g=Math.max(0,g+p-50):m=Math.min(e.doc.height,m+p+50),li(e,{top:g,bottom:m})}vi<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(bi=(bi*vi+n)/(vi+1),++vi)}}),200)):(s.wheelDX+=i,s.wheelDY+=o))}}s?bi=-.53:n?bi=15:u?bi=-.7:h&&(bi=-1/3);var Oi=function(e,t){this.ranges=e,this.primIndex=t};Oi.prototype.primary=function(){return this.ranges[this.primIndex]},Oi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!nt(n.anchor,r.anchor)||!nt(n.head,r.head))return!1}return!0},Oi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ci(rt(this.ranges[t].anchor),rt(this.ranges[t].head));return new Oi(e,this.primIndex)},Oi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Oi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(tt(t,r.from())>=0&&tt(e,r.to())<=0)return n}return-1};var Ci=function(e,t){this.anchor=e,this.head=t};function _i(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort((function(e,t){return tt(e.from(),t.from())})),n=z(t,i);for(var o=1;o<t.length;o++){var s=t[o],a=t[o-1],l=tt(a.to(),s.from());if(r&&!s.empty()?l>0:l>=0){var c=ot(a.from(),s.from()),u=it(a.to(),s.to()),d=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,t.splice(--o,2,new Ci(d?u:c,d?c:u))}}return new Oi(t,n)}function Si(e,t){return new Oi([new Ci(e,t||e)],0)}function ji(e){return e.text?et(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function ki(e,t){if(tt(e,t.from)<0)return e;if(tt(e,t.to)<=0)return ji(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=ji(t).ch-t.to.ch),et(n,r)}function Ti(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new Ci(ki(i.anchor,t),ki(i.head,t)))}return _i(e.cm,n,e.sel.primIndex)}function Ei(e,t,n){return e.line==t.line?et(n.line,e.ch-t.ch+n.ch):et(n.line+(e.line-t.line),e.ch)}function Pi(e){e.doc.mode=Ve(e.options,e.doc.modeOption),Ai(e)}function Ai(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ri(e,100),e.state.modeGen++,e.curOp&&dr(e)}function Mi(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Di(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){(function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Tt(e),Et(e,n);var i=r?r(e):1;i!=e.height&&Ye(e,i)})(e,n,i,r),ln(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new qt(c[o],i(o),r));return n}var a=t.from,l=t.to,c=t.text,u=qe(e,a.line),d=qe(e,l.line),h=K(c),f=i(c.length-1),p=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(Mi(e,t)){var g=s(0,c.length-1);o(d,d.text,f),p&&e.remove(a.line,p),g.length&&e.insert(a.line,g)}else if(u==d)if(1==c.length)o(u,u.text.slice(0,a.ch)+h+u.text.slice(l.ch),f);else{var m=s(1,c.length-1);m.push(new qt(h+u.text.slice(l.ch),f,r)),o(u,u.text.slice(0,a.ch)+c[0],i(0)),e.insert(a.line+1,m)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+d.text.slice(l.ch),i(0)),e.remove(a.line+1,p);else{o(u,u.text.slice(0,a.ch)+c[0],i(0)),o(d,h+d.text.slice(l.ch),f);var v=s(1,c.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,v)}ln(e,"change",e,t)}function Ii(e,t,n){!function e(r,i,o){if(r.linked)for(var s=0;s<r.linked.length;++s){var a=r.linked[s];if(a.doc!=i){var l=o&&a.sharedHist;n&&!l||(t(a.doc,l),e(a.doc,r,l))}}}(e,null,!0)}function Li(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,lr(e),Pi(e),Ni(e),e.options.lineWrapping||Wt(e),e.options.mode=t.modeOption,dr(e)}function Ni(e){("rtl"==e.doc.direction?D:j)(e.display.lineDiv,"CodeMirror-rtl")}function Ri(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Fi(e,t){var n={from:rt(t.from),to:ji(t),text:Ge(e,t.from,t.to)};return Hi(e,n,t.from.line,t.to.line+1),Ii(e,(function(e){return Hi(e,n,t.from.line,t.to.line+1)}),!0),n}function Vi(e){for(;e.length&&K(e).ranges;)e.pop()}function zi(e,t,n,r){var i=e.history;i.undone.length=0;var o,s,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Vi(e.done),K(e.done)):e.done.length&&!K(e.done).ranges?K(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),K(e.done)):void 0}(i,i.lastOp==r)))s=K(o.changes),0==tt(t.from,t.to)&&0==tt(t.from,s.to)?s.to=ji(t):o.changes.push(Fi(e,t));else{var l=K(i.done);for(l&&l.ranges||Bi(e.sel,i.done),o={changes:[Fi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||pe(e,"historyAdded")}function Bi(e,t){var n=K(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Hi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),(function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function Ui(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function $i(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Ui(n[i]));return r}(e,t),r=jt(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],s=r[i];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(n[i]=s)}return n}function Wi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?Oi.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(u=d.match(/^spans_(\d+)$/))&&z(t,Number(u[1]))>-1&&(K(a)[d]=c[d],delete c[d])}}}return r}function qi(e,t,n,r){if(r){var i=e.anchor;if(n){var o=tt(t,i)<0;o!=tt(n,i)<0?(i=t,t=n):o!=tt(t,n)<0&&(t=n)}return new Ci(i,t)}return new Ci(n||t,t)}function Gi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Ji(e,new Oi([qi(e.sel.primary(),t,n,i)],0),r)}function Ki(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=qi(e.sel.ranges[o],t[o],null,i);Ji(e,_i(e.cm,r,e.sel.primIndex),n)}function Yi(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Ji(e,_i(e.cm,i,e.sel.primIndex),r)}function Zi(e,t,n,r){Ji(e,Si(t,n),r)}function Xi(e,t,n){var r=e.history.done,i=K(r);i&&i.ranges?(r[r.length-1]=t,Qi(e,t,n)):Ji(e,t,n)}function Ji(e,t,n){Qi(e,t,n),function(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,K(i.done),t))?i.done[i.done.length-1]=t:Bi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Vi(i.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Qi(e,t,n){(ve(e,"beforeSelectionChange")||e.cm&&ve(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new Ci(at(e,t[n].anchor),at(e,t[n].head))},origin:n&&n.origin};return pe(e,"beforeSelectionChange",e,r),e.cm&&pe(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?_i(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(tt(t.primary().head,e.sel.primary().head)<0?-1:1);eo(e,no(e,t,r,!0)),n&&!1===n.scroll||!e.cm||Ar(e.cm)}function eo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,me(e.cm)),ln(e,"cursorActivity",e))}function to(e){eo(e,no(e,e.sel,null,!1))}function no(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=io(e,s.anchor,a&&a.anchor,n,r),c=io(e,s.head,a&&a.head,n,r);(i||l!=s.anchor||c!=s.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new Ci(l,c))}return i?_i(e.cm,i,t.primIndex):t}function ro(e,t,n,r,i){var o=qe(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(c?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(u?a.to>=t.ch:a.to>t.ch))){if(i&&(pe(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var d=l.find(r<0?1:-1),h=void 0;if((r<0?u:c)&&(d=oo(e,d,-r,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(h=tt(d,n))&&(r<0?h<0:h>0))return ro(e,d,t,r,i)}var f=l.find(r<0?-1:1);return(r<0?c:u)&&(f=oo(e,f,r,f.line==t.line?o:null)),f?ro(e,f,t,r,i):null}}return t}function io(e,t,n,r,i){var o=r||1;return ro(e,t,n,o,i)||!i&&ro(e,t,n,o,!0)||ro(e,t,n,-o,i)||!i&&ro(e,t,n,-o,!0)||(e.cantEdit=!0,et(e.first,0))}function oo(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?at(e,et(t.line-1)):null:n>0&&t.ch==(r||qe(e,t.line)).text.length?t.line<e.first+e.size-1?et(t.line+1,0):null:new et(t.line,t.ch+n)}function so(e){e.setSelection(et(e.firstLine(),0),et(e.lastLine()),H)}function ao(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=at(e,t)),n&&(r.to=at(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),pe(e,"beforeChange",e,r),e.cm&&pe(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function lo(e,t,n){if(e.cm){if(!e.cm.curOp)return ei(e.cm,lo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"))||(t=ao(e,t,!0))){var r=xt&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=z(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var s=r[o],a=s.find(0),l=0;l<i.length;++l){var c=i[l];if(!(tt(c.to,a.from)<0||tt(c.from,a.to)>0)){var u=[l,1],d=tt(c.from,a.from),h=tt(c.to,a.to);(d<0||!s.inclusiveLeft&&!d)&&u.push({from:c.from,to:a.from}),(h>0||!s.inclusiveRight&&!h)&&u.push({from:a.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)co(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else co(e,t)}}function co(e,t){if(1!=t.text.length||""!=t.text[0]||0!=tt(t.from,t.to)){var n=Ti(e,t);zi(e,t,n,e.cm?e.cm.curOp.id:NaN),fo(e,t,n,jt(e,t));var r=[];Ii(e,(function(e,n){n||-1!=z(r,e.history)||(vo(e.history,t),r.push(e.history)),fo(e,t,null,jt(e,t))}))}}function uo(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,c=0;c<a.length&&(i=a[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(r)return void a.push(i);break}if(Bi(i,l),n&&!i.equals(e.sel))return void Ji(e,i,{clearRedo:!1});s=i}var u=[];Bi(s,l),l.push({changes:u,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var d=ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"),h=function(n){var r=i.changes[n];if(r.origin=t,d&&!ao(e,r,!1))return a.length=0,{};u.push(Fi(e,r));var o=n?Ti(e,r):K(a);fo(e,r,o,$i(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:ji(r)});var s=[];Ii(e,(function(e,t){t||-1!=z(s,e.history)||(vo(e.history,r),s.push(e.history)),fo(e,r,null,$i(e,r))}))},f=i.changes.length-1;f>=0;--f){var p=h(f);if(p)return p.v}}}}function ho(e,t){if(0!=t&&(e.first+=t,e.sel=new Oi(Y(e.sel.ranges,(function(e){return new Ci(et(e.anchor.line+t,e.anchor.ch),et(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){dr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)hr(e.cm,r,"gutter")}}function fo(e,t,n,r){if(e.cm&&!e.cm.curOp)return ei(e.cm,fo)(e,t,n,r);if(t.to.line<e.first)ho(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ho(e,i),t={from:et(e.first,0),to:et(t.to.line+i,t.to.ch),text:[K(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:et(o,qe(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ge(e,t.from,t.to),n||(n=Ti(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=Ze(Ft(qe(r,o.line))),r.iter(l,s.line+1,(function(e){if(e==i.maxLine)return a=!0,!0}))),r.sel.contains(t.from,t.to)>-1&&me(e),Di(r,t,n,ar(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,(function(e){var t=$t(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=qe(e,r).stateAfter;if(i&&(!(i instanceof ct)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,o.line),ri(e,400);var c=t.text.length-(s.line-o.line)-1;t.full?dr(e):o.line!=s.line||1!=t.text.length||Mi(e.doc,t)?dr(e,o.line,s.line+1,c):hr(e,o.line,"text");var u=ve(e,"changes"),d=ve(e,"change");if(d||u){var h={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&ln(e,"change",e,h),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}(e.cm,t,r):Di(e,t,r),Qi(e,n,H),e.cantEdit&&io(e,et(e.firstLine(),0))&&(e.cantEdit=!1)}}function po(e,t,n,r,i){var o;r||(r=n),tt(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),lo(e,{from:n,to:r,text:t,origin:i})}function go(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function mo(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],s=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)go(o.ranges[a].anchor,t,n,r),go(o.ranges[a].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=et(c.from.line+r,c.from.ch),c.to=et(c.to.line+r,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,i+1),i=0)}}}function vo(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;mo(e.done,n,r,i),mo(e.undone,n,r,i)}function bo(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=qe(e,st(e,t)):i=Ze(t),null==i?null:(r(o,i)&&e.cm&&hr(e.cm,i,n),o)}function yo(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function wo(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}Ci.prototype.from=function(){return ot(this.anchor,this.head)},Ci.prototype.to=function(){return it(this.anchor,this.head)},Ci.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},yo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Gt(i),ln(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},wo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),s=r.height;if(r.removeInner(e,o),this.height-=s-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof yo))){var a=[];this.collapse(a),this.children=[new yo(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var s=i.lines.length%25+25,a=s;a<i.lines.length;){var l=new yo(i.lines.slice(a,a+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new wo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=z(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new wo(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var s=Math.min(t,o-e);if(i.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var xo=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function Oo(e,t,n){Ut(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Pr(e,n)}xo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=Ze(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=xn(this);Ye(n,Math.max(0,n.height-o)),e&&(Qr(e,(function(){Oo(e,n,-o),hr(e,r,"widget")})),ln(e,"lineWidgetCleared",e,this,r))}},xo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=xn(this)-t;i&&(Bt(this.doc,r)||Ye(r,r.height+i),n&&Qr(n,(function(){n.curOp.forceUpdate=!0,Oo(n,r,i),ln(n,"lineWidgetChanged",n,e,Ze(r))})))},be(xo);var Co=0,_o=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Co};function So(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=R(r)).shared=!1;var o=[So(e,t,n,r,i)],s=o[0],a=r.widgetNode;return Ii(e,(function(e){a&&(r.widgetNode=a.cloneNode(!0)),o.push(So(e,at(e,t),at(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=K(o)})),new jo(o,s)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return ei(e.cm,So)(e,t,n,r,i);var o=new _o(e,i),s=tt(t,n);if(r&&R(r,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=P("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Rt(e,t.line,t,n,o)||t.line!=n.line&&Rt(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ot=!0}o.addToHistory&&zi(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,(function(e){c&&o.collapsed&&!c.options.lineWrapping&&Ft(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&Ye(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Ct(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){Bt(e,t)&&Ye(t,0)})),o.clearOnEnter&&de(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(xt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Co,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)dr(c,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=t.line;u<=n.line;u++)hr(c,u,"text");o.atomic&&to(c.doc),ln(c,"markerAdded",c,o)}return o}_o.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&qr(e),ve(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=_t(s.markedSpans,this);e&&!this.collapsed?hr(e,Ze(s),"text"):e&&(null!=a.to&&(i=Ze(s)),null!=a.from&&(r=Ze(s))),s.markedSpans=St(s.markedSpans,a),null==a.from&&this.collapsed&&!Bt(this.doc,s)&&e&&Ye(s,rr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Ft(this.lines[l]),u=$t(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&dr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&to(e.doc)),e&&ln(e,"markerCleared",e,this,r,i),t&&Gr(e),this.parent&&this.parent.clear()}},_o.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],s=_t(o.markedSpans,this);if(null!=s.from&&(n=et(t?o:Ze(o),s.from),-1==e))return n;if(null!=s.to&&(r=et(t?o:Ze(o),s.to),1==e))return r}return n&&{from:n,to:r}},_o.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Qr(r,(function(){var i=t.line,o=Ze(t.line),s=An(r,o);if(s&&(Fn(s),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Bt(n.doc,i)&&null!=n.height){var a=n.height;n.height=null;var l=xn(n)-a;l&&Ye(i,i.height+l)}ln(r,"markerChanged",r,e)}))},_o.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=z(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},_o.prototype.detachLine=function(e){if(this.lines.splice(z(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},be(_o);var jo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ko(e){return e.findMarks(et(e.first,0),e.clipPos(et(e.lastLine())),(function(e){return e.parent}))}function To(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Ii(n.primary.doc,(function(e){return r.push(e)}));for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==z(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}jo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ln(this,"clear")}},jo.prototype.find=function(e,t){return this.primary.find(e,t)},be(jo);var Eo=0,Po=function(e,t,n,r,i){if(!(this instanceof Po))return new Po(e,t,n,r,i);null==n&&(n=0),wo.call(this,[new yo([new qt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=et(n,0);this.sel=Si(o),this.history=new Ri(null),this.id=++Eo,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Di(this,{from:o,to:o,text:e}),Ji(this,Si(o),H)};Po.prototype=X(wo.prototype,{constructor:Po,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ke(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:ni((function(e){var t=et(this.first,0),n=this.first+this.size-1;lo(this,{from:t,to:et(n,qe(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Mr(this.cm,0,0),Ji(this,Si(t),H)})),replaceRange:function(e,t,n,r){po(this,e,t=at(this,t),n=n?at(this,n):t,r)},getRange:function(e,t,n){var r=Ge(this,at(this,e),at(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Je(this,e))return qe(this,e)},getLineNumber:function(e){return Ze(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=qe(this,e)),Ft(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ni((function(e,t,n){Zi(this,at(this,"number"==typeof e?et(e,t||0):e),null,n)})),setSelection:ni((function(e,t,n){Zi(this,at(this,e),at(this,t||e),n)})),extendSelection:ni((function(e,t,n){Gi(this,at(this,e),t&&at(this,t),n)})),extendSelections:ni((function(e,t){Ki(this,lt(this,e),t)})),extendSelectionsBy:ni((function(e,t){Ki(this,lt(this,Y(this.sel.ranges,e)),t)})),setSelections:ni((function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new Ci(at(this,e[i].anchor),at(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ji(this,_i(this.cm,r,t),n)}})),addSelection:ni((function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new Ci(at(this,e),at(this,t||e))),Ji(this,_i(this.cm,r,r.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=Ge(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Ge(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:ni((function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var s=i.ranges[o];r[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&function(e,t,n){for(var r=[],i=et(e.first,0),o=i,s=0;s<t.length;s++){var a=t[s],l=Ei(a.from,i,o),c=Ei(ji(a),i,o);if(i=a.to,o=c,"around"==n){var u=e.sel.ranges[s],d=tt(u.head,u.anchor)<0;r[s]=new Ci(d?c:l,d?l:c)}else r[s]=new Ci(l,l)}return new Oi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)lo(this,r[l]);a?Xi(this,a):this.cm&&Ar(this.cm)})),undo:ni((function(){uo(this,"undo")})),redo:ni((function(){uo(this,"redo")})),undoSelection:ni((function(){uo(this,"undo",!0)})),redoSelection:ni((function(){uo(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Ri(this.history.maxGeneration),Ii(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Wi(this.history.done),undone:Wi(this.history.undone)}},setHistory:function(e){var t=this.history=new Ri(this.history.maxGeneration);t.done=Wi(e.done.slice(0),null,!0),t.undone=Wi(e.undone.slice(0),null,!0)},setGutterMarker:ni((function(e,t,n){return bo(this,e,"gutter",(function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&te(r)&&(e.gutterMarkers=null),!0}))})),clearGutter:ni((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&bo(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,te(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!Je(this,e))return null;if(t=e,!(e=qe(this,e)))return null}else if(null==(t=Ze(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:ni((function(e,t,n){return bo(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(_(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0}))})),removeLineClass:ni((function(e,t,n){return bo(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(_(n));if(!o)return!1;var s=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&s!=i.length?" ":"")+i.slice(s)||null}return!0}))})),addLineWidget:ni((function(e,t,n){return function(e,t,n,r){var i=new xo(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),bo(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Bt(e,t)){var r=Ut(t)<e.scrollTop;Ye(t,t.height+xn(i)),r&&Pr(o,i.height),o.curOp.forceUpdate=!0}return!0})),o&&ln(o,"lineWidgetAdded",o,i,"number"==typeof t?t:Ze(t)),i}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return So(this,at(this,e),at(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return So(this,e=at(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=qe(this,(e=at(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=at(this,e),t=at(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i})),r},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)})),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter((function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n})),at(this,et(n,t))},indexFromPos:function(e){var t=(e=at(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Po(Ke(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Po(Ke(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),s=e.clipPos(i.to);if(tt(o,s)){var a=So(e,o,s,r.primary,r.primary.type);r.markers.push(a),a.parent=r}}}(r,ko(this)),r},unlinkDoc:function(e){if(e instanceof Ss&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),To(ko(this));break}if(e.history==this.history){var n=[e.id];Ii(e,(function(e){return n.push(e.id)}),!0),e.history=new Ri(null),e.history.done=Wi(this.history.done,n),e.history.undone=Wi(this.history.undone,n)}},iterLinkedDocs:function(e){Ii(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ae(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ni((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Qr(t=this.cm,(function(){Ni(t),dr(t)})))}))}),Po.prototype.eachLine=Po.prototype.iter;var Ao=0;function Mo(e){var t=this;if(Do(t),!ge(t,e)&&!On(t.display,e)){ye(e),s&&(Ao=+new Date);var n=cr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,l=function(){++a==i&&ei(t,(function(){var e={from:n=at(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};lo(t.doc,e),Xi(t.doc,Si(at(t.doc,n),at(t.doc,ji(e))))}))()},c=function(e,n){if(t.options.allowDropFileTypes&&-1==z(t.options.allowDropFileTypes,e.type))l();else{var r=new FileReader;r.onerror=function(){return l()},r.onload=function(){var e=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[n]=e),l()},r.readAsText(e)}},u=0;u<r.length;u++)c(r[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData("Text");if(d){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Qi(t.doc,Si(n,n)),h)for(var f=0;f<h.length;++f)po(t.doc,"",h[f].anchor,h[f].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(p){}}}}function Do(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Io(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Lo=!1;function No(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ro={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Fo=0;Fo<10;Fo++)Ro[Fo+48]=Ro[Fo+96]=String(Fo);for(var Vo=65;Vo<=90;Vo++)Ro[Vo]=String.fromCharCode(Vo);for(var zo=1;zo<=12;zo++)Ro[zo+111]=Ro[zo+63235]="F"+zo;var Bo={};function Ho(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Uo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Y(n.split(" "),Ho),o=0;o<i.length;o++){var s=void 0,a=void 0;o==i.length-1?(a=i.join(" "),s=r):(a=i.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var c in t)e[c]=t[c];return e}function $o(e,t,n,r){var i=(t=Ko(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return $o(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var s=$o(e,t.fallthrough[o],n,r);if(s)return s}}}function Wo(e){var t="string"==typeof e?e:Ro[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function qo(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(O?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(O?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Go(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=Ro[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),qo(n,e,t))}function Ko(e){return"string"==typeof e?Bo[e]:e}function Yo(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&tt(o.from,K(r).to)<=0;){var s=r.pop();if(tt(s.from,o.from)<0){o.from=s.from;break}}r.push(o)}Qr(e,(function(){for(var t=r.length-1;t>=0;t--)po(e.doc,"",r[t].from,r[t].to,"+delete");Ar(e)}))}function Zo(e,t,n){var r=ie(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Xo(e,t,n){var r=Zo(e,t.ch,n);return null==r?null:new et(t.line,r,n<0?"after":"before")}function Jo(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var o=ce(n,t.doc.direction);if(o){var s,a=i<0?K(o):o[0],l=i<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var c=Mn(t,n),u=Dn(t,c,s=i<0?n.text.length-1:0).top;s=oe((function(e){return Dn(t,c,e).top==u}),i<0==(1==a.level)?a.from:a.to-1,s),"before"==l&&(s=Zo(n,s,1))}else s=i<0?a.to:a.from;return new et(r,s,l)}}return new et(r,i<0?n.text.length:0,i<0?"before":"after")}Bo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Bo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Bo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Bo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Bo.default=b?Bo.macDefault:Bo.pcDefault;var Qo={selectAll:so,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),H)},killLine:function(e){return Yo(e,(function(t){if(t.empty()){var n=qe(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:et(t.head.line+1,0)}:{from:t.head,to:et(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Yo(e,(function(t){return{from:et(t.from().line,0),to:at(e.doc,et(t.to().line+1,0))}}))},delLineLeft:function(e){return Yo(e,(function(e){return{from:et(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Yo(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Yo(e,(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(et(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(et(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return es(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ts(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var n=qe(e.doc,t),r=function(e){for(var t;t=Lt(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=Ze(r)),Jo(!0,e,n,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),$)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),$)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?ts(e,t.head):r}),$)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),s=F(e.getLine(o.line),o.ch,r);t.push(G(r-s%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Qr(e,(function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=qe(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new et(i.line,i.ch-1)),i.ch>0)i=new et(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),et(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var s=qe(e.doc,i.line-1).text;s&&(i=new et(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),et(i.line-1,s.length-1),i,"+transpose"))}n.push(new Ci(i,i))}e.setSelections(n)}))},newlineAndIndent:function(e){return Qr(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Ar(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function es(e,t){var n=qe(e.doc,t),r=Ft(n);return r!=n&&(t=Ze(r)),Jo(!0,e,r,t,1)}function ts(e,t){var n=es(e,t.line),r=qe(e.doc,n.line),i=ce(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(n.ch,r.text.search(/\S/));return et(n.line,t.line==n.line&&t.ch<=o&&t.ch?0:o,n.sticky)}return n}function ns(e,t,n){if("string"==typeof t&&!(t=Qo[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=B}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var rs=new V;function is(e,t,n,r){var i=e.state.keySeq;if(i){if(Wo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:rs.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),os(e,i+" "+t,n,r))return!0}return os(e,t,n,r)}function os(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=$o(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&$o(t,e.options.extraKeys,n,e)||$o(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&ln(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(ye(n),xr(e)),!!i}function ss(e,t){var n=Go(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?is(e,"Shift-"+n,t,(function(t){return ns(e,t,!0)}))||is(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ns(e,t)})):is(e,n,t,(function(t){return ns(e,t)})))}var as=null;function ls(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=M(),ge(t,e)))){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var i=ss(t,e);d&&(as=i?r:null,i||88!=r||De||!(b?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!b&&!i&&46==r&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(j(t,"CodeMirror-crosshair"),fe(document,"keyup",n),fe(document,"mouseover",n))}D(t,"CodeMirror-crosshair"),de(document,"keyup",n),de(document,"mouseover",n)}(t)}}function cs(e){16==e.keyCode&&(this.doc.sel.shift=!1),ge(this,e)}function us(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||On(t.display,e)||ge(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(d&&n==as)return as=null,void ye(e);if(!d||e.which&&!(e.which<10)||!ss(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return is(e,"'"+n+"'",t,(function(t){return ns(e,t,!0)}))}(t,e,i)||t.display.input.onKeyPress(e))}}}var ds,hs,fs=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ps(e){var t=this,n=t.display;if(!(ge(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,On(n,e))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!vs(t,e)){var r=cr(t,e),i=_e(e),o=r?function(e,t){var n=+new Date;return hs&&hs.compare(n,e,t)?(ds=hs=null,"triple"):ds&&ds.compare(n,e,t)?(hs=new fs(n,e,t),ds=null,"double"):(ds=new fs(n,e,t),hs=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),is(e,qo(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,(function(t){if("string"==typeof t&&(t=Qo[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=B}finally{e.state.suppressEdits=!1}return r}))}(t,i,r,o,e)||(1==i?r?function(e,t,n,r){s?setTimeout(N(Or,e),0):e.curOp.focus=M();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};return null==i.unit&&(i.unit=(y?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=b?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(b?n.altKey:n.ctrlKey)),i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&ke&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(tt((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(tt(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,o=!1,c=ei(e,(function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,fe(i.wrapper.ownerDocument,"mouseup",c),fe(i.wrapper.ownerDocument,"mousemove",u),fe(i.scroller,"dragstart",d),fe(i.scroller,"drop",c),o||(ye(t),r.addNew||Gi(e.doc,n,null,null,r.extend),l&&!h||s&&9==a?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),de(i.wrapper.ownerDocument,"mouseup",c),de(i.wrapper.ownerDocument,"mousemove",u),de(i.scroller,"dragstart",d),de(i.scroller,"drop",c),Cr(e),setTimeout((function(){return i.input.focus()}),20)}(e,r,t,o):function(e,t,n,r){var i=e.display,o=e.doc;ye(t);var s,a,l=o.sel,c=l.ranges;if(r.addNew&&!r.extend?(a=o.sel.contains(n),s=a>-1?c[a]:new Ci(n,n)):(s=o.sel.primary(),a=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(s=new Ci(n,n)),n=cr(e,t,!0,!0),a=-1;else{var u=gs(e,n,r.unit);s=r.extend?qi(s,u.anchor,u.head,r.extend):u}r.addNew?-1==a?(a=c.length,Ji(o,_i(e,c.concat([s]),a),{scroll:!1,origin:"*mouse"})):c.length>1&&c[a].empty()&&"char"==r.unit&&!r.extend?(Ji(o,_i(e,c.slice(0,a).concat(c.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Yi(o,a,s,U):(a=0,Ji(o,new Oi([s],0),U),l=o.sel);var d=n;var h=i.wrapper.getBoundingClientRect(),f=0;function p(t){var c=++f,u=cr(e,t,!0,"rectangle"==r.unit);if(u)if(0!=tt(u,d)){e.curOp.focus=M(),function(t){if(0!=tt(d,t))if(d=t,"rectangle"==r.unit){for(var i=[],c=e.options.tabSize,u=F(qe(o,n.line).text,n.ch,c),h=F(qe(o,t.line).text,t.ch,c),f=Math.min(u,h),p=Math.max(u,h),g=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=m;g++){var v=qe(o,g).text,b=W(v,f,c);f==p?i.push(new Ci(et(g,b),et(g,b))):v.length>b&&i.push(new Ci(et(g,b),et(g,W(v,p,c))))}i.length||i.push(new Ci(n,n)),Ji(o,_i(e,l.ranges.slice(0,a).concat(i),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y,w=s,x=gs(e,t,r.unit),O=w.anchor;tt(x.anchor,O)>0?(y=x.head,O=ot(w.from(),x.anchor)):(y=x.anchor,O=it(w.to(),x.head));var C=l.ranges.slice(0);C[a]=function(e,t){var n=t.anchor,r=t.head,i=qe(e.doc,n.line);if(0==tt(n,r)&&n.sticky==r.sticky)return t;var o=ce(i);if(!o)return t;var s=ae(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var l,c=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=ae(o,r.ch,r.sticky),d=u-s||(r.ch-n.ch)*(1==a.level?-1:1);l=u==c-1||u==c?d<0:d>0}var h=o[c+(l?-1:0)],f=l==(1==h.level),p=f?h.from:h.to,g=f?"after":"before";return n.ch==p&&n.sticky==g?t:new Ci(new et(n.line,p,g),r)}(e,new Ci(at(o,O),y)),Ji(o,_i(e,C,a),U)}}(u);var g=Tr(i,o);(u.line>=g.to||u.line<g.from)&&setTimeout(ei(e,(function(){f==c&&p(t)})),150)}else{var m=t.clientY<h.top?-20:t.clientY>h.bottom?20:0;m&&setTimeout(ei(e,(function(){f==c&&(i.scroller.scrollTop+=m,p(t))})),50)}}function g(t){e.state.selectingText=!1,f=1/0,t&&(ye(t),i.input.focus()),fe(i.wrapper.ownerDocument,"mousemove",m),fe(i.wrapper.ownerDocument,"mouseup",v),o.history.lastSelOrigin=null}var m=ei(e,(function(e){0!==e.buttons&&_e(e)?p(e):g(e)})),v=ei(e,g);e.state.selectingText=v,de(i.wrapper.ownerDocument,"mousemove",m),de(i.wrapper.ownerDocument,"mouseup",v)}(e,r,t,o)}(t,r,o,e):Ce(e)==n.scroller&&ye(e):2==i?(r&&Gi(t.doc,r),setTimeout((function(){return n.input.focus()}),20)):3==i&&(C?t.display.input.onContextMenu(e):Cr(t)))}}function gs(e,t,n){if("char"==n)return new Ci(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new Ci(et(t.line,0),at(e.doc,et(t.line+1,0)));var r=n(e,t);return new Ci(r.from,r.to)}function ms(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(u){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ye(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!ve(e,n))return xe(t);o-=a.top-s.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i)return pe(e,n,e,Xe(e.doc,o),e.display.gutterSpecs[l].className,t),xe(t)}}function vs(e,t){return ms(e,t,"gutterClick",!0)}function bs(e,t){On(e.display,t)||function(e,t){return!!ve(e,"gutterContextMenu")&&ms(e,t,"gutterContextMenu",!1)}(e,t)||ge(e,t,"contextmenu")||C||e.display.input.onContextMenu(t)}function ys(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zn(e)}fs.prototype.compare=function(e,t,n){return this.time+400>e&&0==tt(t,this.pos)&&n==this.button};var ws={toString:function(){return"CodeMirror.Init"}},xs={},Os={};function Cs(e,t,n){if(!t!=!(n&&n!=ws)){var r=e.display.dragFunctions,i=t?de:fe;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function _s(e){e.options.lineWrapping?(D(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(j(e.display.wrapper,"CodeMirror-wrap"),Wt(e)),lr(e),dr(e),zn(e),setTimeout((function(){return Br(e)}),100)}function Ss(e,t){var n=this;if(!(this instanceof Ss))return new Ss(e,t);this.options=t=t?R(t):{},R(xs,t,!1);var r=t.value;"string"==typeof r?r=new Po(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new Ss.inputStyles[t.inputStyle](this),o=this.display=new mi(e,r,i,t);for(var c in o.wrapper.CodeMirror=this,ys(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$r(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new V,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(e){var t=e.display;de(t.scroller,"mousedown",ei(e,ps)),de(t.scroller,"dblclick",s&&a<11?ei(e,(function(t){if(!ge(e,t)){var n=cr(e,t);if(n&&!vs(e,t)&&!On(e.display,t)){ye(t);var r=e.findWordAt(n);Gi(e.doc,r.anchor,r.head)}}})):function(t){return ge(e,t)||ye(t)}),de(t.scroller,"contextmenu",(function(t){return bs(e,t)})),de(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||bs(e,n)}));var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(r=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}de(t.scroller,"touchstart",(function(i){if(!ge(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!vs(e,i)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}})),de(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),de(t.scroller,"touchend",(function(n){var r=t.activeTouch;if(r&&!On(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=e.coordsChar(t.activeTouch,"page");s=!r.prev||o(r,r.prev)?new Ci(a,a):!r.prev.prev||o(r,r.prev.prev)?e.findWordAt(a):new Ci(et(a.line,0),at(e.doc,et(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),ye(n)}i()})),de(t.scroller,"touchcancel",i),de(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Lr(e,t.scroller.scrollTop),Rr(e,t.scroller.scrollLeft,!0),pe(e,"scroll",e))})),de(t.scroller,"mousewheel",(function(t){return xi(e,t)})),de(t.scroller,"DOMMouseScroll",(function(t){return xi(e,t)})),de(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){ge(e,t)||Oe(t)},over:function(t){ge(e,t)||(function(e,t){var n=cr(e,t);if(n){var r=document.createDocumentFragment();br(e,n,r),e.display.dragCursor||(e.display.dragCursor=E("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),T(e.display.dragCursor,r)}}(e,t),Oe(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-Ao<100))Oe(t);else if(!ge(e,t)&&!On(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!h)){var n=E("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}(e,t)},drop:ei(e,Mo),leave:function(t){ge(e,t)||Do(e)}};var l=t.input.getField();de(l,"keyup",(function(t){return cs.call(e,t)})),de(l,"keydown",ei(e,ls)),de(l,"keypress",ei(e,us)),de(l,"focus",(function(t){return _r(e,t)})),de(l,"blur",(function(t){return Sr(e,t)}))}(this),function(){var e;Lo||(de(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Io(No)}),100))})),de(window,"blur",(function(){return Io(Sr)})),Lo=!0)}(),qr(this),this.curOp.forceUpdate=!0,Li(this,r),t.autofocus&&!v||this.hasFocus()?setTimeout(N(_r,this),20):Sr(this),Os)Os.hasOwnProperty(c)&&Os[c](this,t[c],ws);hi(this),t.finishInit&&t.finishInit(this);for(var u=0;u<js.length;++u)js[u](this);Gr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ss.defaults=xs,Ss.optionHandlers=Os;var js=[];function ks(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=ft(e,t).state:n="prev");var s=e.options.tabSize,a=qe(o,t),l=F(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(r||/\S/.test(a.text)){if("smart"==n&&((c=o.mode.indent(i,a.text.slice(u.length),a.text))==B||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?F(qe(o,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(c/s);f;--f)h+=s,d+="\t";if(h<c&&(d+=G(c-h)),d!=u)return po(o,d,et(t,0),et(t,u.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<u.length){var m=et(t,u.length);Yi(o,p,new Ci(m,m));break}}}Ss.defineInitHook=function(e){return js.push(e)};var Ts=null;function Es(e){Ts=e}function Ps(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var s=+new Date-200,a="paste"==i||e.state.pasteIncoming>s,l=Ae(t),c=null;if(a&&r.ranges.length>1)if(Ts&&Ts.text.join("\n")==t){if(r.ranges.length%Ts.text.length==0){c=[];for(var u=0;u<Ts.text.length;u++)c.push(o.splitLines(Ts.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=Y(l,(function(e){return[e]})));for(var d=e.curOp.updateInput,h=r.ranges.length-1;h>=0;h--){var f=r.ranges[h],p=f.from(),g=f.to();f.empty()&&(n&&n>0?p=et(p.line,p.ch-n):e.state.overwrite&&!a?g=et(g.line,Math.min(qe(o,g.line).text.length,g.ch+K(l).length)):a&&Ts&&Ts.lineWise&&Ts.text.join("\n")==l.join("\n")&&(p=g=et(p.line,0)));var m={from:p,to:g,text:c?c[h%c.length]:l,origin:i||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};lo(e.doc,m),ln(e,"inputRead",e,m)}t&&!a&&Ms(e,t),Ar(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function As(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Qr(t,(function(){return Ps(t,n,0,null,"paste")})),!0}function Ms(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=ks(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(qe(e.doc,i.head.line).text.slice(0,i.head.ch))&&(s=ks(e,i.head.line,"smart"));s&&ln(e,"electricInput",e,i.head.line)}}}function Ds(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:et(i,0),head:et(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Is(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Ls(){var e=E("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=E("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),Is(e),t}function Ns(e,t,n,r,i){var o=t,s=n,a=qe(e,t.line),l=i&&"rtl"==e.direction?-n:n;function c(r){var o,s;if(null==(o=i?function(e,t,n,r){var i=ce(t,e.doc.direction);if(!i)return Xo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ae(i,n.ch,n.sticky),s=i[o];if("ltr"==e.doc.direction&&s.level%2==0&&(r>0?s.to>n.ch:s.from<n.ch))return Xo(t,n,r);var a,l=function(e,n){return Zo(t,e instanceof et?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(a=a||Mn(e,t),Jn(e,t,a,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var d=1==s.level==r<0,h=l(n,d?1:-1);if(null!=h&&(d?h<=s.to&&h<=u.end:h>=s.from&&h>=u.begin))return new et(n.line,h,d?"before":"after")}var f=function(e,t,r){for(var o=function(e,t){return t?new et(n.line,l(e,1),"before"):new et(n.line,e,"after")};e>=0&&e<i.length;e+=t){var s=i[e],a=t>0==(1!=s.level),c=a?r.begin:l(r.end,-1);if(s.from<=c&&c<s.to)return o(c,a);if(c=a?s.from:l(s.to,-1),r.begin<=c&&c<r.end)return o(c,a)}},p=f(o+r,r,u);if(p)return p;var g=r>0?u.end:l(u.begin,-1);return null==g||r>0&&g==t.text.length||!(p=f(r>0?0:i.length-1,r,c(g)))?null:p}(e.cm,a,t,n):Xo(a,t,n))){if(r||(s=t.line+l)<e.first||s>=e.first+e.size||(t=new et(s,t.ch,t.sticky),!(a=qe(e,s))))return!1;t=Jo(i,e.cm,a,t.line,l)}else t=o;return!0}if("char"==r)c();else if("column"==r)c(!0);else if("word"==r||"group"==r)for(var u=null,d="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),f=!0;!(n<0)||c(!f);f=!1){var p=a.text.charAt(t.ch)||"\n",g=ee(p,h)?"w":d&&"\n"==p?"n":!d||/\s/.test(p)?null:"p";if(!d||f||g||(g="s"),u&&u!=g){n<0&&(n=1,c(),t.sticky="after");break}if(g&&(u=g),n>0&&!c(!f))break}var m=io(e,t,o,s,!0);return nt(o,m)&&(m.hitSide=!0),m}function Rs(e,t,n,r){var i,o,s=e.doc,a=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*rr(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=Zn(e,a,i)).outside;){if(n<0?i<=0:i>=s.height){o.hitSide=!0;break}i+=5*n}return o}var Fs=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new V,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Vs(e,t){var n=An(e,t.line);if(!n||n.hidden)return null;var r=qe(e.doc,t.line),i=En(n,r,t.line),o=ce(r,e.doc.direction),s="left";o&&(s=ae(o,t.ch)%2?"right":"left");var a=Nn(i.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function zs(e,t){return t&&(e.bad=!0),e}function Bs(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return zs(e.clipPos(et(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return Hs(o,t,n)}}function Hs(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!A(r,t))return zs(et(Ze(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?K(e.rest):e.line;return zs(et(Ze(o),o.text.length),i)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=r;)a=a.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?l.map:c[i],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var u=Ze(i<0?e.line:e.rest[i]),d=o[s]+r;return(r<0||a!=t)&&(d=o[s+(r?1:0)]),et(u,d)}}}var d=u(s,a,n);if(d)return zs(d,i);for(var h=a.nextSibling,f=s?s.nodeValue.length-n:0;h;h=h.nextSibling){if(d=u(h,h.firstChild,0))return zs(et(d.line,d.ch-f),i);f+=h.textContent.length}for(var p=a.previousSibling,g=n;p;p=p.previousSibling){if(d=u(p,p.firstChild,-1))return zs(et(d.line,d.ch+g),i);g+=p.textContent.length}}Fs.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function s(e){if(o(e)&&!ge(r,e)){if(r.somethingSelected())Es({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Ds(r);Es({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation((function(){r.setSelections(t.ranges,0,H),r.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var s=Ts.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Ls(),l=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),l.value=Ts.text.join("\n");var c=document.activeElement;L(l),setTimeout((function(){r.display.lineSpace.removeChild(a),c.focus(),c==i&&n.showPrimarySelection()}),50)}}Is(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),de(i,"paste",(function(e){!o(e)||ge(r,e)||As(e,r)||a<=11&&setTimeout(ei(r,(function(){return t.updateFromDOM()})),20)})),de(i,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),de(i,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),de(i,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),de(i,"touchstart",(function(){return n.forceCompositionEnd()})),de(i,"input",(function(){t.composing||t.readFromDOMSoon()})),de(i,"copy",s),de(i,"cut",s)},Fs.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Fs.prototype.prepareSelection=function(){var e=vr(this.cm,!1);return e.focus=document.activeElement==this.div,e},Fs.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Fs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Fs.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=Bs(t,e.anchorNode,e.anchorOffset),a=Bs(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=tt(ot(s,a),i)||0!=tt(it(s,a),o)){var l=t.display.view,c=i.line>=t.display.viewFrom&&Vs(t,i)||{node:l[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Vs(t,o);if(!u){var d=l[l.length-1].measure,h=d.maps?d.maps[d.maps.length-1]:d.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(c&&u){var f,p=e.rangeCount&&e.getRangeAt(0);try{f=S(c.node,c.offset,u.offset,u.node)}catch(Pe){}f&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Fs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Fs.prototype.showMultipleSelections=function(e){T(this.cm.display.cursorDiv,e.cursors),T(this.cm.display.selectionDiv,e.selection)},Fs.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Fs.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return A(this.div,t)},Fs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Fs.prototype.blur=function(){this.div.blur()},Fs.prototype.getField=function(){return this.div},Fs.prototype.supportsTouch=function(){return!0},Fs.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Qr(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Fs.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Fs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(m&&u&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Bs(t,e.anchorNode,e.anchorOffset),r=Bs(t,e.focusNode,e.focusOffset);n&&r&&Qr(t,(function(){Ji(t.doc,Si(n,r),H),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}}},Fs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>r.firstLine()&&(s=et(s.line-1,qe(r.doc,s.line-1).length)),a.ch==qe(r.doc,a.line).text.length&&a.line<r.lastLine()&&(a=et(a.line+1,0)),s.line<i.viewFrom||a.line>i.viewTo-1)return!1;s.line==i.viewFrom||0==(e=ur(r,s.line))?(t=Ze(i.view[0].line),n=i.view[0].node):(t=Ze(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=ur(r,a.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=Ze(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var d=r.doc.splitLines(function(e,t,n,r,i){var o="",s=!1,a=e.doc.lineSeparator(),l=!1;function c(){s&&(o+=a,l&&(o+=a),s=l=!1)}function u(e){e&&(c(),o+=e)}function d(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var o,h=t.getAttribute("cm-marker");if(h){var f=e.findMarks(et(r,0),et(i+1,0),(m=+h,function(e){return e.id==m}));return void(f.length&&(o=f[0].find(0))&&u(Ge(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;p&&c();for(var g=0;g<t.childNodes.length;g++)d(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),p&&(s=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var m}for(;d(t),t!=n;)t=t.nextSibling,l=!1;return o}(r,n,c,t,l)),h=Ge(r.doc,et(t,0),et(l,qe(r.doc,l).text.length));d.length>1&&h.length>1;)if(K(d)==K(h))d.pop(),h.pop(),l--;else{if(d[0]!=h[0])break;d.shift(),h.shift(),t++}for(var f=0,p=0,g=d[0],m=h[0],v=Math.min(g.length,m.length);f<v&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var b=K(d),y=K(h),w=Math.min(b.length-(1==d.length?f:0),y.length-(1==h.length?f:0));p<w&&b.charCodeAt(b.length-p-1)==y.charCodeAt(y.length-p-1);)++p;if(1==d.length&&1==h.length&&t==s.line)for(;f&&f>s.ch&&b.charCodeAt(b.length-p-1)==y.charCodeAt(y.length-p-1);)f--,p++;d[d.length-1]=b.slice(0,b.length-p).replace(/^\u200b+/,""),d[0]=d[0].slice(f).replace(/\u200b+$/,"");var x=et(t,f),O=et(l,h.length?K(h).length-p:0);return d.length>1||d[0]||tt(x,O)?(po(r.doc,d,x,O,"+input"),!0):void 0},Fs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Fs.prototype.reset=function(){this.forceCompositionEnd()},Fs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Fs.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Fs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Qr(this.cm,(function(){return dr(e.cm)}))},Fs.prototype.setUneditable=function(e){e.contentEditable="false"},Fs.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||ei(this.cm,Ps)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Fs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Fs.prototype.onContextMenu=function(){},Fs.prototype.resetPosition=function(){},Fs.prototype.needsContentAttribute=!0;var Us=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new V,this.hasSelection=!1,this.composing=null};Us.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!ge(r,e)){if(r.somethingSelected())Es({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Ds(r);Es({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,H):(n.prevInput="",i.value=t.text.join("\n"),L(i))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(i.style.width="0px"),de(i,"input",(function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),de(i,"paste",(function(e){ge(r,e)||As(e,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())})),de(i,"cut",o),de(i,"copy",o),de(e.scroller,"paste",(function(t){if(!On(e,t)&&!ge(r,t)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,i.dispatchEvent(o)}})),de(e.lineSpace,"selectstart",(function(t){On(e,t)||ye(t)})),de(i,"compositionstart",(function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),de(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Us.prototype.createField=function(e){this.wrapper=Ls(),this.textarea=this.wrapper.firstChild},Us.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Us.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=vr(e);if(e.options.moveInputWithCursor){var i=Gn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+s.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+s.left-o.left))}return r},Us.prototype.showSelection=function(e){var t=this.cm.display;T(t.cursorDiv,e.cursors),T(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Us.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&L(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Us.prototype.getField=function(){return this.textarea},Us.prototype.supportsTouch=function(){return!1},Us.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||M()!=this.textarea))try{this.textarea.focus()}catch(Pe){}},Us.prototype.blur=function(){this.textarea.blur()},Us.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Us.prototype.receivedFocus=function(){this.slowPoll()},Us.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Us.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))},Us.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Me(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===i||b&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Qr(t,(function(){Ps(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Us.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Us.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Us.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=cr(n,e),c=r.scroller.scrollTop;if(o&&!d){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&ei(n,Ji)(n.doc,Si(o),H);var u,h=i.style.cssText,f=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(u=window.scrollY),r.input.focus(),l&&window.scrollTo(null,u),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=v,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),s&&a>=9&&m(),C){Oe(e);var g=function(){fe(window,"mouseup",g),setTimeout(v,20)};de(window,"mouseup",g)}else setTimeout(v,50)}function m(){if(null!=i.selectionStart){var e=n.somethingSelected(),o="\u200b"+(e?i.value:"");i.value="\u21da",i.value=o,t.prevInput=e?"":"\u200b",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=f,i.style.cssText=h,s&&a<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart)){(!s||s&&a<9)&&m();var e=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==t.prevInput?ei(n,so)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Us.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Us.prototype.setUneditable=function(){},Us.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=ws&&i(e,t,n)}:i)}e.defineOption=n,e.Init=ws,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,Pi(e)}),!0),n("indentUnit",2,Pi,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){Ai(e),zn(e),dr(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter((function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(et(r,o))}r++}));for(var i=n.length-1;i>=0;i--)po(e.doc,t,n[i],et(n[i].line,n[i].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ws&&e.refresh()})),n("specialCharPlaceholder",Jt,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){ys(e),gi(e)}),!0),n("keyMap","default",(function(e,t,n){var r=Ko(t),i=n!=ws&&Ko(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,_s,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=fi(t,e.options.lineNumbers),gi(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?sr(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return Br(e)}),!0),n("scrollbarStyle","native",(function(e){$r(e),Br(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=fi(e.options.gutters,t),gi(e)}),!0),n("firstLineNumber",1,gi,!0),n("lineNumberFormatter",(function(e){return e}),gi,!0),n("showCursorWhenSelecting",!1,mr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Sr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){e.display.input.screenReaderLabelChanged(t=""===t?null:t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,Cs),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,mr,!0),n("singleCursorHeightPerLine",!0,mr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ai,!0),n("addModeClass",!1,Ai,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,Ai,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}(Ss),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&ei(this,t[e])(this,n,i),pe(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ko(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:ti((function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");(function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)})(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,dr(this)})),removeOverlay:ti((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void dr(this)}})),indentLine:ti((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Je(this.doc,e)&&ks(this,e,t,n)})),indentSelection:ti((function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(ks(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Ar(this));else{var o=i.from(),s=i.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)ks(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&Yi(this.doc,r,new Ci(o,c[r].to()),H)}}})),getTokenAt:function(e,t){return bt(this,e,t)},getLineTokens:function(e,t){return bt(this,et(e),t,!0)},getTokenTypeAt:function(e){e=at(this.doc,e);var t,n=ht(this,qe(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=r+i>>1;if((s?n[2*s-1]:0)>=o)i=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}r=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=i[o[t][s]];a&&r.push(a)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(o,this)&&-1==z(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return ft(this,(e=st(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Gn(this,null==e?n.head:"object"==typeof e?at(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return qn(this,at(this.doc,e),t||"page")},coordsChar:function(e,t){return Zn(this,(e=Wn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Wn(this,{top:e,left:0},t||"page").top,Xe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=qe(this.doc,e)}else r=e;return $n(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ut(r):0)},defaultTextHeight:function(){return rr(this.display)},defaultCharWidth:function(){return ir(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,s=this.display,a=(e=Gn(this,at(this.doc,e))).bottom,l=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var c=Math.max(s.wrapper.clientHeight,this.doc.height),u=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>c)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=c&&(a=e.bottom),l+t.offsetWidth>u&&(l=u-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(l=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?l=0:"middle"==i&&(l=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=l+"px"),n&&(null!=(o=Er(this,{left:l,top:a,right:l+t.offsetWidth,bottom:a+t.offsetHeight})).scrollTop&&Lr(this,o.scrollTop),null!=o.scrollLeft&&Rr(this,o.scrollLeft))},triggerOnKeyDown:ti(ls),triggerOnKeyPress:ti(us),triggerOnKeyUp:cs,triggerOnMouseDown:ti(ps),execCommand:function(e){if(Qo.hasOwnProperty(e))return Qo[e].call(null,this)},triggerElectric:ti((function(e){Ms(this,e)})),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=at(this.doc,e),s=0;s<t&&!(o=Ns(this.doc,o,i,n,r)).hitSide;++s);return o},moveH:ti((function(e,t){var n=this;this.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?Ns(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()}),$)})),deleteH:ti((function(e,t){var n=this.doc;this.doc.sel.somethingSelected()?n.replaceSelection("",null,"+delete"):Yo(this,(function(r){var i=Ns(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}}))})),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var s=at(this.doc,e),a=0;a<t;++a){var l=Gn(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Rs(this,l,i,n)).hitSide)break}return s},moveV:ti((function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(s){if(o)return e<0?s.from():s.to();var a=Gn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),i.push(a.left);var l=Rs(n,a,e,t);return"page"==t&&s==r.sel.primary()&&Pr(n,qn(n,l,"div").top-a.top),l}),$),i.length)for(var s=0;s<r.sel.ranges.length;s++)r.sel.ranges[s].goalColumn=i[s]})),findWordAt:function(e){var t=qe(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var o=t.charAt(n),s=ee(o,i)?function(e){return ee(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};n>0&&s(t.charAt(n-1));)--n;for(;r<t.length&&s(t.charAt(r));)++r}return new Ci(et(e.line,n),et(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?D(this.display.cursorDiv,"CodeMirror-overwrite"):j(this.display.cursorDiv,"CodeMirror-overwrite"),pe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==M()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ti((function(e,t){Mr(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-jn(this)-this.display.barHeight,width:e.scrollWidth-jn(this)-this.display.barWidth,clientHeight:Tn(this),clientWidth:kn(this)}},scrollIntoView:ti((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:et(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Dr(e),e.curOp.scrollToPos=t}(this,e):Ir(this,e.from,e.to,e.margin)})),setSize:ti((function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Vn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){hr(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,pe(this,"refresh",this)})),operation:function(e){return Qr(this,e)},startOperation:function(){return qr(this)},endOperation:function(){return Gr(this)},refresh:ti((function(){var e=this.display.cachedTextHeight;dr(this),this.curOp.forceUpdate=!0,zn(this),Mr(this,this.doc.scrollLeft,this.doc.scrollTop),ci(this.display),(null==e||Math.abs(e-rr(this.display))>.5||this.options.lineWrapping)&&lr(this),pe(this,"refresh",this)})),swapDoc:ti((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Li(this,e),zn(this),this.display.input.reset(),Mr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},be(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}(Ss);var $s="iter insert remove copy getEditor constructor".split(" ");for(var Ws in Po.prototype)Po.prototype.hasOwnProperty(Ws)&&z($s,Ws)<0&&(Ss.prototype[Ws]=function(e){return function(){return e.apply(this.doc,arguments)}}(Po.prototype[Ws]));return be(Po),Ss.inputStyles={textarea:Us,contenteditable:Fs},Ss.defineMode=function(e){Ss.defaults.mode||"null"==e||(Ss.defaults.mode=e),Re.apply(this,arguments)},Ss.defineMIME=function(e,t){Ne[e]=t},Ss.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Ss.defineMIME("text/plain","null"),Ss.defineExtension=function(e,t){Ss.prototype[e]=t},Ss.defineDocExtension=function(e,t){Po.prototype[e]=t},Ss.fromTextArea=function(e,t){if((t=t?R(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=M();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=a.getValue()}var i;if(e.form&&(de(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(Pe){}}t.finishInit=function(n){n.save=r,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,r(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(fe(e.form,"submit",r),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display="none";var a=Ss((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a},function(e){e.off=fe,e.on=de,e.wheelEventPixels=wi,e.Doc=Po,e.splitLines=Ae,e.countColumn=F,e.findColumn=W,e.isWordChar=Q,e.Pass=B,e.signal=pe,e.Line=qt,e.changeEnd=ji,e.scrollbarModel=Ur,e.Pos=et,e.cmpPos=tt,e.modes=Le,e.mimeModes=Ne,e.resolveMode=Fe,e.getMode=Ve,e.modeExtensions=ze,e.extendMode=Be,e.copyState=He,e.startState=$e,e.innerMode=Ue,e.commands=Qo,e.keyMap=Bo,e.keyName=Go,e.isModifierKey=Wo,e.lookupKey=$o,e.normalizeKeyMap=Uo,e.StringStream=We,e.SharedTextMarker=jo,e.TextMarker=_o,e.LineWidget=xo,e.e_preventDefault=ye,e.e_stopPropagation=we,e.e_stop=Oe,e.addClass=D,e.contains=A,e.rmClass=j,e.keyNames=Ro}(Ss),Ss.version="5.57.0",Ss}()},"./node_modules/codemirror/mode/css/css.js":function(e,t,n){!function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n].toLowerCase()]=!0;return t}e.defineMode("css",(function(t,n){var r=n.inline;n.propertyKeywords||(n=e.resolveMode("text/css"));var i,o,s=t.indentUnit,a=n.tokenHooks,l=n.documentTypes||{},c=n.mediaTypes||{},u=n.mediaFeatures||{},d=n.mediaValueKeywords||{},h=n.propertyKeywords||{},f=n.nonStandardPropertyKeywords||{},p=n.fontProperties||{},g=n.counterDescriptors||{},m=n.colorKeywords||{},v=n.valueKeywords||{},b=n.allowNested,y=!0===n.supportsAtComponent;function w(e,t){return i=t,e}function x(e,t){var n=e.next();if(a[n]){var r=a[n](e,t);if(!1!==r)return r}return"@"==n?(e.eatWhile(/[\w\\\-]/),w("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?w(null,"compare"):'"'==n||"'"==n?(t.tokenize=O(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),w("atom","hash")):"!"==n?(e.match(/^\s*\w*/),w("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),w("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?w(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?w("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?w(null,n):e.match(/[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/.test(e.current().toLowerCase())&&(t.tokenize=C),w("variable callee","variable")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),w("property","word")):w(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),w("number","unit")):e.match(/^-[\w\\\-]*/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?w("variable-2","variable-definition"):w("variable-2","variable")):e.match(/^\w+-/)?w("meta","meta"):void 0}function O(e){return function(t,n){for(var r,i=!1;null!=(r=t.next());){if(r==e&&!i){")"==e&&t.backUp(1);break}i=!i&&"\\"==r}return(r==e||!i&&")"!=e)&&(n.tokenize=null),w("string","string")}}function C(e,t){return e.next(),t.tokenize=e.match(/\s*[\"\')]/,!1)?null:O(")"),w(null,"(")}function _(e,t,n){this.type=e,this.indent=t,this.prev=n}function S(e,t,n,r){return e.context=new _(n,t.indentation()+(!1===r?0:s),e.context),n}function j(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function k(e,t,n){return P[n.context.type](e,t,n)}function T(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return k(e,t,n)}function E(e){var t=e.current().toLowerCase();o=v.hasOwnProperty(t)?"atom":m.hasOwnProperty(t)?"keyword":"variable"}var P={top:function(e,t,n){if("{"==e)return S(n,t,"block");if("}"==e&&n.context.prev)return j(n);if(y&&/@component/i.test(e))return S(n,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return S(n,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return S(n,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return n.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return S(n,t,"at");if("hash"==e)o="builtin";else if("word"==e)o="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return S(n,t,"interpolation");if(":"==e)return"pseudo";if(b&&"("==e)return S(n,t,"parens")}return n.context.type},block:function(e,t,n){if("word"==e){var r=t.current().toLowerCase();return h.hasOwnProperty(r)?(o="property","maybeprop"):f.hasOwnProperty(r)?(o="string-2","maybeprop"):b?(o=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")}return"meta"==e?"block":b||"hash"!=e&&"qualifier"!=e?P.top(e,t,n):(o="error","block")},maybeprop:function(e,t,n){return":"==e?S(n,t,"prop"):k(e,t,n)},prop:function(e,t,n){if(";"==e)return j(n);if("{"==e&&b)return S(n,t,"propBlock");if("}"==e||"{"==e)return T(e,t,n);if("("==e)return S(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)E(t);else if("interpolation"==e)return S(n,t,"interpolation")}else o+=" error";return"prop"},propBlock:function(e,t,n){return"}"==e?j(n):"word"==e?(o="property","maybeprop"):n.context.type},parens:function(e,t,n){return"{"==e||"}"==e?T(e,t,n):")"==e?j(n):"("==e?S(n,t,"parens"):"interpolation"==e?S(n,t,"interpolation"):("word"==e&&E(t),"parens")},pseudo:function(e,t,n){return"meta"==e?"pseudo":"word"==e?(o="variable-3",n.context.type):k(e,t,n)},documentTypes:function(e,t,n){return"word"==e&&l.hasOwnProperty(t.current())?(o="tag",n.context.type):P.atBlock(e,t,n)},atBlock:function(e,t,n){if("("==e)return S(n,t,"atBlock_parens");if("}"==e||";"==e)return T(e,t,n);if("{"==e)return j(n)&&S(n,t,b?"block":"top");if("interpolation"==e)return S(n,t,"interpolation");if("word"==e){var r=t.current().toLowerCase();o="only"==r||"not"==r||"and"==r||"or"==r?"keyword":c.hasOwnProperty(r)?"attribute":u.hasOwnProperty(r)?"property":d.hasOwnProperty(r)?"keyword":h.hasOwnProperty(r)?"property":f.hasOwnProperty(r)?"string-2":v.hasOwnProperty(r)?"atom":m.hasOwnProperty(r)?"keyword":"error"}return n.context.type},atComponentBlock:function(e,t,n){return"}"==e?T(e,t,n):"{"==e?j(n)&&S(n,t,b?"block":"top",!1):("word"==e&&(o="error"),n.context.type)},atBlock_parens:function(e,t,n){return")"==e?j(n):"{"==e||"}"==e?T(e,t,n,2):P.atBlock(e,t,n)},restricted_atBlock_before:function(e,t,n){return"{"==e?S(n,t,"restricted_atBlock"):"word"==e&&"@counter-style"==n.stateArg?(o="variable","restricted_atBlock_before"):k(e,t,n)},restricted_atBlock:function(e,t,n){return"}"==e?(n.stateArg=null,j(n)):"word"==e?(o="@font-face"==n.stateArg&&!p.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==n.stateArg&&!g.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,n){return"word"==e?(o="variable","keyframes"):"{"==e?S(n,t,"top"):k(e,t,n)},at:function(e,t,n){return";"==e?j(n):"{"==e||"}"==e?T(e,t,n):("word"==e?o="tag":"hash"==e&&(o="builtin"),"at")},interpolation:function(e,t,n){return"}"==e?j(n):"{"==e||";"==e?T(e,t,n):("word"==e?o="variable":"variable"!=e&&"("!=e&&")"!=e&&(o="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:r?"block":"top",stateArg:null,context:new _(r?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||x)(e,t);return n&&"object"==typeof n&&(i=n[1],n=n[0]),o=n,"comment"!=i&&(t.state=P[t.state](i,e,t)),o},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),n.prev&&("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type?(")"!=r||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"atBlock"!=n.type)||(i=Math.max(0,n.indent-s)):i=(n=n.prev).indent),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:n.lineComment,fold:"brace"}}));var n=["domain","regexp","url","url-prefix"],r=t(n),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(i),s=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],a=t(s),l=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],c=t(l),u=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=t(u),h=["border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],f=t(h),p=t(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),g=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),m=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],v=t(m),b=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],y=t(b),w=n.concat(i).concat(s).concat(l).concat(u).concat(h).concat(m).concat(b);function x(e,t){for(var n,r=!1;null!=(n=e.next());){if(r&&"/"==n){t.tokenize=null;break}r="*"==n}return["comment","comment"]}e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{documentTypes:r,mediaTypes:o,mediaFeatures:a,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:f,fontProperties:p,counterDescriptors:g,colorKeywords:v,valueKeywords:y,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:a,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:f,colorKeywords:v,valueKeywords:y,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:a,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:f,colorKeywords:v,valueKeywords:y,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:o,mediaFeatures:a,propertyKeywords:d,nonStandardPropertyKeywords:f,fontProperties:p,counterDescriptors:g,colorKeywords:v,valueKeywords:y,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css",helperType:"gss"})}(n("./node_modules/codemirror/lib/codemirror.js"))},"./node_modules/codemirror/mode/htmlmixed/htmlmixed.js":function(e,t,n){!function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},n={};function r(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function i(e,t){for(var n in e)for(var r=t[n]||(t[n]=[]),i=e[n],o=i.length-1;o>=0;o--)r.unshift(i[o])}e.defineMode("htmlmixed",(function(o,s){var a=e.getMode(o,{name:"xml",htmlMode:!0,multilineTagIndentFactor:s.multilineTagIndentFactor,multilineTagIndentPastTag:s.multilineTagIndentPastTag}),l={},c=s&&s.tags,u=s&&s.scriptTypes;if(i(t,l),c&&i(c,l),u)for(var d=u.length-1;d>=0;d--)l.script.unshift(["type",u[d].matches,u[d].mode]);function h(t,i){var s,c=a.token(t,i.htmlState),u=/\btag\b/.test(c);if(u&&!/[<>\s\/]/.test(t.current())&&(s=i.htmlState.tagName&&i.htmlState.tagName.toLowerCase())&&l.hasOwnProperty(s))i.inTag=s+" ";else if(i.inTag&&u&&/>$/.test(t.current())){var d=/^([\S]+) (.*)/.exec(i.inTag);i.inTag=null;var f=">"==t.current()&&function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(!i[0]||i[1].test((o=void 0,(o=t.match(function(e){return n[e]||(n[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(i[0])))?/^\s*(.*?)\s*$/.exec(o[2])[1]:"")))return i[2]}var o}(l[d[1]],d[2]),p=e.getMode(o,f),g=r(d[1],!0),m=r(d[1],!1);i.token=function(e,t){return e.match(g,!1)?(t.token=h,t.localState=t.localMode=null,null):function(e,t,n){var r=e.current(),i=r.search(t);return i>-1?e.backUp(r.length-i):r.match(/<\/?$/)&&(e.backUp(r.length),e.match(t,!1)||e.match(r)),n}(e,m,t.localMode.token(e,t.localState))},i.localMode=p,i.localState=e.startState(p,a.indent(i.htmlState,"",""))}else i.inTag&&(i.inTag+=t.current(),t.eol()&&(i.inTag+=" "));return c}return{startState:function(){return{token:h,inTag:null,localMode:null,localState:null,htmlState:e.startState(a)}},copyState:function(t){var n;return t.localState&&(n=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:n,htmlState:e.copyState(a,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n,r){return!t.localMode||/^\s*<\//.test(n)?a.indent(t.htmlState,n,r):t.localMode.indent?t.localMode.indent(t.localState,n,r):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||a}}}}),"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}(n("./node_modules/codemirror/lib/codemirror.js"),n("./node_modules/codemirror/mode/xml/xml.js"),n("./node_modules/codemirror/mode/javascript/javascript.js"),n("./node_modules/codemirror/mode/css/css.js"))},"./node_modules/codemirror/mode/javascript/javascript.js":function(e,t,n){!function(e){"use strict";e.defineMode("javascript",(function(t,n){var r,i,o=t.indentUnit,s=n.statementIndent,a=n.jsonld,l=n.json||a,c=n.typescript,u=n.wordCharacters||/[\w$\xa1-\uffff]/,d=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("keyword d"),o=e("operator"),s={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:e("new"),delete:r,void:r,throw:r,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r}}(),h=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function p(e,t,n){return r=e,i=n,t}function g(e,t){var n,r=e.next();if('"'==r||"'"==r)return t.tokenize=(n=r,function(e,t){var r,i=!1;if(a&&"@"==e.peek()&&e.match(f))return t.tokenize=g,p("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(t.tokenize=g),p("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return p("number","number");if("."==r&&e.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return p(r);if("="==r&&e.eat(">"))return p("=>","operator");if("0"==r&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return p("number","number");if(/\d/.test(r))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),p("number","number");if("/"==r)return e.eat("*")?(t.tokenize=m,m(e,t)):e.eat("/")?(e.skipToEnd(),p("comment","comment")):Ge(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),p("regexp","string-2")):(e.eat("="),p("operator","operator",e.current()));if("`"==r)return t.tokenize=v,v(e,t);if("#"==r&&"!"==e.peek())return e.skipToEnd(),p("meta","meta");if("#"==r&&e.eatWhile(u))return p("variable","property");if("<"==r&&e.match("!--")||"-"==r&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),p("comment","comment");if(h.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),"?"==r&&e.eat(".")?p("."):p("operator","operator",e.current());if(u.test(r)){e.eatWhile(u);var i=e.current();if("."!=t.lastType){if(d.propertyIsEnumerable(i)){var o=d[i];return p(o.type,o.style,i)}if("async"==i&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return p("async","keyword",i)}return p("variable","variable",i)}}function m(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=g;break}r="*"==n}return p("comment","comment")}function v(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=g;break}r=!r&&"\\"==n}return p("quasi","string-2",e.current())}function b(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(c){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var i=0,o=!1,s=n-1;s>=0;--s){var a=e.string.charAt(s),l="([{}])".indexOf(a);if(l>=0&&l<3){if(!i){++s;break}if(0==--i){"("==a&&(o=!0);break}}else if(l>=3&&l<6)++i;else if(u.test(a))o=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(e.string.charAt(s-1)==a&&"\\"!=e.string.charAt(s-2)){s--;break}}else if(o&&!i){++s;break}}o&&!i&&(t.fatArrowAt=s)}}var y={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function x(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}var O={state:null,column:null,marked:null,cc:null};function C(){for(var e=arguments.length-1;e>=0;e--)O.cc.push(arguments[e])}function _(){return C.apply(null,arguments),!0}function S(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function j(e){var t=O.state;if(O.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var r=function e(t,n){if(n){if(n.block){var r=e(t,n.prev);return r?r==n.prev?n:new T(r,n.vars,!0):null}return S(t,n.vars)?n:new T(n.prev,new E(t,n.vars),!1)}return null}(e,t.context);if(null!=r)return void(t.context=r)}else if(!S(e,t.localVars))return void(t.localVars=new E(e,t.localVars));n.globalVars&&!S(e,t.globalVars)&&(t.globalVars=new E(e,t.globalVars))}function k(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function T(e,t,n){this.prev=e,this.vars=t,this.block=n}function E(e,t){this.name=e,this.next=t}var P=new E("this",new E("arguments",null));function A(){O.state.context=new T(O.state.context,O.state.localVars,!1),O.state.localVars=P}function M(){O.state.context=new T(O.state.context,O.state.localVars,!0),O.state.localVars=null}function D(){O.state.localVars=O.state.context.vars,O.state.context=O.state.context.prev}function I(e,t){var n=function(){var n=O.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new w(r,O.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function L(){var e=O.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function N(e){return function t(n){return n==e?_():";"==e||"}"==n||")"==n||"]"==n?C():_(t)}}function R(e,t){return"var"==e?_(I("vardef",t),be,N(";"),L):"keyword a"==e?_(I("form"),B,R,L):"keyword b"==e?_(I("form"),R,L):"keyword d"==e?O.stream.match(/^\s*$/,!1)?_():_(I("stat"),U,N(";"),L):"debugger"==e?_(N(";")):"{"==e?_(I("}"),M,oe,L,D):";"==e?_():"if"==e?("else"==O.state.lexical.info&&O.state.cc[O.state.cc.length-1]==L&&O.state.cc.pop()(),_(I("form"),B,R,L,_e)):"function"==e?_(Te):"for"==e?_(I("form"),Se,R,L):"class"==e||c&&"interface"==t?(O.marked="keyword",_(I("form","class"==e?e:t),De,L)):"variable"==e?c&&"declare"==t?(O.marked="keyword",_(R)):c&&("module"==t||"enum"==t||"type"==t)&&O.stream.match(/^\s*\w/,!1)?(O.marked="keyword","enum"==t?_(We):"type"==t?_(Pe,N("operator"),ue,N(";")):_(I("form"),ye,N("{"),I("}"),oe,L,L)):c&&"namespace"==t?(O.marked="keyword",_(I("form"),V,R,L)):c&&"abstract"==t?(O.marked="keyword",_(R)):_(I("stat"),J):"switch"==e?_(I("form"),B,N("{"),I("}","switch"),M,oe,L,L,D):"case"==e?_(V,N(":")):"default"==e?_(N(":")):"catch"==e?_(I("form"),A,F,R,L,D):"export"==e?_(I("stat"),Re,L):"import"==e?_(I("stat"),Ve,L):"async"==e?_(R):"@"==t?_(V,R):C(I("stat"),V,N(";"),L)}function F(e){if("("==e)return _(Ae,N(")"))}function V(e,t){return H(e,t,!1)}function z(e,t){return H(e,t,!0)}function B(e){return"("!=e?C():_(I(")"),U,N(")"),L)}function H(e,t,n){if(O.state.fatArrowAt==O.stream.start){var r=n?Y:K;if("("==e)return _(A,I(")"),re(Ae,")"),L,N("=>"),r,D);if("variable"==e)return C(A,ye,N("=>"),r,D)}var i=n?W:$;return y.hasOwnProperty(e)?_(i):"function"==e?_(Te,i):"class"==e||c&&"interface"==t?(O.marked="keyword",_(I("form"),Me,L)):"keyword c"==e||"async"==e?_(n?z:V):"("==e?_(I(")"),U,N(")"),L,i):"operator"==e||"spread"==e?_(n?z:V):"["==e?_(I("]"),$e,L,i):"{"==e?ie(ee,"}",null,i):"quasi"==e?C(q,i):"new"==e?_(function(e){return function(t){return"."==t?_(e?X:Z):"variable"==t&&c?_(ge,e?W:$):C(e?z:V)}}(n)):"import"==e?_(V):_()}function U(e){return e.match(/[;\}\)\],]/)?C():C(V)}function $(e,t){return","==e?_(U):W(e,t,!1)}function W(e,t,n){var r=0==n?$:W,i=0==n?V:z;return"=>"==e?_(A,n?Y:K,D):"operator"==e?/\+\+|--/.test(t)||c&&"!"==t?_(r):c&&"<"==t&&O.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?_(I(">"),re(ue,">"),L,r):"?"==t?_(V,N(":"),i):_(i):"quasi"==e?C(q,r):";"!=e?"("==e?ie(z,")","call",r):"."==e?_(Q,r):"["==e?_(I("]"),U,N("]"),L,r):c&&"as"==t?(O.marked="keyword",_(ue,r)):"regexp"==e?(O.state.lastType=O.marked="operator",O.stream.backUp(O.stream.pos-O.stream.start-1),_(i)):void 0:void 0}function q(e,t){return"quasi"!=e?C():"${"!=t.slice(t.length-2)?_(q):_(V,G)}function G(e){if("}"==e)return O.marked="string-2",O.state.tokenize=v,_(q)}function K(e){return b(O.stream,O.state),C("{"==e?R:V)}function Y(e){return b(O.stream,O.state),C("{"==e?R:z)}function Z(e,t){if("target"==t)return O.marked="keyword",_($)}function X(e,t){if("target"==t)return O.marked="keyword",_(W)}function J(e){return":"==e?_(L,R):C($,N(";"),L)}function Q(e){if("variable"==e)return O.marked="property",_()}function ee(e,t){return"async"==e?(O.marked="property",_(ee)):"variable"==e||"keyword"==O.style?(O.marked="property","get"==t||"set"==t?_(te):(c&&O.state.fatArrowAt==O.stream.start&&(n=O.stream.match(/^\s*:\s*/,!1))&&(O.state.fatArrowAt=O.stream.pos+n[0].length),_(ne))):"number"==e||"string"==e?(O.marked=a?"property":O.style+" property",_(ne)):"jsonld-keyword"==e?_(ne):c&&k(t)?(O.marked="keyword",_(ee)):"["==e?_(V,se,N("]"),ne):"spread"==e?_(z,ne):"*"==t?(O.marked="keyword",_(ee)):":"==e?C(ne):void 0;var n}function te(e){return"variable"!=e?C(ne):(O.marked="property",_(Te))}function ne(e){return":"==e?_(z):"("==e?C(Te):void 0}function re(e,t,n){function r(i,o){if(n?n.indexOf(i)>-1:","==i){var s=O.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),_((function(n,r){return n==t||r==t?C():C(e)}),r)}return i==t||o==t?_():n&&n.indexOf(";")>-1?C(e):_(N(t))}return function(n,i){return n==t||i==t?_():C(e,r)}}function ie(e,t,n){for(var r=3;r<arguments.length;r++)O.cc.push(arguments[r]);return _(I(t,n),re(e,t),L)}function oe(e){return"}"==e?_():C(R,oe)}function se(e,t){if(c){if(":"==e)return _(ue);if("?"==t)return _(se)}}function ae(e,t){if(c&&(":"==e||"in"==t))return _(ue)}function le(e){if(c&&":"==e)return O.stream.match(/^\s*\w+\s+is\b/,!1)?_(V,ce,ue):_(ue)}function ce(e,t){if("is"==t)return O.marked="keyword",_()}function ue(e,t){return"keyof"==t||"typeof"==t||"infer"==t?(O.marked="keyword",_("typeof"==t?z:ue)):"variable"==e||"void"==t?(O.marked="type",_(pe)):"|"==t||"&"==t?_(ue):"string"==e||"number"==e||"atom"==e?_(pe):"["==e?_(I("]"),re(ue,"]",","),L,pe):"{"==e?_(I("}"),re(he,"}",",;"),L,pe):"("==e?_(re(fe,")"),de,pe):"<"==e?_(re(ue,">"),ue):void 0}function de(e){if("=>"==e)return _(ue)}function he(e,t){return"variable"==e||"keyword"==O.style?(O.marked="property",_(he)):"?"==t||"number"==e||"string"==e?_(he):":"==e?_(ue):"["==e?_(N("variable"),ae,N("]"),he):"("==e?C(Ee,he):void 0}function fe(e,t){return"variable"==e&&O.stream.match(/^\s*[?:]/,!1)||"?"==t?_(fe):":"==e?_(ue):"spread"==e?_(fe):C(ue)}function pe(e,t){return"<"==t?_(I(">"),re(ue,">"),L,pe):"|"==t||"."==e||"&"==t?_(ue):"["==e?_(ue,N("]"),pe):"extends"==t||"implements"==t?(O.marked="keyword",_(ue)):"?"==t?_(ue,N(":"),ue):void 0}function ge(e,t){if("<"==t)return _(I(">"),re(ue,">"),L,pe)}function me(){return C(ue,ve)}function ve(e,t){if("="==t)return _(ue)}function be(e,t){return"enum"==t?(O.marked="keyword",_(We)):C(ye,se,Oe,Ce)}function ye(e,t){return c&&k(t)?(O.marked="keyword",_(ye)):"variable"==e?(j(t),_()):"spread"==e?_(ye):"["==e?ie(xe,"]"):"{"==e?ie(we,"}"):void 0}function we(e,t){return"variable"!=e||O.stream.match(/^\s*:/,!1)?("variable"==e&&(O.marked="property"),"spread"==e?_(ye):"}"==e?C():"["==e?_(V,N("]"),N(":"),we):_(N(":"),ye,Oe)):(j(t),_(Oe))}function xe(){return C(ye,Oe)}function Oe(e,t){if("="==t)return _(z)}function Ce(e){if(","==e)return _(be)}function _e(e,t){if("keyword b"==e&&"else"==t)return _(I("form","else"),R,L)}function Se(e,t){return"await"==t?_(Se):"("==e?_(I(")"),je,L):void 0}function je(e){return"var"==e?_(be,ke):"variable"==e?_(ke):C(ke)}function ke(e,t){return")"==e?_():";"==e?_(ke):"in"==t||"of"==t?(O.marked="keyword",_(V,ke)):C(V,ke)}function Te(e,t){return"*"==t?(O.marked="keyword",_(Te)):"variable"==e?(j(t),_(Te)):"("==e?_(A,I(")"),re(Ae,")"),L,le,R,D):c&&"<"==t?_(I(">"),re(me,">"),L,Te):void 0}function Ee(e,t){return"*"==t?(O.marked="keyword",_(Ee)):"variable"==e?(j(t),_(Ee)):"("==e?_(A,I(")"),re(Ae,")"),L,le,D):c&&"<"==t?_(I(">"),re(me,">"),L,Ee):void 0}function Pe(e,t){return"keyword"==e||"variable"==e?(O.marked="type",_(Pe)):"<"==t?_(I(">"),re(me,">"),L):void 0}function Ae(e,t){return"@"==t&&_(V,Ae),"spread"==e?_(Ae):c&&k(t)?(O.marked="keyword",_(Ae)):c&&"this"==e?_(se,Oe):C(ye,se,Oe)}function Me(e,t){return"variable"==e?De(e,t):Ie(e,t)}function De(e,t){if("variable"==e)return j(t),_(Ie)}function Ie(e,t){return"<"==t?_(I(">"),re(me,">"),L,Ie):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(O.marked="keyword"),_(c?ue:V,Ie)):"{"==e?_(I("}"),Le,L):void 0}function Le(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&k(t))&&O.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(O.marked="keyword",_(Le)):"variable"==e||"keyword"==O.style?(O.marked="property",_(Ne,Le)):"number"==e||"string"==e?_(Ne,Le):"["==e?_(V,se,N("]"),Ne,Le):"*"==t?(O.marked="keyword",_(Le)):c&&"("==e?C(Ee,Le):";"==e||","==e?_(Le):"}"==e?_():"@"==t?_(V,Le):void 0}function Ne(e,t){if("?"==t)return _(Ne);if(":"==e)return _(ue,Oe);if("="==t)return _(z);var n=O.state.lexical.prev;return C(n&&"interface"==n.info?Ee:Te)}function Re(e,t){return"*"==t?(O.marked="keyword",_(Ue,N(";"))):"default"==t?(O.marked="keyword",_(V,N(";"))):"{"==e?_(re(Fe,"}"),Ue,N(";")):C(R)}function Fe(e,t){return"as"==t?(O.marked="keyword",_(N("variable"))):"variable"==e?C(z,Fe):void 0}function Ve(e){return"string"==e?_():"("==e?C(V):C(ze,Be,Ue)}function ze(e,t){return"{"==e?ie(ze,"}"):("variable"==e&&j(t),"*"==t&&(O.marked="keyword"),_(He))}function Be(e){if(","==e)return _(ze,Be)}function He(e,t){if("as"==t)return O.marked="keyword",_(ze)}function Ue(e,t){if("from"==t)return O.marked="keyword",_(V)}function $e(e){return"]"==e?_():C(re(z,"]"))}function We(){return C(I("form"),ye,N("{"),I("}"),re(qe,"}"),L,L)}function qe(){return C(ye,Oe)}function Ge(e,t,n){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return D.lex=!0,L.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new w((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new T(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),b(e,t)),t.tokenize!=m&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==r?n:(t.lastType="operator"!=r||"++"!=i&&"--"!=i?r:"incdec",function(e,t,n,r,i){var o=e.cc;for(O.state=e,O.stream=i,O.marked=null,O.cc=o,O.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():l?V:R)(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return O.marked?O.marked:"variable"==n&&x(e,r)?"variable-2":t}}(t,n,r,i,e))},indent:function(t,r){if(t.tokenize==m)return e.Pass;if(t.tokenize!=g)return 0;var i,a=r&&r.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(r))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==L)l=l.prev;else if(u!=_e)break}for(;("stat"==l.type||"form"==l.type)&&("}"==a||(i=t.cc[t.cc.length-1])&&(i==$||i==W)&&!/^[,\.=+\-*:?[\(]/.test(r));)l=l.prev;s&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var d=l.type,f=a==d;return"vardef"==d?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==d&&"{"==a?l.indented:"form"==d?l.indented+o:"stat"==d?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||h.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,r)?s||o:0):"switch"!=l.info||f||0==n.doubleIndentSwitch?l.align?l.column+(f?0:1):l.indented+(f?0:o):l.indented+(/^(?:case|default)\b/.test(r)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l,expressionAllowed:Ge,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=V&&t!=z||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n("./node_modules/codemirror/lib/codemirror.js"))},"./node_modules/codemirror/mode/xml/xml.js":function(e,t,n){!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(r,i){var o,s,a=r.indentUnit,l={},c=i.htmlMode?t:n;for(var u in c)l[u]=c[u];for(var u in i)l[u]=i[u];function d(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();return"<"==r?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(f("atom","]]>")):null:e.match("--")?n(f("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(function e(t){return function(n,r){for(var i;null!=(i=n.next());){if("<"==i)return r.tokenize=e(t+1),r.tokenize(n,r);if(">"==i){if(1==t){r.tokenize=d;break}return r.tokenize=e(t-1),r.tokenize(n,r)}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=f("meta","?>"),"meta"):(o=e.eat("/")?"closeTag":"openTag",t.tokenize=h,"tag bracket"):"&"==r?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function h(e,t){var n,r,i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=d,o=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return o="equals",null;if("<"==i){t.tokenize=d,t.state=v,t.tagName=t.tagStart=null;var s=t.tokenize(e,t);return s?s+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=(n=i,(r=function(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=h;break}return"string"}).isInAttribute=!0,r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function f(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=d;break}n.next()}return e}}function p(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function g(e){e.context&&(e.context=e.context.prev)}function m(e,t){for(var n;;){if(!e.context)return;if(!l.contextGrabbers.hasOwnProperty(n=e.context.tagName)||!l.contextGrabbers[n].hasOwnProperty(t))return;g(e)}}function v(e,t,n){return"openTag"==e?(n.tagStart=t.column(),b):"closeTag"==e?y:v}function b(e,t,n){return"word"==e?(n.tagName=t.current(),s="tag",O):l.allowMissingTagName&&"endTag"==e?(s="tag bracket",O(e,0,n)):(s="error",b)}function y(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&l.implicitlyClosed.hasOwnProperty(n.context.tagName)&&g(n),n.context&&n.context.tagName==r||!1===l.matchClosing?(s="tag",w):(s="tag error",x)}return l.allowMissingTagName&&"endTag"==e?(s="tag bracket",w(e,0,n)):(s="error",x)}function w(e,t,n){return"endTag"!=e?(s="error",w):(g(n),v)}function x(e,t,n){return s="error",w(e,0,n)}function O(e,t,n){if("word"==e)return s="attribute",C;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(r)?m(n,r):(m(n,r),n.context=new p(n,r,i==n.indented)),v}return s="error",O}function C(e,t,n){return"equals"==e?_:(l.allowMissing||(s="error"),O(e,0,n))}function _(e,t,n){return"string"==e?S:"word"==e&&l.allowUnquoted?(s="string",O):(s="error",O(e,0,n))}function S(e,t,n){return"string"==e?S:O(e,0,n)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:v,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var n=t.tokenize(e,t);return(n||o)&&"comment"!=n&&(s=null,t.state=t.state(o||n,e,t),s&&(n="error"==s?n+" error":s)),n},indent:function(t,n,r){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+a;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=h&&t.tokenize!=d)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==l.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+a*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var o=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(o&&o[1])for(;i;){if(i.tagName==o[2]){i=i.prev;break}if(!l.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(o)for(;i;){var s=l.contextGrabbers[i.tagName];if(!s||!s.hasOwnProperty(o[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+a:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(e){e.state==_&&(e.state=O)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)n.tagName&&t.push(n.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}(n("./node_modules/codemirror/lib/codemirror.js"))},"./node_modules/keymaster/keymaster.js":function(e,t,n){!function(t){var n,r={},i={16:!1,18:!1,17:!1,91:!1},o="all",s={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(e){return a[e]||e.toUpperCase().charCodeAt(0)},c=[];for(n=1;n<20;n++)a["f"+n]=111+n;function u(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function d(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var h={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function f(e){for(n in i)i[n]=e[h[n]]}function p(e,t,n){var i,o;i=m(e),void 0===n&&(n=t,t="all");for(var s=0;s<i.length;s++)o=[],(e=i[s].split("+")).length>1&&(o=v(e),e=[e[e.length-1]]),(e=l(e=e[0]))in r||(r[e]=[]),r[e].push({shortcut:i[s],scope:t,method:n,key:i[s],mods:o})}for(n in s)p[n]=!1;function g(){return o||"all"}function m(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function v(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=s[t[n]];return t}function b(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}b(document,"keydown",(function(e){!function(e){var t,n,o,a,l,d;if(-1==u(c,t=e.keyCode)&&c.push(t),93!=t&&224!=t||(t=91),t in i)for(o in i[t]=!0,s)s[o]==t&&(p[o]=!0);else if(f(e),p.filter.call(this,e)&&t in r)for(d=g(),a=0;a<r[t].length;a++)if((n=r[t][a]).scope==d||"all"==n.scope){for(o in l=n.mods.length>0,i)(!i[o]&&u(n.mods,+o)>-1||i[o]&&-1==u(n.mods,+o))&&(l=!1);(0!=n.mods.length||i[16]||i[18]||i[17]||i[91])&&!l||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),b(document,"keyup",(function(e){var t,n=e.keyCode,r=u(c,n);if(r>=0&&c.splice(r,1),93!=n&&224!=n||(n=91),n in i)for(t in i[n]=!1,s)s[t]==n&&(p[t]=!1)})),b(window,"focus",(function(){for(n in i)i[n]=!1;for(n in s)p[n]=!1}));var y=t.key;t.key=p,t.key.setScope=function(e){o=e||"all"},t.key.getScope=g,t.key.deleteScope=function(e){var t,n,i;for(t in r)for(n=r[t],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=l(e)),-1!=u(c,e)},t.key.getPressedKeyCodes=function(){return c.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=y,e},t.key.unbind=function(e,t){var n,i,o,s,a,c=[];for(n=m(e),s=0;s<n.length;s++){if((i=n[s].split("+")).length>1&&(c=v(i),e=i[i.length-1]),e=l(e),void 0===t&&(t=g()),!r[e])return;for(o=0;o<r[e].length;o++)(a=r[e][o]).scope===t&&d(a.mods,c)&&(r[e][o]={})}},e.exports=p}(this)},"./node_modules/process/browser.js":function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=a(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/promise-polyfill/src/finally.js":function(e,t,n){"use strict";n.r(t),t.default=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},"./node_modules/promise-polyfill/src/index.js":function(e,t,n){"use strict";n.r(t),(function(e){var r=n("./node_modules/promise-polyfill/src/finally.js"),i=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function s(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function l(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void u(t.promise,i)}c(t.promise,r)}else(1===e._state?c:u)(t.promise,e._value)}))):e._deferreds.push(t)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void f((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(o){u(e,o)}var r,i}function u(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)l(e,e._deferreds[t]);e._deferreds=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,c(t,e))}),(function(e){n||(n=!0,u(t,e))}))}catch(r){if(n)return;n=!0,u(t,r)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(s);return l(this,new h(e,t,n)),n},a.prototype.finally=r.default,a.all=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function s(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(t){s(e,t)}),n)}r[e]=o,0==--i&&t(r)}catch(l){n(l)}}for(var a=0;a<r.length;a++)s(a,r[a])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)a.resolve(e[r]).then(t,n)}))},a._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){i(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.default=a}).call(this,n("./node_modules/timers-browserify/main.js").setImmediate)},"./node_modules/setimmediate/setImmediate.js":function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,s,a,l=1,c={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[l]=i,r(l),l++},h.clearImmediate=f}function f(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/timers-browserify/main.js":function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("./node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/underscore/modules/_baseCreate.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/isObject.js"),i=n("./node_modules/underscore/modules/_setup.js");function o(e){if(!Object(r.default)(e))return{};if(i.nativeCreate)return Object(i.nativeCreate)(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}},"./node_modules/underscore/modules/_baseIteratee.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var r=n("./node_modules/underscore/modules/identity.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/isObject.js"),s=n("./node_modules/underscore/modules/isArray.js"),a=n("./node_modules/underscore/modules/matcher.js"),l=n("./node_modules/underscore/modules/property.js"),c=n("./node_modules/underscore/modules/_optimizeCb.js");function u(e,t,n){return null==e?r.default:Object(i.default)(e)?Object(c.default)(e,t,n):Object(o.default)(e)&&!Object(s.default)(e)?Object(a.default)(e):Object(l.default)(e)}},"./node_modules/underscore/modules/_cb.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/_baseIteratee.js"),o=n("./node_modules/underscore/modules/iteratee.js");function s(e,t,n){return r.default.iteratee!==o.default?r.default.iteratee(e,t):Object(i.default)(e,t,n)}},"./node_modules/underscore/modules/_chainResult.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/underscore.js");function i(e,t){return e._chain?Object(r.default)(t).chain():t}},"./node_modules/underscore/modules/_collectNonEnumProps.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/_has.js");function s(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=r.nonEnumerableProps.length,s=e.constructor,a=Object(i.default)(s)&&s.prototype||r.ObjProto,l="constructor";for(Object(o.default)(e,l)&&!t.contains(l)&&t.push(l);n--;)(l=r.nonEnumerableProps[n])in e&&e[l]!==a[l]&&!t.contains(l)&&t.push(l)}},"./node_modules/underscore/modules/_createAssigner.js":function(e,t,n){"use strict";function r(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,l=0;l<a;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/_createEscaper.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/keys.js");function i(e){var t=function(t){return e[t]},n="(?:"+Object(r.default)(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return i.test(e=null==e?"":""+e)?e.replace(o,t):e}}},"./node_modules/underscore/modules/_createIndexFinder.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_getLength.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/isNaN.js");function s(e,t,n){return function(s,a,l){var c=0,u=Object(r.default)(s);if("number"==typeof l)e>0?c=l>=0?l:Math.max(l+u,c):u=l>=0?Math.min(l+1,u):l+u+1;else if(n&&l&&u)return s[l=n(s,a)]===a?l:-1;if(a!=a)return(l=t(i.slice.call(s,c,u),o.default))>=0?l+c:-1;for(l=e>0?c:u-1;l>=0&&l<u;l+=e)if(s[l]===a)return l;return-1}}},"./node_modules/underscore/modules/_createPredicateIndexFinder.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_getLength.js");function o(e){return function(t,n,o){n=Object(r.default)(n,o);for(var s=Object(i.default)(t),a=e>0?0:s-1;a>=0&&a<s;a+=e)if(n(t[a],a,t))return a;return-1}}},"./node_modules/underscore/modules/_createReduce.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/keys.js"),o=n("./node_modules/underscore/modules/_optimizeCb.js");function s(e){var t=function(t,n,o,s){var a=!Object(r.default)(t)&&Object(i.default)(t),l=(a||t).length,c=e>0?0:l-1;for(s||(o=t[a?a[c]:c],c+=e);c>=0&&c<l;c+=e){var u=a?a[c]:c;o=n(o,t[u],u,t)}return o};return function(e,n,r,i){var s=arguments.length>=3;return t(e,Object(o.default)(n,i,4),r,s)}}},"./node_modules/underscore/modules/_createSizePropertyCheck.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_setup.js");function i(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=r.MAX_ARRAY_INDEX}}},"./node_modules/underscore/modules/_deepGet.js":function(e,t,n){"use strict";function r(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/_escapeMap.js":function(e,t,n){"use strict";n.r(t),t.default={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}},"./node_modules/underscore/modules/_executeBound.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_baseCreate.js"),i=n("./node_modules/underscore/modules/isObject.js");function o(e,t,n,o,s){if(!(o instanceof t))return e.apply(n,s);var a=Object(r.default)(e.prototype),l=e.apply(a,s);return Object(i.default)(l)?l:a}},"./node_modules/underscore/modules/_flatten.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n("./node_modules/underscore/modules/_getLength.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/isArray.js"),s=n("./node_modules/underscore/modules/isArguments.js");function a(e,t,n,l){if(l=l||[],t||0===t){if(t<=0)return l.concat(e)}else t=1/0;for(var c=l.length,u=0,d=Object(r.default)(e);u<d;u++){var h=e[u];if(Object(i.default)(h)&&(Object(o.default)(h)||Object(s.default)(h)))if(t>1)a(h,t-1,n,l),c=l.length;else for(var f=0,p=h.length;f<p;)l[c++]=h[f++];else n||(l[c++]=h)}return l}},"./node_modules/underscore/modules/_getByteLength.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_shallowProperty.js");t.default=Object(r.default)("byteLength")},"./node_modules/underscore/modules/_getLength.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_shallowProperty.js");t.default=Object(r.default)("length")},"./node_modules/underscore/modules/_group.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/each.js");function o(e,t){return function(n,o,s){var a=t?[[],[]]:{};return o=Object(r.default)(o,s),Object(i.default)(n,(function(t,r){var i=o(t,r,n);e(a,t,i)})),a}}},"./node_modules/underscore/modules/_has.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_setup.js");function i(e,t){return null!=e&&r.hasOwnProperty.call(e,t)}},"./node_modules/underscore/modules/_isArrayLike.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createSizePropertyCheck.js"),i=n("./node_modules/underscore/modules/_getLength.js");t.default=Object(r.default)(i.default)},"./node_modules/underscore/modules/_isBufferLike.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createSizePropertyCheck.js"),i=n("./node_modules/underscore/modules/_getByteLength.js");t.default=Object(r.default)(i.default)},"./node_modules/underscore/modules/_keyInObj.js":function(e,t,n){"use strict";function r(e,t,n){return t in n}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/_optimizeCb.js":function(e,t,n){"use strict";function r(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/_setup.js":function(e,t,n){"use strict";n.r(t),(function(e){n.d(t,"VERSION",(function(){return r})),n.d(t,"root",(function(){return i})),n.d(t,"ArrayProto",(function(){return o})),n.d(t,"ObjProto",(function(){return s})),n.d(t,"SymbolProto",(function(){return a})),n.d(t,"push",(function(){return l})),n.d(t,"slice",(function(){return c})),n.d(t,"toString",(function(){return u})),n.d(t,"hasOwnProperty",(function(){return d})),n.d(t,"supportsArrayBuffer",(function(){return h})),n.d(t,"nativeIsArray",(function(){return f})),n.d(t,"nativeKeys",(function(){return p})),n.d(t,"nativeCreate",(function(){return g})),n.d(t,"nativeIsView",(function(){return m})),n.d(t,"_isNaN",(function(){return v})),n.d(t,"_isFinite",(function(){return b})),n.d(t,"hasEnumBug",(function(){return y})),n.d(t,"nonEnumerableProps",(function(){return w})),n.d(t,"MAX_ARRAY_INDEX",(function(){return x}));var r="1.11.0",i="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||Function("return this")()||{},o=Array.prototype,s=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,l=o.push,c=o.slice,u=s.toString,d=s.hasOwnProperty,h="undefined"!=typeof ArrayBuffer,f=Array.isArray,p=Object.keys,g=Object.create,m=h&&ArrayBuffer.isView,v=isNaN,b=isFinite,y=!{toString:null}.propertyIsEnumerable("toString"),w=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],x=Math.pow(2,53)-1}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/underscore/modules/_shallowProperty.js":function(e,t,n){"use strict";function r(e){return function(t){return null==t?void 0:t[e]}}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/_tagTester.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_setup.js");function i(e){return function(t){return r.toString.call(t)==="[object "+e+"]"}}},"./node_modules/underscore/modules/_unescapeMap.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/invert.js"),i=n("./node_modules/underscore/modules/_escapeMap.js");t.default=Object(r.default)(i.default)},"./node_modules/underscore/modules/after.js":function(e,t,n){"use strict";function r(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/allKeys.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/isObject.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/_collectNonEnumProps.js");function s(e){if(!Object(r.default)(e))return[];var t=[];for(var n in e)t.push(n);return i.hasEnumBug&&Object(o.default)(e,t),t}},"./node_modules/underscore/modules/before.js":function(e,t,n){"use strict";function r(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/bind.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/_executeBound.js");t.default=Object(r.default)((function(e,t,n){if(!Object(i.default)(e))throw new TypeError("Bind must be called on a function");var s=Object(r.default)((function(r){return Object(o.default)(e,s,t,this,n.concat(r))}));return s}))},"./node_modules/underscore/modules/bindAll.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/_flatten.js"),o=n("./node_modules/underscore/modules/bind.js");t.default=Object(r.default)((function(e,t){var n=(t=Object(i.default)(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=Object(o.default)(e[r],e)}return e}))},"./node_modules/underscore/modules/chain.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/underscore.js");function i(e){var t=Object(r.default)(e);return t._chain=!0,t}},"./node_modules/underscore/modules/chunk.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_setup.js");function i(e,t){if(null==t||t<1)return[];for(var n=[],i=0,o=e.length;i<o;)n.push(r.slice.call(e,i,i+=t));return n}},"./node_modules/underscore/modules/clone.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/isObject.js"),i=n("./node_modules/underscore/modules/isArray.js"),o=n("./node_modules/underscore/modules/extend.js");function s(e){return Object(r.default)(e)?Object(i.default)(e)?e.slice():Object(o.default)({},e):e}},"./node_modules/underscore/modules/compact.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/filter.js");function i(e){return Object(r.default)(e,Boolean)}},"./node_modules/underscore/modules/compose.js":function(e,t,n){"use strict";function r(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/constant.js":function(e,t,n){"use strict";function r(e){return function(){return e}}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/contains.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/values.js"),o=n("./node_modules/underscore/modules/indexOf.js");function s(e,t,n,s){return Object(r.default)(e)||(e=Object(i.default)(e)),("number"!=typeof n||s)&&(n=0),Object(o.default)(e,t,n)>=0}},"./node_modules/underscore/modules/countBy.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_group.js"),i=n("./node_modules/underscore/modules/_has.js");t.default=Object(r.default)((function(e,t,n){Object(i.default)(e,n)?e[n]++:e[n]=1}))},"./node_modules/underscore/modules/create.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_baseCreate.js"),i=n("./node_modules/underscore/modules/extendOwn.js");function o(e,t){var n=Object(r.default)(e);return t&&Object(i.default)(n,t),n}},"./node_modules/underscore/modules/debounce.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/delay.js");function o(e,t,n){var o,s,a=function(t,n){o=null,n&&(s=e.apply(t,n))},l=Object(r.default)((function(r){if(o&&clearTimeout(o),n){var l=!o;o=setTimeout(a,t),l&&(s=e.apply(this,r))}else o=Object(i.default)(a,t,this,r);return s}));return l.cancel=function(){clearTimeout(o),o=null},l}},"./node_modules/underscore/modules/defaults.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createAssigner.js"),i=n("./node_modules/underscore/modules/allKeys.js");t.default=Object(r.default)(i.default,!0)},"./node_modules/underscore/modules/defer.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/partial.js"),i=n("./node_modules/underscore/modules/delay.js"),o=n("./node_modules/underscore/modules/underscore.js");t.default=Object(r.default)(i.default,o.default,1)},"./node_modules/underscore/modules/delay.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js");t.default=Object(r.default)((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)}))},"./node_modules/underscore/modules/difference.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/_flatten.js"),o=n("./node_modules/underscore/modules/filter.js"),s=n("./node_modules/underscore/modules/contains.js");t.default=Object(r.default)((function(e,t){return t=Object(i.default)(t,!0,!0),Object(o.default)(e,(function(e){return!Object(s.default)(t,e)}))}))},"./node_modules/underscore/modules/each.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_optimizeCb.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/keys.js");function s(e,t,n){var s,a;if(t=Object(r.default)(t,n),Object(i.default)(e))for(s=0,a=e.length;s<a;s++)t(e[s],s,e);else{var l=Object(o.default)(e);for(s=0,a=l.length;s<a;s++)t(e[l[s]],l[s],e)}return e}},"./node_modules/underscore/modules/escape.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createEscaper.js"),i=n("./node_modules/underscore/modules/_escapeMap.js");t.default=Object(r.default)(i.default)},"./node_modules/underscore/modules/every.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/keys.js");function s(e,t,n){t=Object(r.default)(t,n);for(var s=!Object(i.default)(e)&&Object(o.default)(e),a=(s||e).length,l=0;l<a;l++){var c=s?s[l]:l;if(!t(e[c],c,e))return!1}return!0}},"./node_modules/underscore/modules/extend.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createAssigner.js"),i=n("./node_modules/underscore/modules/allKeys.js");t.default=Object(r.default)(i.default)},"./node_modules/underscore/modules/extendOwn.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createAssigner.js"),i=n("./node_modules/underscore/modules/keys.js");t.default=Object(r.default)(i.default)},"./node_modules/underscore/modules/filter.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/each.js");function o(e,t,n){var o=[];return t=Object(r.default)(t,n),Object(i.default)(e,(function(e,n,r){t(e,n,r)&&o.push(e)})),o}},"./node_modules/underscore/modules/find.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/findIndex.js"),o=n("./node_modules/underscore/modules/findKey.js");function s(e,t,n){var s=(Object(r.default)(e)?i.default:o.default)(e,t,n);if(void 0!==s&&-1!==s)return e[s]}},"./node_modules/underscore/modules/findIndex.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createPredicateIndexFinder.js");t.default=Object(r.default)(1)},"./node_modules/underscore/modules/findKey.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/keys.js");function o(e,t,n){t=Object(r.default)(t,n);for(var o,s=Object(i.default)(e),a=0,l=s.length;a<l;a++)if(t(e[o=s[a]],o,e))return o}},"./node_modules/underscore/modules/findLastIndex.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createPredicateIndexFinder.js");t.default=Object(r.default)(-1)},"./node_modules/underscore/modules/findWhere.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/find.js"),i=n("./node_modules/underscore/modules/matcher.js");function o(e,t){return Object(r.default)(e,Object(i.default)(t))}},"./node_modules/underscore/modules/first.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/initial.js");function i(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:Object(r.default)(e,e.length-t)}},"./node_modules/underscore/modules/flatten.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_flatten.js");function i(e,t){return Object(r.default)(e,t,!1)}},"./node_modules/underscore/modules/functions.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/isFunction.js");function i(e){var t=[];for(var n in e)Object(r.default)(e[n])&&t.push(n);return t.sort()}},"./node_modules/underscore/modules/groupBy.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_group.js"),i=n("./node_modules/underscore/modules/_has.js");t.default=Object(r.default)((function(e,t,n){Object(i.default)(e,n)?e[n].push(t):e[n]=[t]}))},"./node_modules/underscore/modules/has.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/isArray.js"),i=n("./node_modules/underscore/modules/_has.js"),o=n("./node_modules/underscore/modules/_setup.js");function s(e,t){if(!Object(r.default)(t))return Object(i.default)(e,t);for(var n=t.length,s=0;s<n;s++){var a=t[s];if(null==e||!o.hasOwnProperty.call(e,a))return!1;e=e[a]}return!!n}},"./node_modules/underscore/modules/identity.js":function(e,t,n){"use strict";function r(e){return e}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/index-all.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-default.js");n.d(t,"default",(function(){return r.default}));var i=n("./node_modules/underscore/modules/index.js");n.d(t,"VERSION",(function(){return i.VERSION})),n.d(t,"restArguments",(function(){return i.restArguments})),n.d(t,"isObject",(function(){return i.isObject})),n.d(t,"isNull",(function(){return i.isNull})),n.d(t,"isUndefined",(function(){return i.isUndefined})),n.d(t,"isBoolean",(function(){return i.isBoolean})),n.d(t,"isElement",(function(){return i.isElement})),n.d(t,"isString",(function(){return i.isString})),n.d(t,"isNumber",(function(){return i.isNumber})),n.d(t,"isDate",(function(){return i.isDate})),n.d(t,"isRegExp",(function(){return i.isRegExp})),n.d(t,"isError",(function(){return i.isError})),n.d(t,"isSymbol",(function(){return i.isSymbol})),n.d(t,"isMap",(function(){return i.isMap})),n.d(t,"isWeakMap",(function(){return i.isWeakMap})),n.d(t,"isSet",(function(){return i.isSet})),n.d(t,"isWeakSet",(function(){return i.isWeakSet})),n.d(t,"isArrayBuffer",(function(){return i.isArrayBuffer})),n.d(t,"isDataView",(function(){return i.isDataView})),n.d(t,"isArray",(function(){return i.isArray})),n.d(t,"isFunction",(function(){return i.isFunction})),n.d(t,"isArguments",(function(){return i.isArguments})),n.d(t,"isFinite",(function(){return i.isFinite})),n.d(t,"isNaN",(function(){return i.isNaN})),n.d(t,"isTypedArray",(function(){return i.isTypedArray})),n.d(t,"isEmpty",(function(){return i.isEmpty})),n.d(t,"isMatch",(function(){return i.isMatch})),n.d(t,"isEqual",(function(){return i.isEqual})),n.d(t,"keys",(function(){return i.keys})),n.d(t,"allKeys",(function(){return i.allKeys})),n.d(t,"values",(function(){return i.values})),n.d(t,"pairs",(function(){return i.pairs})),n.d(t,"invert",(function(){return i.invert})),n.d(t,"functions",(function(){return i.functions})),n.d(t,"methods",(function(){return i.methods})),n.d(t,"extend",(function(){return i.extend})),n.d(t,"extendOwn",(function(){return i.extendOwn})),n.d(t,"assign",(function(){return i.assign})),n.d(t,"defaults",(function(){return i.defaults})),n.d(t,"create",(function(){return i.create})),n.d(t,"clone",(function(){return i.clone})),n.d(t,"tap",(function(){return i.tap})),n.d(t,"has",(function(){return i.has})),n.d(t,"mapObject",(function(){return i.mapObject})),n.d(t,"identity",(function(){return i.identity})),n.d(t,"constant",(function(){return i.constant})),n.d(t,"noop",(function(){return i.noop})),n.d(t,"property",(function(){return i.property})),n.d(t,"propertyOf",(function(){return i.propertyOf})),n.d(t,"matcher",(function(){return i.matcher})),n.d(t,"matches",(function(){return i.matches})),n.d(t,"times",(function(){return i.times})),n.d(t,"random",(function(){return i.random})),n.d(t,"now",(function(){return i.now})),n.d(t,"escape",(function(){return i.escape})),n.d(t,"unescape",(function(){return i.unescape})),n.d(t,"templateSettings",(function(){return i.templateSettings})),n.d(t,"template",(function(){return i.template})),n.d(t,"result",(function(){return i.result})),n.d(t,"uniqueId",(function(){return i.uniqueId})),n.d(t,"chain",(function(){return i.chain})),n.d(t,"iteratee",(function(){return i.iteratee})),n.d(t,"partial",(function(){return i.partial})),n.d(t,"bind",(function(){return i.bind})),n.d(t,"bindAll",(function(){return i.bindAll})),n.d(t,"memoize",(function(){return i.memoize})),n.d(t,"delay",(function(){return i.delay})),n.d(t,"defer",(function(){return i.defer})),n.d(t,"throttle",(function(){return i.throttle})),n.d(t,"debounce",(function(){return i.debounce})),n.d(t,"wrap",(function(){return i.wrap})),n.d(t,"negate",(function(){return i.negate})),n.d(t,"compose",(function(){return i.compose})),n.d(t,"after",(function(){return i.after})),n.d(t,"before",(function(){return i.before})),n.d(t,"once",(function(){return i.once})),n.d(t,"findKey",(function(){return i.findKey})),n.d(t,"findIndex",(function(){return i.findIndex})),n.d(t,"findLastIndex",(function(){return i.findLastIndex})),n.d(t,"sortedIndex",(function(){return i.sortedIndex})),n.d(t,"indexOf",(function(){return i.indexOf})),n.d(t,"lastIndexOf",(function(){return i.lastIndexOf})),n.d(t,"find",(function(){return i.find})),n.d(t,"detect",(function(){return i.detect})),n.d(t,"findWhere",(function(){return i.findWhere})),n.d(t,"each",(function(){return i.each})),n.d(t,"forEach",(function(){return i.forEach})),n.d(t,"map",(function(){return i.map})),n.d(t,"collect",(function(){return i.collect})),n.d(t,"reduce",(function(){return i.reduce})),n.d(t,"foldl",(function(){return i.foldl})),n.d(t,"inject",(function(){return i.inject})),n.d(t,"reduceRight",(function(){return i.reduceRight})),n.d(t,"foldr",(function(){return i.foldr})),n.d(t,"filter",(function(){return i.filter})),n.d(t,"select",(function(){return i.select})),n.d(t,"reject",(function(){return i.reject})),n.d(t,"every",(function(){return i.every})),n.d(t,"all",(function(){return i.all})),n.d(t,"some",(function(){return i.some})),n.d(t,"any",(function(){return i.any})),n.d(t,"contains",(function(){return i.contains})),n.d(t,"includes",(function(){return i.includes})),n.d(t,"include",(function(){return i.include})),n.d(t,"invoke",(function(){return i.invoke})),n.d(t,"pluck",(function(){return i.pluck})),n.d(t,"where",(function(){return i.where})),n.d(t,"max",(function(){return i.max})),n.d(t,"min",(function(){return i.min})),n.d(t,"shuffle",(function(){return i.shuffle})),n.d(t,"sample",(function(){return i.sample})),n.d(t,"sortBy",(function(){return i.sortBy})),n.d(t,"groupBy",(function(){return i.groupBy})),n.d(t,"indexBy",(function(){return i.indexBy})),n.d(t,"countBy",(function(){return i.countBy})),n.d(t,"partition",(function(){return i.partition})),n.d(t,"toArray",(function(){return i.toArray})),n.d(t,"size",(function(){return i.size})),n.d(t,"pick",(function(){return i.pick})),n.d(t,"omit",(function(){return i.omit})),n.d(t,"first",(function(){return i.first})),n.d(t,"head",(function(){return i.head})),n.d(t,"take",(function(){return i.take})),n.d(t,"initial",(function(){return i.initial})),n.d(t,"last",(function(){return i.last})),n.d(t,"rest",(function(){return i.rest})),n.d(t,"tail",(function(){return i.tail})),n.d(t,"drop",(function(){return i.drop})),n.d(t,"compact",(function(){return i.compact})),n.d(t,"flatten",(function(){return i.flatten})),n.d(t,"without",(function(){return i.without})),n.d(t,"uniq",(function(){return i.uniq})),n.d(t,"unique",(function(){return i.unique})),n.d(t,"union",(function(){return i.union})),n.d(t,"intersection",(function(){return i.intersection})),n.d(t,"difference",(function(){return i.difference})),n.d(t,"unzip",(function(){return i.unzip})),n.d(t,"transpose",(function(){return i.transpose})),n.d(t,"zip",(function(){return i.zip})),n.d(t,"object",(function(){return i.object})),n.d(t,"range",(function(){return i.range})),n.d(t,"chunk",(function(){return i.chunk})),n.d(t,"mixin",(function(){return i.mixin}))},"./node_modules/underscore/modules/index-default.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index.js"),i=Object(r.mixin)(r);i._=i,t.default=i},"./node_modules/underscore/modules/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_setup.js");n.d(t,"VERSION",(function(){return r.VERSION}));var i=n("./node_modules/underscore/modules/restArguments.js");n.d(t,"restArguments",(function(){return i.default}));var o=n("./node_modules/underscore/modules/isObject.js");n.d(t,"isObject",(function(){return o.default}));var s=n("./node_modules/underscore/modules/isNull.js");n.d(t,"isNull",(function(){return s.default}));var a=n("./node_modules/underscore/modules/isUndefined.js");n.d(t,"isUndefined",(function(){return a.default}));var l=n("./node_modules/underscore/modules/isBoolean.js");n.d(t,"isBoolean",(function(){return l.default}));var c=n("./node_modules/underscore/modules/isElement.js");n.d(t,"isElement",(function(){return c.default}));var u=n("./node_modules/underscore/modules/isString.js");n.d(t,"isString",(function(){return u.default}));var d=n("./node_modules/underscore/modules/isNumber.js");n.d(t,"isNumber",(function(){return d.default}));var h=n("./node_modules/underscore/modules/isDate.js");n.d(t,"isDate",(function(){return h.default}));var f=n("./node_modules/underscore/modules/isRegExp.js");n.d(t,"isRegExp",(function(){return f.default}));var p=n("./node_modules/underscore/modules/isError.js");n.d(t,"isError",(function(){return p.default}));var g=n("./node_modules/underscore/modules/isSymbol.js");n.d(t,"isSymbol",(function(){return g.default}));var m=n("./node_modules/underscore/modules/isMap.js");n.d(t,"isMap",(function(){return m.default}));var v=n("./node_modules/underscore/modules/isWeakMap.js");n.d(t,"isWeakMap",(function(){return v.default}));var b=n("./node_modules/underscore/modules/isSet.js");n.d(t,"isSet",(function(){return b.default}));var y=n("./node_modules/underscore/modules/isWeakSet.js");n.d(t,"isWeakSet",(function(){return y.default}));var w=n("./node_modules/underscore/modules/isArrayBuffer.js");n.d(t,"isArrayBuffer",(function(){return w.default}));var x=n("./node_modules/underscore/modules/isDataView.js");n.d(t,"isDataView",(function(){return x.default}));var O=n("./node_modules/underscore/modules/isArray.js");n.d(t,"isArray",(function(){return O.default}));var C=n("./node_modules/underscore/modules/isFunction.js");n.d(t,"isFunction",(function(){return C.default}));var _=n("./node_modules/underscore/modules/isArguments.js");n.d(t,"isArguments",(function(){return _.default}));var S=n("./node_modules/underscore/modules/isFinite.js");n.d(t,"isFinite",(function(){return S.default}));var j=n("./node_modules/underscore/modules/isNaN.js");n.d(t,"isNaN",(function(){return j.default}));var k=n("./node_modules/underscore/modules/isTypedArray.js");n.d(t,"isTypedArray",(function(){return k.default}));var T=n("./node_modules/underscore/modules/isEmpty.js");n.d(t,"isEmpty",(function(){return T.default}));var E=n("./node_modules/underscore/modules/isMatch.js");n.d(t,"isMatch",(function(){return E.default}));var P=n("./node_modules/underscore/modules/isEqual.js");n.d(t,"isEqual",(function(){return P.default}));var A=n("./node_modules/underscore/modules/keys.js");n.d(t,"keys",(function(){return A.default}));var M=n("./node_modules/underscore/modules/allKeys.js");n.d(t,"allKeys",(function(){return M.default}));var D=n("./node_modules/underscore/modules/values.js");n.d(t,"values",(function(){return D.default}));var I=n("./node_modules/underscore/modules/pairs.js");n.d(t,"pairs",(function(){return I.default}));var L=n("./node_modules/underscore/modules/invert.js");n.d(t,"invert",(function(){return L.default}));var N=n("./node_modules/underscore/modules/functions.js");n.d(t,"functions",(function(){return N.default})),n.d(t,"methods",(function(){return N.default}));var R=n("./node_modules/underscore/modules/extend.js");n.d(t,"extend",(function(){return R.default}));var F=n("./node_modules/underscore/modules/extendOwn.js");n.d(t,"extendOwn",(function(){return F.default})),n.d(t,"assign",(function(){return F.default}));var V=n("./node_modules/underscore/modules/defaults.js");n.d(t,"defaults",(function(){return V.default}));var z=n("./node_modules/underscore/modules/create.js");n.d(t,"create",(function(){return z.default}));var B=n("./node_modules/underscore/modules/clone.js");n.d(t,"clone",(function(){return B.default}));var H=n("./node_modules/underscore/modules/tap.js");n.d(t,"tap",(function(){return H.default}));var U=n("./node_modules/underscore/modules/has.js");n.d(t,"has",(function(){return U.default}));var $=n("./node_modules/underscore/modules/mapObject.js");n.d(t,"mapObject",(function(){return $.default}));var W=n("./node_modules/underscore/modules/identity.js");n.d(t,"identity",(function(){return W.default}));var q=n("./node_modules/underscore/modules/constant.js");n.d(t,"constant",(function(){return q.default}));var G=n("./node_modules/underscore/modules/noop.js");n.d(t,"noop",(function(){return G.default}));var K=n("./node_modules/underscore/modules/property.js");n.d(t,"property",(function(){return K.default}));var Y=n("./node_modules/underscore/modules/propertyOf.js");n.d(t,"propertyOf",(function(){return Y.default}));var Z=n("./node_modules/underscore/modules/matcher.js");n.d(t,"matcher",(function(){return Z.default})),n.d(t,"matches",(function(){return Z.default}));var X=n("./node_modules/underscore/modules/times.js");n.d(t,"times",(function(){return X.default}));var J=n("./node_modules/underscore/modules/random.js");n.d(t,"random",(function(){return J.default}));var Q=n("./node_modules/underscore/modules/now.js");n.d(t,"now",(function(){return Q.default}));var ee=n("./node_modules/underscore/modules/escape.js");n.d(t,"escape",(function(){return ee.default}));var te=n("./node_modules/underscore/modules/unescape.js");n.d(t,"unescape",(function(){return te.default}));var ne=n("./node_modules/underscore/modules/templateSettings.js");n.d(t,"templateSettings",(function(){return ne.default}));var re=n("./node_modules/underscore/modules/template.js");n.d(t,"template",(function(){return re.default}));var ie=n("./node_modules/underscore/modules/result.js");n.d(t,"result",(function(){return ie.default}));var oe=n("./node_modules/underscore/modules/uniqueId.js");n.d(t,"uniqueId",(function(){return oe.default}));var se=n("./node_modules/underscore/modules/chain.js");n.d(t,"chain",(function(){return se.default}));var ae=n("./node_modules/underscore/modules/iteratee.js");n.d(t,"iteratee",(function(){return ae.default}));var le=n("./node_modules/underscore/modules/partial.js");n.d(t,"partial",(function(){return le.default}));var ce=n("./node_modules/underscore/modules/bind.js");n.d(t,"bind",(function(){return ce.default}));var ue=n("./node_modules/underscore/modules/bindAll.js");n.d(t,"bindAll",(function(){return ue.default}));var de=n("./node_modules/underscore/modules/memoize.js");n.d(t,"memoize",(function(){return de.default}));var he=n("./node_modules/underscore/modules/delay.js");n.d(t,"delay",(function(){return he.default}));var fe=n("./node_modules/underscore/modules/defer.js");n.d(t,"defer",(function(){return fe.default}));var pe=n("./node_modules/underscore/modules/throttle.js");n.d(t,"throttle",(function(){return pe.default}));var ge=n("./node_modules/underscore/modules/debounce.js");n.d(t,"debounce",(function(){return ge.default}));var me=n("./node_modules/underscore/modules/wrap.js");n.d(t,"wrap",(function(){return me.default}));var ve=n("./node_modules/underscore/modules/negate.js");n.d(t,"negate",(function(){return ve.default}));var be=n("./node_modules/underscore/modules/compose.js");n.d(t,"compose",(function(){return be.default}));var ye=n("./node_modules/underscore/modules/after.js");n.d(t,"after",(function(){return ye.default}));var we=n("./node_modules/underscore/modules/before.js");n.d(t,"before",(function(){return we.default}));var xe=n("./node_modules/underscore/modules/once.js");n.d(t,"once",(function(){return xe.default}));var Oe=n("./node_modules/underscore/modules/findKey.js");n.d(t,"findKey",(function(){return Oe.default}));var Ce=n("./node_modules/underscore/modules/findIndex.js");n.d(t,"findIndex",(function(){return Ce.default}));var _e=n("./node_modules/underscore/modules/findLastIndex.js");n.d(t,"findLastIndex",(function(){return _e.default}));var Se=n("./node_modules/underscore/modules/sortedIndex.js");n.d(t,"sortedIndex",(function(){return Se.default}));var je=n("./node_modules/underscore/modules/indexOf.js");n.d(t,"indexOf",(function(){return je.default}));var ke=n("./node_modules/underscore/modules/lastIndexOf.js");n.d(t,"lastIndexOf",(function(){return ke.default}));var Te=n("./node_modules/underscore/modules/find.js");n.d(t,"find",(function(){return Te.default})),n.d(t,"detect",(function(){return Te.default}));var Ee=n("./node_modules/underscore/modules/findWhere.js");n.d(t,"findWhere",(function(){return Ee.default}));var Pe=n("./node_modules/underscore/modules/each.js");n.d(t,"each",(function(){return Pe.default})),n.d(t,"forEach",(function(){return Pe.default}));var Ae=n("./node_modules/underscore/modules/map.js");n.d(t,"map",(function(){return Ae.default})),n.d(t,"collect",(function(){return Ae.default}));var Me=n("./node_modules/underscore/modules/reduce.js");n.d(t,"reduce",(function(){return Me.default})),n.d(t,"foldl",(function(){return Me.default})),n.d(t,"inject",(function(){return Me.default}));var De=n("./node_modules/underscore/modules/reduceRight.js");n.d(t,"reduceRight",(function(){return De.default})),n.d(t,"foldr",(function(){return De.default}));var Ie=n("./node_modules/underscore/modules/filter.js");n.d(t,"filter",(function(){return Ie.default})),n.d(t,"select",(function(){return Ie.default}));var Le=n("./node_modules/underscore/modules/reject.js");n.d(t,"reject",(function(){return Le.default}));var Ne=n("./node_modules/underscore/modules/every.js");n.d(t,"every",(function(){return Ne.default})),n.d(t,"all",(function(){return Ne.default}));var Re=n("./node_modules/underscore/modules/some.js");n.d(t,"some",(function(){return Re.default})),n.d(t,"any",(function(){return Re.default}));var Fe=n("./node_modules/underscore/modules/contains.js");n.d(t,"contains",(function(){return Fe.default})),n.d(t,"includes",(function(){return Fe.default})),n.d(t,"include",(function(){return Fe.default}));var Ve=n("./node_modules/underscore/modules/invoke.js");n.d(t,"invoke",(function(){return Ve.default}));var ze=n("./node_modules/underscore/modules/pluck.js");n.d(t,"pluck",(function(){return ze.default}));var Be=n("./node_modules/underscore/modules/where.js");n.d(t,"where",(function(){return Be.default}));var He=n("./node_modules/underscore/modules/max.js");n.d(t,"max",(function(){return He.default}));var Ue=n("./node_modules/underscore/modules/min.js");n.d(t,"min",(function(){return Ue.default}));var $e=n("./node_modules/underscore/modules/shuffle.js");n.d(t,"shuffle",(function(){return $e.default}));var We=n("./node_modules/underscore/modules/sample.js");n.d(t,"sample",(function(){return We.default}));var qe=n("./node_modules/underscore/modules/sortBy.js");n.d(t,"sortBy",(function(){return qe.default}));var Ge=n("./node_modules/underscore/modules/groupBy.js");n.d(t,"groupBy",(function(){return Ge.default}));var Ke=n("./node_modules/underscore/modules/indexBy.js");n.d(t,"indexBy",(function(){return Ke.default}));var Ye=n("./node_modules/underscore/modules/countBy.js");n.d(t,"countBy",(function(){return Ye.default}));var Ze=n("./node_modules/underscore/modules/partition.js");n.d(t,"partition",(function(){return Ze.default}));var Xe=n("./node_modules/underscore/modules/toArray.js");n.d(t,"toArray",(function(){return Xe.default}));var Je=n("./node_modules/underscore/modules/size.js");n.d(t,"size",(function(){return Je.default}));var Qe=n("./node_modules/underscore/modules/pick.js");n.d(t,"pick",(function(){return Qe.default}));var et=n("./node_modules/underscore/modules/omit.js");n.d(t,"omit",(function(){return et.default}));var tt=n("./node_modules/underscore/modules/first.js");n.d(t,"first",(function(){return tt.default})),n.d(t,"head",(function(){return tt.default})),n.d(t,"take",(function(){return tt.default}));var nt=n("./node_modules/underscore/modules/initial.js");n.d(t,"initial",(function(){return nt.default}));var rt=n("./node_modules/underscore/modules/last.js");n.d(t,"last",(function(){return rt.default}));var it=n("./node_modules/underscore/modules/rest.js");n.d(t,"rest",(function(){return it.default})),n.d(t,"tail",(function(){return it.default})),n.d(t,"drop",(function(){return it.default}));var ot=n("./node_modules/underscore/modules/compact.js");n.d(t,"compact",(function(){return ot.default}));var st=n("./node_modules/underscore/modules/flatten.js");n.d(t,"flatten",(function(){return st.default}));var at=n("./node_modules/underscore/modules/without.js");n.d(t,"without",(function(){return at.default}));var lt=n("./node_modules/underscore/modules/uniq.js");n.d(t,"uniq",(function(){return lt.default})),n.d(t,"unique",(function(){return lt.default}));var ct=n("./node_modules/underscore/modules/union.js");n.d(t,"union",(function(){return ct.default}));var ut=n("./node_modules/underscore/modules/intersection.js");n.d(t,"intersection",(function(){return ut.default}));var dt=n("./node_modules/underscore/modules/difference.js");n.d(t,"difference",(function(){return dt.default}));var ht=n("./node_modules/underscore/modules/unzip.js");n.d(t,"unzip",(function(){return ht.default})),n.d(t,"transpose",(function(){return ht.default}));var ft=n("./node_modules/underscore/modules/zip.js");n.d(t,"zip",(function(){return ft.default}));var pt=n("./node_modules/underscore/modules/object.js");n.d(t,"object",(function(){return pt.default}));var gt=n("./node_modules/underscore/modules/range.js");n.d(t,"range",(function(){return gt.default}));var mt=n("./node_modules/underscore/modules/chunk.js");n.d(t,"chunk",(function(){return mt.default}));var vt=n("./node_modules/underscore/modules/mixin.js");n.d(t,"mixin",(function(){return vt.default}));var bt=n("./node_modules/underscore/modules/underscore-array-methods.js");n.d(t,"default",(function(){return bt.default}))},"./node_modules/underscore/modules/indexBy.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_group.js");t.default=Object(r.default)((function(e,t,n){e[n]=t}))},"./node_modules/underscore/modules/indexOf.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/sortedIndex.js"),i=n("./node_modules/underscore/modules/findIndex.js"),o=n("./node_modules/underscore/modules/_createIndexFinder.js");t.default=Object(o.default)(1,i.default,r.default)},"./node_modules/underscore/modules/initial.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_setup.js");function i(e,t,n){return r.slice.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}},"./node_modules/underscore/modules/intersection.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_getLength.js"),i=n("./node_modules/underscore/modules/contains.js");function o(e){for(var t=[],n=arguments.length,o=0,s=Object(r.default)(e);o<s;o++){var a=e[o];if(!Object(i.default)(t,a)){var l;for(l=1;l<n&&Object(i.default)(arguments[l],a);l++);l===n&&t.push(a)}}return t}},"./node_modules/underscore/modules/invert.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/keys.js");function i(e){for(var t={},n=Object(r.default)(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t}},"./node_modules/underscore/modules/invoke.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/isArray.js"),s=n("./node_modules/underscore/modules/map.js"),a=n("./node_modules/underscore/modules/_deepGet.js");t.default=Object(r.default)((function(e,t,n){var r,l;return Object(i.default)(t)?l=t:Object(o.default)(t)&&(r=t.slice(0,-1),t=t[t.length-1]),Object(s.default)(e,(function(e){var i=l;if(!i){if(r&&r.length&&(e=Object(a.default)(e,r)),null==e)return;i=e[t]}return null==i?i:i.apply(e,n)}))}))},"./node_modules/underscore/modules/isArguments.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js"),i=n("./node_modules/underscore/modules/_has.js"),o=Object(r.default)("Arguments");!function(){o(arguments)||(o=function(e){return Object(i.default)(e,"callee")})}(),t.default=o},"./node_modules/underscore/modules/isArray.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/_tagTester.js");t.default=r.nativeIsArray||Object(i.default)("Array")},"./node_modules/underscore/modules/isArrayBuffer.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("ArrayBuffer")},"./node_modules/underscore/modules/isBoolean.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_setup.js");function i(e){return!0===e||!1===e||"[object Boolean]"===r.toString.call(e)}},"./node_modules/underscore/modules/isDataView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("DataView")},"./node_modules/underscore/modules/isDate.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("Date")},"./node_modules/underscore/modules/isElement.js":function(e,t,n){"use strict";function r(e){return!(!e||1!==e.nodeType)}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/isEmpty.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/isArray.js"),o=n("./node_modules/underscore/modules/isString.js"),s=n("./node_modules/underscore/modules/isArguments.js"),a=n("./node_modules/underscore/modules/keys.js");function l(e){return null==e||(Object(r.default)(e)&&(Object(i.default)(e)||Object(o.default)(e)||Object(s.default)(e))?0===e.length:0===Object(a.default)(e).length)}},"./node_modules/underscore/modules/isEqual.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/_getByteLength.js"),s=n("./node_modules/underscore/modules/isTypedArray.js"),a=n("./node_modules/underscore/modules/isFunction.js"),l=n("./node_modules/underscore/modules/keys.js"),c=n("./node_modules/underscore/modules/_has.js");function u(e,t){return function e(t,n,u,d){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var h=typeof t;return("function"===h||"object"===h||"object"==typeof n)&&function t(n,u,d,h){n instanceof r.default&&(n=n._wrapped),u instanceof r.default&&(u=u._wrapped);var f=i.toString.call(n);if(f!==i.toString.call(u))return!1;switch(f){case"[object RegExp]":case"[object String]":return""+n==""+u;case"[object Number]":return+n!=+n?+u!=+u:0==+n?1/+n==1/u:+n==+u;case"[object Date]":case"[object Boolean]":return+n==+u;case"[object Symbol]":return i.SymbolProto.valueOf.call(n)===i.SymbolProto.valueOf.call(u);case"[object ArrayBuffer]":return t(new DataView(n),new DataView(u),d,h);case"[object DataView]":var p=Object(o.default)(n);if(p!==Object(o.default)(u))return!1;for(;p--;)if(n.getUint8(p)!==u.getUint8(p))return!1;return!0}if(Object(s.default)(n))return t(new DataView(n.buffer),new DataView(u.buffer),d,h);var g="[object Array]"===f;if(!g){if("object"!=typeof n||"object"!=typeof u)return!1;var m=n.constructor,v=u.constructor;if(m!==v&&!(Object(a.default)(m)&&m instanceof m&&Object(a.default)(v)&&v instanceof v)&&"constructor"in n&&"constructor"in u)return!1}h=h||[];for(var b=(d=d||[]).length;b--;)if(d[b]===n)return h[b]===u;if(d.push(n),h.push(u),g){if((b=n.length)!==u.length)return!1;for(;b--;)if(!e(n[b],u[b],d,h))return!1}else{var y,w=Object(l.default)(n);if(b=w.length,Object(l.default)(u).length!==b)return!1;for(;b--;)if(y=w[b],!Object(c.default)(u,y)||!e(n[y],u[y],d,h))return!1}return d.pop(),h.pop(),!0}(t,n,u,d)}(e,t)}},"./node_modules/underscore/modules/isError.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("Error")},"./node_modules/underscore/modules/isFinite.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/isSymbol.js");function o(e){return!Object(i.default)(e)&&Object(r._isFinite)(e)&&!isNaN(parseFloat(e))}},"./node_modules/underscore/modules/isFunction.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=Object(r.default)("Function");"object"!=typeof Int8Array&&"function"!=typeof(i.root.document&&i.root.document.childNodes)&&(o=function(e){return"function"==typeof e||!1}),t.default=o},"./node_modules/underscore/modules/isMap.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("Map")},"./node_modules/underscore/modules/isMatch.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/keys.js");function i(e,t){var n=Object(r.default)(t),i=n.length;if(null==e)return!i;for(var o=Object(e),s=0;s<i;s++){var a=n[s];if(t[a]!==o[a]||!(a in o))return!1}return!0}},"./node_modules/underscore/modules/isNaN.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/isNumber.js");function o(e){return Object(i.default)(e)&&Object(r._isNaN)(e)}},"./node_modules/underscore/modules/isNull.js":function(e,t,n){"use strict";function r(e){return null===e}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/isNumber.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("Number")},"./node_modules/underscore/modules/isObject.js":function(e,t,n){"use strict";function r(e){var t=typeof e;return"function"===t||"object"===t&&!!e}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/isRegExp.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("RegExp")},"./node_modules/underscore/modules/isSet.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("Set")},"./node_modules/underscore/modules/isString.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("String")},"./node_modules/underscore/modules/isSymbol.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("Symbol")},"./node_modules/underscore/modules/isTypedArray.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/isDataView.js"),o=n("./node_modules/underscore/modules/constant.js"),s=n("./node_modules/underscore/modules/_isBufferLike.js"),a=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;t.default=r.supportsArrayBuffer?function(e){return r.nativeIsView?Object(r.nativeIsView)(e)&&!Object(i.default)(e):Object(s.default)(e)&&a.test(r.toString.call(e))}:Object(o.default)(!1)},"./node_modules/underscore/modules/isUndefined.js":function(e,t,n){"use strict";function r(e){return void 0===e}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/isWeakMap.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("WeakMap")},"./node_modules/underscore/modules/isWeakSet.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_tagTester.js");t.default=Object(r.default)("WeakSet")},"./node_modules/underscore/modules/iteratee.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/_baseIteratee.js");function o(e,t){return Object(i.default)(e,t,1/0)}r.default.iteratee=o},"./node_modules/underscore/modules/keys.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n("./node_modules/underscore/modules/isObject.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/_has.js"),s=n("./node_modules/underscore/modules/_collectNonEnumProps.js");function a(e){if(!Object(r.default)(e))return[];if(i.nativeKeys)return Object(i.nativeKeys)(e);var t=[];for(var n in e)Object(o.default)(e,n)&&t.push(n);return i.hasEnumBug&&Object(s.default)(e,t),t}},"./node_modules/underscore/modules/last.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/rest.js");function i(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:Object(r.default)(e,Math.max(0,e.length-t))}},"./node_modules/underscore/modules/lastIndexOf.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/findLastIndex.js"),i=n("./node_modules/underscore/modules/_createIndexFinder.js");t.default=Object(i.default)(-1,r.default)},"./node_modules/underscore/modules/map.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/keys.js");function s(e,t,n){t=Object(r.default)(t,n);for(var s=!Object(i.default)(e)&&Object(o.default)(e),a=(s||e).length,l=Array(a),c=0;c<a;c++){var u=s?s[c]:c;l[c]=t(e[u],u,e)}return l}},"./node_modules/underscore/modules/mapObject.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/keys.js");function o(e,t,n){t=Object(r.default)(t,n);for(var o=Object(i.default)(e),s=o.length,a={},l=0;l<s;l++){var c=o[l];a[c]=t(e[c],c,e)}return a}},"./node_modules/underscore/modules/matcher.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/extendOwn.js"),i=n("./node_modules/underscore/modules/isMatch.js");function o(e){return e=Object(r.default)({},e),function(t){return Object(i.default)(t,e)}}},"./node_modules/underscore/modules/max.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/values.js"),o=n("./node_modules/underscore/modules/_cb.js"),s=n("./node_modules/underscore/modules/each.js");function a(e,t,n){var a,l,c=-1/0,u=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var d=0,h=(e=Object(r.default)(e)?e:Object(i.default)(e)).length;d<h;d++)null!=(a=e[d])&&a>c&&(c=a);else t=Object(o.default)(t,n),Object(s.default)(e,(function(e,n,r){((l=t(e,n,r))>u||l===-1/0&&c===-1/0)&&(c=e,u=l)}));return c}},"./node_modules/underscore/modules/memoize.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_has.js");function i(e,t){var n=function(i){var o=n.cache,s=""+(t?t.apply(this,arguments):i);return Object(r.default)(o,s)||(o[s]=e.apply(this,arguments)),o[s]};return n.cache={},n}},"./node_modules/underscore/modules/min.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/values.js"),o=n("./node_modules/underscore/modules/_cb.js"),s=n("./node_modules/underscore/modules/each.js");function a(e,t,n){var a,l,c=1/0,u=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var d=0,h=(e=Object(r.default)(e)?e:Object(i.default)(e)).length;d<h;d++)null!=(a=e[d])&&a<c&&(c=a);else t=Object(o.default)(t,n),Object(s.default)(e,(function(e,n,r){((l=t(e,n,r))<u||l===1/0&&c===1/0)&&(c=e,u=l)}));return c}},"./node_modules/underscore/modules/mixin.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/each.js"),o=n("./node_modules/underscore/modules/functions.js"),s=n("./node_modules/underscore/modules/_setup.js"),a=n("./node_modules/underscore/modules/_chainResult.js");function l(e){return Object(i.default)(Object(o.default)(e),(function(t){var n=r.default[t]=e[t];r.default.prototype[t]=function(){var e=[this._wrapped];return s.push.apply(e,arguments),Object(a.default)(this,n.apply(r.default,e))}})),r.default}},"./node_modules/underscore/modules/negate.js":function(e,t,n){"use strict";function r(e){return function(){return!e.apply(this,arguments)}}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/noop.js":function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/now.js":function(e,t,n){"use strict";n.r(t),t.default=Date.now||function(){return(new Date).getTime()}},"./node_modules/underscore/modules/object.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_getLength.js");function i(e,t){for(var n={},i=0,o=Object(r.default)(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}},"./node_modules/underscore/modules/omit.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/negate.js"),s=n("./node_modules/underscore/modules/map.js"),a=n("./node_modules/underscore/modules/_flatten.js"),l=n("./node_modules/underscore/modules/contains.js"),c=n("./node_modules/underscore/modules/pick.js");t.default=Object(r.default)((function(e,t){var n,r=t[0];return Object(i.default)(r)?(r=Object(o.default)(r),t.length>1&&(n=t[1])):(t=Object(s.default)(Object(a.default)(t,!1,!1),String),r=function(e,n){return!Object(l.default)(t,n)}),Object(c.default)(e,r,n)}))},"./node_modules/underscore/modules/once.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/partial.js"),i=n("./node_modules/underscore/modules/before.js");t.default=Object(r.default)(i.default,2)},"./node_modules/underscore/modules/pairs.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/keys.js");function i(e){for(var t=Object(r.default)(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i}},"./node_modules/underscore/modules/partial.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/_executeBound.js"),o=n("./node_modules/underscore/modules/underscore.js"),s=Object(r.default)((function(e,t){var n=s.placeholder,r=function(){for(var o=0,s=t.length,a=Array(s),l=0;l<s;l++)a[l]=t[l]===n?arguments[o++]:t[l];for(;o<arguments.length;)a.push(arguments[o++]);return Object(i.default)(e,r,this,this,a)};return r}));s.placeholder=o.default,t.default=s},"./node_modules/underscore/modules/partition.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_group.js");t.default=Object(r.default)((function(e,t,n){e[n?0:1].push(t)}),!0)},"./node_modules/underscore/modules/pick.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/_optimizeCb.js"),s=n("./node_modules/underscore/modules/allKeys.js"),a=n("./node_modules/underscore/modules/_keyInObj.js"),l=n("./node_modules/underscore/modules/_flatten.js");t.default=Object(r.default)((function(e,t){var n={},r=t[0];if(null==e)return n;Object(i.default)(r)?(t.length>1&&(r=Object(o.default)(r,t[1])),t=Object(s.default)(e)):(r=a.default,t=Object(l.default)(t,!1,!1),e=Object(e));for(var c=0,u=t.length;c<u;c++){var d=t[c],h=e[d];r(h,d,e)&&(n[d]=h)}return n}))},"./node_modules/underscore/modules/pluck.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/map.js"),i=n("./node_modules/underscore/modules/property.js");function o(e,t){return Object(r.default)(e,Object(i.default)(t))}},"./node_modules/underscore/modules/property.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/isArray.js"),i=n("./node_modules/underscore/modules/_shallowProperty.js"),o=n("./node_modules/underscore/modules/_deepGet.js");function s(e){return Object(r.default)(e)?function(t){return Object(o.default)(t,e)}:Object(i.default)(e)}},"./node_modules/underscore/modules/propertyOf.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/isArray.js"),i=n("./node_modules/underscore/modules/_deepGet.js");function o(e){return null==e?function(){}:function(t){return Object(r.default)(t)?Object(i.default)(e,t):e[t]}}},"./node_modules/underscore/modules/random.js":function(e,t,n){"use strict";function r(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/range.js":function(e,t,n){"use strict";function r(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/reduce.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createReduce.js");t.default=Object(r.default)(1)},"./node_modules/underscore/modules/reduceRight.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createReduce.js");t.default=Object(r.default)(-1)},"./node_modules/underscore/modules/reject.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/filter.js"),i=n("./node_modules/underscore/modules/negate.js"),o=n("./node_modules/underscore/modules/_cb.js");function s(e,t,n){return Object(r.default)(e,Object(i.default)(Object(o.default)(t)),n)}},"./node_modules/underscore/modules/rest.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_setup.js");function i(e,t,n){return r.slice.call(e,null==t||n?1:t)}},"./node_modules/underscore/modules/restArguments.js":function(e,t,n){"use strict";function r(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/result.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/isArray.js"),i=n("./node_modules/underscore/modules/isFunction.js");function o(e,t,n){Object(r.default)(t)||(t=[t]);var o=t.length;if(!o)return Object(i.default)(n)?n.call(e):n;for(var s=0;s<o;s++){var a=null==e?void 0:e[t[s]];void 0===a&&(a=n,s=o),e=Object(i.default)(a)?a.call(e):a}return e}},"./node_modules/underscore/modules/sample.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/clone.js"),o=n("./node_modules/underscore/modules/values.js"),s=n("./node_modules/underscore/modules/_getLength.js"),a=n("./node_modules/underscore/modules/random.js");function l(e,t,n){if(null==t||n)return Object(r.default)(e)||(e=Object(o.default)(e)),e[Object(a.default)(e.length-1)];var l=Object(r.default)(e)?Object(i.default)(e):Object(o.default)(e),c=Object(s.default)(l);t=Math.max(Math.min(t,c),0);for(var u=c-1,d=0;d<t;d++){var h=Object(a.default)(d,u),f=l[d];l[d]=l[h],l[h]=f}return l.slice(0,t)}},"./node_modules/underscore/modules/shuffle.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/sample.js");function i(e){return Object(r.default)(e,1/0)}},"./node_modules/underscore/modules/size.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/keys.js");function o(e){return null==e?0:Object(r.default)(e)?e.length:Object(i.default)(e).length}},"./node_modules/underscore/modules/some.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/keys.js");function s(e,t,n){t=Object(r.default)(t,n);for(var s=!Object(i.default)(e)&&Object(o.default)(e),a=(s||e).length,l=0;l<a;l++){var c=s?s[l]:l;if(t(e[c],c,e))return!0}return!1}},"./node_modules/underscore/modules/sortBy.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/pluck.js"),o=n("./node_modules/underscore/modules/map.js");function s(e,t,n){var s=0;return t=Object(r.default)(t,n),Object(i.default)(Object(o.default)(e,(function(e,n,r){return{value:e,index:s++,criteria:t(e,n,r)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")}},"./node_modules/underscore/modules/sortedIndex.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_getLength.js");function o(e,t,n,o){for(var s=(n=Object(r.default)(n,o,1))(t),a=0,l=Object(i.default)(e);a<l;){var c=Math.floor((a+l)/2);n(e[c])<s?a=c+1:l=c}return a}},"./node_modules/underscore/modules/tap.js":function(e,t,n){"use strict";function r(e,t){return t(e),e}n.r(t),n.d(t,"default",(function(){return r}))},"./node_modules/underscore/modules/template.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n("./node_modules/underscore/modules/defaults.js"),i=n("./node_modules/underscore/modules/underscore.js"),o=(n("./node_modules/underscore/modules/templateSettings.js"),/(.)^/),s={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\u2028|\u2029/g;function l(e){return"\\"+s[e]}function c(e,t,n){!t&&n&&(t=n),t=Object(r.default)({},t,i.default.templateSettings);var s,c=RegExp([(t.escape||o).source,(t.interpolate||o).source,(t.evaluate||o).source].join("|")+"|$","g"),u=0,d="__p+='";e.replace(c,(function(t,n,r,i,o){return d+=e.slice(u,o).replace(a,l),u=o+t.length,n?d+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?d+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(d+="';\n"+i+"\n__p+='"),t})),d+="';\n",t.variable||(d="with(obj||{}){\n"+d+"}\n"),d="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+d+"return __p;\n";try{s=new Function(t.variable||"obj","_",d)}catch(f){throw f.source=d,f}var h=function(e){return s.call(this,e,i.default)};return h.source="function("+(t.variable||"obj")+"){\n"+d+"}",h}},"./node_modules/underscore/modules/templateSettings.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/underscore.js");t.default=r.default.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}},"./node_modules/underscore/modules/throttle.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/now.js");function i(e,t,n){var i,o,s,a,l=0;n||(n={});var c=function(){l=!1===n.leading?0:Object(r.default)(),i=null,a=e.apply(o,s),i||(o=s=null)},u=function(){var u=Object(r.default)();l||!1!==n.leading||(l=u);var d=t-(u-l);return o=this,s=arguments,d<=0||d>t?(i&&(clearTimeout(i),i=null),l=u,a=e.apply(o,s),i||(o=s=null)):i||!1===n.trailing||(i=setTimeout(c,d)),a};return u.cancel=function(){clearTimeout(i),l=0,i=o=s=null},u}},"./node_modules/underscore/modules/times.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_optimizeCb.js");function i(e,t,n){var i=Array(Math.max(0,e));t=Object(r.default)(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i}},"./node_modules/underscore/modules/toArray.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var r=n("./node_modules/underscore/modules/isArray.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/isString.js"),s=n("./node_modules/underscore/modules/_isArrayLike.js"),a=n("./node_modules/underscore/modules/map.js"),l=n("./node_modules/underscore/modules/identity.js"),c=n("./node_modules/underscore/modules/values.js"),u=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function d(e){return e?Object(r.default)(e)?i.slice.call(e):Object(o.default)(e)?e.match(u):Object(s.default)(e)?Object(a.default)(e,l.default):Object(c.default)(e):[]}},"./node_modules/underscore/modules/underscore-array-methods.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/each.js"),o=n("./node_modules/underscore/modules/_setup.js"),s=n("./node_modules/underscore/modules/_chainResult.js");Object(i.default)(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=o.ArrayProto[e];r.default.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Object(s.default)(this,n)}})),Object(i.default)(["concat","join","slice"],(function(e){var t=o.ArrayProto[e];r.default.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Object(s.default)(this,e)}})),t.default=r.default},"./node_modules/underscore/modules/underscore.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/_setup.js");function i(e){return e instanceof i?e:this instanceof i?void(this._wrapped=e):new i(e)}i.VERSION=r.VERSION,i.prototype.valueOf=i.prototype.toJSON=i.prototype.value=function(){return this._wrapped},i.prototype.toString=function(){return String(this._wrapped)}},"./node_modules/underscore/modules/unescape.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/_createEscaper.js"),i=n("./node_modules/underscore/modules/_unescapeMap.js");t.default=Object(r.default)(i.default)},"./node_modules/underscore/modules/union.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/uniq.js"),o=n("./node_modules/underscore/modules/_flatten.js");t.default=Object(r.default)((function(e){return Object(i.default)(Object(o.default)(e,!0,!0))}))},"./node_modules/underscore/modules/uniq.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n("./node_modules/underscore/modules/isBoolean.js"),i=n("./node_modules/underscore/modules/_cb.js"),o=n("./node_modules/underscore/modules/_getLength.js"),s=n("./node_modules/underscore/modules/contains.js");function a(e,t,n,a){Object(r.default)(t)||(a=n,n=t,t=!1),null!=n&&(n=Object(i.default)(n,a));for(var l=[],c=[],u=0,d=Object(o.default)(e);u<d;u++){var h=e[u],f=n?n(h,u,e):h;t&&!n?(u&&c===f||l.push(h),c=f):n?Object(s.default)(c,f)||(c.push(f),l.push(h)):Object(s.default)(l,h)||l.push(h)}return l}},"./node_modules/underscore/modules/uniqueId.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=0;function i(e){var t=++r+"";return e?e+t:t}},"./node_modules/underscore/modules/unzip.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./node_modules/underscore/modules/max.js"),i=n("./node_modules/underscore/modules/_getLength.js"),o=n("./node_modules/underscore/modules/pluck.js");function s(e){for(var t=e&&Object(r.default)(e,i.default).length||0,n=Array(t),s=0;s<t;s++)n[s]=Object(o.default)(e,s);return n}},"./node_modules/underscore/modules/values.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/keys.js");function i(e){for(var t=Object(r.default)(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i}},"./node_modules/underscore/modules/where.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./node_modules/underscore/modules/filter.js"),i=n("./node_modules/underscore/modules/matcher.js");function o(e,t){return Object(r.default)(e,Object(i.default)(t))}},"./node_modules/underscore/modules/without.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/difference.js");t.default=Object(r.default)((function(e,t){return Object(i.default)(e,t)}))},"./node_modules/underscore/modules/wrap.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./node_modules/underscore/modules/partial.js");function i(e,t){return Object(r.default)(t,e)}},"./node_modules/underscore/modules/zip.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/unzip.js");t.default=Object(r.default)(i.default)},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}e.exports=n},"./src/asset_manager/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={assets:[],noAssets:"",stylePrefix:"am-",upload:0,uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:1,customFetch:"",uploadFile:"",embedAsBase64:1,handleAdd:"",dropzone:0,openAssetsOnDrop:1,dropzoneContent:"",beforeUpload:null,showUrlInput:!0}},"./src/asset_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/asset_manager/config/config.js"),i=n("./src/asset_manager/model/Assets.js"),o=n("./src/asset_manager/view/AssetsView.js"),s=n("./src/asset_manager/view/FileUploader.js");t.default=function(){var e,t,n,a={};return{name:"AssetManager",storageKey:"assets",getConfig:function(){return a},init:function(l){var c=this;for(var u in a=l||{},r.default)u in a||(a[u]=r.default[u]);var d=a.pStylePrefix,h=a.em;d&&(a.stylePrefix=d+a.stylePrefix),e=new i.default([]);var f={collection:new i.default([]),globalCollection:e,config:a};return n=new s.default(f),f.fu=n,t=new o.default(f),e.listenTo(e,"add",(function(e){c.getAllVisible().add(e),h&&h.trigger("asset:add",e)})),e.listenTo(e,"remove",(function(e){c.getAllVisible().remove(e),h&&h.trigger("asset:remove",e)})),this},add:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===n.at&&(n.at=0),e.add(t,n)},get:function(t){return e.where({src:t})[0]},getAll:function(){return e},getAllVisible:function(){return t.collection},remove:function(e){var t=this.get(e);return this.getAll().remove(t),this},store:function(e){var t={},n=JSON.stringify(this.getAll().toJSON());return t[this.storageKey]=n,!e&&a.stm&&a.stm.store(t),t},load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.storageKey,n=e[t]||[];if("string"==typeof n)try{n=JSON.parse(e[t])}catch(r){}return n&&n.length&&this.getAll().reset(n),n},getContainer:function(){return t.el},getAssetsEl:function(){return t.el.querySelector("[data-el=assets]")},render:function(e){var n=e||this.getAll().models;return t.rendered||t.render(),t.collection.reset(n),this.getContainer()},addType:function(e,t){this.getAll().addType(e,t)},getType:function(e){return this.getAll().getType(e)},getTypes:function(){return this.getAll().getTypes()},AssetsView:function(){return t},FileUploader:function(){return n},onLoad:function(){this.getAll().reset(a.assets)},postRender:function(e){a.dropzone&&n.initDropzone(e)},setTarget:function(e){t.collection.target=e},onSelect:function(e){t.collection.onSelect=e},onClick:function(e){a.onClick=e},onDblClick:function(e){a.onDblClick=e}}}},"./src/asset_manager/model/Asset.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js");t.default=n.n(r).a.Model.extend({idAttribute:"src",defaults:{type:"",src:""},getFilename:function(){return this.get("src").split("/").pop()},getExtension:function(){return this.getFilename().split(".").pop()}})},"./src/asset_manager/model/AssetImage.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/asset_manager/model/Asset.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"image",unitDim:"px",height:0,width:0})})},"./src/asset_manager/model/Assets.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/asset_manager/model/AssetImage.js"),s=n("./src/asset_manager/view/AssetImageView.js"),a=n("./src/domain_abstract/model/TypeableCollection.js");t.default=i.a.Collection.extend(a.default).extend({types:[{id:"image",model:o.default,view:s.default,isType:function(e){return"string"==typeof e?{type:"image",src:e}:e}}]})},"./src/asset_manager/view/AssetImageView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./src/asset_manager/view/AssetView.js");t.default=i.default.extend({events:{"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"},getPreview:function(){var e=this.pfx,t=this.model.get("src");return'\n      <div class="'.concat(e,'preview" style="background-image: url(\'').concat(t,'\');"></div>\n      <div class="').concat(e,"preview-bg ").concat(this.ppfx,'checker-bg"></div>\n    ')},getInfo:function(){var e=this.pfx,t=this.model,n=t.get("name"),r=t.get("width"),i=t.get("height"),o=t.get("unitDim"),s=r&&i?"".concat(r,"x").concat(i).concat(o):"";return n=n||t.getFilename(),'\n      <div class="'.concat(e,'name">').concat(n,'</div>\n      <div class="').concat(e,'dimensions">').concat(s,"</div>\n    ")},init:function(e){this.className+=" ".concat(this.pfx,"asset-image")},onClick:function(){var e=this.config.onClick,t=this.model;this.collection.trigger("deselectAll"),this.$el.addClass(this.pfx+"highlight"),Object(r.isFunction)(e)?e(t):this.updateTarget(this.collection.target)},onDblClick:function(){var e=this.em,t=this.model,n=this.config.onDblClick;Object(r.isFunction)(n)?n(t):(this.updateTarget(this.collection.target),e&&e.get("Modal").close());var i=this.collection.onSelect;Object(r.isFunction)(i)&&i(t)},onRemove:function(e){e.stopImmediatePropagation(),this.model.collection.remove(this.model)}})},"./src/asset_manager/view/AssetView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js");t.default=i.a.View.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.collection=e.collection;var t=e.config||{};this.config=t,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.em=t.em,this.className=this.pfx+"asset",this.listenTo(this.model,"destroy remove",this.remove),this.model.view=this;var n=this.init&&this.init.bind(this);n&&n(e)},template:function(){var e=this.pfx;return'\n      <div class="'.concat(e,'preview-cont">\n        ').concat(this.getPreview(),'\n      </div>\n      <div class="').concat(e,'meta">\n        ').concat(this.getInfo(),'\n      </div>\n      <div class="').concat(e,'close" data-toggle="asset-remove">\n        &Cross;\n      </div>\n    ')},updateTarget:function(e){e&&e.set&&(e.set("attributes",Object(o.clone)(e.get("attributes"))),e.set("src",this.model.get("src")))},getPreview:function(){return""},getInfo:function(){return""},render:function(){var e=this.el;return e.innerHTML=this.template(this,this.model),e.className=this.className,this}})},"./src/asset_manager/view/AssetsView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js");t.default=n.n(o).a.View.extend({events:{submit:"handleSubmit"},template:function(e){var t=e.pfx,n=e.ppfx,r=e.em,o=(i()(e,["pfx","ppfx","em"]),"");return this.config.showUrlInput&&(o='\n          <form class="'.concat(t,'add-asset">\n            <div class="').concat(n,"field ").concat(t,'add-field">\n              <input placeholder="').concat(r&&r.t("assetManager.inputPlh"),'"/>\n            </div>\n            <button class="').concat(n,'btn-prim">').concat(r&&r.t("assetManager.addButton"),'</button>\n            <div style="clear:both"></div>\n          </form>\n      ')),'\n    <div class="'.concat(t,'assets-cont">\n      <div class="').concat(t,'assets-header">\n        ').concat(o,'\n      </div>\n      <div class="').concat(t,'assets" data-el="assets"></div>\n      <div style="clear:both"></div>\n    </div>\n    ')},initialize:function(e){this.options=e,this.config=e.config,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.em=this.config.em;var t=this.collection;this.listenTo(t,"reset",this.renderAssets),this.listenTo(t,"add",this.addToAsset),this.listenTo(t,"remove",this.removedAsset),this.listenTo(t,"deselectAll",this.deselectAll)},handleSubmit:function(e){e.preventDefault();var t=this.getAddInput(),n=t&&t.value.trim(),r=this.config.handleAdd;n&&(t.value="",this.getAssetsEl().scrollTop=0,r?r.bind(this)(n):this.options.globalCollection.add(n,{at:0}))},getAssetsEl:function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},getAddInput:function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},removedAsset:function(e){this.collection.length||this.toggleNoAssets()},addToAsset:function(e){1==this.collection.length&&this.toggleNoAssets(1),this.addAsset(e)},addAsset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t,r=this.collection,i=this.config,o=new e.typeView({model:e,collection:r,config:i}).render().el;if(n)n.appendChild(o);else{var s=this.getAssetsEl();s&&s.insertBefore(o,s.firstChild)}return o},toggleNoAssets:function(e){var t=this.$el.find(".".concat(this.pfx,"assets"));if(e)t.empty();else{var n=this.config.noAssets;n&&t.append(n)}},deselectAll:function(){var e=this.pfx;this.$el.find(".".concat(e,"highlight")).removeClass("".concat(e,"highlight"))},renderAssets:function(){var e=this,t=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(this.collection.length),this.collection.each((function(n){return e.addAsset(n,t)})),n.append(t)},render:function(){var e=this.options.fu.render().el;return this.$el.empty(),this.$el.append(e).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this.rendered=1,this}})},"./src/asset_manager/view/FileUploader.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i),s=n("./src/utils/fetch.js");function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=o.a.View.extend({template:Object(r.template)('\n  <form>\n    <div id="<%= pfx %>title"><%= title %></div>\n    <input type="file" id="<%= uploadId %>" name="file" accept="*/*" <%= disabled ? \'disabled\' : \'\' %> <%= multiUpload ? \'multiple\' : \'\' %>/>\n    <div style="clear:both;"></div>\n  </form>\n  '),events:{},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e;var t=e.config||{};this.config=t,this.em=this.config.em,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.target=this.options.globalCollection||{},this.uploadId=this.pfx+"uploadFile",this.disabled=void 0!==t.disableUpload?t.disableUpload:!t.upload&&!t.embedAsBase64,this.multiUpload=void 0===t.multiUpload||t.multiUpload,this.events["change #"+this.uploadId]="uploadFile";var n=t.uploadFile;n?this.uploadFile=n.bind(this):!t.upload&&t.embedAsBase64&&(this.uploadFile=this.constructor.embedAsBase64),this.delegateEvents()},onUploadStart:function(){var e=this.config.em;e&&e.trigger("asset:upload:start")},onUploadEnd:function(e){var t=this.$el,n=this.config.em;n&&n.trigger("asset:upload:end",e);var r=t.find("input");r&&r.val("")},onUploadError:function(e){var t=this.config.em;console.error(e),this.onUploadEnd(e),t&&t.trigger("asset:upload:error",e)},onUploadResponse:function(e,t){var n,r=this.config.em,i=this.config,o=this.target;try{n="string"==typeof e?JSON.parse(e):e}catch(s){n=e}r&&r.trigger("asset:upload:response",n),i.autoAdd&&o&&o.add(n.data,{at:0}),this.onUploadEnd(e),t&&t(n)},uploadFile:function(e,t){var n=this,r=e.dataTransfer?e.dataTransfer.files:e.target.files,i=this.config,o=i.beforeUpload;if(!1!==(o&&o(r))){var a=new FormData,l=i.params,c=i.customFetch;for(var u in l)a.append(u,l[u]);if(this.multiUpload)for(var d=0;d<r.length;d++)a.append("".concat(i.uploadName,"[]"),r[d]);else r.length&&a.append(i.uploadName,r[0]);var h=i.upload,f=i.headers,p="X-Requested-With";if(void 0===f[p]&&(f[p]="XMLHttpRequest"),h){this.onUploadStart();var g={method:"post",credentials:i.credentials||"include",headers:f,body:a};return(c?c(h,g):Object(s.default)(h,g).then((function(e){return 1==(e.status/200|0)?e.text():e.text().then((function(e){return Promise.reject(e)}))}))).then((function(e){return n.onUploadResponse(e,t)})).catch((function(e){return n.onUploadError(e)}))}}},initDrop:function(){var e=this;!this.uploadForm&&(this.uploadForm=this.$el.find("form").get(0),"draggable"in this.uploadForm)&&(this.uploadForm.ondragover=function(){return this.className=e.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return this.className="",!1},this.uploadForm.ondrop=function(t){this.className="",t.preventDefault(),e.uploadFile(t)})},initDropzone:function(e){var t=this,n=0,r=this.config,i=e.model,o=e.el,s=i.get("Editor"),a=(i.get("Config"),i.get("Canvas").getBody()),l=this.ppfx,c="".concat(l,"dropzone-active"),u="".concat(l,"dropzone"),d=function(){o.className=o.className.replace(c,"").trim(),n=0},h=function(){return n||(o.className+=" ".concat(c),n=1),!1},f=function(){return d(),!1},p=function(e){if(d(),e.preventDefault(),e.stopPropagation(),t.uploadFile(e),r.openAssetsOnDrop&&s){var n=s.getSelected();s.runCommand("open-assets",{target:n,onSelect:function(){s.Modal.close(),s.AssetManager.setTarget(null)}})}return!1};e.$el.append('<div class="'.concat(u,'">').concat(r.dropzoneContent,"</div>")),d(),"draggable"in o&&[o,a].forEach((function(e){e.ondragover=h,e.ondragleave=f,e.ondrop=p}))},render:function(){var e=this.$el,t=this.pfx,n=this.em;return e.html(this.template({title:n&&n.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:t})),this.initDrop(),e.attr("class",t+"file-uploader"),this}},{embedAsBase64:function(e,t){var n=this,r={data:[]};if(FileReader){var i,o=[],s=/^(.+)\/(.+)$/,l=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}(e.dataTransfer?e.dataTransfer.files:e.target.files);try{var c=function(){var e=i.value,t=new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(i){var o,a=e.name,l=s.exec(e.type);if("image"===(o=l?l[1]:e.type)){var c={src:r.result,name:a,type:o,height:0,width:0},u=new Image;u.addEventListener("error",(function(e){n(e)})),u.addEventListener("load",(function(){c.height=u.height,c.width=u.width,t(c)})),u.src=c.src}else t(o?{src:r.result,name:a,type:o}:r.result)})),r.addEventListener("error",(function(e){n(e)})),r.addEventListener("abort",(function(e){n("Aborted")})),r.readAsDataURL(e)}));o.push(t)};for(l.s();!(i=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}Promise.all(o).then((function(e){r.data=e,n.onUploadResponse(r,t)}),(function(e){n.onUploadError(e)}))}else this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))}})},"./src/block_manager/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={appendTo:"",appendOnClick:0,blocks:[]}},"./src/block_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/block_manager/config/config.js"),a=n("./src/block_manager/model/Blocks.js"),l=n("./src/block_manager/model/Categories.js"),c=n("./src/block_manager/view/BlocksView.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={},i=[];return{name:"BlockManager",init:function(n){var o=(r=n||{}).em;for(var c in s.default)c in r||(r[c]=s.default[c]);return e=new a.default([]),t=new a.default([]),i=new l.default,e.listenTo(e,"add",(function(e){t.add(e),o&&o.trigger("block:add",e)})),e.listenTo(e,"remove",(function(e){t.remove(e),o&&o.trigger("block:remove",e)})),e.listenTo(e,"reset",(function(e){t.reset(e.models)})),this},getConfig:function(){return r},onLoad:function(){var e=this.getAll();!e.length&&e.reset(r.blocks)},postRender:function(){n=new c.default({collection:t,categories:i},r);var e=this.getConfig().appendTo;e&&(Object(o.isElement)(e)?e:document.querySelector(e)).appendChild(this.render(t.models))},add:function(t,n){var r=n||{};return r.id=t,e.add(r)},get:function(t){return e.get(t)},getAll:function(){return e},getAllVisible:function(){return t},remove:function(t){return e.remove(t)},getCategories:function(){return i},getContainer:function(){return n.el},render:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e||this.getAll().models;if(t.external){var s=new a.default(o);return new c.default({collection:s,categories:i},d(d({},r),t)).render().el}return n&&(n.updateConfig(t),n.collection.reset(o),n.rendered||(n.render(),n.rendered=1)),this.getContainer()}}}},"./src/block_manager/model/Block.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/block_manager/model/Category.js");t.default=i.a.Model.extend({defaults:{activate:0,select:0,resetId:0,label:"",disable:0,media:"",content:"",category:"",attributes:{}},initialize:function(){var e=this.get("category");e&&"string"==typeof e&&new o.default({id:e,label:e})}})},"./src/block_manager/model/Blocks.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/block_manager/model/Block.js");t.default=i.a.Collection.extend({model:o.default})},"./src/block_manager/model/Categories.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/block_manager/model/Category.js");t.default=i.a.Collection.extend({model:o.default})},"./src/block_manager/model/Category.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js");t.default=n.n(r).a.Model.extend({defaults:{id:"",label:"",open:!0,attributes:{}}})},"./src/block_manager/view/BlockView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/utils/mixins.js");t.default=i.a.View.extend({events:{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model;this.em=t.em,this.config=t,this.endDrag=this.endDrag.bind(this),this.ppfx=t.pStylePrefix||"",this.listenTo(n,"destroy remove",this.remove),this.listenTo(n,"change",this.render)},handleClick:function(){var e=this.config,t=this.model,n=this.em;if(e.appendOnClick){var r,i=e.getSorter(),o=t.get("content"),s=n.getSelected();if(i.setDropContent(o),s)if(i.validTarget(s.getEl(),o).valid)r=s;else{var a=s.parent();i.validTarget(a.getEl(),o).valid&&(r=a)}if(!r){var l=n.getWrapper();i.validTarget(l.getEl(),o).valid&&(r=l)}var c=r&&r.append(o)[0];c&&n.setSelected(c,{scroll:1})}},startDrag:function(e){var t=this.config,n=this.em,r=this.model.get("disable");if(0===e.button&&t.getSorter&&!this.el.draggable&&!r){n.refreshCanvas();var i=t.getSorter();i.setDragHelper(this.el,e),i.setDropContent(this.model.get("content")),i.startSort(this.el),Object(s.on)(document,"mouseup",this.endDrag)}},handleDragStart:function(e){var t=this.em,n=this.model,r=n.get("content"),i=Object(o.isObject)(r)?JSON.stringify(r):r;t.set("dragResult"),e.dataTransfer.setData("text",i),t.set("dragContent",r),t.trigger("block:drag:start",n,e)},handleDrag:function(e){this.em.trigger("block:drag",this.model,e)},handleDragEnd:function(){var e=this.em,t=this.model,n=e.get("dragResult");if(n){var r="activeOnRender",i=n.get&&n.get(r);(t.get("activate")||i)&&(n.trigger("active"),n.set(r,0)),t.get("select")&&e.setSelected(n),t.get("resetId")&&n.onAll((function(e){return e.resetId()}))}e.set({dragResult:null,dragContent:null}),e.trigger("block:drag:stop",n,t)},endDrag:function(e){Object(s.off)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},render:function(){var e=this.em,t=this.el,n=this.$el,r=this.ppfx,i=this.model,o=i.get("disable"),a=i.get("attributes")||{},l=a.class||"",c="".concat(r,"block"),u=e&&e.t("blockManager.labels.".concat(i.id))||i.get("label"),d=i.get("render"),h=i.get("media"),f=o?"".concat(c,"--disable"):"".concat(r,"four-color-h");n.attr(a),t.className="".concat(l," ").concat(c," ").concat(r,"one-bg ").concat(f).trim(),t.innerHTML="\n      ".concat(h?'<div class="'.concat(c,'__media">').concat(h,"</div>"):"",'\n      <div class="').concat(c,'-label">').concat(u,"</div>\n    "),t.title=t.textContent.trim(),t.setAttribute("draggable",!(!Object(s.hasDnd)(e)||o));var p=d&&d({el:t,model:i,className:c,prefix:r});return p&&(t.innerHTML=p),this}})},"./src/block_manager/view/BlocksView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/block_manager/view/BlockView.js"),c=n("./src/block_manager/view/CategoryView.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.a.View.extend({initialize:function(e,t){Object(a.bindAll)(this,"getSorter","onDrag","onDrop"),this.config=t||{},this.categories=e.categories||"",this.renderedCategories=[];var n=this.config.pStylePrefix||"";this.ppfx=n,this.noCatClass="".concat(n,"blocks-no-cat"),this.blockContClass="".concat(n,"blocks-c"),this.catsClass="".concat(n,"block-categories");var r=this.collection;this.listenTo(r,"add",this.addTo),this.listenTo(r,"reset",this.render),this.em=this.config.em,this.tac="test-tac",this.grabbingCls=this.ppfx+"grabbing",this.em&&(this.config.getSorter=this.getSorter,this.canvas=this.em.get("Canvas"))},updateConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=d(d({},this.config),e)},getSorter:function(){if(this.em){if(!this.sorter){var e=this.em.get("Utils"),t=this.canvas;this.sorter=new e.Sorter({container:t.getBody(),placer:t.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:t.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:this.em,canvasRelative:1})}return this.sorter}},onDrag:function(e){this.em.stopDefault(),this.em.trigger("block:drag:start",e)},onMove:function(e){this.em.trigger("block:drag:move",e)},onDrop:function(e){var t=this.em;t.runDefault(),e&&e.get&&(e.get("activeOnRender")&&(e.trigger("active"),e.set("activeOnRender",0)),t.trigger("block:drag:stop",e))},addTo:function(e){this.add(e)},add:function(e,t){var n=this.config,r=t||null,i=new l.default({model:e,attributes:e.get("attributes")},n).render().el,o=e.get("category");if(o&&this.categories&&!n.ignoreCategories){Object(a.isString)(o)?o={id:o,label:o}:Object(a.isObject)(o)&&!o.id&&(o.id=o.label);var s=this.categories.add(o),u=s.get("id"),d=this.renderedCategories[u],h=this.getCategoriesEl();return e.set("category",s),!d&&h&&(d=new c.default({model:s},this.config).render(),this.renderedCategories[u]=d,h.appendChild(d.el)),void(d&&d.append(i))}r?r.appendChild(i):this.append(i)},getCategoriesEl:function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},getBlocksEl:function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},append:function(e){var t=this.getBlocksEl();t&&t.appendChild(e)},render:function(){var e=this,t=this.ppfx,n=document.createDocumentFragment();this.catsEl=null,this.blocksEl=null,this.renderedCategories=[],this.el.innerHTML='\n      <div class="'.concat(this.catsClass,'"></div>\n      <div class="').concat(this.noCatClass,'">\n        <div class="').concat(this.blockContClass,'"></div>\n      </div>\n    '),this.collection.each((function(t){return e.add(t,n)})),this.append(n);var r="".concat(this.blockContClass,"s ").concat(t,"one-bg ").concat(t,"two-color");return this.$el.addClass(r),this}})},"./src/block_manager/view/CategoryView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js");t.default=n.n(i).a.View.extend({template:Object(r.template)('\n  <div class="<%= pfx %>title">\n    <i class="<%= pfx %>caret-icon"></i>\n    <%= label %>\n  </div>\n  <div class="<%= pfx %>blocks-c"></div>\n  '),events:{},initialize:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=e;var t=e.pStylePrefix||"";this.em=e.em,this.pfx=t,this.caretR="fa fa-caret-right",this.caretD="fa fa-caret-down",this.iconClass="".concat(t,"caret-icon"),this.activeClass="".concat(t,"open"),this.className="".concat(t,"block-category"),this.events["click .".concat(t,"title")]="toggle",this.listenTo(this.model,"change:open",this.updateVisibility),this.delegateEvents()},updateVisibility:function(){this.model.get("open")?this.open():this.close()},open:function(){this.el.className="".concat(this.className," ").concat(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},close:function(){this.el.className=this.className,this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},toggle:function(){var e=this.model;e.set("open",!e.get("open"))},getIconEl:function(){return this.iconEl||(this.iconEl=this.el.querySelector("."+this.iconClass)),this.iconEl},getBlocksEl:function(){return this.blocksEl||(this.blocksEl=this.el.querySelector("."+this.pfx+"blocks-c")),this.blocksEl},append:function(e){this.getBlocksEl().appendChild(e)},render:function(){var e=this.el,t=this.$el,n=this.model,r=this.em.t("blockManager.categories.".concat(n.id))||n.get("label");return e.innerHTML=this.template({pfx:this.pfx,label:r}),e.className=this.className,t.css({order:n.get("order")}),this.updateVisibility(),this}})},"./src/canvas/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:"",autoscrollLimit:50,notTextable:["button","a","input[type=checkbox]","input[type=radio]"]}},"./src/canvas/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./src/utils/mixins.js"),l=(n("./node_modules/underscore/modules/index-all.js"),n("./src/utils/Droppable.js")),c=n("./src/canvas/config/config.js"),u=n("./src/canvas/model/Canvas.js"),d=n("./src/canvas/view/CanvasView.js");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window,t.default=function(){var e,t,n={};return{getCanvasView:function(){return t},name:"Canvas",init:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=f(f(f({},c.default),r),{},{module:this}),this.em=n.em;var i=n.pStylePrefix;i&&(n.stylePrefix=i+n.stylePrefix),e=new u.default(r),t=new d.default({model:e,config:n});var o=n.em.get("DomComponents");return o&&this.setWrapper(o),this.model=e,this.startAutoscroll=this.startAutoscroll.bind(this),this.stopAutoscroll=this.stopAutoscroll.bind(this),this},getConfig:function(){return n},setWrapper:function(t){e.set("wrapper",t)},getElement:function(){return t.el},getFrame:function(t){return t?this.getFrames()[t]:e.get("frame")},getFrameEl:function(){var e=t.frame;return e&&e.el},getFramesEl:function(){return t.framesArea},getWindow:function(){return this.getFrameEl().contentWindow},getDocument:function(){var e=this.getFrameEl();return e&&e.contentDocument},getBody:function(){var e=this.getDocument();return e&&e.body},getWrapperEl:function(){var e=this.getBody();return e&&e.querySelector("#wrapper")},_getCompFrame:function(e){return e&&e._getFrame()},_getLocalEl:function(e,t,n){var r=e,i=this._getCompFrame(t);return i?i[n]():r},getGlobalToolsEl:function(){return t.toolsGlobEl},getToolsEl:function(e){return this._getLocalEl(t.toolsEl,e,"getToolsEl")},getHighlighter:function(e){return this._getLocalEl(t.hlEl,e,"getHighlighter")},getBadgeEl:function(e){return this._getLocalEl(t.badgeEl,e,"getBadgeEl")},getPlacerEl:function(){return t.placerEl},getGhostEl:function(){return t.ghostEl},getToolbarEl:function(){return t.toolbarEl},getResizerEl:function(){return t.resizerEl},getOffsetViewerEl:function(e){return this._getLocalEl(t.offsetEl,e,"getOffsetViewerEl")},getFixedOffsetViewerEl:function(){return t.fixedOffsetEl},render:function(){return t.render().el},getOffset:function(){var e=this.offset(this.getFrameEl()),t=this.offset(this.getElement());return{top:e.top-t.top,left:e.left-t.left}},offset:function(e){return t.offset(e)},setCustomBadgeLabel:function(e){n.customBadgeLabel=e},getElementPos:function(e,n){return t.getElementPos(e,n)},getElementOffsets:function(e){return t.getElementOffsets(e)},getRect:function(){var e=t.getPosition(),n=e.top,r=e.left;return f(f({},t.getCanvasOffset()),{},{topScroll:n,leftScroll:r})},getTargetToElementDim:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i||{},s=t.getPosition();if(s){var a=o.elPos||t.getElementPos(r),l=i.toRight||0,c=o.targetHeight||e.offsetHeight,u=o.targetWidth||e.offsetWidth,d=o.event||null,h=a.top-c,f=a.left;f+=l?a.width:0;var p=(f=l?f-u:f)<s.left?s.left:f,g=h<s.top?s.top:h,m={top:g=g>a.top+a.height?a.top+a.height:g,left:p,elementTop:a.top,elementLeft:a.left,elementWidth:a.width,elementHeight:a.height,targetWidth:e.offsetWidth,targetHeight:e.offsetHeight,canvasTop:s.top,canvasLeft:s.left,canvasWidth:s.width,canvasHeight:s.height};return d&&n.em&&n.em.trigger(d,m),m}},canvasRectOffset:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e){var t=e.defaultView;return t&&t.frameElement},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,s=n.em.getZoomDecimal(),a=t?"top":"left",l=e.ownerDocument,c=r.offset?i(l):{},u=c.offsetTop,d=void 0===u?0:u,h=c.offsetLeft,f=void 0===h?0:h,p=l.body||{},g=p.scrollTop,m=void 0===g?0:g,v=p.scrollLeft,b=void 0===v?0:v,y=t?m:b,w=t?d:f;return o[a]-(y-w)*s};return{top:o(e,1,t),left:o(e,0,t)}},getTargetToElementFixed:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.pos||this.getElementPos(e),i=n.canvasOff||this.canvasRectOffset(e,r),o=t.offsetHeight||0,s=t.offsetWidth||0,a=r.left+r.width,l=this.getCanvasView(),c=l.getPosition(),u=l.getFrameOffset(e),d=n.event,h=-o,f=r.width-s;f=r.left<-f?-r.left:f;var p=r.height+o,g=p<u.height;i.top<o&&(g?h+=p:h=-i.top<r.height?-i.top:r.height);var m={top:h,left:f=a>c.width?f-(a-c.width):f,canvasOffsetTop:i.top,canvasOffsetLeft:i.left};return d&&this.em.trigger(d,m),m},getMouseRelativePos:function(e,t){var n=0,r=0,i=(t||{}).subWinOffset,o=e.target.ownerDocument,s=o.defaultView||o.parentWindow,a=s.frameElement,l=i?s.pageYOffset:0,c=i?s.pageXOffset:0;if(a){var u=a.getBoundingClientRect();n=u.top||0,r=u.left||0}return{y:e.clientY+n-l,x:e.clientX+r-c}},getMouseRelativeCanvas:function(e,n){var r=this.getZoomDecimal(),i=t.getPosition(n);return{y:e.clientY*r+i.top,x:e.clientX*r+i.left}},hasFocus:function(){return this.getDocument().hasFocus()},isInputFocused:function(){var e=this.getDocument(),t=this.getFrameEl(),n=["body"].concat(i()(this.getConfig().notTextable)),r=t&&document.activeElement===t?e&&e.activeElement:document.activeElement;return r&&!n.some((function(e){return r.matches(e)}))},scrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.getElement)(e),r=n&&Object(a.getViewEl)(n);r&&r.scrollIntoView(t)},startAutoscroll:function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.startAutoscroll()},stopAutoscroll:function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.stopAutoscroll()},postRender:function(){Object(a.hasDnd)(n.em)&&(this.droppable=new l.default(n.em))},setZoom:function(t){return e.set("zoom",parseFloat(t)),this},getZoom:function(){return parseFloat(e.get("zoom"))},getZoomDecimal:function(){return this.getZoom()/100},getZoomMultiplier:function(){var e=this.getZoomDecimal();return e?1/e:1},toggleFramesEvents:function(e){this.getFramesEl().style.pointerEvents=e?"":"none"},getFrameWrapperEl:function(){return t.frame.getWrapper()},getFrames:function(){return e.get("frames").map((function(e){return e}))},addFrame:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.get("frames").add(f({},t),f(f({},n),{},{em:this.em}))}}}},"./src/canvas/model/Canvas.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/canvas/model/Frame.js"),s=n("./src/canvas/model/Frames.js");t.default=i.a.Model.extend({defaults:{frame:"",frames:"",wrapper:"",rulers:!1,zoom:100,x:0,y:0},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.em,n=e.styles,r=void 0===n?[]:n,i=e.scripts,a=void 0===i?[]:i,l=t&&t.getWrapper(),c=t&&t.getStyle(),u=new o.default({root:l,styles:c},e);r.forEach((function(e){return u.addLink(e)})),a.forEach((function(e){return u.addScript(e)})),this.em=t,this.set("frame",u),this.set("frames",new s.default([u],e)),this.listenTo(this,"change:zoom",this.onZoomChange),this.listenTo(t,"change:device",this.updateDevice)},updateDevice:function(){var e=this.em,t=e.getDeviceModel(),n=e.getCurrentFrameModel();if(n&&t){var r=t.attributes;n.set({width:r.width,height:r.height})}},onZoomChange:function(){this.get("zoom")<1&&this.set("zoom",1)}})},"./src/canvas/model/Frame.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),s=n.n(o),a=n("./node_modules/backbone/backbone.js"),l=n.n(a),c=n("./src/dom_components/model/Component.js"),u=n("./src/css_composer/model/CssRules.js"),d=n("./node_modules/underscore/modules/index-all.js");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=l.a.Model.extend({defaults:{wrapper:"",width:null,height:null,head:"",x:0,y:0,root:0,components:0,styles:0,attributes:{}},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.attributes,r=n.root,i=n.styles,o=n.components;this.set("head",[]),this.em=t.em;var s={em:t.em,config:t.em.get("DomComponents").getConfig(),frame:this};!r&&this.set("root",new c.default({type:"wrapper",components:o||[]},s)),(!i||Object(d.isString)(i))&&this.set("styles",new u.default(i,s))},remove:function(){this.view=0;var e=this.collection;return e&&e.remove(this)},getHead:function(){return s()(this.get("head"))},setHead:function(e){return this.set("head",s()(e))},addHeadItem:function(e){var t=this.getHead();t.push(e),this.setHead(t)},getHeadByAttr:function(e,t,n){return this.getHead().filter((function(r){return r.attributes&&r.attributes[e]==t&&(!n||n===r.tag)}))[0]},removeHeadByAttr:function(e,t,n){var r=this.getHead(),i=this.getHeadByAttr(e,t,n),o=r.indexOf(i);o>=0&&(r.splice(o,1),this.setHead(r))},addLink:function(e){var t="link";!this.getHeadByAttr("href",e,t)&&this.addHeadItem({tag:t,attributes:{href:e,rel:"stylesheet"}})},removeLink:function(e){this.removeHeadByAttr("href",e,"link")},addScript:function(e){var t="script";!this.getHeadByAttr("src",e,t)&&this.addHeadItem({tag:t,attributes:{src:e}})},removeScript:function(e){this.removeHeadByAttr("src",e,"script")},_emitUpdated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.em.trigger("frame:updated",f({frame:this},e))}})},"./src/canvas/model/Frames.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i),s=n("./src/canvas/model/Frame.js");t.default=o.a.Collection.extend({model:s.default,initialize:function(){Object(r.bindAll)(this,"itemLoaded")},itemLoaded:function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(0))},listenToLoad:function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(1)},listenToLoadItems:function(e){var t=this;this.forEach((function(n){return n[e?"on":"off"]("loaded",t.itemLoaded)}))}})},"./src/canvas/view/CanvasView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/utils/mixins.js"),c=n("./src/canvas/view/FramesView.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h,f=s.a.$;t.default=s.a.View.extend({events:{wheel:"onWheel"},template:function(){var e=this.pfx;return'\n      <div class="'.concat(e,'canvas__frames" data-frames></div>\n      <div id="').concat(e,'tools" class="').concat(e,'canvas__tools" data-tools></div>\n    ')},initialize:function(e){Object(a.bindAll)(this,"clearOff","onKeyPress","onCanvasMove"),Object(l.on)(window,"scroll resize",this.clearOff);var t=this.model,n=t.get("frames");this.config=e.config||{},this.em=this.config.em||{},this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.className=this.config.stylePrefix+"canvas";var r=this.em;this.frames=new c.default({collection:n,config:d(d({},this.config),{},{canvasView:this,renderContent:1})}),this.listenTo(r,"change:canvasOffset",this.clearOff),this.listenTo(r,"component:selected",this.checkSelected),this.listenTo(t,"change:zoom change:x change:y",this.updateFrames),this.listenTo(n,"loaded:all",(function(){return r.trigger("loaded")})),this.toggleListeners(1)},checkSelected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.scroll,r=this.em.get("currentFrame");n&&e.views.forEach((function(e){e._getFrame()!==r&&e.scrollIntoView(n)}))},remove:function(){s.a.View.prototype.remove.apply(this,arguments),this.toggleListeners()},preventDefault:function(e){e&&(e.preventDefault(),e._parentEvent&&e._parentEvent.preventDefault())},onCanvasMove:function(e){},toggleListeners:function(e){(e?l.on:l.off)(document,"keypress",this.onKeyPress)},onKeyPress:function(e){var t=this.em;" "!==Object(l.getKeyChar)(e)||1===t.getZoomDecimal()||t.get("Canvas").isInputFocused()||(this.preventDefault(e),t.get("Editor").runCommand("core:canvas-move"))},onWheel:function(e){if((e.ctrlKey||e.metaKey)&&this.em.getConfig("multiFrames")){this.preventDefault(e);var t=this.model,n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),r=t.get("zoom");t.set("zoom",r+2*n)}},updateFrames:function(e){var t=this.em,n=this.model.attributes,r=n.x,i=n.y,o=this.getZoom(),s={preserveSelected:1},a=o?1/o:1;this.framesArea.style.transform="scale(".concat(o,") translate(").concat(r*a,"px, ").concat(i*a,"px)"),this.clearOff(),t.stopDefault(s),t.trigger("canvas:update",e),h&&clearTimeout(h),h=setTimeout((function(){return t.runDefault(s)}),300)},getZoom:function(){return this.em.getZoomDecimal()},isElInViewport:function(e){var t=Object(l.getElement)(e),n=Object(l.getElRect)(t),r=this.getFrameOffset(t),i=n.top,o=n.left;return i>=0&&o>=0&&i<=r.height&&o<=r.width},offset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(l.getElRect)(e),r=e.ownerDocument.body,i=t.noScroll;return{top:n.top+(i?0:r.scrollTop),left:n.left+(i?0:r.scrollLeft),width:n.width,height:n.height}},clearOff:function(){this.frmOff=null,this.cvsOff=null},getFrameOffset:function(e){if(!this.frmOff||e){var t=this.frame.el;this.frmOff=this.offset((e?e.ownerDocument.defaultView.frameElement:t)||t)}return this.frmOff},getCanvasOffset:function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},getElementPos:function(e,t){var n=this.getZoom(),r=t||{},i=this.getFrameOffset(e),o=this.getCanvasOffset(),s=this.offset(e,t);return{top:s.top*n+(r.avoidFrameOffset?0:i.top)-o.top,left:s.left*n+(r.avoidFrameOffset?0:i.left)-o.left,height:s.height*n,width:s.width*n,zoom:n,rect:s}},getElementOffsets:function(e){var t=this;if(!e||Object(l.isTextNode)(e))return{};var n={},r=window.getComputedStyle(e);return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"].forEach((function(e){n[e]=parseFloat(r[e])*t.getZoom()})),n},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.frame.el.contentDocument;if(t){var n=t.body,r=this.getZoom(),i=this.getFrameOffset(),o=this.getCanvasOffset(),s=e.noScroll;return{top:i.top+(s?0:n.scrollTop)*r-o.top,left:i.left+(s?0:n.scrollLeft)*r-o.left,width:o.width,height:o.height}}},updateScript:function(e){var t=e.model,n=t.getId();e.scriptContainer||(e.scriptContainer=f('<div data-id="'.concat(n,'">')),this.getJsContainer().appendChild(e.scriptContainer.get(0))),e.el.id=n,e.scriptContainer.html("");var r=document.createElement("script");r.innerHTML="\n        setTimeout(function() {\n          var item = document.getElementById('".concat(n,"');\n          if (!item) return;\n          (function(){\n            ").concat(t.getScriptString(),";\n          }.bind(item))()\n        }, 1);"),setTimeout((function(){return e.scriptContainer.get(0).appendChild(r)}),0)},getJsContainer:function(e){var t=this.getFrameView(e);return t&&t.getJsContainer()},getFrameView:function(e){return e&&e._getFrame()||this.em.get("currentFrame")},render:function(){var e=this.el,t=this.$el,n=this.ppfx,r=this.model,i=this.em,o=this.frames,s=i.get("CssComposer"),a=r.get("wrapper");t.html(this.template());var l=t.find("[data-frames]");this.framesArea=l.get(0),this.wrapper=a,a&&"function"==typeof a.render&&r.get("frame").set({wrapper:a,root:a.getWrapper(),styles:s.getAll()});var c=t.find("[data-tools]");this.toolsWrapper=c.get(0),c.append('\n      <div class="'.concat(n,"tools ").concat(n,'tools-gl" style="pointer-events:none">\n        <div class="').concat(n,'placeholder">\n          <div class="').concat(n,'placeholder-int"></div>\n        </div>\n      </div>\n      <div id="').concat(n,'tools" style="pointer-events:none">\n        <div class="').concat(n,'badge"></div>\n        <div class="').concat(n,'ghost"></div>\n        <div class="').concat(n,'toolbar" style="pointer-events:all"></div>\n        <div class="').concat(n,'resizer"></div>\n        <div class="').concat(n,'offset-v"></div>\n        <div class="').concat(n,'offset-fixed-v"></div>\n      </div>\n    '));var u=e.querySelector("#".concat(n,"tools"));this.hlEl=e.querySelector(".".concat(n,"highlighter")),this.badgeEl=e.querySelector(".".concat(n,"badge")),this.placerEl=e.querySelector(".".concat(n,"placeholder")),this.ghostEl=e.querySelector(".".concat(n,"ghost")),this.toolbarEl=e.querySelector(".".concat(n,"toolbar")),this.resizerEl=e.querySelector(".".concat(n,"resizer")),this.offsetEl=e.querySelector(".".concat(n,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(n,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(n,"tools-gl")),this.toolsEl=u,this.el.className=this.className;var d=r.get("frames");return d.listenToLoad(),o.render(),i.setCurrentFrame(d.at(0).view),l.append(o.el),this.frame=d.at(0).view,this}})},"./src/canvas/view/FrameView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./node_modules/backbone/backbone.js"),l=n.n(a),c=n("./node_modules/underscore/modules/index-all.js"),u=n("./src/css_composer/view/CssRulesView.js"),d=n("./src/dom_components/view/ComponentView.js"),h=n("./src/utils/dom.js"),f=n("./src/utils/mixins.js");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=l.a.View.extend({tagName:"iframe",attributes:{allowfullscreen:"allowfullscreen","data-frame-el":!0},initialize:function(e){Object(c.bindAll)(this,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var t=this.model,n=this.el;this.config=g(g({},e.config||{}),{},{frameView:this}),this.ppfx=this.config.pStylePrefix||"",this.em=this.config.em,this.listenTo(t,"change:head",this.updateHead),t.view=this,Object(f.setViewEl)(n,this)},updateHead:function(){var e=this.getHead();Object(h.empty)(e),Object(h.appendVNodes)(e,this.model.getHead())},getEl:function(){return this.el},getWindow:function(){return this.getEl().contentWindow},getDoc:function(){return this.getEl().contentDocument},getHead:function(){return this.getDoc().querySelector("head")},getBody:function(){return this.getDoc().querySelector("body")},getWrapper:function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},getJsContainer:function(){return this.jsContainer||(this.jsContainer=Object(h.createEl)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},getToolsEl:function(){var e=this.config.frameWrapView;return e&&e.elTools},getGlobalToolsEl:function(){return this.em.get("Canvas").getGlobalToolsEl()},getHighlighter:function(){return this._getTool("[data-hl]")},getBadgeEl:function(){return this._getTool("[data-badge]")},getOffsetViewerEl:function(){return this._getTool("[data-offset]")},getRect:function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},getOffsetRect:function(){var e=this.el,t=this.getBody(),n=t.scrollTop,r=t.scrollLeft,i=e.offsetHeight,o=e.offsetWidth;return{top:e.offsetTop,left:e.offsetLeft,height:i,width:o,scrollTop:n,scrollLeft:r,scrollBottom:n+i,scrollRight:r+o}},_getTool:function(e){var t=this.getToolsEl();return this[e]||(this[e]=t.querySelector(e)),this[e]},remove:function(){var e=this.root,t=this.model;this._toggleEffects(),l.a.View.prototype.remove.apply(this,arguments),e.remove(),t.remove()},startAutoscroll:function(){var e=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout((function(){e._toggleAutoscrollFx(1),requestAnimationFrame(e.autoscroll)}),0)},autoscroll:function(){if(this.dragging){var e=this.em.get("Canvas"),t=this.getWindow(),n=this.getBody().scrollTop,r=this.lastClientY||0,i=e.getConfig().autoscrollLimit,o=this.getRect().height-i,s=n;r<i&&(s-=i-r),r>o&&(s+=r-o),s!==n&&s>0&&s<this.lastMaxHeight&&(this.getGlobalToolsEl().style.opacity=0,this.showGlobalTools(),t.scrollTo(0,s)),requestAnimationFrame(this.autoscroll)}},updateClientY:function(e){e.preventDefault(),this.lastClientY=Object(f.getPointerEvent)(e).clientY*this.em.getZoomDecimal()},showGlobalTools:Object(c.debounce)((function(){this.getGlobalToolsEl().style.opacity=""}),50),stopAutoscroll:function(){this.dragging&&this._toggleAutoscrollFx()},_toggleAutoscrollFx:function(e){this.dragging=e;var t=this.getWindow(),n=e?"on":"off",r={on:f.on,off:f.off};r[n](t,"mousemove dragover",this.updateClientY),r[n](t,"mouseup",this.stopAutoscroll)},render:function(){var e=this.el,t=this.config;return this.$el.attr({class:this.ppfx+"frame"}),t.scripts.length?this.renderScripts():t.renderContent&&(e.onload=this.renderBody.bind(this)),this},renderScripts:function(){var e=this,t=this.el,n=this.config;t.onload=function(){return function n(r){if(r.length>0){var i=r.shift(),o=Object(h.createEl)("script",g({type:"text/javascript"},Object(c.isString)(i)?{src:i}:i));o.onerror=o.onload=n.bind(null,r),t.contentDocument.head.appendChild(o)}else e.renderBody()}(i()(n.scripts))}},renderBody:function(){var e=this,t=this.config,n=this.model,r=this.ppfx,i=n.get("root"),o=n.get("styles"),s=t.em,a=this.getDoc(),l=this.getHead(),p=this.getBody(),m=this.getWindow(),v=s.get("Config"),b=[];m._isEditor=!0,t.styles.forEach((function(e){return b.push(Object(c.isString)(e)?{tag:"link",attributes:{href:e,rel:"stylesheet"}}:{tag:"link",attributes:g({rel:"stylesheet"},e)})})),b.length&&Object(h.appendVNodes)(l,b),Object(h.append)(p,"<style>\n      ".concat(v.baseCss||"","\n\n      .").concat(r,"dashed *[data-highlightable] {\n        outline: 1px dashed rgba(170,170,170,0.7);\n        outline-offset: -2px;\n      }\n\n      .").concat(r,"selected {\n        outline: 3px solid #3b97e3 !important;\n        outline-offset: -3px;\n      }\n\n      .").concat(r,"selected-parent {\n        outline: 2px solid ").concat("#ffca6f"," !important\n      }\n\n      .").concat(r,"no-select {\n        user-select: none;\n        -webkit-user-select:none;\n        -moz-user-select: none;\n      }\n\n      .").concat(r,"freezed {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n\n      .").concat(r,"no-pointer {\n        pointer-events: none;\n      }\n\n      .").concat(r,"plh-image {\n        background: #f5f5f5;\n        border: none;\n        height: 100px;\n        width: 100px;\n        display: block;\n        outline: 3px solid #ffca6f;\n        cursor: pointer;\n        outline-offset: -2px\n      }\n\n      .").concat(r,"grabbing {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n      }\n\n      .").concat(r,"is__grabbing {\n        overflow-x: hidden;\n      }\n\n      .").concat(r,"is__grabbing,\n      .").concat(r,"is__grabbing * {\n        cursor: grabbing !important;\n      }\n\n      ").concat(v.canvasCss||"","\n      ").concat(v.protectedCss||"","\n    </style>")),this.root=new d.default({model:i,config:g(g({},i.config),{},{frameView:this})}).render(),Object(h.append)(p,this.root.el),Object(h.append)(p,new u.default({collection:o,config:g(g({},s.get("CssComposer").getConfig()),{},{frameView:this})}).render().el),Object(h.append)(p,this.getJsContainer()),Object(f.on)(p,"click",(function(e){return e&&"A"==e.target.tagName&&e.preventDefault()})),Object(f.on)(p,"submit",(function(e){return e&&e.preventDefault()})),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousemove",class:"MouseEvent"},{event:"wheel",class:"WheelEvent"}].forEach((function(t){return t.event.split(" ").forEach((function(n){a.addEventListener(n,(function(n){return e.el.dispatchEvent(Object(h.createCustomEvent)(n,t.class))}))}))})),this._toggleEffects(1),n.trigger("loaded")},_toggleEffects:function(e){(e?f.on:f.off)(this.getWindow(),"".concat(h.motionsEv," resize"),this._emitUpdate)},_emitUpdate:function(){this.model._emitUpdated()}})},"./src/canvas/view/FrameWrapView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./src/canvas/view/FrameView.js"),l=n("./node_modules/underscore/modules/index-all.js"),c=n("./src/utils/dom.js"),u=n("./src/utils/Dragger.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.a.View.extend({events:{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l.bindAll)(this,"onScroll","frameLoaded","updateOffset","remove","startDrag");var n=this.model,r=h(h({},e.config||t),{},{frameWrapView:this}),i=r.canvasView,o=r.em;this.cv=i,this.config=r,this.em=o,this.canvas=o&&o.get("Canvas"),this.ppfx=r.pStylePrefix||"",this.frame=new a.default({model:n,config:r}),this.classAnim="".concat(this.ppfx,"frame-wrapper--anim"),this.listenTo(n,"loaded",this.frameLoaded),this.listenTo(n,"change:x change:y",this.updatePos),this.listenTo(n,"change:width change:height",this.updateSize),this.updatePos(),this.setupDragger()},setupDragger:function(){var e,t,n,r=this,i=this.canvas,o=this.model,s=function(e){i.toggleFramesEvents(e)};this.dragger=new u.default({onStart:function(){var i=o.attributes,a=i.x,l=i.y;n=r.em.getZoomMultiplier(),e=a,t=l,s()},onEnd:function(){return s(1)},setPosition:function(r){o.set({x:e+r.x*n,y:t+r.y*n})}})},startDrag:function(e){e&&this.dragger.start(e)},remove:function(){return s.a.View.prototype.remove.apply(this,arguments),this.frame.remove(),this},updateOffset:Object(l.debounce)((function(){var e=this.$el,t=this.frame;this.em.runDefault({preserveSelected:1}),e.removeClass(this.classAnim),t.model._emitUpdated()})),updatePos:function(e){var t=this.model.attributes,n=t.x,r=t.y,i=this.el.style;this.frame.rect=0,i.left=isNaN(n)?n:"".concat(n,"px"),i.top=isNaN(r)?r:"".concat(r,"px"),e&&this.updateOffset()},updateSize:Object(l.debounce)((function(){this.updateDim()})),updateDim:function(){var e=this.em,t=this.el,n=this.$el,r=this.model,i=this.classAnim,o=r.attributes,s=o.width,a=o.height,u=t.style,d=s||"",f=a||"",p=(u.width||"")==d&&(u.height||"")==f;if(this.frame.rect=0,n.addClass(i),u.width=Object(l.isNumber)(d)?"".concat(d).concat("px"):d,u.height=Object(l.isNumber)(f)?"".concat(f).concat("px"):f,Object(l.isNull)(s)||Object(l.isNull)(a)){var g=h(h({},s?{}:{width:t.offsetWidth}),a?{}:{height:t.offsetHeight});r.set(g,{silent:1})}e.stopDefault({preserveSelected:1}),p?this.updateOffset():n.one(c.motionsEv,this.updateOffset)},onScroll:function(){var e=this.frame;this.em.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},frameLoaded:function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},render:function(){var e=this.frame,t=this.$el,n=this.ppfx,r=this.cv,i=this.model,o=this.el,s=i.attributes.onRender;e.render(),t.empty().attr({class:"".concat(n,"frame-wrapper")}).append('\n      <div class="'.concat(n,'frame-wrapper__top gjs-two-color" data-frame-top>\n        <div class="').concat(n,'frame-wrapper__name" data-action-move>\n          ').concat(i.get("name")||"",'\n        </div>\n        <div class="').concat(n,'frame-wrapper__top-r">\n          <div class="').concat(n,'frame-wrapper__icon" data-action-remove style="display: none">\n            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>\n          </div>\n        </div>\n      </div>\n      <div class="').concat(n,'frame-wrapper__right" data-frame-right></div>\n      <div class="').concat(n,'frame-wrapper__left" data-frame-left></div>\n      <div class="').concat(n,'frame-wrapper__bottom" data-frame-bottom></div>\n      ')).append(e.el);var a=Object(c.createEl)("div",{class:"".concat(n,"tools"),style:"pointer-events:none; opacity: 0"},'\n      <div class="'.concat(n,'highlighter" data-hl></div>\n      <div class="').concat(n,'badge" data-badge></div>\n      <div class="').concat(n,'placeholder">\n        <div class="').concat(n,'placeholder-int"></div>\n      </div>\n      <div class="').concat(n,'ghost"></div>\n      <div class="').concat(n,'toolbar" style="pointer-events:all"></div>\n      <div class="').concat(n,'resizer"></div>\n      <div class="').concat(n,'offset-v" data-offset>\n        <div class="gjs-marginName" data-offset-m>\n          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>\n          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>\n          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>\n          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>\n        </div>\n        <div class="gjs-paddingName" data-offset-m>\n          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>\n          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>\n          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>\n          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>\n        </div>\n      </div>\n      <div class="').concat(n,'offset-fixed-v"></div>\n    '));return this.elTools=a,r.toolsWrapper.appendChild(a),s&&s({el:o,elTop:o.querySelector("[data-frame-top]"),elRight:o.querySelector("[data-frame-right]"),elBottom:o.querySelector("[data-frame-bottom]"),elLeft:o.querySelector("[data-frame-left]"),frame:i,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this}})},"./src/canvas/view/FramesView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/domain_abstract/view/DomainViews.js"),i=n("./src/canvas/view/FrameWrapView.js");t.default=r.default.extend({itemView:i.default,autoAdd:1,init:function(){this.listenTo(this.collection,"reset",this.render)},onRender:function(){var e=this.config.em;e&&this.$el.attr({class:"".concat(e.getConfig("stylePrefix"),"frames")})}})},"./src/code_manager/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"cm-",inlineCss:!1}},"./src/code_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./src/code_manager/config/config.js"),o=n("./src/code_manager/model/HtmlGenerator.js"),s=n("./src/code_manager/model/CssGenerator.js"),a=n("./src/code_manager/model/JsonGenerator.js"),l=n("./src/code_manager/model/JsGenerator.js"),c=n("./src/code_manager/model/CodeMirrorEditor.js"),u=n("./src/code_manager/view/EditorView.js");t.default=function(){var e={},t={},n={},d={},h={},f="CodeMirror";return{getConfig:function(){return e},config:e,EditorView:u.default,name:"CodeManager",init:function(t){for(var r in e=t||{},i.default)r in e||(e[r]=i.default[r]);var u=e.pStylePrefix;return u&&(e.stylePrefix=u+e.stylePrefix),n.html=new o.default,n.css=new s.default,n.json=new a.default,n.js=new l.default,h.CodeMirror=new c.default,this.loadDefaultGenerators().loadDefaultViewers(),this},addGenerator:function(e,n){return t[e]=n,this},getGenerator:function(e){return t[e]||null},getGenerators:function(){return t},addViewer:function(e,t){return d[e]=t,this},getViewer:function(e){return d[e]||null},getViewers:function(){return d},createViewer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.isUndefined)(e.type)?f:e.type,n=this.getViewer(t)&&this.getViewer(t).clone(),i=document.createElement("div"),o=document.createElement("textarea");return i.appendChild(o),n.set(e),n.init(o),n.setElement(i),n},updateViewer:function(e,t){e.setContent(t)},getCode:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.em=e.em;var i=this.getGenerator(n);return i?i.build(t,r):""},loadDefaultGenerators:function(){for(var e in n)this.addGenerator(e,n[e]);return this},loadDefaultViewers:function(){for(var e in h)this.addViewer(e,h[e]);return this}}}},"./src/code_manager/model/CodeMirrorEditor.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./node_modules/backbone/backbone.js"),a=n.n(s),l=n("./node_modules/codemirror/lib/codemirror.js"),c=n.n(l);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n("./node_modules/codemirror/mode/htmlmixed/htmlmixed.js"),n("./node_modules/codemirror/mode/css/css.js"),n("./node_modules/codemirror-formatting/formatting.js"),t.default=a.a.Model.extend({defaults:{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0},init:function(e){return Object(o.bindAll)(this,"onChange"),this.editor=c.a.fromTextArea(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=e,this.editor.on("change",this.onChange),this},onChange:function(){this.trigger("update",this)},getEditor:function(){return this.editor},getElement:function(){return this.element},setElement:function(e){return this.element=e,this},refresh:function(){return this.getEditor().refresh(),this},focus:function(){return this.getEditor().focus(),this},getContent:function(){var e=this.getEditor();return e&&e.getValue()},setContent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.editor;r&&(r.setValue(e),r.autoFormatRange&&(c.a.commands.selectAll(r),r.autoFormatRange(r.getCursor(!0),r.getCursor(!1)),c.a.commands.goDocStart(r)),!n.noRefresh&&setTimeout((function(){return t.refresh()})))}})},"./src/code_manager/model/CssGenerator.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=Number.MAX_VALUE;t.default=i.a.Model.extend({initialize:function(){this.compCls=[],this.ids=[]},buildFromModel:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="",i=this.em,o=i&&i.getConfig("avoidInlineStyle"),s=e.styleToString(),a=e.get("classes"),l=n.wrapperIsBody,c=e.get("wrapper");if(this.ids.push("#".concat(e.getId())),a.each((function(e){return t.compCls.push(e.getFullName())})),!o&&s){var u="#".concat(e.getId());r="".concat(u=l&&c?"body":u,"{").concat(s,"}")}var d=e.components();return d.each((function(e){return r+=t.buildFromModel(e,n)})),r},build:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.cssc,i=n.em||"";this.em=i,this.compCls=[],this.ids=[];var s=this.buildFromModel(e,n),a=Object(o.isUndefined)(n.clearStyles)&&i?i.getConfig("clearStyles"):n.clearStyles;if(r){var l=r.getAll(),c={},u=[];l.each((function(e){var r=e.getAtRule();if(r){var i=c[r];i?i.push(e):c[r]=[e]}else s+=t.buildFromRule(e,u,n)})),this.sortMediaObject(c).forEach((function(e){var r="",i=e.key;e.value.forEach((function(e){var o=t.buildFromRule(e,u,n);e.get("singleAtRule")?s+="".concat(i,"{").concat(o,"}"):r+=o})),r&&(s+="".concat(i,"{").concat(r,"}"))})),i&&a&&l.remove(u)}return s},buildFromRule:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="",s=e.selectorsToString({skipAdd:1}),a=e.get("selectorsAdd"),l=e.get("singleAtRule");if(e.get("selectors").each((function(e){var t=e.getFullName();(r.compCls.indexOf(t)>=0||r.ids.indexOf(t)>=0||i.keepUnusedStyles)&&(n=1)})),s&&n||a||l){var c=e.getDeclaration();c&&(o+=c)}else t.push(e);return o},getQueryLength:function(e){var t=/(-?\d*\.?\d+)\w{0,}/.exec(e);return t?parseFloat(t[1]):s},sortMediaObject:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];return Object(o.each)(t,(function(e,t){return n.push({key:t,value:e})})),n.sort((function(t,n){var r=[t.key,n.key].every((function(e){return-1!==e.indexOf("min-width")})),i=r?n.key:t.key;return e.getQueryLength(r?t.key:n.key)-e.getQueryLength(i)}))}})},"./src/code_manager/model/HtmlGenerator.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=n.n(o).a.Model.extend({build:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.get("components");return t.exportWrapper?e.toHTML(a({},t.wrapperIsBody&&{tag:"body"})):this.buildModels(n)},buildModels:function(e){var t="";return e.each((function(e){t+=e.toHTML()})),t}})},"./src/code_manager/model/JsGenerator.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js");t.default=n.n(i).a.Model.extend({mapModel:function(e){var t="",n=e.get("script-export")||e.get("script"),i=e.get("type"),o=e.get("components"),s=e.getId();if(n){var a=e.get("attributes");a=Object(r.extend)({},a,{id:s}),e.set("attributes",a,{silent:1});var l=e.getScriptString(n);if(e.get("scriptUpdated"))this.mapJs[i+"-"+s]={ids:[s],code:l};else{var c=this.mapJs[i];c?c.ids.push(s):this.mapJs[i]={ids:[s],code:l}}}return o.each((function(e){t+=this.mapModel(e)}),this),t},build:function(e){this.mapJs={},this.mapModel(e);var t="";for(var n in this.mapJs){var r=this.mapJs[n],i="#"+r.ids.join(", #");t+="\n        var items = document.querySelectorAll('".concat(i,"');\n        for (var i = 0, len = items.length; i < len; i++) {\n          (function(){").concat(r.code,"}.bind(items[i]))();\n        }")}return t}})},"./src/code_manager/model/JsonGenerator.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i);t.default=o.a.Model.extend({build:function(e){var t=e.toJSON();return this.beforeEach(t),Object(r.each)(t,(function(e,n){var r=t[n];if(r instanceof o.a.Model)t[n]=this.build(r);else if(r instanceof o.a.Collection){var i=r;t[n]=[],i.length&&i.each((function(e,r){t[n][r]=this.build(e)}),this)}}),this),t},beforeEach:function(e){delete e.status}})},"./src/code_manager/view/EditorView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js");t.default=n.n(i).a.View.extend({template:Object(r.template)('\n  <div class="<%= pfx %>editor" id="<%= pfx %><%= codeName %>">\n  \t<div id="<%= pfx %>title"><%= label %></div>\n  \t<div id="<%= pfx %>code"></div>\n  </div>'),initialize:function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix},render:function(){var e=this.model.toJSON();return e.pfx=this.pfx,this.$el.html(this.template(e)),this.$el.attr("class",this.pfx+"editor-c"),this.$el.find("#"+this.pfx+"code").append(this.model.get("input")),this}})},"./src/commands/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"com-",defaults:[],strict:1}},"./src/commands/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/commands/view/CommandAbstract.js"),c=n("./src/commands/config/config.js"),u=n("./src/dom_components/model/Component.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t={},r={},o={},s={},d=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]];return{CommandAbstract:l.default,name:"Commands",init:function(){var r=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=h(h({},c.default),s),e=t.em;var l=t.pStylePrefix;return l&&(t.stylePrefix=l+t.stylePrefix),Object.keys(t.defaults).forEach((function(e){var n=t.defaults[e];n.id&&r.add(n.id,n)})),o["tlb-delete"]={run:function(e){return e.runCommand("core:component-delete")}},o["tlb-clone"]={run:function(e){e.runCommand("core:copy"),e.runCommand("core:paste")}},o["tlb-move"]={run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.getModel(),o=n&&n.event,s=n.target,l=s||e.getSelected(),c=s?[s]:i()(e.getSelectedAll()),d=o&&"dragstart"==o.type,h={preserveSelected:1},f=["absolute","translate"],p=l.get("dmode")||r.get("dmode"),g=function(){return r.stopDefault(h)},m=Object(a.includes)(f,p);if(c.forEach((function(e){return e.trigger("disable")})),!l||!l.get("draggable"))return r.logWarning("The element is not draggable");d?setTimeout(g,0):g();var v=function(e){r.trigger("".concat(u.eventDrag,":start"),e)},b=function(e){r.trigger(u.eventDrag,e)},y=function(t,n,i){r.runDefault(h),c.forEach((function(e){return e.set("status","selected")})),e.select(c),l.emitUpdate(),r.trigger("".concat(u.eventDrag,":end"),i),(m||i.cancelled)&&r.set("_cmpDrag",1)};if(m)e.runCommand("core:component-drag",{guidesInfo:1,mode:p,target:l,onStart:v,onDrag:b,onEnd:y,event:o});else{d&&o.dataTransfer.setDragImage(l.view.el,0,0);var w=e.Commands.get("move-comp");w.onStart=v,w.onDrag=b,w.onEndMoveFromModel=y,w.initSorterFromModels(c)}c.forEach((function(e){return e.set("status","freezed-selected")}))}},o["core:undo"]=function(e){return e.UndoManager.undo()},o["core:redo"]=function(e){return e.UndoManager.redo()},d.forEach((function(t){var r=t[2],i=n("./src/commands/view sync recursive ^\\.\\/.*$")("./".concat(t[1])).default,s="core:".concat(t[0]);o[s]=i,r&&(o[r]=i,["run","stop"].forEach((function(t){e.on("".concat(t,":").concat(r),(function(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e).trigger.apply(n,["".concat(t,":").concat(s)].concat(i))}))})))})),t.em&&(t.model=t.em.get("Canvas")),this.loadDefaultCommands(),this},add:function(e,t){return Object(a.isFunction)(t)&&(t={run:t}),t.stop||(t.noStop=1),delete t.initialize,t.id=e,r[e]=l.default.extend(t),this},get:function(n){var i=r[n];return Object(a.isFunction)(i)?(i=new i(t),r[n]=i):i||e.logWarning("'".concat(n,"' command not found")),i},extend:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get(e);if(n){var r=h(h({},n.constructor.prototype),t);this.add(e,r);var i=d.filter((function(t){return"core:".concat(t[0])===e&&t[2]}))[0];i&&this.add(i[2],r)}return this},has:function(e){return!!r[e]},getAll:function(){return r},run:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.runCommand(this.get(e),t)},stop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.stopCommand(this.get(e),t)},isActive:function(e){return this.getActive().hasOwnProperty(e)},getActive:function(){return s},loadDefaultCommands:function(){for(var e in o)this.add(e,o[e]);return this},runCommand:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.run){var o=n.id,a=e.get("Editor");this.isActive(o)&&!i.force&&t.strict||(r=n.callRun(a,i),o&&n.stop&&!n.noStop&&!i.abort&&(s[o]=r))}return r},stopCommand:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.run){var o=n.id,a=e.get("Editor");(this.isActive(o)||i.force||!t.strict)&&(o&&delete s[o],r=n.callStop(a,i))}return r},create:function(e){return e.stop||(e.noStop=1),new(l.default.extend(e))(t)}}}},"./src/commands/view sync recursive ^\\.\\/.*$":function(e,t,n){var r={"./CanvasClear":"./src/commands/view/CanvasClear.js","./CanvasClear.js":"./src/commands/view/CanvasClear.js","./CanvasMove":"./src/commands/view/CanvasMove.js","./CanvasMove.js":"./src/commands/view/CanvasMove.js","./CommandAbstract":"./src/commands/view/CommandAbstract.js","./CommandAbstract.js":"./src/commands/view/CommandAbstract.js","./ComponentDelete":"./src/commands/view/ComponentDelete.js","./ComponentDelete.js":"./src/commands/view/ComponentDelete.js","./ComponentDrag":"./src/commands/view/ComponentDrag.js","./ComponentDrag.js":"./src/commands/view/ComponentDrag.js","./ComponentEnter":"./src/commands/view/ComponentEnter.js","./ComponentEnter.js":"./src/commands/view/ComponentEnter.js","./ComponentExit":"./src/commands/view/ComponentExit.js","./ComponentExit.js":"./src/commands/view/ComponentExit.js","./ComponentNext":"./src/commands/view/ComponentNext.js","./ComponentNext.js":"./src/commands/view/ComponentNext.js","./ComponentPrev":"./src/commands/view/ComponentPrev.js","./ComponentPrev.js":"./src/commands/view/ComponentPrev.js","./ComponentStyleClear":"./src/commands/view/ComponentStyleClear.js","./ComponentStyleClear.js":"./src/commands/view/ComponentStyleClear.js","./CopyComponent":"./src/commands/view/CopyComponent.js","./CopyComponent.js":"./src/commands/view/CopyComponent.js","./DeleteComponent":"./src/commands/view/DeleteComponent.js","./DeleteComponent.js":"./src/commands/view/DeleteComponent.js","./ExportTemplate":"./src/commands/view/ExportTemplate.js","./ExportTemplate.js":"./src/commands/view/ExportTemplate.js","./Fullscreen":"./src/commands/view/Fullscreen.js","./Fullscreen.js":"./src/commands/view/Fullscreen.js","./MoveComponent":"./src/commands/view/MoveComponent.js","./MoveComponent.js":"./src/commands/view/MoveComponent.js","./OpenAssets":"./src/commands/view/OpenAssets.js","./OpenAssets.js":"./src/commands/view/OpenAssets.js","./OpenBlocks":"./src/commands/view/OpenBlocks.js","./OpenBlocks.js":"./src/commands/view/OpenBlocks.js","./OpenLayers":"./src/commands/view/OpenLayers.js","./OpenLayers.js":"./src/commands/view/OpenLayers.js","./OpenStyleManager":"./src/commands/view/OpenStyleManager.js","./OpenStyleManager.js":"./src/commands/view/OpenStyleManager.js","./OpenTraitManager":"./src/commands/view/OpenTraitManager.js","./OpenTraitManager.js":"./src/commands/view/OpenTraitManager.js","./PasteComponent":"./src/commands/view/PasteComponent.js","./PasteComponent.js":"./src/commands/view/PasteComponent.js","./Preview":"./src/commands/view/Preview.js","./Preview.js":"./src/commands/view/Preview.js","./Resize":"./src/commands/view/Resize.js","./Resize.js":"./src/commands/view/Resize.js","./SelectComponent":"./src/commands/view/SelectComponent.js","./SelectComponent.js":"./src/commands/view/SelectComponent.js","./SelectPosition":"./src/commands/view/SelectPosition.js","./SelectPosition.js":"./src/commands/view/SelectPosition.js","./ShowOffset":"./src/commands/view/ShowOffset.js","./ShowOffset.js":"./src/commands/view/ShowOffset.js","./SwitchVisibility":"./src/commands/view/SwitchVisibility.js","./SwitchVisibility.js":"./src/commands/view/SwitchVisibility.js"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="./src/commands/view sync recursive ^\\.\\/.*$"},"./src/commands/view/CanvasClear.js":function(e,t,n){"use strict";n.r(t),t.default={run:function(e){e.DomComponents.clear(),e.CssComposer.clear()}}},"./src/commands/view/CanvasMove.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./src/utils/mixins.js"),o=n("./src/utils/Dragger.js");t.default={run:function(e){Object(r.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=e,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(e){this.toggleMove(),this.disableDragger()},onKeyUp:function(e){" "===Object(i.getKeyChar)(e)&&this.editor.stopCommand(this.id)},enableDragger:function(e){this.toggleDragger(1,e)},disableDragger:function(e){this.toggleDragger(0,e)},toggleDragger:function(e,t){var n=this.canvasModel,r=this.em,i=this.dragger,s=e?"add":"remove";this.getCanvas().classList[s]("".concat(this.ppfx,"is__grabbing")),i||(i=new o.default({getPosition:function(){return{x:n.get("x"),y:n.get("y")}},setPosition:function(e){n.set({x:e.x,y:e.y})},onStart:function(e,t){r.trigger("canvas:move:start",t)},onDrag:function(e,t){r.trigger("canvas:move",t)},onEnd:function(e,t){r.trigger("canvas:move:end",t)}}),this.dragger=i),e?i.start(t):i.stop()},toggleMove:function(e){var t=this.ppfx,n=e?"add":"remove",r=e?"on":"off",o={on:i.on,off:i.off},s=this.getCanvas(),a=["".concat(t,"is__grab")];!e&&a.push("".concat(t,"is__grabbing")),a.forEach((function(e){return s.classList[n](e)})),o[r](document,"keyup",this.onKeyUp),o[r](s,"mousedown",this.enableDragger),o[r](document,"mouseup",this.disableDragger)}}},"./src/commands/view/CommandAbstract.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js");t.default=n.n(r).a.View.extend({initialize:function(e){this.config=e||{},this.editorModel=this.em=this.config.em||{},this.pfx=this.config.stylePrefix,this.ppfx=this.config.pStylePrefix,this.hoverClass=this.pfx+"hover",this.badgeClass=this.pfx+"badge",this.plhClass=this.pfx+"placeholder",this.freezClass=this.ppfx+"freezed",this.canvas=this.em.get&&this.em.get("Canvas"),this.em.get&&this.setElement(this.getCanvas()),this.canvas&&(this.$canvas=this.$el,this.canvasTool=this.getCanvasTools()),this.init(this.config)},onFrameScroll:function(e){},getCanvas:function(){return this.canvas.getElement()},getCanvasBody:function(){return this.canvas.getBody()},getCanvasWrapper:function(){return this.canvas.getWrapperEl()},getCanvasTools:function(){return this.canvas.getToolsEl()},offset:function(e){var t=e.getBoundingClientRect();return{top:t.top+e.ownerDocument.body.scrollTop,left:t.left+e.ownerDocument.body.scrollLeft}},init:function(e){},callRun:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.id;if(e.trigger("run:".concat(n,":before"),t),!t||!t.abort){var r=t.sender||e,i=this.run(e,r,t);return e.trigger("run:".concat(n),i,t),e.trigger("run",n,i,t),i}e.trigger("abort:".concat(n),t)},callStop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.id,r=t.sender||e;e.trigger("stop:".concat(n,":before"),t);var i=this.stop(e,r,t);return e.trigger("stop:".concat(n),i,t),e.trigger("stop",n,i,t),i},stopCommand:function(){this.em.get("Commands").stop(this.id)},run:function(e,t){},stop:function(e,t){}})},"./src/commands/view/ComponentDelete.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js");t.default={run:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=r.component||e.getSelectedAll();return s=Object(o.isArray)(s)?i()(s):[s],e.select(null),s.forEach((function(e){if(!e||!e.get("removable"))return n.em.logWarning("The element is not removable",{component:e});e.remove()})),s}}},"./src/commands/view/ComponentDrag.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/utils/Dragger.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c="dmode";t.default={run:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var i=r.target,a=r.event,u=r.mode,d=r.dragger,h=void 0===d?{}:d,f=i.getEl(),p=l({doc:f.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return n.guidesStatic},guidesTarget:function(){return n.guidesTarget}},h);this.setupGuides(),this.opts=r,this.editor=e,this.em=e.getModel(),this.target=i,this.isTran="translate"==u,this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var g=this.dragger;return g?g.setOptions(p):(g=new s.default(p),this.dragger=g),a&&g.start(a),this.toggleDrag(1),this.em.trigger("".concat(c,":start"),this.getEventOpts()),g},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach((function(e){var t=e.guide;t&&t.parentNode.removeChild(t)})),this.guides=[]},getGuidesContainer:function(){var e=this,t=this.guidesEl;if(!t){var n=this.editor,r=this.em,i=this.opts,s=n.getConfig("stylePrefix"),a=document.createElement("div"),l=document.createElement("div"),c='<div class="'.concat(s,"guide-info__line ").concat(s,'danger-bg">\n        <div class="').concat(s,"guide-info__content ").concat(s,'danger-color"></div>\n      </div>');(t=document.createElement("div")).className="".concat(s,"guides"),a.className="".concat(s,"guide-info ").concat(s,"guide-info__x"),l.className="".concat(s,"guide-info ").concat(s,"guide-info__y"),a.innerHTML=c,l.innerHTML=c,t.appendChild(a),t.appendChild(l),n.Canvas.getGlobalToolsEl().appendChild(t),this.guidesEl=t,this.elGuideInfoX=a,this.elGuideInfoY=l,this.elGuideInfoContentX=a.querySelector(".".concat(s,"guide-info__content")),this.elGuideInfoContentY=l.querySelector(".".concat(s,"guide-info__content")),r.on("canvas:update frame:scroll",Object(o.debounce)((function(){e.updateGuides(),i.debug&&e.guides.forEach((function(t){return e.renderGuide(t)}))}),200))}return t},getGuidesStatic:function(){var e=this,t=[],n=this.target.getEl(),r=n.parentNode,i=void 0===r?{}:r;return Object(o.each)(i.children,(function(r){return t=t.concat(n!==r?e.getElementGuides(r):[])})),t.concat(this.getElementGuides(i))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(e){var t,n,r=this;(e||this.guides).forEach((function(e){var i=e.origin,s=t===i?n:r.getElementPos(i);t=i,n=s,Object(o.each)(r.getGuidePosUpdate(e,s),(function(t,n){return e[n]=t})),e.originRect=s}))},getGuidePosUpdate:function(e,t){var n={},r=t.top,i=t.height,o=t.left,s=t.width;switch(e.type){case"t":n.y=r;break;case"b":n.y=r+i;break;case"l":n.x=o;break;case"r":n.x=o+s;break;case"x":n.x=o+s/2;break;case"y":n.y=r+i/2}return n},renderGuide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.guide||document.createElement("div"),n="px",r=e.active?2:1,i=t.children[0];return t.style="position: absolute; background-color: ".concat(e.active?"green":"red",";"),t.children.length||((i=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",t.appendChild(i)),e.y?(t.style.width="100%",t.style.height="".concat(r).concat(n),t.style.top="".concat(e.y).concat(n),t.style.left=0):(t.style.width="".concat(r).concat(n),t.style.height="100%",t.style.left="".concat(e.x).concat(n),t.style.top="0".concat(n)),!e.guide&&this.guidesContainer.appendChild(t),t},getElementPos:function(e){return this.editor.Canvas.getElementPos(e,{noScroll:1})},getElementGuides:function(e){var t=this,n=this.opts,r=this.getElementPos(e),i=r.top,o=r.height,s=r.left,a=r.width,c=[{type:"t",y:i},{type:"b",y:i+o},{type:"l",x:s},{type:"r",x:s+a},{type:"x",x:s+a/2},{type:"y",y:i+o/2}].map((function(i){return l(l({},i),{},{origin:e,originRect:r,guide:n.debug&&t.renderGuide(i)})}));return c.forEach((function(e){return t.guides.push(e)})),c},getTranslate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=0;return(e||"").split(" ").forEach((function(e){var r=e.trim(),i="translate".concat(t.toUpperCase(),"(");0===r.indexOf(i)&&(n=parseFloat(r.replace(i,"")))})),n},setTranslate:function(e,t,n){var r="translate".concat(t.toUpperCase(),"("),i="".concat(r).concat(n,")"),o=(e||"").split(" ").map((function(e){return 0===e.trim().indexOf(r)&&(e=i),e})).join(" ");return o.indexOf(r)<0&&(o+=" ".concat(i)),o},getPosition:function(){var e=this.isTran,t=this.target.getStyle(),n=t.left,r=t.top,i=t.transform,o=0,s=0;return e?(o=this.getTranslate(i),s=this.getTranslate(i,"y")):(o=parseFloat(n),s=parseFloat(r)),{x:o,y:s}},setPosition:function(e){var t=e.y,n=e.end,r=e.position,i=e.width,s=e.height,a=this.target,l=this.isTran,c=n?"":1,u="".concat(e.x).concat("px"),d="".concat(t).concat("px");if(l){var h=a.getStyle().transform||"";return h=this.setTranslate(h,"x",u),h=this.setTranslate(h,"y",d),a.addStyle({transform:h,en:c},{avoidStore:!n})}var f={position:r,width:i,height:s},p={left:u,top:d,en:c};Object(o.keys)(f).forEach((function(e){var t=f[e];t&&(p[e]=t)})),a.addStyle(p,{avoidStore:!n})},_getDragData:function(){var e=this.target;return{target:e,parent:e.parent(),index:e.index()}},onStart:function(){var e=this.target,t=this.isTran,n=this.opts,r=n.center,i=n.onStart,o=this.editor.Canvas,s=e.getStyle(),a="absolute";if(i&&i(this._getDragData()),!t&&s.position!==a){var l=o.offset(e.getEl()),c=l.left,u=l.top,d=l.width,h=l.height;if(r){var f=o.getMouseRelativeCanvas(event);c=f.x,u=f.y}this.setPosition({x:c,y:u,width:"".concat(d,"px"),height:"".concat(h,"px"),position:a})}},onDrag:function(){var e=this,t=this.guidesTarget,n=this.opts,r=n.onDrag;this.updateGuides(t),n.debug&&t.forEach((function(t){return e.renderGuide(t)})),n.guidesInfo&&this.renderGuideInfo(t.filter((function(e){return e.active}))),r&&r(this._getDragData())},onEnd:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.editor,i=this.opts,o=this.id,s=i.onEnd;s&&s(e,n,l(l({event:e},n),this._getDragData())),r.stopCommand(o),this.hideGuidesInfo(),this.em.trigger("".concat(c,":end"),this.getEventOpts())},hideGuidesInfo:function(){var e=this;["X","Y"].forEach((function(t){var n=e["elGuideInfo".concat(t)];n&&(n.style.display="none")}))},renderGuideInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.guidesStatic;this.hideGuidesInfo(),t.forEach((function(t){var r=t.x,i=e.getElementPos(t.origin),s=Object(o.isUndefined)(r)?"y":"x",a="y"===s,u=i[a?"left":"top"],d=i.rect[a?"left":"top"],h=a?u+i.width:u+i.height,f=a?d+i.rect.width:d+i.rect.height,p=e["elGuideInfo".concat(s.toUpperCase())],g=e["elGuideInfoContent".concat(s.toUpperCase())],m=p.style,v=n.filter((function(e){return e.type===t.type})).map((function(e){var t=e.originRect,n=t.left,r=t.top,i=a?n+t.width:r+t.height;return{gap:i<u?u-i:(a?n:r)-h,guide:e}})).filter((function(e){return e.gap>0})).sort((function(e,t){return e.gap-t.gap})).map((function(e){return e.guide}))[0];if(v){var b=v.originRect,y=b.left,w=b.top,x=b.rect,O=a?y<i.left:w<i.top,C=a?y:w,_=a?x.left:x.top,S=a?y+b.width:w+b.height,j=a?x.left+x.width:x.top+x.height,k=a?t.y:t.x,T=O?S:h,E="".concat(k,"px"),P=O?u-S:C-h,A=O?d-j:_-f;m.display="",m[a?"top":"left"]=E,m[a?"left":"top"]="".concat(T,"px"),m[a?"width":"height"]="".concat(P,"px"),g.innerHTML="".concat(Math.round(A),"px"),e.em.trigger("".concat(c,":active"),l(l({},e.getEventOpts()),{},{guide:t,guidesStatic:n,matched:v,posFirst:k,posSecond:T,size:P,sizeRaw:A,elGuideInfo:p,elGuideInfoCnt:g}))}}))},toggleDrag:function(e){var t=this.editor,n=e?"add":"remove",r=["".concat(this.ppfx,"is__grabbing")],i=t.Canvas,o=i.getBody();r.forEach((function(e){return o.classList[n](e)})),i[e?"startAutoscroll":"stopAutoscroll"]()}}},"./src/commands/view/ComponentEnter.js":function(e,t,n){"use strict";n.r(t),t.default={run:function(e){if(e.Canvas.hasFocus()){var t=[];e.getSelectedAll().forEach((function(e){var n=e.components(),r=n&&n.at(0);r&&t.push(r)})),t.length&&e.select(t)}}}},"./src/commands/view/ComponentExit.js":function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.Canvas.hasFocus()||n.force){var r=[];e.getSelectedAll().forEach((function(e){for(var t=e.parent();t&&!t.get("selectable");)t=t.parent();t&&r.push(t)})),r.length&&e.select(r)}}}},"./src/commands/view/ComponentNext.js":function(e,t,n){"use strict";n.r(t),t.default={run:function(e){if(e.Canvas.hasFocus()){var t=[];e.getSelectedAll().forEach((function(e){var n=e.collection,r=n.indexOf(e),i=n.at(r+1);t.push(i||e)})),t.length&&e.select(t)}}}},"./src/commands/view/ComponentPrev.js":function(e,t,n){"use strict";n.r(t),t.default={run:function(e){if(e.Canvas.hasFocus()){var t=[];e.getSelectedAll().forEach((function(e){var n=e.collection,r=n.indexOf(e),i=n.at(r-1);t.push(i&&r-1>=0?i:e)})),t.length&&e.select(t)}}}},"./src/commands/view/ComponentStyleClear.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js");t.default={run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.target,o=e.DomComponents,s=i.get("type"),a=o.getWrapper().findType(s).length,l=[];if(!a){var c=e.CssComposer.getAll(),u=i.get("style-signature");u=Object(r.isArray)(u)?u:[u],c.forEach((function(e){var t=e.selectorsToString();u.forEach((function(n){n&&t.indexOf(n)>=0&&l.push(e)}))})),c.remove(l)}return l}}},"./src/commands/view/CopyComponent.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r);t.default={run:function(e){var t=e.getModel(),n=i()(e.getSelectedAll());n.length&&t.set("clipboard",n)}}},"./src/commands/view/DeleteComponent.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i),s=n("./src/commands/view/SelectComponent.js"),a=o.a.$;t.default=Object(r.extend)({},s.default,{init:function(e){Object(r.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(e){e.stopPropagation();var t=a(e.target);t.data("model").get("removable")&&(t.addClass(this.hoverClass),this.attachBadge(t.get(0)))},stopDelete:function(e){e.stopPropagation(),a(e.target).removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(e){e.stopPropagation();var t=a(e.target);t.data("model").get("removable")&&(t.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(e){this.badge.html("Remove "+e.getName())}})},"./src/commands/view/ExportTemplate.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r).a.$;t.default={run:function(e,t){var n=this;t&&t.set&&t.set("active",0);var r=e.getConfig(),o=e.Modal,s=r.stylePrefix;if(this.cm=e.CodeManager||null,!this.$editors){var a=this.buildEditor("htmlmixed","hopscotch","HTML"),l=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=a.el,this.cssEditor=l.el;var c=i('<div class="'.concat(s,'export-dl"></div>'));c.append(a.$el).append(l.$el),this.$editors=c}o.open({title:r.textViewCode,content:this.$editors}).getModel().once("change:open",(function(){return e.stopCommand(n.id)})),this.htmlEditor.setContent(e.getHtml()),this.cssEditor.setContent(e.getCss())},stop:function(e){var t=e.Modal;t&&t.close()},buildEditor:function(e,t,n){var r=document.createElement("textarea");!this.codeMirror&&(this.codeMirror=this.cm.getViewer("CodeMirror"));var i=this.codeMirror.clone().set({label:n,codeName:e,theme:t,input:r}),o=new this.cm.EditorView({model:i,config:this.cm.getConfig()}).render().$el;return i.init(r),{el:i,$el:o}}}},"./src/commands/view/Fullscreen.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js");t.default={isEnabled:function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement?1:0},enable:function(e){var t="";return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?(t="webkit",e.webkitRequestFullscreen()):e.mozRequestFullScreen?(t="moz",e.mozRequestFullScreen()):e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Fullscreen not supported"),t},disable:function(){var e=document;this.isEnabled()&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},fsChanged:function(e,t){document;var n=(e||"")+"fullscreenchange";this.isEnabled()||(this.stop(null,this.sender),document.removeEventListener(n,this.fsChanged))},run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.sender=t;var i=n.target,o=Object(r.isElement)(i)?i:document.querySelector(i),s=this.enable(o||e.getContainer());this.fsChanged=this.fsChanged.bind(this,s),document.addEventListener(s+"fullscreenchange",this.fsChanged),e.trigger("change:canvasOffset")},stop:function(e,t){t&&t.set&&t.set("active",!1),this.disable(),e&&e.trigger("change:canvasOffset")}}},"./src/commands/view/MoveComponent.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i),s=n("./src/utils/mixins.js"),a=n("./src/commands/view/SelectComponent.js"),l=n("./src/commands/view/SelectPosition.js"),c=o.a.$;t.default=Object(r.extend)({},l.default,a.default,{init:function(e){a.default.init.apply(this,arguments),Object(r.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=e,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.enable.apply(this,t),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var r=this.$wrapper;r.css("cursor","move"),r.on("mousedown",this.initSorter),r.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(e){var t=c(e.target).data("model").get("draggable");t&&(this.cacheEl=null,this.startSelectPosition(e.target,this.frameEl.contentDocument),this.sorter.draggable=t,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),Object(s.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(e){var t=e.get("draggable");t&&(this.cacheEl=null,this.startSelectPosition(e.view.el,this.frameEl.contentDocument),this.sorter.draggable=t,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),Object(s.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModels:function(e){this.cacheEl=null;var t=e[e.length-1],n=(this.em.get("currentFrame")||{}).model,r=t.getEl(n);this.startSelectPosition(r,r.ownerDocument,{onStart:this.onStart}),this.sorter.draggable=t.get("draggable"),this.sorter.toMove=e,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),Object(s.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){Object(s.off)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),Object(s.off)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(e,t){},rollback:function(e,t){(27==(e.which||e.keyCode)||t)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=c(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=c(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.stop.apply(this,t),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var r=this.$wrapper;r.css("cursor","").unbind().removeClass(this.noSelClass)}})},"./src/commands/view/OpenAssets.js":function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.Modal,o=e.AssetManager,s=o.getConfig(),a=o.getContainer(),l=r.modalTitle||e.t("assetManager.modalTitle")||"",c=r.types,u=r.accept;if(o.setTarget(r.target),o.onClick(r.onClick),o.onDblClick(r.onDblClick),o.onSelect(r.onSelect),!this.rendered||c){var d=o.getAll().filter((function(e){return 1}));c&&c.length&&(d=d.filter((function(e){return-1!==c.indexOf(e.get("type"))}))),o.render(d),this.rendered=1}if(u){var h=a.querySelector("input#".concat(s.stylePrefix,"uploadFile"));h&&h.setAttribute("accept",u)}return i.open({title:l,content:a}).getModel().once("change:open",(function(){return e.stopCommand(n.id)})),this},stop:function(e){return e.Modal.close(),this}}},"./src/commands/view/OpenBlocks.js":function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t){var n=e.BlockManager,r=e.Panels;if(!this.blocks){n.render();var i="views-container",o=document.createElement("div"),s=r.getPanel(i)||r.addPanel({id:i});o.appendChild(n.getContainer()),s.set("appendContent",o).trigger("change:appendContent"),this.blocks=o}this.blocks.style.display="block"},stop:function(){var e=this.blocks;e&&(e.style.display="none")}}},"./src/commands/view/OpenLayers.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/backbone/backbone.js"),n("./src/navigator/index.js"),t.default={run:function(e){var t=e.LayerManager,n=e.Panels;if(!this.layers){var r="views-container",i=document.createElement("div"),o=n.getPanel(r)||n.addPanel({id:r});i.appendChild(t.render()),o.set("appendContent",i).trigger("change:appendContent"),this.layers=i}this.layers.style.display="block"},stop:function(){var e=this.layers;e&&(e.style.display="none")}}},"./src/commands/view/OpenStyleManager.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r).a.$;t.default={run:function(e,t){if(this.sender=t,!this.$cn){var n=e.getConfig(),r=e.Panels;this.$cn=i("<div></div>"),this.$cn2=i("<div></div>"),this.$cn.append(this.$cn2);var o=e.DeviceManager;o&&n.showDevices&&r.addPanel({id:"devices-c"}).set("appendContent",o.render()).trigger("change:appendContent");var s=e.SelectorManager;s&&this.$cn2.append(s.render([])),this.$cn2.append(e.StyleManager.render());var a=e.StyleManager.getConfig();this.$header=i('<div class="'.concat(a.stylePrefix,'header">').concat(e.t("styleManager.empty"),"</div>")),this.$cn.append(this.$header),this.panel=r.getPanel("views-container")?r.getPanel("views-container"):r.addPanel({id:"views-container"}),this.panel.set("appendContent",this.$cn).trigger("change:appendContent"),this.target=e.editor,this.listenTo(this.target,"component:toggled",this.toggleSm)}this.toggleSm()},toggleSm:function(){var e=this.target,t=this.sender;if(!t||!t.get||t.get("active")){var n=e.get("SelectorManager").getConfig().componentFirst,r=e.getSelectedAll().length;1===r||r>1&&n?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show())}},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},"./src/commands/view/OpenTraitManager.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r).a.$;t.default={run:function(e,t){this.sender=t;var n=e.getModel(),r=e.Config.stylePrefix,o=e.TraitManager;if(!this.$cn){var s=o.getTraitsViewer(),a=o.getConfig();this.$cn=i("<div></div>"),this.$cn2=i("<div></div>"),this.$cn.append(this.$cn2),this.$header=i("<div>").append('<div class="'.concat(a.stylePrefix,'header">').concat(n.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),this.$cn2.append('<div class="'.concat(r,'traits-label">').concat(n.t("traitManager.label"),"</div>")),this.$cn2.append(s.render().el);var l=e.Panels;(l.getPanel("views-container")?l.getPanel("views-container"):l.addPanel({id:"views-container"})).set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=e.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()},toggleTm:function(){var e=this.sender;e&&e.get&&!e.get("active")||(1===this.target.getSelectedAll().length?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},"./src/commands/view/PasteComponent.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js");t.default={run:function(e){var t=e.getModel().get("clipboard"),n=e.getSelected();t&&n&&(e.getSelectedAll().forEach((function(n){if(n){var i,o=n.collection,s=o.indexOf(n)+1,a=t.filter((function(e){return e.get("copyable")}));i=Object(r.contains)(t,n)&&n.get("copyable")?o.add(n.clone(),{at:s}):o.add(a.map((function(e){return e.clone()})),{at:s}),(i=Object(r.isArray)(i)?i:[i]).forEach((function(t){return e.trigger("component:paste",t)}))}})),n.emitUpdate())}}},"./src/commands/view/Preview.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i="sw-visibility";t.default={getPanels:function(e){return this.panels||(this.panels=e.Panels.getPanels()),this.panels},preventDrag:function(e){e.abort=1},tglPointers:function(e,t){var n=e.Canvas.getBody().querySelectorAll(".".concat(this.ppfx,"no-pointer"));Object(r.each)(n,(function(e){return e.style.pointerEvents=t?"":"all"}))},tglEffects:function(e){var t=this.em;t&&t[e?"on":"off"]("run:tlb-move:before",this.preventDrag)},run:function(e,t){var n=this;this.sender=t,this.shouldRunSwVisibility||(this.shouldRunSwVisibility=e.Commands.isActive(i)),this.shouldRunSwVisibility&&e.stopCommand(i),e.getModel().stopDefault();var r=this.getPanels(e),o=e.Canvas.getElement(),s=e.getEl(),a=e.Config.stylePrefix;if(!this.helper){var l=document.createElement("span");l.className="".concat(a,"off-prv fa fa-eye-slash"),s.appendChild(l),l.onclick=function(){return n.stopCommand()},this.helper=l}this.helper.style.display="inline-block",this.tglPointers(e),r.forEach((function(e){return e.set("visible",!1)}));var c=o.style;c.width="100%",c.height="100%",c.top="0",c.left="0",c.padding="0",c.margin="0",e.refresh(),this.tglEffects(1)},stop:function(e){var t=this.sender,n=void 0===t?{}:t;n.set&&n.set("active",0);var r=this.getPanels(e);this.shouldRunSwVisibility&&(e.runCommand(i),this.shouldRunSwVisibility=!1),e.getModel().runDefault(),r.forEach((function(e){return e.set("visible",!0)})),e.Canvas.getElement().setAttribute("style",""),this.helper&&(this.helper.style.display="none"),e.refresh(),this.tglPointers(e,1),this.tglEffects()}}},"./src/commands/view/Resize.js":function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t,n){var r=n||{},i=r.el||"",o=e.Canvas,s=this.canvasResizer,a=r.options||{},l=o.getCanvasView();return a.appendTo=o.getResizerEl(),a.prefix=e.getConfig().stylePrefix,a.posFetcher=l.getElementPos.bind(l),a.mousePosFetcher=o.getMouseRelativePos,s&&!r.forceNew||(this.canvasResizer=e.Utils.Resizer.init(a),s=this.canvasResizer),s.setOptions(a),s.blur(),s.focus(i),s},stop:function(){var e=this.canvasResizer;e&&e.blur()}}},"./src/commands/view/SelectComponent.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/typeof.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./node_modules/backbone/backbone.js"),l=n.n(a),c=n("./node_modules/underscore/modules/index-all.js"),u=n("./src/utils/mixins.js"),d=n("./src/utils/dom.js"),h=n("./src/dom_components/view/ToolbarView.js"),f=n("./src/dom_components/model/Toolbar.js");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,v=l.a.$;t.default={init:function(e){Object(c.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),m=1},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(e){var t=this,n=this.em,r=n.getConfig("listenToEl"),i=n.getContainer().parentNode,o=e?"on":"off",s={on:u.on,off:u.off};!r.length&&i&&r.push(i),s[o](window,"resize",this.onFrameUpdated),s[o](r,"scroll",this.onContainerChange),n[o]("component:toggled",this.onSelect,this),n[o]("change:componentHovered",this.onHovered,this),n[o]("component:resize component:styleUpdate component:input",this.updateGlobalPos,this),n[o]("change:canvasOffset",this.updateAttached,this),n[o]("frame:updated",this.onFrameUpdated,this),n[o]("canvas:updateTools",this.onFrameUpdated,this),n.get("Canvas").getFrames().forEach((function(e){var n,r,i=e.view;i&&(n=i.getWindow(),r=i.getBody(),s[o](r,"mouseover",t.onHover),s[o](r,"mouseleave",t.onOut),s[o](r,"click touchend",t.onClick),s[o](n,"scroll",t.onFrameScroll))}))},onHover:function(e){e.stopPropagation();var t=e.target,n=Object(u.getViewEl)(t),r=n&&n._getFrame(),i=v(t),o=i.data("model");if(!o)for(var s=i.parent();!o&&s.length&&!Object(d.isDoc)(s[0]);)o=s.data("model"),s=s.parent();if(o&&!o.get("hoverable")){for(var a=o&&o.parent();a&&!a.get("hoverable");)a=a.parent();o=a}this.currentDoc=t.ownerDocument,this.em.setHovered(o),r&&this.em.set("currentFrame",r)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(e,t){var n=this,r={};t&&t.views.forEach((function(e){var i=e.el,o=n.getElementPos(i);r={el:i,pos:o,component:t,view:Object(u.getViewEl)(i)},n.updateToolsLocal(r),i.ownerDocument===n.currentDoc&&(n.elHovered=r)}))},onSelect:Object(c.debounce)((function(){var e=this.em,t=e.getSelected(),n=e.get("currentFrame")||{},r=t&&t.getView(n.model),i=r&&r.el,o={};i&&Object(d.isVisible)(i)&&(o={el:i,pos:this.getElementPos(i),component:t,view:Object(u.getViewEl)(i)}),this.elSelected=o,this.updateToolsGlobal(),this.updateToolsLocal(o),this.initResize(t)})),updateGlobalPos:function(){var e=this.getElSelected();e.el&&(e.pos=this.getElementPos(e.el),this.updateToolsGlobal())},updateLocalPos:function(){var e=this.getElHovered();e.el&&(e.pos=this.getElementPos(e.el),this.updateToolsLocal())},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){var e=this;this.currentDoc=null,this.em.setHovered(0),this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach((function(t){var n=t.view,r=n&&n.getToolsEl();r&&e.toggleToolsEl(0,0,{el:r})}))},toggleToolsEl:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.el||this.canvas.getToolsEl(t);return r&&(r.style.opacity=e?1:0),r||{}},showElementOffset:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};m&&this.editor.runCommand("show-offset",{el:e,elPos:t,view:n.view,force:1,top:0,left:0})},hideElementOffset:function(e){this.editor.stopCommand("show-offset",{view:e})},showFixedElementOffset:function(e,t){this.editor.runCommand("show-offset",{el:e,elPos:t,state:"Fixed"})},hideFixedElementOffset:function(e,t){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(e){this.canvas.getHighlighter(e).style.opacity=0},onClick:function(e){e.stopPropagation(),e.preventDefault();var t=this.em;if(t.get("_cmpDrag"))return t.set("_cmpDrag");var n=v(e.target),r=n.data("model");if(!r)for(var i=n.parent();!r&&i.length&&!Object(d.isDoc)(i[0]);)r=i.data("model"),i=i.parent();if(r)if(r.get("selectable"))this.select(r,e);else{for(var o=r.parent();o&&!o.get("selectable");)o=o.parent();this.select(o,e)}},select:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(this.editor.select(e,{scroll:{},event:t}),this.initResize(e))},updateBadge:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=v(e).data("model");if(r&&r.get("badgable")){var i=this.getBadge(n);if(!n.posOnly){var o=this.canvas.getConfig(),s=r.getIcon(),a=o.pStylePrefix||"",l="".concat(a,"badge"),c=o.customBadgeLabel,u="".concat(s?'<div class="'.concat(l,'__icon">').concat(s,"</div>"):"",'\n        <div class="').concat(l,'__name">').concat(r.getName(),"</div>");i.innerHTML=c?c(r):u}var d="px",h=i.style;h.display="block";var f=i?i.offsetHeight:0,p=0-f,g=n.topOff-f<0?-n.topOff:p,m=n.leftOff<0?-n.leftOff:0;h.top=g+d,h.left=m+d}},showHighlighter:function(e){this.canvas.getHighlighter(e).style.opacity=""},initResize:function(e){var t,n=this.em,r=this.canvas,o=n?n.get("Editor"):"",s=n?n.get("Config"):"",a="".concat(s.stylePrefix||"","resizing"),l=!Object(c.isElement)(e)&&Object(u.isTaggableNode)(e)?e:n.getSelected(),d=l&&l.get("resizable"),h={},f=function(e,t,n){var r=n.docs;r&&r.forEach((function(t){var n=t.body,r=n.className||"";n.className=("add"==e?"".concat(r," ").concat(a):r.replace(a,"")).trim()}))};if(o&&d){var p=Object(c.isElement)(e)?e:l.getEl();h={onStart:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.el,s=i.config,a=i.resizer,c=s.keyHeight,d=s.keyWidth,h=s.currentUnit,p=s.keepAutoHeight,g=s.keepAutoWidth;f("add",0,i),t=n.get("StyleManager").getModelToStyle(l),r.toggleFramesEvents();var v=getComputedStyle(o),b=t.getStyle(),y=b[d];s.autoWidth=g&&"auto"===y,isNaN(parseFloat(y))&&(y=v[d]);var w=b[c];s.autoHeight=p&&"auto"===w,isNaN(parseFloat(w))&&(w=v[c]),a.startDim.w=parseFloat(y),a.startDim.h=parseFloat(w),m=0,h&&(s.unitHeight=Object(u.getUnitFromValue)(w),s.unitWidth=Object(u.getUnitFromValue)(y))},onMove:function(){o.trigger("component:resize")},onEnd:function(e,t){f("remove",0,t),o.trigger("component:resize"),r.toggleFramesEvents(1),m=1},updateTarget:function(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t){var s=o.store,a=o.selectedHandler,l=o.config,c=l.keyHeight,u=l.keyWidth,d=l.autoHeight,h=l.autoWidth,f=l.unitWidth,p=l.unitHeight,m=["tc","bc"].indexOf(a)>=0,v=["cl","cr"].indexOf(a)>=0,b={},y=s?"":1;if(!m){var w=r.getBody().offsetWidth,x=i.w<w?i.w:w;b[u]=h?"auto":"".concat(x).concat(f)}v||(b[c]=d?"auto":"".concat(i.h).concat(p)),t.addStyle(g(g({},b),{},{en:y}),{avoidStore:!s});var O="update:component:style",C="".concat(O,":").concat(c," ").concat(O,":").concat(u);n&&n.trigger(C,null,null,{noEmit:1})}}},"object"==i()(d)&&(h=g(g({},h),d)),this.resizer=o.runCommand("resize",{el:p,options:h,force:1})}else o.stopCommand("resize"),this.resizer=null},updateToolbar:function(e){var t=this.config.em,n=e==t?t.getSelected():e,r=this.canvas.getToolbarEl(),i=r.style;if(n){var o=n.get("toolbar");if(t.get("Config").showToolbar&&o&&o.length){if(i.opacity="",i.display="",!this.toolbar){r.innerHTML="",this.toolbar=new f.default(o);var s=new h.default({collection:this.toolbar,editor:this.editor,em:t});r.appendChild(s.render().el)}this.toolbar.reset(o),i.top="-100px",i.left=0}else i.display="none"}else i.opacity=0},updateToolbarPos:function(e){var t=this.canvas.getToolbarEl().style;t.top="".concat(e.top).concat("px"),t.left="".concat(e.left).concat("px"),t.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.canvas.getBadgeEl(e.view)},onFrameScroll:function(){this.updateTools()},updateTools:function(){this.updateToolsLocal(),this.updateGlobalPos()},isCompSelected:function(e){return e&&"selected"===e.get("status")},updateToolsLocal:function(e){var t=e||this.getElHovered(),n=t.el,r=t.pos,i=t.view,o=t.component;if(n){var s=o.get("hoverable"),a=this.lastHovered!==n,l=a?{}:{posOnly:1};a&&s&&(this.lastHovered=n,this.showHighlighter(i),this.showElementOffset(n,r,{view:i})),this.isCompSelected(o)&&(this.hideHighlighter(i),this.hideElementOffset(i));var c="px",u=this.toggleToolsEl(1,i).style,d=this.canvas.canvasRectOffset(n,r),h=d.top,f=d.left;this.updateBadge(n,r,g(g({},l),{},{view:i,topOff:h,leftOff:f})),u.top=h+c,u.left=f+c,u.width=r.width+c,u.height=r.height+c}else this.lastHovered=0},updateToolsGlobal:function(){var e=this.getElSelected(),t=e.el,n=e.pos,r=e.component;if(!t)return this.toggleToolsEl(),void(this.lastSelected=0);var i=this.canvas;this.lastSelected!==t&&(this.lastSelected=t,this.updateToolbar(r));var o="px",s=this.toggleToolsEl(1).style,a=i.getTargetToElementFixed(t,i.getToolbarEl(),{pos:n}),l=a.canvasOffsetLeft;s.top=a.canvasOffsetTop+o,s.left=l+o,s.width=n.width+o,s.height=n.height+o,this.updateToolbarPos({top:a.top,left:a.left})},updateAttached:Object(c.debounce)((function(){this.updateGlobalPos()})),onContainerChange:Object(c.debounce)((function(){this.em.refreshCanvas()}),150),getElementPos:function(e){return this.canvas.getCanvasView().getElementPos(e)},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(e){e&&e.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(e){this.editor=e&&e.get("Editor"),this.enable()},stop:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.em,i=this.editor;this.stopSelectComponent(),!n.preserveSelected&&r.setSelected(null),this.onOut(),this.toggleToolsEl(),i&&i.stopCommand("resize")}}},"./src/commands/view/SelectPosition.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r).a.$;t.default={startSelectPosition:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isPointed=!1;var i=this.editorModel.get("Utils"),o=e.ownerDocument.body;i&&!this.sorter&&(this.sorter=new i.Sorter({container:o,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:t,wmargin:1,nested:1,em:this.editorModel,canvasRelative:1,scale:function(){return n.em.getZoomDecimal()}})),r.onStart&&(this.sorter.onStart=r.onStart),e&&this.sorter.startSort(e,{container:o})},getOffsetDim:function(){var e=this.offset(this.canvas.getFrameEl()),t=this.offset(this.canvas.getElement());return{top:e.top-t.top,left:e.left-t.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex="after"==this.posMethod&&0!==this.cDim.length?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=0!==this.cDim.length&&"after"==this.posMethod&&this.posIndex==this.cDim.length,this.posTargetEl=0===this.cDim.length?i(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?i(this.cDim[this.posIndex][5]).parent():i(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(e,t,n){var r=e||0,i=n.length,o=0!==i&&"after"==(t||"before")&&r==i;return 0!==i&&(!o&&!n[r][4]||n[r-1]&&!n[r-1][4]||o&&!n[r-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},"./src/commands/view/ShowOffset.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/utils/mixins.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=s.a.$;t.default={getOffsetMethod:function(e){return"get"+(e||"")+"OffsetViewerEl"},run:function(e,t,n){var r=n||{},o=r.state||"",s=e.getConfig(),d=this.em.getZoomDecimal(),h=r.el||"";if(!s.showOffsets||Object(l.isTextNode)(h)||!s.showOffsetsSelected&&"Fixed"==o)e.stopCommand(this.id,n);else{var f=e.Canvas,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.elPos||f.getElementPos(h));Object(a.isUndefined)(r.top)||(p.top=r.top),Object(a.isUndefined)(r.left)||(p.left=r.left);var g=window.getComputedStyle(h),m=this.ppfx,v=o+"State",b=f[this.getOffsetMethod(o)](n.view);b.style.opacity="";var y=this["marginT"+o],w=this["marginB"+o],x=this["marginL"+o],O=this["marginR"+o],C=this["padT"+o],_=this["padB"+o],S=this["padL"+o],j=this["padR"+o];if(b.childNodes.length&&(this[v]="1",y=b.querySelector("[data-offset-m-t]"),w=b.querySelector("[data-offset-m-b]"),x=b.querySelector("[data-offset-m-l]"),O=b.querySelector("[data-offset-m-r]"),C=b.querySelector("[data-offset-p-t]"),_=b.querySelector("[data-offset-p-b]"),S=b.querySelector("[data-offset-p-l]"),j=b.querySelector("[data-offset-p-r]")),!this[v]){var k=o.toLowerCase(),T=k+"margin-v",E=k+"padding-v",P=u('<div class="'.concat(m,'marginName">')).get(0),A=u('<div class="'.concat(m,'paddingName">')).get(0),M=m+E+"-el",D="".concat(m+T+"-el"," ").concat(m+T),I="".concat(M," ").concat(m+E);y=u('<div class="'.concat(D,'-top"></div>')).get(0),w=u('<div class="'.concat(D,'-bottom"></div>')).get(0),x=u('<div class="'.concat(D,'-left"></div>')).get(0),O=u('<div class="'.concat(D,'-right"></div>')).get(0),C=u('<div class="'.concat(I,'-top"></div>')).get(0),_=u('<div class="'.concat(I,'-bottom"></div>')).get(0),S=u('<div class="'.concat(I,'-left"></div>')).get(0),j=u('<div class="'.concat(I,'-right"></div>')).get(0),this["marginT"+o]=y,this["marginB"+o]=w,this["marginL"+o]=x,this["marginR"+o]=O,this["padT"+o]=C,this["padB"+o]=_,this["padL"+o]=S,this["padR"+o]=j,P.appendChild(y),P.appendChild(w),P.appendChild(x),P.appendChild(O),A.appendChild(C),A.appendChild(_),A.appendChild(S),A.appendChild(j),b.appendChild(P),b.appendChild(A),this[v]="1"}var L="px",N=parseFloat(g.marginLeft.replace(L,""))*d,R=parseFloat(g.marginRight.replace(L,""))*d,F=parseFloat(g.marginTop.replace(L,""))*d,V=parseFloat(g.marginBottom.replace(L,""))*d,z=y.style,B=w.style,H=x.style,U=O.style,$=C.style,W=_.style,q=S.style,G=j.style,K=parseFloat(p.left),Y=parseFloat(g.width)*d+L;z.height=F+L,z.width=Y,z.top=p.top-F+L,z.left=K+L,B.height=V+L,B.width=Y,B.top=p.top+p.height+L,B.left=K+L;var Z=p.height+F+V+L,X=p.top-F+L;H.height=Z,H.width=N+L,H.top=X,H.left=K-N+L,U.height=Z,U.width=R+L,U.top=X,U.left=K+p.width+L;var J=parseFloat(g.paddingTop)*d;$.height=J+L;var Q=parseFloat(g.paddingBottom)*d;W.height=Q+L;var ee=p.height-Q-J+L,te=p.top+J+L;q.height=ee,q.width=parseFloat(g.paddingLeft)*d+L,q.top=te;var ne=parseFloat(g.paddingRight)*d;G.height=ee,G.width=ne+L,G.top=te}},stop:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n||{},i=r.state||"",o=this.getOffsetMethod(i),s=e.Canvas,a=s[o](n.view);a.style.opacity=0}}},"./src/commands/view/SwitchVisibility.js":function(e,t,n){"use strict";n.r(t),t.default={run:function(e){this.toggleVis(e)},stop:function(e){this.toggleVis(e,0)},toggleVis:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e.Commands.isActive("preview")){var r=n?"add":"remove";e.Canvas.getFrames().forEach((function(e){e.view.getBody().classList[r]("".concat(t.ppfx,"dashed"))}))}}}},"./src/css_composer/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"css-",staticRules:"",rules:[]}},"./src/css_composer/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/css_composer/config/config.js"),a=n("./src/css_composer/model/CssRule.js"),l=n("./src/css_composer/model/CssRules.js"),c=n("./src/css_composer/view/CssRulesView.js"),u=n("./src/selector_manager/model/Selectors.js"),d=n("./src/selector_manager/model/Selector.js");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={};return{Selectors:u.default,name:"CssComposer",getConfig:function(){return r},storageKey:function(){var e=[],t=r.stm&&r.stm.getConfig()||{};return t.storeCss&&e.push("css"),t.storeStyles&&e.push("styles"),e},init:function(i){for(var o in r=i||{},s.default)o in r||(r[o]=s.default[o]);var a=r.pStylePrefix;return a&&(r.stylePrefix=a+r.stylePrefix),r.rules=r.em&&r.em.config.style||r.rules,e=r.em,t=new l.default([],r),n=new c.default({collection:t,config:r}),this},onLoad:function(){t.add(r.rules)},postLoad:function(e){var t=this,n="add remove",r=this.getAll(),i=e.get("UndoManager");i&&i.add(r),e.stopListening(r,n,this.handleChange),e.listenTo(r,n,this.handleChange),r.each((function(e){return t.handleChange(e,{avoidStore:1})}))},handleChange:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="change:style",i=e.get("UndoManager");i&&i.add(t);var o=e.handleUpdates.bind(e);e.stopListening(t,r,o),e.listenTo(t,r,o),!n.avoidStore&&o("","",n)},load:function(e){var n=e||"";!n&&r.stm&&(n=r.em.getCacheLoad());var i=n.styles||"";if(n.styles)try{i=JSON.parse(n.styles)}catch(s){}else n.css&&(i=r.em.get("Parser").parseCss(n.css));return Object(o.isArray)(i)?i.length&&t.reset(i):i&&t.reset(i),i},store:function(e){if(r.stm){var n={},i=this.storageKey();return i.indexOf("css")>=0&&(n.css=r.em.getCss()),i.indexOf("styles")>=0&&(n.styles=JSON.stringify(t)),e||r.stm.store(n),n}},add:function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=n||"",l=i||"",c=f({},o),u=this.get(e,s,l,c);return u&&u.config&&!u.config.singleAtRule||(c.state=s,c.mediaText=l,c.selectors=[],(u=new a.default(c,r)).get("selectors").add(e),t.add(u)),u},get:function(e,n,r,i){var o=null;return t.each((function(t){o||t.compare(e,n,r,i)&&(o=t)})),o},getAll:function(){return t},clear:function(){return this.getAll().reset(),this},addCollection:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=e instanceof Array?e:[e],o=0,s=i.length;o<s;o++){var a=i[o]||{};if(a.selectors){var l=r.em&&r.em.get("SelectorManager");l||console.warn("Selector Manager not found");for(var c=a.selectors,u=c instanceof Array?c:[c],d=[],h=0,p=u.length;h<p;h++){var g=l.add(u[h]);d.push(g)}var m=this.get(d,a.state,a.mediaText,a),v=this.add(d,a.state,a.mediaText,a),b=!m||!t.avoidUpdateStyle,y=a.style||{};if(b){var w=t.extend?f(f({},v.get("style")),y):y;v.set("style",w)}n.push(v)}}return n},setRule:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.atRuleType,o=r.atRuleParams,s=e.get("Parser").parserCss.checkNode({selectors:t,style:n})[0],a=s.state,l=s.selectorsAdd,c=e.get("SelectorManager"),u=c.add(s.selectors),d=this.add(u,a,o,{selectorsAdd:l,atRule:i});return d.setStyle(n,r),d},getRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.get("SelectorManager"),i=e.get("Parser").parserCss.checkNode({selectors:t})[0],o=r.get(i.selectors),s=i.state,a=i.selectorsAdd,l=n.atRuleType,c=n.atRuleParams;return o&&this.get(o,s,c,{selectorsAdd:a,atRule:l})},setIdRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.state||"",o=r.mediaText||e.getCurrentMedia(),s=e.get("SelectorManager"),a=s.add({name:t,type:d.default.TYPE_ID}),l=this.add(a,i,o);return l.setStyle(n,r),l},getIdRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.state||"",i=n.mediaText||e.getCurrentMedia(),o=e.get("SelectorManager").get(t,d.default.TYPE_ID);return o&&this.get(o,r,i)},setClassRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.state||"",o=r.mediaText||e.getCurrentMedia(),s=e.get("SelectorManager"),a=s.add({name:t,type:d.default.TYPE_CLASS}),l=this.add(a,i,o);return l.setStyle(n,r),l},getClassRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.state||"",i=n.mediaText||e.getCurrentMedia(),o=e.get("SelectorManager").get(t,d.default.TYPE_CLASS);return o&&this.get(o,r,i)},render:function(){return n.render().el}}}},"./src/css_composer/model/CssRule.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i),s=n("./src/domain_abstract/model/Styleable.js"),a=n("./src/selector_manager/model/Selectors.js"),l=window.CSS;t.default=o.a.Model.extend(s.default).extend({defaults:{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:0,important:0},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=e||{},this.em=t.em,this.ensureSelectors()},ensureSelectors:function(){var e=this.em,t=[],n=e&&e.get("SelectorManager"),r=this.getSelectors(),i=Array.isArray(r);r.forEach((function(e){return t.push(n?n.add(e):e)})),i&&this.set("selectors",new a.default(t))},getAtRule:function(){var e=this.get("atRuleType"),t=this.get("mediaText"),n=e?"@".concat(e):t?"@media":"";return n+(t&&n?" ".concat(t):"")},selectorsToString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=this.em,r=this.get("state"),i=this.get("wrapper"),o=this.get("selectorsAdd"),s=i&&n&&n.getConfig("wrapperIsBody"),a={escape:function(e){return l&&l.escape?l.escape(e):e}},c=s?"body":this.get("selectors").getFullString(0,a),u=r&&!e.skipState?":".concat(r):"";return c&&t.push("".concat(c).concat(u)),o&&!e.skipAdd&&t.push(o),t.join(", ")},getDeclaration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=this.selectorsToString(),r=this.styleToString(e),i=this.get("singleAtRule");return(n||i)&&r&&(t=i?r:"".concat(n,"{").concat(r,"}")),t},toCSS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=this.getAtRule(),r=this.getDeclaration(e);return r&&(t=r),n&&t&&(t="".concat(n,"{").concat(t,"}")),t},toJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=o.a.Model.prototype.toJSON.apply(this,t);if(this.em.getConfig("avoidDefaults")){var s=this.defaults;Object(r.forEach)(s,(function(e,t){i[t]===e&&delete i[t]})),Object(r.isEmpty)(i.selectors)&&delete i.selectors,Object(r.isEmpty)(i.style)&&delete i.style}return i},compare:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t||"",s=n||"",a=i.selectorsAdd||"",l=i.atRuleType||"";e instanceof Array||e.models||(e=[e]);var c=Object(r.map)(e.models||e,(function(e){return e.get("name")})),u=Object(r.map)(this.get("selectors").models,(function(e){return e.get("name")})),d=!1;if(c.length!==u.length)return d;for(var h=0;h<c.length;h++){for(var f=0,p=0;p<u.length;p++)c[h]===u[p]&&(f=1);if(0===f)return d}return this.get("state")===o&&this.get("mediaText")===s&&this.get("selectorsAdd")===a&&this.get("atRuleType")===l||d}})},"./src/css_composer/model/CssRules.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/css_composer/model/CssRule.js");t.default=i.a.Collection.extend({model:o.default,initialize:function(e,t){var n=this;t&&t.em&&(this.editor=t.em),setTimeout((function(){n.on("remove",n.onRemove),n.on("add",n.onAdd)}))},onAdd:function(e){e.ensureSelectors()},onRemove:function(e){var t=this.editor;t.stopListening(e),t.get("UndoManager").remove(e)},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=this.editor.get("Parser").parseCss(e)),t.em=this.editor,i.a.Collection.prototype.add.apply(this,[e,t])}})},"./src/css_composer/view/CssGroupRuleView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/css_composer/view/CssRuleView.js");t.default=r.default.extend({_createElement:function(e){return document.createTextNode("")},render:function(){var e=this.model,t=e.get("important");return this.el.textContent=e.getDeclaration({important:t}),this}})},"./src/css_composer/view/CssRuleView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js");t.default=n.n(r).a.View.extend({tagName:"style",initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=e.config||{};var t=this.model,n="change:style change:state change:mediaText";this.listenTo(t,n,this.render),this.listenTo(t,"destroy remove",this.remove),this.listenTo(t.get("selectors"),"change",this.render)},render:function(){var e=this.model.get("important");return this.el.innerHTML=this.model.toCSS({important:e}),this}})},"./src/css_composer/view/CssRulesView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/css_composer/view/CssRuleView.js"),s=n("./src/css_composer/view/CssGroupRuleView.js"),a=i.a.$,l=function(e,t){return"".concat(e).concat(t?"-".concat(parseFloat(t)):"")};t.default=i.a.View.extend({initialize:function(e){var t=e.config||{};this.atRules={},this.config=t,this.em=t.em,this.pfx=t.stylePrefix||"",this.className=this.pfx+"rules";var n=this.collection;this.listenTo(n,"add",this.addTo),this.listenTo(n,"reset",this.render)},addTo:function(e){this.addToCollection(e)},addToCollection:function(e,t){if(this.renderStarted){var n,r,i=t||null,a={model:e,config:this.config};if("keyframes"===e.get("atRuleType")){var c=e.getAtRule(),u=this.atRules[c];if(!u){var d=document.createElement("style");u=document.createTextNode(""),d.appendChild(document.createTextNode("".concat(c,"{"))),d.appendChild(u),d.appendChild(document.createTextNode("}")),this.atRules[c]=u,n=d}r=new s.default(a),u.appendData(r.render().el.textContent)}else n=(r=new o.default(a)).render().el;var h=this.className,f=e.get("mediaText"),p=l(h),g=p;if(f&&(g=l(h,this.getMediaWidth(f))),n){var m,v=i||this.el;try{m=v.querySelector("#".concat(g))}catch(b){}m||(m=v.querySelector("#".concat(p))),m.appendChild(n)}return n}},getMediaWidth:function(e){return e&&e.replace("(".concat(this.em.getConfig("mediaCondition"),": "),"").replace(")","")},render:function(){var e=this;this.renderStarted=1,this.atRules={};var t=this.em,n=this.$el,r=this.className,i=this.collection,o=document.createDocumentFragment();n.empty();var s=t.get("DeviceManager").getAll().pluck("priority");return s.every((function(e){return e}))&&s.unshift(0),s.forEach((function(e){return a('<div id="'.concat(l(r,e),'"></div>')).appendTo(o)})),i.each((function(t){return e.addToCollection(t,o)})),n.append(o),n.attr("class",r),this}})},"./src/device_manager/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={devices:[]}},"./src/device_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/device_manager/config/config.js"),s=n("./src/device_manager/model/Devices.js"),a=n("./src/device_manager/view/DevicesView.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={};return{name:"DeviceManager",init:function(r){var i=this;for(var l in n=r||{},o.default)l in n||(n[l]=o.default[l]);return e=new s.default,(n.devices||[]).forEach((function(e){return i.add(e.id||e.name,e.width,e)})),t=new a.default({collection:e,config:n}),this},add:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=c(c({},r),{},{id:t,name:r.name||t,width:n});return e.add(i)},get:function(t){return e.get(t)},getAll:function(){return e},render:function(){return t.render().el}}}},"./src/device_manager/model/Device.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js");t.default=n.n(r).a.Model.extend({idAttribute:"name",defaults:{name:"",width:null,height:"",widthMedia:null,priority:null},initialize:function(){var e=this;null===this.get("widthMedia")&&this.set("widthMedia",this.get("width")),null===this.get("width")&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach((function(t){return e.checkUnit(t)}))},checkUnit:function(e){var t=this.get(e)||"";(parseFloat(t)||0).toString()===t.toString()&&this.set(e,"".concat(t,"px"))}})},"./src/device_manager/model/Devices.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/device_manager/model/Device.js");t.default=i.a.Collection.extend({model:o.default,comparator:function(e,t){var n=Number.MAX_VALUE;return(t.get("priority")||n)-(e.get("priority")||n)},getSorted:function(){return this.sort()}})},"./src/device_manager/view/DevicesView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js");t.default=n.n(i).a.View.extend({template:Object(r.template)('\n    <div class="<%= ppfx %>device-label"><%= deviceLabel %></div>\n    <div class="<%= ppfx %>field <%= ppfx %>select">\n      <span id="<%= ppfx %>input-holder">\n        <select class="<%= ppfx %>devices"></select>\n      </span>\n      <div class="<%= ppfx %>sel-arrow">\n        <div class="<%= ppfx %>d-s-arrow"></div>\n      </div>\n    </div>\n    <button style="display:none" class="<%= ppfx %>add-trasp">+</button>'),events:{change:"updateDevice"},initialize:function(e){this.config=e.config||{},this.em=this.config.em,this.ppfx=this.config.pStylePrefix||"",this.events["click ."+this.ppfx+"add-trasp"]=this.startAdd,this.listenTo(this.em,"change:device",this.updateSelect),this.delegateEvents()},startAdd:function(){},updateDevice:function(){var e=this.em;if(e){var t=this.devicesEl,n=t?t.val():"";e.set("device",n)}},updateSelect:function(){var e=this.em,t=this.devicesEl;if(e&&e.getDeviceModel&&t){var n=e.getDeviceModel(),r=n?n.get("name"):"";t.val(r)}},getOptions:function(){var e=this.em,t="";return this.collection.each((function(n){var r=n.attributes,i=r.name,o=e&&e.t&&e.t("deviceManager.devices.".concat(r.id))||i;t+='<option value="'.concat(i,'">').concat(o,"</option>")})),t},render:function(){var e=this.em,t=this.ppfx,n=this.$el,r=this.el;return n.html(this.template({ppfx:t,deviceLabel:e&&e.t&&e.t("deviceManager.device")})),this.devicesEl=n.find(".".concat(t,"devices")),this.devicesEl.append(this.getOptions()),r.className="".concat(t,"devices-c"),this}})},"./src/dom_components/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"comp-",wrapperId:"wrapper",wrapperName:"Body",wrapper:{removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]},components:[],draggableComponents:1,storeWrapper:0,processor:0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}},"./src/dom_components/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/typeof.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./node_modules/backbone/backbone.js"),l=n.n(a),c=n("./node_modules/underscore/modules/index-all.js"),u=n("./src/dom_components/config/config.js"),d=n("./src/dom_components/model/Component.js"),h=n("./src/dom_components/model/Components.js"),f=n("./src/dom_components/view/ComponentView.js"),p=n("./src/dom_components/view/ComponentsView.js"),g=n("./src/dom_components/model/ComponentTableCell.js"),m=n("./src/dom_components/view/ComponentTableCellView.js"),v=n("./src/dom_components/model/ComponentTableRow.js"),b=n("./src/dom_components/view/ComponentTableRowView.js"),y=n("./src/dom_components/model/ComponentTable.js"),w=n("./src/dom_components/view/ComponentTableView.js"),x=n("./src/dom_components/model/ComponentTableHead.js"),O=n("./src/dom_components/view/ComponentTableHeadView.js"),C=n("./src/dom_components/model/ComponentTableBody.js"),_=n("./src/dom_components/view/ComponentTableBodyView.js"),S=n("./src/dom_components/model/ComponentTableFoot.js"),j=n("./src/dom_components/view/ComponentTableFootView.js"),k=n("./src/dom_components/model/ComponentMap.js"),T=n("./src/dom_components/view/ComponentMapView.js"),E=n("./src/dom_components/model/ComponentLink.js"),P=n("./src/dom_components/view/ComponentLinkView.js"),A=n("./src/dom_components/model/ComponentLabel.js"),M=n("./src/dom_components/view/ComponentLabelView.js"),D=n("./src/dom_components/model/ComponentVideo.js"),I=n("./src/dom_components/view/ComponentVideoView.js"),L=n("./src/dom_components/model/ComponentImage.js"),N=n("./src/dom_components/view/ComponentImageView.js"),R=n("./src/dom_components/model/ComponentScript.js"),F=n("./src/dom_components/view/ComponentScriptView.js"),V=n("./src/dom_components/model/ComponentSvg.js"),z=n("./src/dom_components/model/ComponentSvgIn.js"),B=n("./src/dom_components/view/ComponentSvgView.js"),H=n("./src/dom_components/model/ComponentComment.js"),U=n("./src/dom_components/view/ComponentCommentView.js"),$=n("./src/dom_components/model/ComponentTextNode.js"),W=n("./src/dom_components/view/ComponentTextNodeView.js"),q=n("./src/dom_components/model/ComponentText.js"),G=n("./src/dom_components/view/ComponentTextView.js"),K=n("./src/dom_components/model/ComponentWrapper.js");function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={},o={},s=[{id:"cell",model:g.default,view:m.default},{id:"row",model:v.default,view:b.default},{id:"table",model:y.default,view:w.default},{id:"thead",model:x.default,view:O.default},{id:"tbody",model:C.default,view:_.default},{id:"tfoot",model:S.default,view:j.default},{id:"map",model:k.default,view:T.default},{id:"link",model:E.default,view:P.default},{id:"label",model:A.default,view:M.default},{id:"video",model:D.default,view:I.default},{id:"image",model:L.default,view:N.default},{id:"script",model:R.default,view:F.default},{id:"svg-in",model:z.default,view:B.default},{id:"svg",model:V.default,view:B.default},{id:"comment",model:H.default,view:U.default},{id:"textnode",model:$.default,view:W.default},{id:"text",model:q.default,view:G.default},{id:"wrapper",model:K.default,view:f.default},{id:"default",model:d.default,view:f.default}];return{Component:d.default,Components:h.default,ComponentsView:p.default,componentTypes:s,componentsById:o,name:"DomComponents",getConfig:function(){return r},storageKey:function(){var e=[],t=r.stm&&r.stm.getConfig()||{};return t.storeHtml&&e.push("html"),t.storeComponents&&e.push("components"),e},init:function(i){var o=this;for(var a in this.em=e=(r=i||{}).em,e&&(r.components=e.config.components||r.components),u.default)a in r||(r[a]=u.default[a]);var l=r.pStylePrefix;if(l&&(r.stylePrefix=l+r.stylePrefix),e){r.modal=e.get("Modal")||"",r.am=e.get("AssetManager")||"",e.get("Parser").compTypes=s,e.on("change:componentHovered",this.componentHovered,this);var c=e.get("selected");e.listenTo(c,"add",(function(e,t,n){return o.selectAdd(e,n)})),e.listenTo(c,"remove",(function(e,t,n){return o.selectRemove(e,n)}))}var h=r.components,p=Z({},r.wrapper);return p["custom-name"]=r.wrapperName,p.wrapper=1,p.type="wrapper",h&&h.constructor===Object&&h.wrapper&&(p=Z({},h),h=h.components||[],p.components=[],e&&(e.config.components=h,r.components=h)),(t=new d.default(p,{em:e,config:r,componentTypes:s,domc:this})).set({attributes:{id:"wrapper"}}),n=new f.default({model:t,config:r,componentTypes:s}),this},onLoad:function(){this.setComponents(r.components)},postLoad:function(e){this.handleChanges(this.getWrapper(),null,{avoidStore:1})},handleChanges:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.components(),s=e.get("UndoManager"),a=e.handleUpdates.bind(e),l=this.handleChanges.bind(this),c=this.handleChangesColl.bind(this),u=this.handleRemoves.bind(this);s&&s.add(t),s&&o&&s.add(o);var d="change:style change:content change:attributes change:src";[[t,d,a],[t,"change:components",c],[o,"add",l],[o,"remove",u],[t.get("classes"),"add remove",a]].forEach((function(t){e.stopListening(t[0],t[1],t[2]),e.listenTo(t[0],t[1],t[2])})),!i.avoidStore&&a("","",i),o.each((function(e){return r.handleChanges(e,n,i)}))},handleChangesColl:function(t,n){var r=e.get("UndoManager");if(r&&n instanceof l.a.Collection){var i=this.handleChanges.bind(this),o=this.handleRemoves.bind(this);r.add(n),[[n,"add",i],[n,"remove",o]].forEach((function(t){e.stopListening(t[0],t[1],t[2]),e.listenTo(t[0],t[1],t[2])}))}},handleRemoves:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!r.avoidStore&&e.handleUpdates(t,n,r)},load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.em,n="";!e&&r.stm&&(e=r.em.getCacheLoad());var i=e,o=i.components,s=i.html;if(o)if(Object(c.isObject)(o)||Object(c.isArray)(o))n=o;else try{n=JSON.parse(o)}catch(l){t&&t.logError(l)}else s&&(n=s);var a=n&&n.constructor===Object;return(n&&n.length||a)&&(this.clear(),a?this.getWrapper().set(n):this.getComponents().add(n)),n},store:function(e){if(r.stm){var t={},n=this.storageKey();if(n.indexOf("html")>=0&&(t.html=r.em.getHtml()),n.indexOf("components")>=0){var i=r.storeWrapper?this.getWrapper():this.getComponents();t.components=JSON.stringify(i)}return e||r.stm.store(t),t}},getComponent:function(){return t},getWrapper:function(){return this.getComponent()},getComponents:function(){return this.getWrapper().get("components")},addComponent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getComponents().add(e,t)},render:function(){return n.render().el},clear:function(){return this.getComponents().map((function(e){return e})).forEach((function(e){return e.remove()})),this},setComponents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.clear().addComponent(e,t)},addType:function(e,t){var n=this.em,r=t.model,o=void 0===r?{}:r,a=t.view,l=void 0===a?{}:a,u=t.isComponent,d=t.extend,h=t.extendView,f=t.extendFn,p=void 0===f?[]:f,g=t.extendFnView,m=void 0===g?[]:g,v=this.getType(e),b=this.getType(d),y=this.getType(h),w=b||v||this.getType("default"),x=w.model,O=y?y.view:w.view,C=function(e,t,n){return e.reduce((function(e,r){var i=t[r],o=n.prototype[r];return i&&o&&(e[r]=function(){o.bind(this).apply(void 0,arguments),i.bind(this).apply(void 0,arguments)}),e}),{})};"object"===i()(o)&&(t.model=x.extend(Z(Z(Z({},o),C(p,o,x)),{},{defaults:Z(Z({},x.prototype.defaults),Object(c.result)(o,"defaults")||{})}),{isComponent:!v||b||u?u||function(){return 0}:x.isComponent})),"object"===i()(l)&&(t.view=O.extend(Z(Z({},l),C(m,l,O)))),v?(v.model=t.model,v.view=t.view):(t.id=e,s.unshift(t));var _="component:type:".concat(v?"update":"add");return n&&n.trigger(_,v||t),this},getType:function(e){for(var t=s,n=0;n<t.length;n++)if(t[n].id==e)return t[n]},removeType:function(e){var t=s,n=this.getType(e);if(n){var r=t.indexOf(n);return t.splice(r,1),n}},getTypes:function(){return s},selectAdd:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(e.set({status:"selected"}),["component:selected","component:toggled"].forEach((function(r){return t.em.trigger(r,e,n)})))},selectRemove:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(e.set({status:"",state:""}),["component:deselected","component:toggled"].forEach((function(r){return t.em.trigger(r,e,n)})))},componentHovered:function(){var e=r.em,t=e.get("componentHovered"),n=e.previous("componentHovered"),i="hovered";n&&n.get("status")==i&&n.set({status:"",state:""}),t&&Object(c.isEmpty)(t.get("status"))&&t.set("status",i)},allById:function(){return o}}}},"./src/dom_components/model/Component.js":function(e,t,n){"use strict";n.r(t),n.d(t,"eventDrag",(function(){return y}));var r=n("./node_modules/@babel/runtime/helpers/typeof.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/utils/mixins.js"),c=n("./src/domain_abstract/model/Styleable.js"),u=n("./node_modules/backbone/backbone.js"),d=n.n(u),h=n("./src/dom_components/model/Components.js"),f=n("./src/selector_manager/model/Selector.js"),p=n("./src/selector_manager/model/Selectors.js"),g=n("./src/trait_manager/model/Traits.js");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},y="component:drag",w=d.a.Model.extend(c.default).extend({defaults:{tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",classes:"",script:"","script-export":"",attributes:"",traits:["id","title"],propagate:"",dmode:"",toolbar:null},init:function(){},updated:function(e,t,n){},removed:function(){},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.em,i=this.parent(),o=i&&i.attributes;if(o&&o.propagate){var s={},l=o.propagate;l.forEach((function(e){return s[e]=i.get(e)})),s.propagate=l,s=v(v({},s),t),this.set(s)}var c=this.get("propagate");c&&this.set("propagate",Object(a.isArray)(c)?c:[c]),n&&n.config&&n.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),n.em=r,this.opt=n,this.em=r,this.frame=n.frame,this.config=n.config||{},this.set("attributes",v(v({},this.defaults.attributes||{}),this.get("attributes")||{})),this.ccid=w.createId(this,n),this.initClasses(),this.initTraits(),this.initComponents(),this.initToolbar(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.set("status",""),this.views=[],["classes","traits","components"].forEach((function(t){var n="add remove ".concat("components"!==t?"change":"");e.listenTo(e.get(t),n.trim(),(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.emitUpdate.apply(e,[t].concat(r))}))})),n.temporary||(this.init(),r&&r.trigger("component:create",this))},is:function(e){return!(this.get("type")!=e)},props:function(){return this.attributes},index:function(){var e=this.collection;return e&&e.indexOf(this)},setDragMode:function(e){return this.set("dmode",e)},find:function(e){var t=[],n=this.view.$el.find(e);return n.each((function(e){var r=n.eq(e).data("model");r&&t.push(r)})),t},findType:function(e){var t=[];return function n(r){return r.forEach((function(r){r.is(e)&&t.push(r),n(r.components())}))}(this.components()),t},closest:function(e){var t=this.view.$el.closest(e);return t.length&&t.data("model")},closestType:function(e){for(var t=this.parent();t&&!t.is(e);)t=t.parent();return t},tagUpdated:function(){var e=this.collection,t=e.indexOf(this);e.remove(this),e.add(this,{at:t})},replaceWith:function(e){var t=this.collection,n=t.indexOf(this);return t.remove(this),t.add(e,{at:n})},attrUpdated:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.get("attributes"),o=i.class;o&&this.setClass(o),delete i.class;var s=i.style;s&&this.setStyle(s),delete i.style;var c=v({},this.previous("attributes")),u=Object(l.shallowDiff)(c,this.get("attributes"));Object(a.keys)(u).forEach((function(e){return n.trigger("change:attributes:".concat(e),n,u[e],r)}))},setAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.set("attributes",v({},e),t),this},addAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=v(v({},this.getAttributes()),e);return this.setAttributes(n,t),this},getStyle:function(){var e=this.em;if(e&&e.getConfig("avoidInlineStyle")){var t=e.get("state"),n=e.get("CssComposer").getIdRule(this.getId(),{state:t});if(this.rule=n,n)return n.getStyle()}return c.default.getStyle.call(this)},setStyle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=this.opt;if(r&&r.getConfig("avoidInlineStyle")&&!i.temporary){var o=this.get("style")||{};t=v(v({},t=Object(a.isString)(t)?this.parseStyle(t):t),o);var s=r.get("state"),u=r.get("CssComposer"),d=this.getStyle();this.rule=u.setIdRule(this.getId(),t,v(v({},n),{},{state:s}));var h=Object(l.shallowDiff)(d,t);this.set("style",{},{silent:1}),Object(a.keys)(h).forEach((function(t){return e.trigger("change:style:".concat(t))}))}else t=c.default.setStyle.apply(this,arguments);return t},getAttributes:function(){var e,t=this.em,n=[],r=v({},this.get("attributes")),i=t&&t.get("SelectorManager"),o=this.getId();return this.get("classes").forEach((function(e){return n.push(Object(a.isString)(e)?e:e.get("name"))})),n.length&&(r.class=n.join(" ")),Object(a.has)(r,"id")||(function(e){return e&&e.getConfig("avoidInlineStyle")}(t)?e=i&&i.get(o,i.Selector.TYPE_ID):Object(a.isEmpty)(this.getStyle())||(e=1),e&&(r.id=this.getId())),r},addClass:function(e){var t=this.em.get("SelectorManager").addClass(e);return this.get("classes").add(t)},setClass:function(e){return this.get("classes").reset(),this.addClass(e)},removeClass:function(e){var t=[];e=Object(a.isArray)(e)?e:[e];var n=this.get("classes"),r=f.default.TYPE_CLASS;return e.forEach((function(e){e.split(" ").forEach((function(e){var i=n.where({name:e,type:r})[0];i&&t.push(n.remove(i))}))})),t},getClasses:function(){var e=this.getAttributes().class;return e?e.split(" "):[]},initClasses:function(){var e=this.get("attributes").class||[],t=[this,"change:classes",this.initClasses],n=this.get("classes")||e,r=Object(a.isString)(n)?n.split(" "):n;this.stopListening.apply(this,t);var i=this.normalizeClasses(r),o=new p.default([]);return this.set("classes",o),o.add(i),this.listenTo.apply(this,t),this},initComponents:function(){var e=[this,"change:components",this.initComponents];this.stopListening.apply(this,e);var t=new h.default(null,this.opt);t.parent=this;var n=this.get("components"),r=!this.opt.avoidChildren;return this.set("components",t),r&&t.add(Object(a.isFunction)(n)?n(this):n),this.listenTo.apply(this,e),this},initTraits:function(e){var t=this.em,n=[this,"change:traits",this.initTraits];this.stopListening.apply(this,n),this.loadTraits();var r=v({},this.get("attributes")),i=this.get("traits");return i.each((function(e){if(!e.get("changeProp")){var t=e.get("name"),n=e.getInitValue();t&&n&&(r[t]=n)}})),i.length&&this.set("attributes",r),this.listenTo.apply(this,n),e&&t&&t.trigger("component:toggled"),this},append:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.components().add(e,t);return Object(a.isArray)(n)?n:[n]},components:function(e){var t=this.get("components");return Object(a.isUndefined)(e)?t:(t.reset(),e&&this.append(e))},empty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.components().reset(null,e),this},parent:function(){var e=this.collection;return e&&e.parent},scriptUpdated:function(){this.set("scriptUpdated",1)},initToolbar:function(){var e=this.em,t=this,n=e&&e.getConfig("stylePrefix")||"";if(!t.get("toolbar")){var r=[];t.collection&&r.push({attributes:{class:"fa fa-arrow-up"},command:function(e){return e.runCommand("core:component-exit",{force:1})}}),t.get("draggable")&&r.push({attributes:{class:"fa fa-arrows ".concat(n,"no-touch-actions"),draggable:!0},command:"tlb-move"}),t.get("copyable")&&r.push({attributes:{class:"fa fa-clone"},command:"tlb-clone"}),t.get("removable")&&r.push({attributes:{class:"fa fa-trash-o"},command:"tlb-delete"}),t.set("toolbar",r)}},loadTraits:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=e||this.get("traits"),!((e=Object(a.isFunction)(e)?e(this):e)instanceof g.default)){var n=new g.default([],this.opt);n.setTarget(this),e.length&&(e.forEach((function(e){return e.attributes&&delete e.attributes.value})),n.add(e)),this.set("traits",n,t)}return this},getTrait:function(e){return this.get("traits").filter((function(t){return t.get("id")===e||t.get("name")===e}))[0]},updateTrait:function(e,t){var n=this.em,r=this.getTrait(e);return r&&r.set(t),n&&n.trigger("component:toggled"),this},getTraitIndex:function(e){var t=this.getTrait(e);return t?this.get("traits").indexOf(t):t},removeTrait:function(e){var t=this,n=this.em,r=(Object(a.isArray)(e)?e:[e]).map((function(e){return t.getTrait(e)})),i=this.get("traits").remove(r);return n&&n.trigger("component:toggled"),i},addTrait:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.em,r=this.get("traits").add(e,t);return n&&n.trigger("component:toggled"),r},normalizeClasses:function(e){var t=[],n=this.em;if(n){var r=n.get("SelectorManager");if(r)return e.forEach((function(e){var n=r.add("string"==typeof e?e:e.name);t.push(n)})),t}},clone:function(){var e=this.em,t=this.getStyle(),n=v({},this.attributes),r=v({},this.opt);n.attributes=v({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.get("components").each((function(e,t){n.components[t]=e.clone()})),this.get("traits").each((function(e,t){n.traits[t]=e.clone()})),this.get("classes").each((function(e,t){n.classes[t]=e.get("name")})),n.status="",n.view="",r.collection=null,e&&e.getConfig("avoidInlineStyle")&&!Object(a.isEmpty)(t)&&(n.style=t);var i=new this.constructor(n,r),o="component:clone";return e&&e.trigger(o,i),this.trigger(o,i),i},getName:function(){var e=this.em,t=this.attributes,n=t.type,r=t.tagName,i=this.get("name"),o="div"==r,s=n||(o?"box":r),a=!n&&r&&!o&&r,c="domComponents.names.",u=i&&e&&e.t("".concat(c).concat(i)),d=a&&e&&e.t("".concat(c).concat(a)),h=e&&(e.t("".concat(c).concat(n))||e.t("".concat(c).concat(r)));return this.get("custom-name")||u||i||d||Object(l.capitalize)(a)||h||Object(l.capitalize)(s)},getIcon:function(){var e=this.get("icon");return e?e+" ":""},toHTML:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=[],r=e.tag,i=r||t.get("tagName"),o=t.get("void"),s=e.attributes,l=this.getAttrToHTML();for(var c in delete e.tag,s&&(Object(a.isFunction)(s)?l=s(t,l)||{}:Object(a.isObject)(s)&&(l=s)),l){var u=l[c],d=Object(a.isString)(u)?u.replace(/"/g,"&quot;"):u;Object(a.isUndefined)(d)||(Object(a.isBoolean)(d)?d&&n.push(c):n.push("".concat(c,'="').concat(d,'"')))}var h=n.length?" ".concat(n.join(" ")):"",f="<".concat(i).concat(h).concat(o?"/":"",">").concat(t.get("content"));return t.get("components").each((function(t){return f+=t.toHTML(e)})),!o&&(f+="</".concat(i,">")),f},getAttrToHTML:function(){var e=this.getAttributes();return delete e.style,e},toJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=d.a.Model.prototype.toJSON.apply(this,t);return r.attributes=this.getAttributes(),delete r.attributes.class,delete r.toolbar,delete r.traits,this.em.getConfig("avoidDefaults")&&this.getChangedProps(r),r},getChangedProps:function(e){var t=e||d.a.Model.prototype.toJSON.apply(this),n=Object(a.result)(this,"defaults");return Object(a.forEach)(n,(function(e,n){-1===["type","content"].indexOf(n)&&t[n]===e&&delete t[n]})),Object(a.isEmpty)(t.type)&&delete t.type,Object(a.forEach)(["attributes","style"],(function(e){Object(a.isEmpty)(n[e])&&Object(a.isEmpty)(t[e])&&delete t[e]})),Object(a.forEach)(["classes","components"],(function(e){(!t[e]||Object(a.isEmpty)(n[e])&&!t[e].length)&&delete t[e]})),t},getId:function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},setId:function(e,t){var n=v({},this.get("attributes"));return n.id=e,this.set("attributes",n,t),this},getEl:function(e){var t=this.getView(e);return t&&t.el},getView:function(e){var t=this.view;return e&&(t=this.views.filter((function(t){return t._getFrame()===e.view}))[0]),t},getCurrentView:function(){var e=(this.em.get("currentFrame")||{}).model;return this.getView(e)},getScriptString:function(e){var t=this,n=e||this.get("script");if(!n)return n;if("function"==typeof n){var r=n.toString().trim();n=(r=r.replace(/^function[\s\w]*\(\)\s?\{/,"").replace(/\}$/,"")).trim()}var o=this.em.getConfig(),s=b(o.tagVarStart||"{[ "),l=b(o.tagVarEnd||" ]}"),c=new RegExp("".concat(s,"([\\w\\d-]*)").concat(l),"g");return n.replace(c,(function(e,n){t.scriptUpdated();var r=t.attributes[n]||"";return Object(a.isArray)(r)||"object"==i()(r)?JSON.stringify(r):r}))},emitUpdate:function(e){for(var t=this.em,n="component:update"+(e?":".concat(e):""),r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e&&this.updated.apply(this,[e,e&&this.get(e),e&&this.previous(e)].concat(i)),this.trigger.apply(this,[n].concat(i)),t&&t.trigger.apply(t,[n,this].concat(i))},onAll:function(e){return Object(a.isFunction)(e)&&(e(this),this.components().forEach((function(t){return t.onAll(e)}))),this},remove:function(){var e=this.collection;return e&&e.remove(this)},resetId:function(){var e=this.em,t=this.getId();if(t){var n=w.createId(this);this.setId(n);var r=e&&e.get("CssComposer").getIdRule(t),i=r&&r.get("selectors").at(0);return i&&i.set("name",n),this}},_getStyleRule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=this.em,r=t||this.getId();return n&&n.get("CssComposer").getIdRule(r)},_getStyleSelector:function(e){var t=this._getStyleRule(e);return t&&t.get("selectors").at(0)},_idUpdated:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n.idUpdate){var r=this.ccid,i=this.get("attributes")||{},o=i.id,s=(this.previous("attributes")||{}).id||r,a=w.getList(this);if(a[o])return this.setId(s,{idUpdate:1});delete a[s],a[o]=this,this.ccid=o;var l=this._getStyleSelector({id:s});l&&l.set({name:o,label:o})}}},{isComponent:function(e){return{tagName:e.tagName?e.tagName.toLowerCase():""}},ensureInList:function(e){var t=w.getList(e),n=e.getId(),r=t[n];if(r){if(r!==e){var i=w.getIncrementId(n,t);e.setId(i),t[i]=e}}else t[n]=e;e.components().forEach((function(e){return w.ensureInList(e)}))},createId:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=w.getList(e),i=e.get("attributes"),o=i.id;return o?(t=w.getIncrementId(o,r,n),e.setId(t)):t=w.getNewId(r),r[t]=e,t},getNewId:function(e){for(var t=Object.keys(e).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-t),r="i".concat(n);e[r];)r=w.getNewId(e);return r},getIncrementId:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.keepIds,i=void 0===r?[]:r,o=1,s=e;if(i.indexOf(e)<0)for(;t[s];)o++,s="".concat(e,"-").concat(o);return s},getList:function(e){var t=e.opt&&e.opt.domc;return t?t.componentsById:{}},checkId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object(a.isArray)(e)?e:[e],o=r.keepIds,s=void 0===o?[]:o;i.forEach((function(e){var i=e.attributes,o=void 0===i?{}:i,l=e.components,c=o.id;if(c&&n[c]&&s.indexOf(c)<0){var u=w.getIncrementId(c,n);o.id=u,Object(a.isArray)(t)&&t.forEach((function(e){var t=e.selectors;t.forEach((function(e,n){e==="#".concat(c)&&(t[n]="#".concat(u))}))}))}l&&w.checkId(l,t,n,r)}))}});t.default=w},"./src/dom_components/model/ComponentComment.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/ComponentTextNode.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.default=o.default.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.default.prototype.defaults),toHTML:function(){return"\x3c!--".concat(this.get("content"),"--\x3e")}},{isComponent:function(e){if(8==e.nodeType)return{tagName:"NULL",type:"comment",content:e.textContent}}})},"./src/dom_components/model/ComponentImage.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/dom_components/model/Component.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"';t.default=s.default.extend({defaults:l(l({},s.default.prototype.defaults),{},{type:"image",tagName:"img",void:1,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(c,'>\n        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>\n      </svg>'),fallback:"<svg ".concat(c,'>\n        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>\n      </svg>'),file:""}),initialize:function(e,t){s.default.prototype.initialize.apply(this,arguments);var n=this.get("attributes");n.src&&this.set("src",n.src)},initToolbar:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.default.prototype.initToolbar.apply(this,t);var r=this.em;if(r){var i=r.get("Commands"),o="image-editor";if(i.has(o)){for(var a=!1,l=this.get("toolbar"),c=0;c<l.length;c++)if("image-editor"===l[c].command){a=!0;break}a||(l.push({attributes:{class:"fa fa-pencil"},command:o}),this.set("toolbar",l))}}},getAttrToHTML:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.default.prototype.getAttrToHTML.apply(this,t),i=this.getSrcResult();return i&&(r.src=i),r},getSrcResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get(e.fallback?"fallback":"src")||"",n=t;return t&&"<svg"===t.substr(0,4)&&(n="data:image/svg+xml;base64,".concat(window.btoa(t))),n},isDefaultSrc:function(){return this.get("src")===Object(o.result)(this,"defaults").src},parseUri:function(e){var t=document.createElement("a");t.href=e;for(var n={},r=t.search.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].split("="),s=decodeURIComponent(o[0]);s&&(n[s]=decodeURIComponent(o[1]))}return{hostname:t.hostname,pathname:t.pathname,protocol:t.protocol,search:t.search,hash:t.hash,port:t.port,query:n}}},{isComponent:function(e){var t="";return"IMG"==e.tagName&&(t={type:"image"}),t}})},"./src/dom_components/model/ComponentLabel.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/ComponentText.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{tagName:"label",traits:["id","title","for"]})},{isComponent:function(e){if("LABEL"==e.tagName)return{type:"label"}}})},"./src/dom_components/model/ComponentLink.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/ComponentText.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"link",tagName:"a",traits:["title","href","target"]}),getAttrToHTML:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o.default.prototype.getAttrToHTML.apply(this,t);return delete r.onmousedown,r}},{isComponent:function(e){var t;if("A"==e.tagName){t={type:"link",editable:0};var n=e.childNodes,r=n.length;r||delete t.editable;for(var i=0;i<r;i++){var o=n[i];if(3==o.nodeType&&""!=o.textContent.trim()){delete t.editable;break}}}return t}})},"./src/dom_components/model/ComponentMap.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/ComponentImage.js"),s=n("./src/dom_components/model/Component.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:l(l({},o.default.prototype.defaults),{},{type:"map",src:"",void:0,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:s.default.prototype.defaults.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]}),initialize:function(e,t){this.get("src")?this.parseFromSrc():this.updateSrc(),o.default.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},updateSrc:function(){this.set("src",this.getMapUrl())},getMapUrl:function(){var e=this,t=e.get("address"),n=e.get("zoom"),r=e.get("mapType");return t=t?"&q="+t:"",n=n?"&z="+n:"",r=r?"&t="+r:"",e.get("mapUrl")+"?"+t+n+r+"&output=embed"},parseFromSrc:function(){var e=this.parseUri(this.get("src")).query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)}},{isComponent:function(e){var t="";return"IFRAME"==e.tagName&&/maps\.google\.com/.test(e.src)&&(t={type:"map",src:e.src}),t}})},"./src/dom_components/model/ComponentScript.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/Component.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"script",droppable:!1,draggable:!1,layerable:!1})},{isComponent:function(e){if("SCRIPT"==e.tagName){var t={type:"script"};return e.src&&(t.src=e.src,t.onload=e.onload),t}}})},"./src/dom_components/model/ComponentSvg.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/Component.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{resizable:{ratioDefault:1},highlightable:0}),getName:function(){var e=this.get("tagName"),t=this.get("custom-name");return e=e.charAt(0).toUpperCase()+e.slice(1),t||e}},{isComponent:function(e){if(SVGElement&&e instanceof SVGElement)return{tagName:e.tagName,type:"svg"}}})},"./src/dom_components/model/ComponentSvgIn.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/ComponentSvg.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{selectable:!1,hoverable:!1,layerable:!1})},{isComponent:function(e){if(o.default.isComponent(e)&&"svg"!==e.tagName.toLowerCase())return{tagName:e.tagName,type:"svg-in"}}})},"./src/dom_components/model/ComponentTable.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/Component.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"table",tagName:"table",droppable:["tbody","thead","tfoot"]}),initialize:function(e,t){o.default.prototype.initialize.apply(this,arguments);var n=this.get("components");!n.length&&n.add({type:"tbody"})}},{isComponent:function(e){var t="";return"TABLE"==e.tagName&&(t={type:"table"}),t}})},"./src/dom_components/model/ComponentTableBody.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/Component.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"tbody",tagName:"tbody",draggable:["table"],droppable:["tr"],columns:1,rows:1}),initialize:function(e,t){o.default.prototype.initialize.apply(this,arguments);var n=this.get("components"),r=this.get("columns"),i=this.get("rows");if(!n.length){for(var s=[];i--;){for(var a=[],l=r;l--;)a.push({type:"cell",classes:["cell"]});s.push({type:"row",classes:["row"],components:a})}n.add(s)}}},{isComponent:function(e){var t="";return"TBODY"==e.tagName&&(t={type:"tbody"}),t}})},"./src/dom_components/model/ComponentTableCell.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/Component.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"cell",tagName:"td",draggable:["tr"]})},{isComponent:function(e){var t="",n=e.tagName;return"TD"!=n&&"TH"!=n||(t={type:"cell",tagName:n.toLowerCase()}),t}})},"./src/dom_components/model/ComponentTableFoot.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/ComponentTableBody.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"tfoot",tagName:"tfoot"})},{isComponent:function(e){var t="";return"TFOOT"==e.tagName&&(t={type:"tfoot"}),t}})},"./src/dom_components/model/ComponentTableHead.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/ComponentTableBody.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"thead",tagName:"thead"})},{isComponent:function(e){var t="";return"THEAD"==e.tagName&&(t={type:"thead"}),t}})},"./src/dom_components/model/ComponentTableRow.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/Component.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{tagName:"tr",draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},{isComponent:function(e){return"TR"==e.tagName&&!0}})},"./src/dom_components/model/ComponentText.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/Component.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"text",droppable:!1,editable:!0}),toHTML:function(){return this.trigger("sync:content",{silent:1}),o.default.prototype.toHTML.apply(this,arguments)}})},"./src/dom_components/model/ComponentTextNode.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/Component.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{droppable:!1,layerable:!1,editable:!0}),toHTML:function(){return this.get("content").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{isComponent:function(e){var t="";return 3===e.nodeType&&(t={type:"textnode",content:e.textContent}),t}})},"./src/dom_components/model/ComponentVideo.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/dom_components/model/ComponentImage.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l="yt",c="vi",u="ytnc";t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{type:"video",tagName:"video",videoId:"",void:0,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:0,poster:"",muted:0,autoplay:0,controls:1,color:"",list:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}}),initialize:function(e,t){this.em=t.em,this.get("src")&&this.parseFromSrc(),this.updateTraits(),this.listenTo(this,"change:provider",this.updateTraits),this.listenTo(this,"change:videoId change:provider",this.updateSrc),o.default.prototype.initialize.apply(this,arguments)},updateTraits:function(){var e,t="iframe";switch(this.get("provider")){case l:case u:e=this.getYoutubeTraits();break;case c:e=this.getVimeoTraits();break;default:t="video",e=this.getSourceTraits()}this.set({tagName:t},{silent:1}),this.set({traits:e}),this.em.trigger("component:toggled")},parseFromSrc:function(){var e=this.get("provider"),t=this.parseUri(this.get("src")),n=t.query;switch(e){case l:case u:case c:var r=t.pathname.split("/").pop();this.set("videoId",r),n.list&&this.set("list",n.list),n.autoplay&&this.set("autoplay",1),n.loop&&this.set("loop",1),0===parseInt(n.controls)&&this.set("controls",0),n.color&&this.set("color",n.color),"0"===n.rel&&this.set("rel",0),"1"===n.modestbranding&&this.set("modestbranding",1)}},updateSrc:function(){var e="";switch(this.get("provider")){case l:e=this.getYoutubeSrc();break;case u:e=this.getYoutubeNoCookieSrc();break;case c:e=this.getVimeoSrc()}this.set({src:e})},getAttrToHTML:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o.default.prototype.getAttrToHTML.apply(this,t),i=this.get("provider");switch(i){case l:case u:case c:break;default:this.get("loop")&&(r.loop="loop"),this.get("autoplay")&&(r.autoplay="autoplay"),this.get("controls")&&(r.controls="controls")}return r},getProviderTrait:function(){return{type:"select",label:"Provider",name:"provider",changeProp:1,options:[{value:"so",name:"HTML5 Source"},{value:l,name:"Youtube"},{value:u,name:"Youtube (no cookie)"},{value:c,name:"Vimeo"}]}},getSourceTraits:function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:1},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},getYoutubeTraits:function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:1},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:1},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:1}]},getVimeoTraits:function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:1},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:1},this.getAutoplayTrait(),this.getLoopTrait()]},getAutoplayTrait:function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:1}},getLoopTrait:function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:1}},getControlsTrait:function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:1}},getYoutubeSrc:function(){var e=this.get("videoId"),t=this.get("ytUrl"),n=this.get("list");return t+=e+(e.indexOf("?")<0?"?":""),t+=n?"&list=".concat(n):"",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("controls")?"":"&controls=0&showinfo=0",t+=this.get("loop")?"&loop=1&playlist=".concat(e):"",(t+=this.get("rel")?"":"&rel=0")+(this.get("modestbranding")?"&modestbranding=1":"")},getYoutubeNoCookieSrc:function(){return this.getYoutubeSrc().replace(this.get("ytUrl"),this.get("ytncUrl"))},getVimeoSrc:function(){var e=this.get("viUrl");return e+=this.get("videoId")+"?",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("loop")?"&loop=1":"",(e+=this.get("controls")?"":"&title=0&portrait=0&badge=0")+(this.get("color")?"&color="+this.get("color"):"")}},{isComponent:function(e){var t="",n=/youtube\.com\/embed/.test(e.src),r=/youtube-nocookie\.com\/embed/.test(e.src),i=/player\.vimeo\.com\/video/.test(e.src),o=n||r||i;return("VIDEO"==e.tagName||"IFRAME"==e.tagName&&o)&&(t={type:"video"},e.src&&(t.src=e.src),o&&(n?t.provider=l:r?t.provider=u:i&&(t.provider=c))),t}})},"./src/dom_components/model/ComponentWrapper.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/model/Component.js");t.default=r.default.extend({},{isComponent:function(){return!1}})},"./src/dom_components/model/Components.js":function(e,t,n){"use strict";n.r(t);var r,i=n("./node_modules/@babel/runtime/helpers/typeof.js"),o=n.n(i),s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(s),l=n("./node_modules/backbone/backbone.js"),c=n.n(l),u=n("./node_modules/underscore/modules/index-all.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){return(e||[]).map((function(e){return e.getId()}))};t.default=c.a.Collection.extend({initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.opt=t,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren),this.config=t.config,this.em=t.em,this.domc=t.domc},resetChildren:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,i=n.previousModels||[],o=i.filter((function(t){return!e.get(t.cid)})),s=e.map((function(e){return e.getId()}));n.keepIds=f(i).filter((function(e){return s.indexOf(e)>=0})),o.forEach((function(e){return t.removeChildren(e,r,n)})),e.each((function(e){return t.onAdd(e)}))},removeChildren:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var i=this.domc,o=this.em,s=i?i.allById():{};if(!r.temporary){var a=e.getId(),l=o.get("SelectorManager").getAll(),c=o.get("CssComposer").getAll(),u=(r.keepIds||[]).indexOf(a)<0;delete s[a];var d=u?c.remove(c.filter((function(e){return e.getSelectors().getFullString()==="#".concat(a)}))):[];if(l.remove(d.map((function(e){return e.getSelectors().at(0)}))),!e.opt.temporary){var h=o.get("Commands"),f=e.get("style-signature"),p={target:e};f&&h.run("core:component-style-clear",p),e.removed(),o.trigger("component:remove",e)}var g=e.components();g.forEach((function(e){return n.removeChildren(e,t,r)}))}var m=e.components(),v=o.get("UndoManager");o.stopListening(m),o.stopListening(e),o.stopListening(e.get("classes")),v.remove(e),v.remove(m)}},model:function(e,t){var n,r=t.collection.opt,i=r.em,o=i.get("DomComponents").componentTypes;t.em=i,t.config=r.config,t.componentTypes=o,t.domc=r.domc;for(var s=0;s<o.length;s++)if(o[s].id==e.type){n=o[s].model;break}return n||(n=o[o.length-1].model,i&&e.type&&i.logWarning("Component type '".concat(e.type,"' not found"),{attrs:e,options:t})),new n(e,t)},parseString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.em,o=this.opt.domc,s=i.get("CssComposer"),a=i.get("Parser").parseHtml(e);return r||(r=n("./src/dom_components/model/Component.js").default),r.checkId(a.html,a.css,o.componentsById,t),a.css&&s&&!t.temporary&&s.addCollection(a.css,h(h({},t),{},{extend:1})),a.html},add:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.keepIds=f(n.previousModels),Object(u.isString)(e)?e=this.parseString(e,n):Object(u.isArray)(e)&&e.forEach((function(r,i){if(Object(u.isString)(r)){var o=t.parseString(r,n);e[i]=Object(u.isArray)(o)&&!o.length?null:o}}));var r=Object(u.isArray)(e);return e=(r?e:[e]).filter((function(e){return e})).map((function(e){return t.processDef(e)})),e=r?Object(u.flatten)(e,1):e[0],c.a.Collection.prototype.add.apply(this,[e,n])},processDef:function(e){if(e.cid&&e.ccid)return e;var t=this.em,n=this.config,r=(void 0===n?{}:n).processor,i=e;if(r){var s=r(i=h({},i));s&&(Object(u.each)(i,(function(e,t){return delete i[t]})),Object(u.extend)(i,s))}if(i.$$typeof&&"object"==o()(i.props)){(i=h({},i)).props=h({},i.props);var a=t.get("DomComponents"),l=t.get("Parser").parserHtml;Object(u.each)(i,(function(e,t){Object(u.includes)(["props","type"],t)||delete i[t]}));var c=i.props,d=c.children;delete c.children,delete i.props;var f=l.splitPropsFromAttr(c);i.attributes=f.attrs,d&&(i.components=d),i.type?a.getType(i.type)||(i.tagName=i.type,delete i.type):i.type="textnode",Object(u.extend)(i,f.props)}return i},onAdd:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.domc,i=this.em,o=e.getStyle(),s=i&&i.getConfig("avoidInlineStyle");if(r&&r.Component.ensureInList(e),!Object(u.isEmpty)(o)&&!s&&i&&i.get&&i.getConfig("forceClass")&&!n.temporary){var a=e.cid;i.get("CssComposer").setClassRule(a,o),e.setStyle({}),e.addClass(a)}}})},"./src/dom_components/model/Toolbar.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/dom_components/model/ToolbarButton.js");t.default=i.a.Collection.extend({model:o.default})},"./src/dom_components/model/ToolbarButton.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js");t.default=n.n(r).a.Model.extend({defaults:{command:"",attributes:{}}})},"./src/dom_components/view/ComponentCommentView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentTextNodeView.js");t.default=r.default.extend({_createElement:function(){return document.createComment(this.model.get("content"))}})},"./src/dom_components/view/ComponentImageView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./src/dom_components/view/ComponentView.js");t.default=i.default.extend({tagName:"img",events:{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"},initialize:function(e){var t=this.model;i.default.prototype.initialize.apply(this,arguments),this.listenTo(t,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image");var n=this.config;n.modal&&(this.modal=n.modal),n.am&&(this.am=n.am),this.fetchFile()},fetchFile:function(){if(!this.modelOpt.temporary){var e=this.model,t=e.get("file");t&&(this.em.get("AssetManager").FileUploader().uploadFile({dataTransfer:{files:[t]}},(function(t){var n=t&&t.data&&t.data[0],i=n&&(Object(r.isString)(n)?n:n.src);i&&e.set({src:i})})),e.set("file",""))}},updateSrc:function(){var e=this.model,t=this.classEmpty,n=this.$el,r=e.getSrcResult(),i=r&&!e.isDefaultSrc();e.addAttributes({src:r}),n[i?"removeClass":"addClass"](t)},onActive:function(e){e&&e.stopPropagation();var t=this.opts.config.em,n=t?t.get("Editor"):"";n&&this.model.get("editable")&&n.runCommand("open-assets",{target:this.model,types:["image"],accept:"image/*",onSelect:function(){n.Modal.close(),n.AssetManager.setTarget(null)}})},onError:function(){var e=this.model.getSrcResult({fallback:1});e&&(this.el.src=e)},onLoad:function(){this.em.trigger("change:canvasOffset")},noDrag:function(e){return e.preventDefault(),!1},render:function(){this.renderAttributes(),this.updateSrc();var e=this.$el,t=this.model,n=e.attr("class")||"";return!t.get("src")&&e.attr("class","".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this}})},"./src/dom_components/view/ComponentLabelView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentLinkView.js");t.default=r.default.extend({tagName:"span"})},"./src/dom_components/view/ComponentLinkView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentTextView.js");t.default=r.default.extend({render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default.prototype.render.apply(this,t),this.el.addEventListener("click",this.prevDef,!0),this}})},"./src/dom_components/view/ComponentMapView.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/backbone/backbone.js");var r=n("./src/dom_components/view/ComponentImageView.js");t.default=r.default.extend({tagName:"div",events:{},initialize:function(e){r.default.prototype.initialize.apply(this,arguments),this.classEmpty=this.ppfx+"plh-map"},updateSrc:function(){this.getIframe().src=this.model.get("src")},getIframe:function(){if(!this.iframe){var e=document.createElement("iframe");e.src=this.model.get("src"),e.frameBorder=0,e.style.height="100%",e.style.width="100%",e.className=this.ppfx+"no-pointer",this.iframe=e}return this.iframe},render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default.prototype.render.apply(this,t),this.updateClasses(),this.el.appendChild(this.getIframe()),this}})},"./src/dom_components/view/ComponentScriptView.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/backbone/backbone.js");var r=n("./src/dom_components/view/ComponentImageView.js");t.default=r.default.extend({tagName:"script",events:{},render:function(){var e=this.model,t=e.get("src"),n=this.em,r=n&&n.get("scriptCount")?n.get("scriptCount"):0,i="";if(t){var o=e.get("onload"),s="script"+r,a="script"+(r+1);i="var "+s+" = document.createElement('script');\n"+s+".onload = function(){\n"+(o?o+"();\n":"")+"typeof "+a+"Start == 'function' && "+a+"Start();\n};\n"+s+".src = '"+t+"';\nfunction "+s+"Start() { document.body.appendChild("+s+"); };\n"+(r?"":s+"Start();"),n&&n.set("scriptCount",r+1)}else i=e.get("content");return this.el.innerHTML=i,this.postRender(),this}})},"./src/dom_components/view/ComponentSvgView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentView.js");t.default=r.default.extend({_createElement:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}})},"./src/dom_components/view/ComponentTableBodyView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentView.js");t.default=r.default.extend({})},"./src/dom_components/view/ComponentTableCellView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentView.js");t.default=r.default.extend({})},"./src/dom_components/view/ComponentTableFootView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentView.js");t.default=r.default.extend({})},"./src/dom_components/view/ComponentTableHeadView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentView.js");t.default=r.default.extend({})},"./src/dom_components/view/ComponentTableRowView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentView.js");t.default=r.default.extend({})},"./src/dom_components/view/ComponentTableView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentView.js");t.default=r.default.extend({events:{}})},"./src/dom_components/view/ComponentTextNodeView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentView.js");t.default=r.default.extend({initialize:function(){r.default.prototype.initialize.apply(this,arguments)},_setAttributes:function(){},renderAttributes:function(){},setAttribute:function(){},updateAttributes:function(){},initClasses:function(){},initComponents:function(){},delegateEvents:function(){},_createElement:function(){return document.createTextNode("")},render:function(){var e=this.model;return e.opt.temporary||(this.el.textContent=e.get("content")),this}})},"./src/dom_components/view/ComponentTextView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/utils/mixins.js"),s=n("./src/dom_components/view/ComponentView.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=s.default.prototype;t.default=s.default.extend({events:{dblclick:"onActive",input:"onInput"},initialize:function(e){c.initialize.apply(this,arguments),this.disableEditing=this.disableEditing.bind(this);var t=this.model,n=this.em;this.listenTo(t,"focus",this.onActive),this.listenTo(t,"change:content",this.updateContentText),this.listenTo(t,"sync:content",this.syncContent),this.rte=n&&n.get("RichTextEditor")},updateContentText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.fromDisable&&this.disableEditing()},onActive:function(e){var t=this.rte,n=this.em;if(!(this.rteEnabled||!this.model.get("editable")||n&&n.isEditing())){if(e&&e.stopPropagation&&e.stopPropagation(),t)try{this.activeRte=t.enable(this,this.activeRte)}catch(r){n.logError(r)}this.toggleEvents(1)}},onDisable:function(){this.disableEditing()},disableEditing:function(){var e=this.rte,t=this.activeRte,n=this.em,r=this.model.get("editable");if(e&&r){try{e.disable(this,t)}catch(i){n.logError(i)}this.syncContent()}this.toggleEvents()},getContent:function(){var e=this.activeRte;return e&&"function"==typeof e.getContent?e.getContent():this.getChildrenContainer().innerHTML},syncContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.rte,r=this.rteEnabled;if(r||e.force){var i=this.getContent(),o=t.components(),s=l({fromDisable:1},e);if(t.set("content","",s),n.customRte)o.length&&o.reset(null,e),t.set("content",i,s);else{var a=function t(n){var r=!!n.get("textable"),i=!["text","default",""].some((function(e){return n.is(e)}))||r;n.set(l({_innertext:!i,editable:i&&n.get("editable"),selectable:i,hoverable:i,removable:r,draggable:r,highlightable:0,copyable:r},!r&&{toolbar:""}),e),n.get("components").each((function(e){return t(e)}))};!e.silent&&t.trigger("change:content",t,"",s),o.reset(i,e),o.each((function(e){return a(e)})),o.trigger("resetNavigator")}}},onInput:function(){var e=this.em,t="component",n=["".concat(t,":update"),"".concat(t,":input")].join(" ");e&&e.trigger(n,this.model)},disablePropagation:function(e){e.stopPropagation()},toggleEvents:function(e){var t=this.em,n={on:o.on,off:o.off},r=e?"on":"off";t.setEditing(e),this.rteEnabled=!!e;var i=[this.el.ownerDocument,document];if(n.off(i,"mousedown",this.disableEditing),n[r](i,"mousedown",this.disableEditing),t[r]("toolbar:run:before",this.disableEditing),this.$el.off("mousedown",this.disablePropagation),this.$el[r]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var s=this.el;s;)s.draggable=!e,(s=s.parentNode)&&"BODY"==s.tagName&&(s=0)}})},"./src/dom_components/view/ComponentVideoView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dom_components/view/ComponentImageView.js"),i=n("./src/dom_components/view/ComponentView.js");t.default=r.default.extend({tagName:"div",events:{},initialize:function(e){i.default.prototype.initialize.apply(this,arguments);var t=this.model,n=["loop","autoplay","controls","color","rel","modestbranding","poster"],r=n.map((function(e){return"change:".concat(e)})).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,r,this.updateVideo)},updateProvider:function(){var e=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(e))},updateSrc:function(){var e=this.model,t=this.videoEl;if(t){var n=e.get("provider"),r=e.get("src");switch(n){case"yt":r=e.getYoutubeSrc();break;case"ytnc":r=e.getYoutubeNoCookieSrc();break;case"vi":r=e.getVimeoSrc()}t.src=r}},updateVideo:function(){var e=this.model.get("provider"),t=this.videoEl,n=this.model;switch(e){case"yt":case"ytnc":case"vi":this.model.trigger("change:videoId");break;default:t.loop=n.get("loop"),t.autoplay=n.get("autoplay"),t.controls=n.get("controls"),t.poster=n.get("poster")}},renderByProvider:function(e){var t;switch(e){case"yt":t=this.renderYoutube();break;case"ytnc":t=this.renderYoutubeNoCookie();break;case"vi":t=this.renderVimeo();break;default:t=this.renderSource()}return this.videoEl=t,t},renderSource:function(){var e=document.createElement("video");return e.src=this.model.get("src"),this.initVideoEl(e),e},renderYoutube:function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeSrc(),e.frameBorder=0,e.setAttribute("allowfullscreen",!0),this.initVideoEl(e),e},renderYoutubeNoCookie:function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeNoCookieSrc(),e.frameBorder=0,e.setAttribute("allowfullscreen",!0),this.initVideoEl(e),e},renderVimeo:function(){var e=document.createElement("iframe");return e.src=this.model.getVimeoSrc(),e.frameBorder=0,e.setAttribute("allowfullscreen",!0),this.initVideoEl(e),e},initVideoEl:function(e){e.className=this.ppfx+"no-pointer",e.style.height="100%",e.style.width="100%"},render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.prototype.render.apply(this,t),this.updateClasses();var i=this.model.get("provider");return this.el.appendChild(this.renderByProvider(i)),this.updateVideo(),this}})},"./src/dom_components/view/ComponentView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/dom_components/model/Components.js"),c=n("./src/dom_components/view/ComponentsView.js"),u=n("./src/selector_manager/model/Selectors.js"),d=n("./src/utils/dom.js"),h=n("./src/utils/mixins.js");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.a.View.extend({className:function(){return this.getClasses()},tagName:function(){return this.model.get("tagName")},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=e.config||{},r=n.em,i=t.opt||{},o=this.$el,s=this.el;this.opts=e,this.modelOpt=i,this.config=n,this.em=r||"",this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.attr=t.get("attributes"),this.classe=this.attr.class||[],this.listenTo(t,"change:style",this.updateStyle),this.listenTo(t,"change:attributes change:_innertext",this.renderAttributes),this.listenTo(t,"change:highlightable",this.updateHighlight),this.listenTo(t,"change:status",this.updateStatus),this.listenTo(t,"change:script",this.reset),this.listenTo(t,"change:content",this.updateContent),this.listenTo(t,"change",this.handleChange),this.listenTo(t,"active",this.onActive),this.listenTo(t,"disable",this.onDisable),o.data("model",t),Object(h.setViewEl)(s,this),t.view=this,this._getFrame()&&t.views.push(this),this.initClasses(),this.initComponents({avoidRender:1}),this.events=p(p({},this.events),this.__isDraggable()&&{dragstart:"handleDragStart"}),this.delegateEvents(),!i.temporary&&this.init(this._clbObj())},__isDraggable:function(){var e=this.model.attributes;return this.config.draggableComponents&&e.draggable&&!e._innertext},_clbObj:function(){var e=this.em,t=this.model,n=this.el;return{editor:e&&e.getEditor(),model:t,el:n}},init:function(){},removed:function(){},onActive:function(){},onDisable:function(){},remove:function(){var e=this;s.a.View.prototype.remove.apply(e,arguments);var t=e.model,n=e._getFrame()||{},r=n.model;t.components().forEach((function(e){var t=e.getView(r);t&&t.remove()}));var i=t.views;return i.splice(i.indexOf(e),1),e.removed(e._clbObj()),e.$el.data({model:"",collection:"",view:""}),delete e.model,delete e.$el,delete e.el.__gjsv,delete e.childrenView,delete e.scriptContainer,delete e.opts,e},handleDragStart:function(e){e.preventDefault(),e.stopPropagation(),this.em.get("Commands").run("tlb-move",{target:this.model,event:e})},initClasses:function(){var e=this.model,t="change:classes",n=e.get("classes");n instanceof u.default&&(this.stopListening(e,t,this.initClasses),this.listenTo(e,t,this.initClasses),this.listenTo(n,"add remove change",this.updateClasses),n.length&&this.importClasses())},initComponents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.$el,r=this.childrenView,i="change:components",o=t.get("components"),s=[t,i,this.initComponents];o instanceof l.default&&(n.data("collection",o),r&&r.remove(),this.stopListening.apply(this,s),!e.avoidRender&&this.renderChildren(),this.listenTo.apply(this,s))},handleChange:function(){var e=this.model,t=Object(a.keys)(e.changed);if(1!==t.length||"status"!==t[0])for(var n in e.emitUpdate(),e.changed)e.emitUpdate(n)},importClasses:function(){var e=this.config.em.get("SelectorManager");e&&this.model.get("classes").each((function(t){e.add(t.get("name"))}))},updateStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.el,n=this.model.get("status"),r=this.ppfx,i="".concat(r,"selected"),o="".concat(i,"-parent"),s="".concat(r,"freezed"),a="".concat(r,"hovered"),l=[i,o,s,a];this.$el.removeClass(l.join(" "));var c=t.getAttribute("class")||"",u="";switch(n){case"selected":u="".concat(c," ").concat(i);break;case"selected-parent":u="".concat(c," ").concat(o);break;case"freezed":u="".concat(c," ").concat(s);break;case"freezed-selected":u="".concat(c," ").concat(s," ").concat(i);break;case"hovered":u=e.avoidHover?"":"".concat(c," ").concat(a)}(u=u.trim())&&t.setAttribute("class",u)},updateHighlight:function(){var e=this.model.get("highlightable");this.setAttribute("data-highlightable",e?1:"")},updateStyle:function(){var e=this.model,t=this.em,n=this.el;if(t&&t.getConfig("avoidInlineStyle")){var r=e.getStyle(),i=Object(a.isEmpty)(r);!i&&e.setStyle(r),e.get("_innertext")&&i?n.removeAttribute("id"):n.id=e.getId()}else this.setAttribute("style",e.styleToString())},updateClasses:function(){var e=this.model.get("classes").pluck("name").join(" ");this.setAttribute("class",e),this.updateStatus()},setAttribute:function(e,t){var n=this.$el;t?n.attr(e,t):n.removeAttr(e)},getClasses:function(){return this.model.getClasses().join(" ")},updateAttributes:function(){var e=[],t=this.model,n=this.$el,r=this.el,i=t.attributes,o=i.highlightable,s=i.textable,l=p(p(p({"data-gjs-type":i.type||"default"},this.__isDraggable()?{draggable:!0}:{}),o?{"data-highlightable":1}:{}),s?{contenteditable:"false","data-gjs-textable":"true"}:{});Object(a.each)(r.attributes,(function(t){return e.push(t.nodeName)})),e.forEach((function(e){return n.removeAttr(e)}));var c=p(p({},l),t.getAttributes());Object(a.keys)(c).forEach((function(e){return!1===c[e]&&delete c[e]})),n.attr(c),this.updateStyle()},updateContent:function(){this.getChildrenContainer().innerHTML=this.model.get("content")},prevDef:function(e){e.preventDefault()},updateScript:function(){var e=this.em;this.model.get("script")&&e&&e.get("Canvas").getCanvasView().updateScript(this)},getChildrenContainer:function(){var e=this.el;return"function"==typeof this.getChildrenSelector&&(e=this.el.querySelector(this.getChildrenSelector())),e},getOffsetRect:function(){var e={},t=this.el,n=0,r=0;return function i(o){var s=o.offsetParent;s?(n+=s.offsetTop,r+=s.offsetLeft,i(s)):(e.top=t.offsetTop+n,e.left=t.offsetLeft+r,e.bottom=e.top+t.offsetHeight,e.right=e.left+t.offsetWidth)}(t),e},isInViewport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rect,n=this.el,r=n.ownerDocument,i=r.body,o=r.defaultView.frameElement,s=t||this.getOffsetRect(),a=s.top,l=s.left,c=this._getFrame().getOffsetRect();return a>=c.scrollTop&&l>=c.scrollLeft&&a<=c.scrollBottom&&l<=o.offsetWidth+i.scrollLeft},scrollIntoView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getOffsetRect(),n=this.isInViewport({rect:t});if(!n||e.force){var r=this.el;"smooth"!==e.behavior?r.ownerDocument.defaultView.scrollTo(0,t.top):r.scrollIntoView(p({behavior:"smooth",block:"nearest"},e))}},reset:function(){var e=this.el;this.el="",this._ensureElement(),this._setData(),Object(d.replaceWith)(e,this.el),this.render()},_setData:function(){var e=this.model,t=e.components();this.$el.data({model:e,collection:t,view:this})},_getFrame:function(){return this.config.frameView},renderChildren:function(){this.updateContent();var e=this.getChildrenContainer(),t=this.childrenView||new c.default({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});t.render(e),this.childrenView=t;for(var n=Array.prototype.slice.call(t.el.childNodes),r=0,i=n.length;r<i;r++)e.appendChild(n.shift())},renderAttributes:function(){this.updateAttributes(),this.updateClasses()},render:function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),Object(h.setViewEl)(this.el,this),this.postRender()),this},postRender:function(){var e=this.em,t=this.model;this.modelOpt.temporary||(this.onRender(this._clbObj()),e&&e.trigger("component:mount",t))},onRender:function(){}})},"./src/dom_components/view/ComponentsView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js");t.default=i.a.View.extend({initialize:function(e){this.opts=e||{},this.config=e.config||{},this.em=this.config.em;var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.resetChildren),this.listenTo(t,"remove",this.removeChildren)},removeChildren:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.views.forEach((function(e){if(e){var t=e.childrenView,n=e.scriptContainer;t&&t.stopListening(),n&&n.remove(),e.remove.apply(e)}}));var i=e.components();i.forEach((function(e){return n.removeChildren(e,t,r)}))},addTo:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.config.em,r=this.collection.indexOf(e);if(this.addToCollection(e,null,r),n&&!t.temporary){var i=function e(t){n.trigger("component:add",t),t.components().forEach((function(t){return e(t)}))};i(e)}},addToCollection:function(e,t,r){this.compView||(this.compView=n("./src/dom_components/view/ComponentView.js").default);for(var i=this.config,s=this.opts,a=this.em,l=t||null,c=i.frameView,u=void 0===c?{}:c,d=u.model&&e.getView(u.model),h=s.componentTypes||a&&a.get("DomComponents").getTypes(),f=e.get("type"),p=this.compView,g=0;g<h.length;g++)if(h[g].id==f){p=h[g].view;break}var m,v=d||new p({model:e,config:i,componentTypes:h});try{m=v.render().el}catch(x){m=document.createTextNode(""),a.logError(x)}if(l)l.appendChild(m);else{var b=this.parentEl,y=b.childNodes;if(Object(o.isUndefined)(r))b.appendChild(m);else{var w=y.length==r;w&&r--,w||!y.length?b.appendChild(m):b.insertBefore(m,y[r])}}return m},resetChildren:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.previousModels,i=void 0===r?[]:r;this.parentEl.innerHTML="",i.forEach((function(e){return t.removeChildren(e,t.collection)})),e.each((function(e){return t.addToCollection(e)}))},render:function(e){var t=this,n=this.el,r=document.createDocumentFragment();return this.parentEl=e||this.el,this.collection.each((function(e){return t.addToCollection(e,r)})),n.innerHTML="",n.appendChild(r),this}})},"./src/dom_components/view/ToolbarButtonView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=n.n(o).a.View.extend({events:function(){return this.model.get("events")||{mousedown:"handleClick"}},attributes:function(){return this.model.get("attributes")},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.config,n=void 0===t?{}:t;this.em=n.em,this.editor=n.editor},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.em,n=this.editor.Canvas.getFrameEl().getBoundingClientRect(),r=n.left,i=n.top,o=a(a({},e),{},{clientX:e.clientX-r,clientY:e.clientY-i});t.trigger("toolbar:run:before"),this.execCommand(o)},execCommand:function(e){var t={event:e},n=this.model.get("command"),r=this.editor;"function"==typeof n&&n(r,null,t),"string"==typeof n&&r.runCommand(n,t)},render:function(){var e=this.editor,t=this.$el,n=this.model,r=n.get("id"),i=n.get("label"),o=e.getConfig("stylePrefix");return t.addClass("".concat(o,"toolbar-item")),r&&t.addClass("".concat(o,"toolbar-item__").concat(r)),i&&t.append(i),this}})},"./src/dom_components/view/ToolbarView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/domain_abstract/view/DomainViews.js"),i=n("./src/dom_components/view/ToolbarButtonView.js");t.default=r.default.extend({itemView:i.default,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config={editor:e.editor||"",em:e.em},this.listenTo(this.collection,"reset",this.render)}})},"./src/domain_abstract/model/Styleable.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/utils/mixins.js"),a=n("./src/parser/model/ParserHtml.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(a.default)().parseStyle;t.default={parseStyle:u,extendStyle:function(e){return c(c({},this.getStyle()),e)},getStyle:function(){return c({},this.get("style")||{})},setStyle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.isString)(t)&&(t=u(t));var r=this.getStyle(),i=c({},t);this.set("style",i,n);var a=Object(s.shallowDiff)(r,i);return Object(o.keys)(a).forEach((function(t){var n=e.em;e.trigger("change:style:".concat(t)),n&&(n.trigger("styleable:change",e,t),n.trigger("styleable:change:".concat(t),e,t))})),i},addStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"string"==typeof e?e={prop:t}:n=t||{},e=this.extendStyle(e),this.setStyle(e,n)},removeStyle:function(e){var t=this.getStyle();delete t[e],this.setStyle(t)},styleToString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=this.getStyle();for(var r in n){var i=e.important,s=Object(o.isArray)(i)?i.indexOf(r)>=0:i,a="".concat(n[r]).concat(s?" !important":""),l="__"==r.substr(0,2);a&&!l&&t.push("".concat(r,":").concat(a,";"))}return t.join("")},getSelectors:function(){return this.get("selectors")||this.get("classes")},getSelectorsString:function(){return this.selectorsToString?this.selectorsToString():this.getSelectors().getFullString()}}},"./src/domain_abstract/model/TypeableCollection.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i),s=o.a.Model,a=o.a.View;t.default={types:[],initialize:function(e,t){var n=this;this.model=function(){var e,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&i.type){var s=n.getBaseType();e=(r=n.getType(i.type))?r.model:s.model,t=r?r.view:s.view}else{var a=n.recognizeType(i);e=(r=a.type).model,t=r.view,i=a.attributes}var l=new e(i,o);return l.typeView=t,l};var r=this.init&&this.init.bind(this);r&&r()},recognizeType:function(e){for(var t=this.getTypes(),n=0;n<t.length;n++){var r=t[n],i=r.isType(e);if(i="boolean"==typeof i&&i?{type:r.id}:i)return{type:r,attributes:i}}return{type:this.getBaseType(),attributes:e}},getBaseType:function(){var e=this.getTypes();return e[e.length-1]},getTypes:function(){return this.types},getType:function(e){for(var t=this.getTypes(),n=0;n<t.length;n++){var r=t[n];if(r.id===e)return r}},addType:function(e,t){var n=this.getType(e),i=this.getBaseType(),o=n?n.model:i.model,l=n?n.view:i.view,c=t.model,u=t.view,d=t.isType;c=c instanceof s||Object(r.isFunction)(c)?c:o.extend(c||{}),u=u instanceof a||Object(r.isFunction)(u)?u:l.extend(u||{}),!this.extendViewApi||t.model||t.view||(u=u.extend(t)),n?(n.model=c,n.view=u,n.isType=d||n.isType):(t.id=e,t.model=c,t.view=u,t.isType=d||function(t){if(t&&t.type==e)return!0},this.getTypes().unshift(t))}}},"./src/domain_abstract/ui/Input.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=i.a.$;t.default=i.a.View.extend({events:{change:"handleChange"},template:function(){return'<span class="'.concat(this.holderClass(),'"></span>')},inputClass:function(){return"".concat(this.ppfx,"field")},holderClass:function(){return"".concat(this.ppfx,"input-holder")},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ppfx||"";this.opts=e,this.ppfx=t,this.em=e.target||{},this.listenTo(this.model,"change:value",this.handleModelChange)},elementUpdated:function(){this.model.trigger("el:change")},setValue:function(e){var t=e||this.model.get("defaults"),n=this.getInputEl();n&&(n.value=t)},handleModelChange:function(e,t,n){this.setValue(t,n)},handleChange:function(e){e.stopPropagation();var t=this.getInputEl().value;this.model.set({value:t},{fromInput:1}),this.elementUpdated()},getInputEl:function(){if(!this.inputEl){var e=this.model,t=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=o('<input type="text" placeholder="'.concat(t,'">'))}return this.inputEl.get(0)},render:function(){this.inputEl=null;var e=this.$el;return e.addClass(this.inputClass()),e.html(this.template()),e.find(".".concat(this.holderClass())).append(this.getInputEl()),this}})},"./src/domain_abstract/ui/InputColor.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/utils/ColorPicker.js"),c=n("./src/domain_abstract/ui/Input.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=s.a.$;Object(l.default)(h),t.default=c.default.extend({template:function(){var e=this.ppfx;return'\n      <div class="'.concat(this.holderClass(),'"></div>\n      <div class="').concat(e,'field-colorp">\n        <div class="').concat(e,'field-colorp-c" data-colorp-c>\n          <div class="').concat(e,'checker-bg"></div>\n        </div>\n      </div>\n    ')},inputClass:function(){var e=this.ppfx;return"".concat(e,"field ").concat(e,"field-color")},holderClass:function(){return"".concat(this.ppfx,"input-holder")},setValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model,r=n.get("defaults"),i=Object(a.isUndefined)(e)?Object(a.isUndefined)(r)?"":r:e,o=this.getInputEl(),s=this.getColorEl(),l="none"!=i?i:"";o.value=i,s.get(0).style.backgroundColor=l,(t.fromTarget||t.fromInput&&!t.avoidStore)&&(s.spectrum("set",l),this.noneColor="none"==i)},getColorEl:function(){if(!this.colorEl){var e,t=this.em,n=this,r=this.ppfx,i=this.model,o=h('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),s=o.get(0).style,a=t&&t.config?t.config.el:"",l=t&&t.getConfig&&t.getConfig("colorPicker")||{},c=function(e){return(1==e.getAlpha()?e.toHexString():e.toRgbString()).replace(/ /g,"")},u=0;this.$el.find("[data-colorp-c]").append(o),o.spectrum(d(d(d({containerClassName:"".concat(r,"one-bg ").concat(r,"two-color"),appendTo:a||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"\u2a2f",palette:[]},l),i.get("colorPicker")||{}),{},{move:function(e){var t=c(e);s.backgroundColor=t,i.setValueFromInput(t,0)},change:function(e){u=1;var t=c(e);s.backgroundColor=t,i.setValueFromInput(0,0),i.setValueFromInput(t),n.noneColor=0},show:function(t){u=0,e=c(t)},hide:function(t){!u&&e&&(n.noneColor&&(e=""),s.backgroundColor=e,o.spectrum("set",e),i.setValueFromInput(e,0))}})),t&&t.on&&t.on("component:selected",(function(){u=1,o.spectrum("hide")})),this.colorEl=o}return this.colorEl},render:function(){return c.default.prototype.render.call(this),this.getColorEl(),this}})},"./src/domain_abstract/ui/InputNumber.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/backbone/backbone.js");var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./src/utils/mixins.js"),o=n("./src/domain_abstract/ui/Input.js");t.default=o.default.extend({events:{"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement"},template:function(){var e=this.ppfx;return'\n      <span class="'.concat(e,'input-holder"></span>\n      <span class="').concat(e,'field-units"></span>\n      <div class="').concat(e,'field-arrows" data-arrows>\n        <div class="').concat(e,'field-arrow-u" data-arrow-up></div>\n        <div class="').concat(e,'field-arrow-d" data-arrow-down></div>\n      </div>\n    ')},inputClass:function(){var e=this.ppfx;return this.opts.contClass||"".concat(e,"field ").concat(e,"field-integer")},initialize:function(){o.default.prototype.initialize.apply(this,arguments),Object(r.bindAll)(this,"moveIncrement","upIncrement"),this.doc=document,this.listenTo(this.model,"change:unit",this.handleModelChange)},setValue:function(e,t){var n=t||{},r=this.validateInputValue(e,{deepCheck:1}),i={value:r.value};(r.unit||r.force)&&(i.unit=r.unit),this.model.set(i,n),n.silent&&this.handleModelChange()},handleChange:function(e){e.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},handleUnitChange:function(e){e.stopPropagation();var t=this.getUnitEl().value;this.model.set("unit",t),this.elementUpdated()},elementUpdated:function(){this.model.trigger("el:change")},handleModelChange:function(){var e=this.model;this.getInputEl().value=e.get("value");var t=this.getUnitEl();t&&(t.value=e.get("unit")||"")},getUnitEl:function(){if(!this.unitEl){var e=this.model,t=e.get("units")||[];if(t.length){var n=[];t.forEach((function(t){var r=t==e.get("unit")?"selected":"";n.push("<option ".concat(r,">").concat(t,"</option>"))}));var r=document.createElement("div");r.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(n.join(""),"</select>"),this.unitEl=r.firstChild}}return this.unitEl},upArrowClick:function(){var e=this.model,t=e.get("step"),n=parseFloat(e.get("value"));n=this.normalizeValue(n+t);var r=this.validateInputValue(n);e.set("value",r.value),this.elementUpdated()},downArrowClick:function(){var e=this.model,t=e.get("step"),n=parseFloat(e.get("value")),r=this.normalizeValue(n-t),i=this.validateInputValue(r);e.set("value",i.value),this.elementUpdated()},downIncrement:function(e){e.preventDefault(),this.moved=0;var t=this.model.get("value");t=this.normalizeValue(t),this.current={y:e.pageY,val:t},Object(i.on)(this.doc,"mousemove",this.moveIncrement),Object(i.on)(this.doc,"mouseup",this.upIncrement)},moveIncrement:function(e){this.moved=1;var t=this.model,n=t.get("step"),r=this.current,i=this.normalizeValue(r.val+(r.y-e.pageY)*n);return this.prValue=this.validateInputValue(i).value,t.set("value",this.prValue,{avoidStore:1}),!1},upIncrement:function(){var e=this.model,t=e.get("step");if(Object(i.off)(this.doc,"mouseup",this.upIncrement),Object(i.off)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-t;e.set("value",n,{avoidStore:1}).set("value",n+t),this.elementUpdated()}},normalizeValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.model,r=n.get("step"),i=0;if(isNaN(e))return t;if(e=parseFloat(e),Math.floor(e)!==e){var o=r.toString().split(".")[1];i=o?o.length:0}return i?parseFloat(e.toFixed(i)):e},validateInputValue:function(e,t){var n=0,i=t||{},o=this.model,s=Object(r.isUndefined)(e)?"":e,a=o.get("units")||[],l=o.get("unit")||a.length&&a[0]||"",c=o.get("max"),u=o.get("min");if(i.deepCheck){var d=o.get("fixedValues")||[];if(s){var h=new RegExp("^"+d.join("|"),"g");if(d.length&&h.test(s))s=s.match(h)[0],l="",n=1;else{var f=s+"";s+="",s=parseFloat(s.replace(",",".")),s=isNaN(s)?"":s;var p=f.replace(s,"");Object(r.indexOf)(a,p)>=0&&(l=p)}}}return Object(r.isUndefined)(c)||""===c||(s=s>c?c:s),Object(r.isUndefined)(u)||""===u||(s=s<u?u:s),{force:n,value:s,unit:l}},render:function(){o.default.prototype.render.call(this),this.unitEl=null;var e=this.getUnitEl();return e&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(e),this}})},"./src/domain_abstract/view/DomainViews.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i);t.default=o.a.View.extend({itemView:"",itemsView:"",itemType:"type",autoAdd:0,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.config=t||e.config||{},this.autoAdd&&this.listenTo(this.collection,"add",this.addTo),this.items=[],this.init()},init:function(){},addTo:function(e){this.add(e)},itemViewNotFound:function(e){var t=this.ns,n=this.config.em,r="".concat(t?"[".concat(t,"]: "):"","'").concat(e,"' type not found");n&&n.logWarning(r)},add:function(e,t){var n,i=this.config,o=this.reuseView,s=this.items,a=this.itemsView,l=void 0===a?{}:a,c=t||null,u=this.itemView,d=e.get(this.itemType);l[d]?u=l[d]:!d||l[d]||Object(r.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],d)||this.itemViewNotFound(d),n=e.view&&o?e.view:new u({model:e,config:i},i),s&&s.push(n);var h=n.render().el;c?c.appendChild(h):this.$el.append(h)},render:function(){var e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each((function(t){this.add(t,e)}),this),this.$el.append(e),this.onRender(),this},onRender:function(){},remove:function(){this.clearItems(),o.a.View.prototype.remove.apply(this,arguments)},clearItems:function(){}})},"./src/editor/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"gjs-",components:"",style:"",fromElement:0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"\n    * {\n      box-sizing: border-box;\n    }\n    html, body, [data-gjs-type=wrapper] {\n      min-height: 100%;\n    }\n    body {\n      margin: 0;\n      height: 100%;\n      background-color: #fff\n    }\n    [data-gjs-type=wrapper] {\n      overflow: auto;\n      overflow-x: hidden;\n    }\n\n    * ::-webkit-scrollbar-track {\n      background: rgba(0, 0, 0, 0.1)\n    }\n\n    * ::-webkit-scrollbar-thumb {\n      background: rgba(255, 255, 255, 0.2)\n    }\n\n    * ::-webkit-scrollbar {\n      width: 10px\n    }\n  ",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:1,allowScripts:0,showDevices:1,devicePreviewMode:0,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:0,jsInHtml:!0,nativeDnD:1,multipleSelection:1,exportWrapper:0,wrapperIsBody:1,avoidInlineStyle:1,avoidDefaults:1,clearStyles:0,dragMode:0,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",el:"",i18n:{},undoManager:{},assetManager:{},canvas:{},layers:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"768px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]},styleManager:{sectors:[{name:"General",open:!1,buildProps:["float","display","position","top","right","left","bottom"]},{name:"Flex",open:!1,buildProps:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,buildProps:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,buildProps:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"],properties:[{property:"text-align",list:[{value:"left",className:"fa fa-align-left"},{value:"center",className:"fa fa-align-center"},{value:"right",className:"fa fa-align-right"},{value:"justify",className:"fa fa-align-justify"}]}]},{name:"Decorations",open:!1,buildProps:["border-radius-c","background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,buildProps:["transition","perspective","transform"]}]},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:0,multiFrames:0}},"./src/editor/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/cash-dom/dist/cash.esm.js"),s=n("./src/editor/config/config.js"),a=n("./src/editor/model/Editor.js"),l=n("./src/editor/view/EditorView.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=u(u({},s.default),e);t.pStylePrefix=t.stylePrefix;var n=new a.default(t),r=new l.default({model:n,config:t});return{$:o.default,editor:n,init:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.init(this,u(u({},t),i)),["I18n","Utils","Config","Commands","Keymaps","Modal","Panels","Canvas","Parser","CodeManager","UndoManager","RichTextEditor","DomComponents",["Components","DomComponents"],"LayerManager",["Layers","LayerManager"],"CssComposer",["Css","CssComposer"],"StorageManager",["Storage","StorageManager"],"AssetManager",["Assets","AssetManager"],"BlockManager",["Blocks","BlockManager"],"TraitManager",["Traits","TraitManager"],"SelectorManager",["Selectors","SelectorManager"],"StyleManager",["Styles","StyleManager"],"DeviceManager",["Devices","DeviceManager"]].forEach((function(t){Array.isArray(t)?e[t[0]]=n.get(t[1]):e[t]=n.get(t)})),n.on("loaded",(function(){e.UndoManager.clear(),n.get("modules").forEach((function(e){e.postRender&&e.postRender(r)}))})),this},getConfig:function(e){return n.getConfig(e)},getHtml:function(e){return n.getHtml(e)},getCss:function(e){return n.getCss(e)},getJs:function(){return n.getJs()},getComponents:function(){return n.get("DomComponents").getComponents()},getWrapper:function(){return n.get("DomComponents").getWrapper()},setComponents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.setComponents(e,t),this},addComponents:function(e,t){return this.getWrapper().append(e,t)},getStyle:function(){return n.get("CssComposer").getAll()},setStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.setStyle(e,t),this},getSelected:function(){return n.getSelected()},getSelectedAll:function(){return n.getSelectedAll()},getSelectedToStyle:function(){var e=n.getSelected();if(e)return this.StyleManager.getModelToStyle(e)},select:function(e,t){return n.setSelected(e,t),this},selectAdd:function(e){return n.addSelected(e),this},selectRemove:function(e){return n.removeSelected(e),this},selectToggle:function(e){return n.toggleSelected(e),this},setDevice:function(e){return n.set("device",e),this},getDevice:function(){return n.get("device")},runCommand:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.get("Commands").run(e,t)},stopCommand:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.get("Commands").stop(e,t)},store:function(e){return n.store(e)},load:function(e){return n.load(e)},getContainer:function(){return t.el},getDirtyCount:function(){return n.getDirtyCount()},refresh:function(e){n.refreshCanvas(e)},setCustomRte:function(e){this.RichTextEditor.customRte=e},setCustomParserCss:function(e){return this.Parser.getConfig().parserCss=e,this},setDragMode:function(e){return n.setDragMode(e),this},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.log(e,t),this},t:function(){return n.t.apply(n,arguments)},on:function(e,t){return n.on(e,t),this},once:function(e,t){return n.once(e,t),this},off:function(e,t){return n.off(e,t),this},trigger:function(e){return n.trigger.apply(n,arguments),this},destroy:function(){return n.destroyAll()},getEl:function(){return r.el},getModel:function(){return n},render:function(){return r.render(),r.el}}}},"./src/editor/model/Editor.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./node_modules/cash-dom/dist/cash.esm.js"),a=n("./node_modules/backbone/backbone.js"),l=n.n(a),c=n("./src/utils/extender.js"),u=n("./src/utils/mixins.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l.a.$=s.default;var f,p,g=[n("./src/utils/index.js"),n("./src/i18n/index.js"),n("./src/keymaps/index.js"),n("./src/undo_manager/index.js"),n("./src/storage_manager/index.js"),n("./src/device_manager/index.js"),n("./src/parser/index.js"),n("./src/style_manager/index.js"),n("./src/selector_manager/index.js"),n("./src/modal_dialog/index.js"),n("./src/code_manager/index.js"),n("./src/panels/index.js"),n("./src/rich_text_editor/index.js"),n("./src/asset_manager/index.js"),n("./src/css_composer/index.js"),n("./src/trait_manager/index.js"),n("./src/dom_components/index.js"),n("./src/navigator/index.js"),n("./src/canvas/index.js"),n("./src/commands/index.js"),n("./src/block_manager/index.js")],m=l.a.Collection;Object(c.default)({Backbone:l.a,$:l.a.$});var v={debug:console.log,info:console.info,warning:console.warn,error:console.error};t.default=l.a.Model.extend({defaults:function(){return{editing:0,selected:new m,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=t,this.set("Config",t),this.set("modules",[]),this.set("toLoad",[]),this.set("storables",[]),this.set("selected",new m),this.set("dmode",t.dragMode);var n=t.el,r=t.log,i=!0===r?Object(o.keys)(v):Object(o.isArray)(r)?r:[];Object(o.bindAll)(this,"initBaseColorPicker"),n&&t.fromElement&&(this.config.components=n.innerHTML),this.attrsOrig=n?Object(o.toArray)(n.attributes).reduce((function(e,t){return e[t.nodeName]=t.nodeValue,e}),{}):"",g.forEach((function(t){return e.loadModule(t)})),this.on("change:componentHovered",this.componentHovered,this),this.on("change:changesCount",this.updateChanges,this),i.forEach((function(t){return e.listenLog(t)})),[{from:"change:selectedComponent",to:"component:toggled"}].forEach((function(t){var n=t.from,r=t.to;e.listenTo(e,n,(function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];e.trigger.apply(e,[r].concat(i)),e.logWarning("The event '".concat(n,"' is deprecated, replace it with '").concat(r,"'"))}))}))},getContainer:function(){return this.config.el},listenLog:function(e){this.listenTo(this,"log:".concat(e),v[e])},getConfig:function(e){var t=this.config;return Object(o.isUndefined)(e)?t:t[e]},loadOnStart:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.get("StorageManager");this.get("toLoad").forEach((function(e){e.onLoad()}));var r=function(){e.get("modules").forEach((function(t){return t.postLoad&&t.postLoad(e)})),t&&t()};n&&n.canAutoload()?this.load(r):r()},updateChanges:function(){var e=this,t=this.get("StorageManager"),n=this.get("changesCount");p&&clearTimeout(p),p=setTimeout((function(){return e.trigger("update")})),this.config.noticeOnUnload&&(window.onbeforeunload=n?function(e){return 1}:null),t.isAutosave()&&n>=t.getStepsBeforeSave()&&this.store()},loadModule:function(e){var t=this.config,n=new(e.default||e),r=n.name.charAt(0).toLowerCase()+n.name.slice(1),i=Object(o.isUndefined)(t[r])?t[n.name]:t[r],s=i||{},a=this.get("StorageManager");if(s.pStylePrefix=t.pStylePrefix||"",Object(o.isUndefined)(i)||i||(s._disable=1),n.storageKey&&n.store&&n.load&&a){s.stm=a;var l="domComponents"==r?"unshift":"push";this.get("storables")[l](n)}return s.em=this,n.init(h({},s)),!n.private&&this.set(n.name,n),n.onLoad&&this.get("toLoad").push(n),this.get("modules").push(n),this},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.destroyed&&(this.initialize(t),this.destroyed=0),this.set("Editor",e)},getEditor:function(){return this.get("Editor")},handleUpdates:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.temporary||(f&&clearInterval(f),f=setTimeout((function(){r.avoidStore||n.set("changesCount",n.get("changesCount")+1,r)}),0))},componentHovered:function(e,t,n){var r=this.previous("componentHovered");r&&this.trigger("component:unhovered",r,n),t&&this.trigger("component:hovered",t,n)},getSelected:function(){return this.get("selected").last()},getSelectedAll:function(){var e=this.get("selected");return e&&e.models||[]},setSelected:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.event,i=r&&(r.ctrlKey||r.metaKey),a=r||{},l=a.shiftKey,c=Object(o.isArray)(e),d=c?e:[e],h=this.get("selected"),f=this.getConfig("multipleSelection");c&&this.removeSelected(h.filter((function(e){return!Object(o.contains)(d,e)}))),d.forEach((function(e){var r=Object(u.getModel)(e,s.default);if(!r||r.get("selectable")){if(i&&f)return t.toggleSelected(r);if(l&&f){t.clearSelection(t.get("Canvas").getWindow());var a,d,p=r.collection,g=r.index();if(t.getSelectedAll().forEach((function(e){var t=e.collection,n=e.index();t===p&&(n<g?a=Object(o.isUndefined)(a)?n:Math.max(a,n):n>g&&(d=Object(o.isUndefined)(d)?n:Math.min(d,n)))})),!Object(o.isUndefined)(a))for(;a!==g;)t.addSelected(p.at(a)),a++;if(!Object(o.isUndefined)(d))for(;d!==g;)t.addSelected(p.at(d)),d--;return t.addSelected(r)}!c&&t.removeSelected(h.filter((function(e){return e!==r}))),t.addSelected(r,n)}}))},addSelected:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(u.getModel)(e,s.default),i=Object(o.isArray)(r)?r:[r];i.forEach((function(e){if(!e||e.get("selectable")){var r=t.get("selected");n.forceChange&&r.remove(e,n),r.push(e,n)}}))},removeSelected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.get("selected").remove(Object(u.getModel)(e,s.default),t)},toggleSelected:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(u.getModel)(e,s.default),i=Object(o.isArray)(r)?r:[r];i.forEach((function(e){t.get("selected").contains(e)?t.removeSelected(e,n):t.addSelected(e,n)}))},setHovered:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(u.getModel)(e,s.default);n&&!n.get("hoverable")||(t.forceChange&&this.set("componentHovered",""),this.set("componentHovered",n,t))},getHovered:function(){return this.get("componentHovered")},setComponents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.get("DomComponents").setComponents(e,t)},getComponents:function(){var e=this.get("DomComponents"),t=this.get("CodeManager");if(e&&t){var n=e.getComponents();return t.getCode(n,"json")}},setStyle:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get("CssComposer").getAll(),r=0,i=n.length;r<i;r++)n.pop();return n.add(e,t),this},getStyle:function(){return this.get("CssComposer").getAll()},setState:function(e){return this.set("state",e),this},getState:function(){return this.get("state")},getHtml:function(){var e=this.config,t=e.exportWrapper,n=e.wrapperIsBody,r=e.jsInHtml?this.getJs():"",i=this.get("DomComponents").getComponent();return this.get("CodeManager").getCode(i,"html",{exportWrapper:t,wrapperIsBody:n})+(r?"<script>".concat(r,"<\/script>"):"")},getCss:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.config,n=t.wrapperIsBody,r=e.avoidProtected,i=Object(o.isUndefined)(e.keepUnusedStyles)?t.keepUnusedStyles:e.keepUnusedStyles,s=this.get("CssComposer"),a=this.get("DomComponents").getComponent(),l=r?"":t.protectedCss;return l+this.get("CodeManager").getCode(a,"css",{cssc:s,wrapperIsBody:n,keepUnusedStyles:i})},getJs:function(){var e=this.get("DomComponents").getWrapper();return this.get("CodeManager").getCode(e,"js").trim()},store:function(e){var t=this,n=this.get("StorageManager"),r={};if(n)return this.get("storables").forEach((function(e){var t=e.store(1);for(var n in t)r[n]=t[n]})),n.store(r,(function(n){e&&e(n),t.set("changesCount",0),t.trigger("storage:store",r)})),r},load:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getCacheLoad(1,(function(n){e.get("storables").forEach((function(t){t.load(n),t.postLoad&&t.postLoad(e)})),t&&t(n)}))},getCacheLoad:function(e,t){var n=this;if(this.cacheLoad&&!e)return this.cacheLoad;var r=this.get("StorageManager"),i=[];if(!r)return{};this.get("storables").forEach((function(e){var t=e.storageKey;t=Object(o.isFunction)(t)?t():t,(Object(o.isArray)(t)?t:[t]).forEach((function(e){return i.push(e)}))})),r.load(i,(function(e){n.cacheLoad=e,t&&t(e),setTimeout((function(){return n.trigger("storage:load",e)}))}))},getDeviceModel:function(){var e=this.get("device");return this.get("DeviceManager").get(e)},runDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get("Commands").get(this.config.defaultCommand);t&&!this.defaultRunning&&(t.stop(this,this,e),t.run(this,this,e),this.defaultRunning=1)},stopDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get("Commands"),n=t.get(this.config.defaultCommand);n&&(n.stop(this,this,e),this.defaultRunning=0)},refreshCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.set("canvasOffset",null),this.set("canvasOffset",this.get("Canvas").getOffset()),e.tools&&this.trigger("canvas:updateTools")},clearSelection:function(e){(e||window).getSelection().removeAllRanges()},getCurrentMedia:function(){var e=this.config,t=this.getDeviceModel(),n=e.mediaCondition,r=e.devicePreviewMode,i=t&&t.get("widthMedia");return t&&i&&!r?"(".concat(n,": ").concat(i,")"):""},getWrapper:function(){return this.get("DomComponents").getWrapper()},setCurrentFrame:function(e){return this.set("currentFrame",e)},getCurrentFrame:function(){return this.get("currentFrame")},getCurrentFrameModel:function(){return(this.getCurrentFrame()||{}).model},getDirtyCount:function(){return this.get("changesCount")},getZoomDecimal:function(){return this.get("Canvas").getZoomDecimal()},getZoomMultiplier:function(){return this.get("Canvas").getZoomMultiplier()},setDragMode:function(e){return this.set("dmode",e)},t:function(){var e;return(e=this.get("I18n")).t.apply(e,arguments)},inAbsoluteMode:function(){return"absolute"===this.get("dmode")},destroyAll:function(){var e=this.config,t=this.getEditor(),n=(e.grapesjs||{}).editors,r=void 0===n?[]:n,i=this.attributes,o=i.DomComponents,a=i.CssComposer,l=i.UndoManager,c=i.Panels,u=i.Canvas,d=i.Keymaps,h=i.RichTextEditor,f=i.LayerManager;this.stopDefault(),o.clear(),a.clear(),l.clear().removeAll(),c.getPanels().reset(),u.getCanvasView().remove(),d.removeAll(),h.destroy(),f.destroy(),this.view.remove(),this.stopListening(),this.clear({silent:!0}),this.destroyed=1,r.splice(r.indexOf(t),1),Object(s.default)(e.el).empty().attr(this.attrsOrig)},setEditing:function(e){return this.set("editing",e),this},isEditing:function(){return!!this.get("editing")},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ns,r=t.level,i=void 0===r?"debug":r;if(this.trigger("log",e,t),i&&this.trigger("log:".concat(i),e,t),n){var o="log-".concat(n);this.trigger(o,e,t),i&&this.trigger("".concat(o,":").concat(i),e,t)}},logInfo:function(e,t){this.log(e,h(h({},t),{},{level:"info"}))},logWarning:function(e,t){this.log(e,h(h({},t),{},{level:"warning"}))},logError:function(e,t){this.log(e,h(h({},t),{},{level:"error"}))},initBaseColorPicker:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getConfig(),r=n.colorPicker,i=void 0===r?{}:r,o=n.el,a=n.stylePrefix;return Object(s.default)(e).spectrum(h(h({containerClassName:"".concat(a,"one-bg ").concat(a,"two-color"),appendTo:o||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"\u2a2f"},t),i))},data:function(e,t,n){var r="_gjs-data";if(e[r]||(e[r]={}),Object(o.isUndefined)(n))return e[r][t];e[r][t]=n}})},"./src/editor/view/EditorView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/utils/mixins.js"),s=i.a.$;t.default=i.a.View.extend({initialize:function(){var e=this,t=this.model;t.view=this,this.conf=t.config,this.pn=t.get("Panels"),this.cv=t.get("Canvas"),t.on("loaded",(function(){e.pn.active(),e.pn.disableButtons(),setTimeout((function(){t.runDefault(),t.trigger("load",t.get("Editor"))}))}))},render:function(){var e=this.$el,t=this.conf,n=t.stylePrefix,r=s(t.el||"body ".concat(t.container));return Object(o.appendStyles)(t.cssIcons,{unique:1,prepand:1}),e.empty(),t.width&&r.css("width",t.width),t.height&&r.css("height",t.height),e.append(this.cv.render()),e.append(this.pn.render()),e.attr("class","".concat(n,"editor ").concat(n,"one-bg ").concat(n,"two-color")),r.addClass("".concat(n,"editor-cont")).empty().append(e),this}})},"./src/i18n/config.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/i18n/locale/en.js");t.default={locale:"en",localeFallback:"en",detectLocale:1,debug:0,messages:{en:r.default}}},"./src/i18n/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/typeof.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/i18n/config.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){return!Array.isArray(e)&&null!==e&&"object"===s()(e)};t.default=function(){return{name:"I18n",config:l.default,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config=u(u(u({},l.default),e),{},{messages:u(u({},l.default.messages),e.messages||{})}),this.config.detectLocale&&(this.config.locale=this._localLang()),this.em=e.em,this},getConfig:function(){return this.config},setLocale:function(e){var t=this.em,n=this.config;return t&&t.trigger("i18n:locale",{value:e,valuePrev:n.locale}),n.locale=e,this},getLocale:function(){return this.config.locale},getMessages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config.messages;return e&&!n[e]&&this._debug("'".concat(e,"' i18n lang not found"),t),e?n[e]:n},setMessages:function(e){var t=this.em;return this.config.messages=e,t&&t.trigger("i18n:update",e),this},addMessages:function(e){var t=this.em,n=this.config.messages;return t&&t.trigger("i18n:add",e),this.setMessages(function e(){for(var t=u({},arguments.length<=0?void 0:arguments[0]),n=1;n<arguments.length;n++){var r=u({},n<0||arguments.length<=n?void 0:arguments[n]);for(var i in r){var o=t[i],s=r[i];t[i]=d(o)&&d(s)?e(o,s):s}}return t}(n,e)),this},t:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config,r=t.params||{},i=t.l||this.getLocale(),o=t.lFlb||n.localeFallback,s=this._getMsg(e,i,t);return s||(s=this._getMsg(e,o,t)),!s&&this._debug("'".concat(e,"' i18n key not found in '").concat(i,"' lang"),t),s&&Object(a.isString)(s)?this._addParams(s,r):s},_localLang:function(){var e=window.navigator||{},t=e.language||e.userLanguage;return t?t.split("-")[0]:"en"},_addParams:function(e,t){var n=new RegExp("{([\\w\\d-]*)}","g");return e.replace(n,(function(e,n){return t[n]||""})).trim()},_getMsg:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getMessages(t,n);if(r){var i=r[e];return!i&&e.indexOf(".")>0&&(i=e.split(".").reduce((function(e,t){if(!Object(a.isUndefined)(e))return e[t]}),r)),i}},_debug:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.em,r=this.config;(t.debug||r.debug)&&n&&n.logWarning(e)}}}},"./src/i18n/locale/en.js":function(e,t,n){"use strict";n.r(t);var r={placeholder:"eg. Text here"};t.default={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:r,alt:r,title:r,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}}}},"./src/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/cash-dom/dist/cash.esm.js"),s=n("./src/editor/index.js"),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/utils/polyfills.js"),c=n("./src/plugin_manager/index.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(l.default)();var h=new c.default,f=[],p={autorender:1,plugins:[],pluginsOpts:{}};t.default={$:o.default,editors:f,plugins:h,version:"0.16.27",init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container;if(!t)throw new Error("'container' is required");(e=d(d(d({},p),e),{},{grapesjs:this})).el=Object(a.isElement)(t)?t:document.querySelector(t);var n=new s.default(e).init();return e.plugins.forEach((function(t){var r=h.get(t),i=e.pluginsOpts[t]||{};if(!r){var o=window[t];r=o&&o.default?o.default:o}r?r(n,i):Object(a.isFunction)(t)?t(n,i):console.warn("Plugin ".concat(t," not found"))})),n.getModel().loadOnStart(),e.autorender&&n.render(),f.push(n),n}}},"./src/keymaps/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/typeof.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./node_modules/keymaster/keymaster.js"),c=n.n(l);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t={},n={defaults:{"core:undo":{keys:"\u2318+z, ctrl+z",handler:"core:undo"},"core:redo":{keys:"\u2318+shift+z, ctrl+shift+z",handler:"core:redo"},"core:copy":{keys:"\u2318+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"\u2318+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:1}}}};return{keymaster:c.a,name:"Keymaps",getConfig:function(){return e},init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=d(d({},n),t),this.em=e.em,this},onLoad:function(){var t=e.defaults;for(var n in t){var r=t[n];this.add(n,r.keys,r.handler,r.opts||{})}},add:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=this.em,l=s.get("Commands"),u=s.getEditor(),d=s.get("Canvas"),h={id:e,keys:n,handler:r},f=t[e];return f&&this.remove(e),t[e]=h,c()(n,(function(t,n){var c={event:t,h:n};if(r=Object(a.isString)(r)?l.get(r):r,!s.isEditing()&&!u.Canvas.isInputFocused()||o.force){o.prevent&&d.getCanvasView().preventDefault(t),"object"==i()(r)?l.runCommand(r,c):r(u,0,c);var h=[e,n.shortcut,t];s.trigger.apply(s,["keymap:emit"].concat(h)),s.trigger.apply(s,["keymap:emit:".concat(e)].concat(h))}})),s.trigger("keymap:add",h),h},get:function(e){return t[e]},getAll:function(){return t},remove:function(e){var n=this.em,r=this.get(e);if(r)return delete t[e],c.a.unbind(r.keys),n&&n.trigger("keymap:remove",r),r},removeAll:function(){var e=this;return Object.keys(t).forEach((function(t){return e.remove(t)})),this}}}},"./src/modal_dialog/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"mdl-",title:"",content:"",backdrop:!0}},"./src/modal_dialog/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/modal_dialog/config/config.js"),s=n("./src/modal_dialog/model/Modal.js"),a=n("./src/modal_dialog/view/ModalView.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={},r=function(e,t){t&&t.trigger("modal:".concat(e?"open":"close"))};return{name:"Modal",getConfig:function(){return n},init:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(n=c(c({},o.default),i)).em;this.em=l;var u=n.pStylePrefix;return u&&(n.stylePrefix=u+n.stylePrefix),(e=new s.default(n)).on("change:open",(function(e,t){return r(t,l)})),t=new a.default({model:e,config:n}),this},postRender:function(e){var t=e.model.getConfig().el||e.el;this.render().appendTo(t)},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.title&&this.setTitle(e.title),e.content&&this.setContent(e.content),t.show(e),this},close:function(){return t.hide(),this},onceClose:function(e){return this.em.once("modal:close",e),this},onceOpen:function(e){return this.em.once("modal:open",e),this},isOpen:function(){return!!e.get("open")},setTitle:function(t){return e.set("title",t),this},getTitle:function(){return e.get("title")},setContent:function(t){return e.set("content"," "),e.set("content",t),this},getContent:function(){return e.get("content")},getContentEl:function(){return t.getContent().get(0)},getModel:function(){return e},render:function(){return t.render().$el}}}},"./src/modal_dialog/model/Modal.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js");t.default=n.n(r).a.Model.extend({defaults:{title:"",content:"",open:!1}})},"./src/modal_dialog/view/ModalView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=n.n(o).a.View.extend({template:function(e){var t=e.pfx,n=e.ppfx,r=e.content,i=e.title;return'<div class="'.concat(t,"dialog ").concat(n,"one-bg ").concat(n,'two-color">\n      <div class="').concat(t,'header">\n        <div class="').concat(t,'title">').concat(i,'</div>\n        <div class="').concat(t,'btn-close" data-close-modal>&Cross;</div>\n      </div>\n      <div class="').concat(t,'content">\n        <div id="').concat(t,'c">').concat(r,'</div>\n        <div style="clear:both"></div>\n      </div>\n    </div>\n    <div class="').concat(t,'collector" style="display: none"></div>')},events:{click:"onClick","click [data-close-modal]":"hide"},initialize:function(e){var t=this.model,n=e.config||{},r=n.stylePrefix||"";this.config=n,this.pfx=r,this.ppfx=n.pStylePrefix||"",this.listenTo(t,"change:open",this.updateOpen),this.listenTo(t,"change:title",this.updateTitle),this.listenTo(t,"change:content",this.updateContent)},onClick:function(e){this.config.backdrop&&e.target===this.el&&this.hide()},getCollector:function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},getContent:function(){var e=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(e,"content #").concat(e,"c"))),this.$content},getTitle:function(){return this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),this.$title.get(0)},updateContent:function(){var e=this.getContent(),t=e.children(),n=this.getCollector(),r=this.model.get("content");t.length&&n.append(t),e.empty().append(r)},updateTitle:function(){var e=this.getTitle();e&&(e.innerHTML=this.model.get("title"))},updateOpen:function(){this.el.style.display=this.model.get("open")?"":"none"},hide:function(){this.model.set("open",0)},show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.model.set("open",1),this.updateAttr(e.attributes)},updateAttr:function(e){var t=this.pfx,n=this.$el,r=[].slice.call(this.el.attributes).map((function(e){return e.name}));n.removeAttr(r.join(" ")),n.attr(a(a({},e||{}),{},{class:"".concat(t,"container ").concat(e&&e.class||"").trim()}))},render:function(){var e=this.$el,t=this.model.toJSON();return t.pfx=this.pfx,t.ppfx=this.ppfx,e.html(this.template(t)),this.updateAttr(),this.updateOpen(),this}})},"./src/navigator/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"",appendTo:"",sortable:1,hidable:1,hideTextnode:1,root:"",showWrapper:1,showHover:1,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:1}},"./src/navigator/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/navigator/config/config.js"),s=n("./src/navigator/view/ItemView.js"),a=n("./node_modules/underscore/modules/index-all.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={};return{name:"LayerManager",init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(n=c(c({},o.default),t)).stylePrefix=t.pStylePrefix,e=n.em,this},getConfig:function(){return n},onLoad:function(){t=new s.default({level:0,config:n,opened:n.opened||{},model:e.get("DomComponents").getWrapper()}),e&&e.on("component:selected",this.componentChanged),this.componentChanged()},postRender:function(){var e=n.appendTo,t=n.root;t&&this.setRoot(t),e&&(Object(a.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},setRoot:function(e){return t.setRoot(e),this},getRoot:function(){return t.model},getAll:function(){return t},componentChanged:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r.fromLayers){var i=e.get("opened"),o=e.getSelected(),s=n.scrollLayers,a=o&&o.collection?o.collection.parent:null;for(var l in i)i[l].set("open",0);for(;a;)a.set("open",1),i[a.cid]=a,a=a.collection?a.collection.parent:null;if(o&&s){var c=o.viewLayer&&o.viewLayer.el;c&&c.scrollIntoView(s)}}},render:function(){return t.render().el},destroy:function(){return t&&t.remove()}}}},"./src/navigator/view/ItemView.js":function(e,t,n){"use strict";n.r(t);var r,i=n("./node_modules/underscore/modules/index-all.js"),o=n("./src/utils/mixins.js"),s=n("./node_modules/backbone/backbone.js"),a=n.n(s),l=n("./src/dom_components/view/ComponentView.js"),c=n("./src/dom_components/model/Component.js"),u="contentEditable",d=a.a.$;t.default=a.a.View.extend({events:{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","click [data-toggle-open]":"toggleOpening","dblclick [data-name]":"handleEdit","focusout [data-name]":"handleEditEnd"},template:function(e){var t=this.pfx,n=this.ppfx,r=this.clsNoEdit,i=this.config.hidable,o=this.countChildren(e),s=o?"":this.clsNoChild,a="".concat(this.clsTitle," ").concat(s),l="".concat(this.clsTitleC," ").concat(n,"one-bg"),c="".concat(this.clsCaret," fa fa-chevron-right"),u="".concat(this.inputNameCls," ").concat(r," ").concat(n,"no-app"),d="".concat(30+10*(this.level+1),"px"),h=e.getName(),f=e.getIcon(),p="".concat(t,"layer");return"\n      ".concat(i?'<i class="'.concat(t,"layer-vis fa fa-eye ").concat(this.isVisible()?"":"fa-eye-slash",'" data-toggle-visible></i>'):"",'\n      <div class="').concat(l,'">\n        <div class="').concat(a,'" style="padding-left: ').concat(d,'" data-toggle-select>\n          <div class="').concat(t,'layer-title-inn">\n            <i class="').concat(c,'" data-toggle-open></i>\n            ').concat(f?'<span class="'.concat(p,'__icon">').concat(f,"</span>"):"",'\n            <span class="').concat(u,'" data-name>').concat(h,'</span>\n          </div>\n        </div>\n      </div>\n      <div class="').concat(this.clsCount,'" data-count>').concat(o||"",'</div>\n      <div class="').concat(this.clsMove,'" data-toggle-move>\n        <i class="fa fa-arrows"></i>\n      </div>\n      <div class="').concat(this.clsChildren,'"></div>')},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt=e,this.level=e.level,this.config=e.config,this.em=e.config.em,this.ppfx=this.em.get("Config").stylePrefix,this.sorter=e.sorter||"",this.pfx=this.config.stylePrefix,this.parentView=e.parentView;var t=this.pfx,n=this.ppfx,r=this.model,i=r.get("components"),o=r.get("type")||"default";r.set("open",!1),this.listenTo(i,"remove add reset",this.checkChildren),this.listenTo(r,"change:status",this.updateStatus),this.listenTo(r,"change:open",this.updateOpening),this.listenTo(r,"change:layerable",this.updateLayerable),this.listenTo(r,"change:style:display",this.updateVisibility),this.className="".concat(t,"layer ").concat(t,"layer__t-").concat(o," no-select ").concat(n,"two-color"),this.inputNameCls="".concat(n,"layer-name"),this.clsTitleC="".concat(t,"layer-title-c"),this.clsTitle="".concat(t,"layer-title"),this.clsCaret="".concat(t,"layer-caret"),this.clsCount="".concat(t,"layer-count"),this.clsMove="".concat(t,"layer-move"),this.clsChildren="".concat(t,"layer-children"),this.clsNoChild="".concat(t,"layer-no-chld"),this.clsEdit="".concat(this.inputNameCls,"--edit"),this.clsNoEdit="".concat(this.inputNameCls,"--no-edit"),this.$el.data("model",r),this.$el.data("collection",i),r.viewLayer=this},getVisibilityEl:function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},updateVisibility:function(){var e=this.model,t="".concat(this.pfx,"layer-hidden"),n="none"===e.getStyle().display?"addClass":"removeClass";this.$el[n](t),this.getVisibilityEl()[n]("fa-eye-slash")},toggleVisibility:function(e){e&&e.stopPropagation();var t=this.model,n=this.em,r="__prev-display",i=t.get(r),o=t.getStyle(),s=o.display;"none"==s?(delete o.display,i&&(o.display=i,t.unset(r))):(s&&t.set(r,s),o.display="none"),t.setStyle(o),n&&n.trigger("component:toggled")},handleEdit:function(e){e&&e.stopPropagation();var t=this.em,n=this.$el,r=this.clsNoEdit,i=this.clsEdit,o=this.getInputName();o[u]=!0,o.focus(),t&&t.setEditing(1),n.find(".".concat(this.inputNameCls)).removeClass(r).addClass(i)},handleEditEnd:function(e){e&&e.stopPropagation();var t=this.em,n=this.$el,r=this.clsNoEdit,i=this.clsEdit,o=this.getInputName(),s=o.textContent;o.scrollLeft=0,o[u]=!1,this.model.set({"custom-name":s}),t&&t.setEditing(0),n.find(".".concat(this.inputNameCls)).addClass(r).removeClass(i)},getInputName:function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},updateOpening:function(){var e=this.opt.opened||{},t=this.model,n="fa-chevron-down";t.get("open")?(this.$el.addClass("open"),this.getCaret().addClass(n),e[t.cid]=t):(this.$el.removeClass("open"),this.getCaret().removeClass(n),delete e[t.cid])},toggleOpening:function(e){e.stopPropagation(),this.model.get("components").length&&this.model.set("open",!this.model.get("open"))},handleSelect:function(e){e.stopPropagation();var t=this.em,n=this.config;if(t){var r=this.model;t.setSelected(r,{fromLayers:1,event:e});var i=n.scrollCanvas;i&&r.views.forEach((function(e){return e.scrollIntoView(i)}))}},handleHover:function(e){e.stopPropagation();var t=this.em;t&&this.config.showHover&&t.setHovered(this.model,{fromLayers:1})},startSort:function(e){e.stopPropagation();var t=this.em,n=this.sorter;e.button&&0!==e.button||n&&(n.onStart=function(e){return t.trigger("".concat(c.eventDrag,":start"),e)},n.onMoveClb=function(e){return t.trigger(c.eventDrag,e)},n.startSort(e.target))},freeze:function(){this.$el.addClass(this.pfx+"opac50"),this.model.set("open",0)},unfreeze:function(){this.$el.removeClass(this.pfx+"opac50")},updateStatus:function(e){l.default.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover}])},isVisible:function(){var e=this.model.getStyle().display;return!(e&&"none"===e)},checkChildren:function(){var e=this.model,t=this.clsNoChild,n=this.countChildren(e),r=this.$el.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),i=this.cnt;i||(i=this.$el.children("[data-count]").get(0),this.cnt=i),r[n?"removeClass":"addClass"](t),i&&(i.innerHTML=n||""),!n&&e.set("open",0)},countChildren:function(e){var t=0;return e.get("components").each((function(e){var n=this.opt.isCountable;n&&!n(e,this.config.hideTextnode)||t++}),this),t},getCaret:function(){return this.caret&&this.caret.length||(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},setRoot:function(e){e=Object(i.isString)(e)?this.em.getWrapper().find(e)[0]:e;var t=Object(o.getModel)(e,d);t&&(this.stopListening(),this.model=t,this.initialize(this.opt),this.render())},updateLayerable:function(){(this.parentView||this).render()},render:function(){var e=this.model,t=this.pfx,o=this.ppfx,s=this.opt.isCountable,a=s&&!s(e,this.config.hideTextnode),l=this.isVisible(),c=this.$el.empty(),u=this.level+1;Object(i.isUndefined)(r)&&(r=n("./src/navigator/view/ItemsView.js").default);var d=new r({collection:e.get("components"),config:this.config,sorter:this.sorter,opened:this.opt.opened,parentView:this,parent:e,level:u}).render().$el;return this.config.showWrapper||1!==u?(c.html(this.template(e)),c.find(".".concat(this.clsChildren)).append(d)):c.append(d),e.get("draggable")&&this.config.sortable||c.children(".".concat(this.clsMove)).remove(),!l&&(this.className+=" ".concat(t,"hide")),a&&(this.className+=" ".concat(o,"hidden")),c.attr("class",this.className),this.updateOpening(),this.updateStatus(),this.updateVisibility(),this}})},"./src/navigator/view/ItemsView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/navigator/view/ItemView.js"),s=n("./src/dom_components/model/Component.js");t.default=i.a.View.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt=e;var t=e.config||{};this.level=e.level,this.config=t,this.preview=e.preview,this.ppfx=t.pStylePrefix||"",this.pfx=t.stylePrefix||"",this.parent=e.parent,this.parentView=e.parentView;var n=this.pfx,r=this.ppfx,i=this.parent,o=this.collection;this.listenTo(o,"add",this.addTo),this.listenTo(o,"reset resetNavigator",this.render),this.listenTo(o,"remove",this.removeChildren),this.className="".concat(n,"layers");var a=t.em;if(t.sortable&&!this.opt.sorter){var l=a.get("Utils");this.opt.sorter=new l.Sorter({container:t.sortContainer||this.el,containerSel:".".concat(this.className),itemSel:".".concat(n,"layer"),ignoreViewChildren:1,onEndMove:function(e,t,n){var r=t.getSourceModel();a.setSelected(r,{forceChange:1}),a.trigger("".concat(s.eventDrag,":end"),n)},avoidSelectOnEnd:1,nested:1,ppfx:r,pfx:n})}this.sorter=this.opt.sorter||"",this.$el.data("collection",o),i&&this.$el.data("model",i)},removeChildren:function(e){var t=e.viewLayer;t&&(t.remove(),e.viewLayer=0)},addTo:function(e){var t=this.collection.indexOf(e);this.addToCollection(e,null,t)},addToCollection:function(e,t,n){var r=t||null,i=new(0,o.default)({level:this.level,model:e,parentView:this.parentView,config:this.config,sorter:this.sorter,isCountable:this.isCountable,opened:this.opt.opened}).render().el;if(r)r.appendChild(i);else if(void 0!==n){var s="before";this.$el.children().length==n&&(n--,s="after"),n<0?this.$el.append(i):this.$el.children().eq(n)[s](i)}else this.$el.append(i);return i},isCountable:function(e,t){var n=e.get("type"),r=e.get("tagName");return!(("textnode"==n||"br"==r)&&t||!e.get("layerable"))},render:function(){var e=this,t=document.createDocumentFragment(),n=this.el;return n.innerHTML="",this.collection.each((function(n){return e.addToCollection(n,t)})),n.appendChild(t),n.className=this.className,this}})},"./src/panels/config/config.js":function(e,t,n){"use strict";n.r(t);var r="sw-visibility",i="export-template",o="open-sm",s="open-tm",a="open-layers",l="open-blocks",c="fullscreen",u="preview";t.default={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:r,className:"fa fa-square-o",command:r,context:r,attributes:{title:"View components"}},{id:u,className:"fa fa-eye",command:u,context:u,attributes:{title:"Preview"}},{id:c,className:"fa fa-arrows-alt",command:c,context:c,attributes:{title:"Fullscreen"}},{id:i,className:"fa fa-code",command:i,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:o,className:"fa fa-paint-brush",command:o,active:!0,togglable:0,attributes:{title:"Open Style Manager"}},{id:s,className:"fa fa-cog",command:s,togglable:0,attributes:{title:"Settings"}},{id:a,className:"fa fa-bars",command:a,togglable:0,attributes:{title:"Open Layer Manager"}},{id:l,className:"fa fa-th-large",command:l,togglable:0,attributes:{title:"Open Blocks"}}]}],em:null,delayBtnsShow:300}},"./src/panels/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/panels/config/config.js"),i=n("./src/panels/model/Panel.js"),o=n("./src/panels/model/Panels.js"),s=(n("./src/panels/view/PanelView.js"),n("./src/panels/view/PanelsView.js"));t.default=function(){var e,t,n={};return{name:"Panels",init:function(i){for(var a in n=i||{},r.default)a in n||(n[a]=r.default[a]);var l=n.pStylePrefix;return l&&(n.stylePrefix=l+n.stylePrefix),e=new o.default(n.defaults),t=new s.default({collection:e,config:n}),this},getPanels:function(){return e},getPanelsEl:function(){return t.el},addPanel:function(t){return e.add(t)},removePanel:function(t){return e.remove(t)},getPanel:function(t){var n=e.where({id:t});return n.length?n[0]:null},addButton:function(e,t){var n=this.getPanel(e);return n?n.get("buttons").add(t):null},removeButton:function(e,t){var n=this.getPanel(e);return n&&n.get("buttons").remove(t)},getButton:function(e,t){var n=this.getPanel(e);if(n){var r=n.get("buttons").where({id:t});return r.length?r[0]:null}return null},render:function(){return t.render().el},active:function(){this.getPanels().each((function(e){e.get("buttons").each((function(e){e.get("active")&&e.trigger("updateActive")}))}))},disableButtons:function(){this.getPanels().each((function(e){e.get("buttons").each((function(e){e.get("disable")&&e.trigger("change:disable")}))}))},Panel:i.default}}},"./src/panels/model/Button.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js");t.default=n.n(r).a.Model.extend({defaults:{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1},initialize:function(e){if(this.get("buttons").length){var t=n("./src/panels/model/Buttons.js").default;this.set("buttons",new t(this.get("buttons")))}}})},"./src/panels/model/Buttons.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/panels/model/Button.js");t.default=i.a.Collection.extend({model:o.default,deactivateAllExceptOne:function(e,t){this.forEach((function(n,r){n!==e&&(n.set("active",!1),t&&n.get("buttons").length&&n.get("buttons").deactivateAllExceptOne(e,t))}))},deactivateAll:function(e,t){var n=e||"";this.forEach((function(e){e.get("context")==n&&e!==t&&(e.set("active",!1,{silent:1}),e.trigger("updateActive",{fromCollection:1}))}))},disableAllButtons:function(e){var t=e||"";this.forEach((function(e,n){e.get("context")==t&&e.set("disable",!0)}))},disableAllButtonsExceptOne:function(e,t){this.forEach((function(n,r){n!==e&&(n.set("disable",!0),t&&n.get("buttons").length&&n.get("buttons").disableAllButtonsExceptOne(e,t))}))}})},"./src/panels/model/Panel.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/panels/model/Buttons.js");t.default=i.a.Model.extend({defaults:{id:"",content:"",visible:!0,buttons:[],attributes:{}},initialize:function(e){this.btn=this.get("buttons")||[],this.buttons=new o.default(this.btn),this.set("buttons",this.buttons)}})},"./src/panels/model/Panels.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/panels/model/Panel.js");t.default=i.a.Collection.extend({model:o.default})},"./src/panels/view/ButtonView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.a.View.extend({tagName:function(){return this.model.get("tagName")},events:{click:"clicked"},initialize:function(e){var t=this.model.get("className");this.config=e.config||{},this.em=this.config.em||{};var n=this.config.stylePrefix||"",r=this.config.pStylePrefix||"";this.pfx=n,this.ppfx=this.config.pStylePrefix||"",this.id=n+this.model.get("id"),this.activeCls="".concat(n,"active ").concat(r,"four-color"),this.disableCls="".concat(r,"disabled"),this.btnsVisCls="".concat(n,"visible"),this.className=n+"btn"+(t?" "+t:""),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:active updateActive",this.updateActive),this.listenTo(this.model,"checkActive",this.checkActive),this.listenTo(this.model,"change:bntsVis",this.updateBtnsVis),this.listenTo(this.model,"change:attributes",this.updateAttributes),this.listenTo(this.model,"change:className",this.updateClassName),this.listenTo(this.model,"change:disable",this.updateDisable),this.em&&this.em.get&&(this.commands=this.em.get("Commands"))},updateClassName:function(){var e=this.model,t=this.pfx,n=e.get("className"),r=e.get("attributes").class,i="".concat(r||""," ").concat(t,"btn ").concat(n||"");this.$el.attr("class",i.trim())},updateAttributes:function(){var e=this.em,t=this.model,n=this.$el,r=t.get("attributes")||{},i=e&&e.t&&e.t("panels.buttons.titles.".concat(t.id));n.attr(r),i&&n.attr({title:i}),this.updateClassName()},updateBtnsVis:function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},updateActive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.commands,r=this.$el,i=this.activeCls,o=e.fromCollection,s=t.get("context"),l=t.get("options"),u=t.get("command"),d={};n&&Object(a.isString)(u)?d=n.get(u)||{}:Object(a.isFunction)(u)?d=n.create({run:u}):null!==u&&Object(a.isObject)(u)&&(d=n.create(u)),t.get("active")?(!o&&t.collection.deactivateAll(s,t),t.set("active",!0,{silent:!0}).trigger("checkActive"),n.runCommand(d,c(c({},l),{},{sender:t})),d.noStop&&t.set("active",!1)):(r.removeClass(i),n.stopCommand(d,c(c({},l),{},{sender:t,force:1})))},updateDisable:function(){var e=this.disableCls,t=this.model.get("disable");this.$el[t?"addClass":"removeClass"](e)},checkActive:function(){var e=this.$el,t=this.activeCls;this.model.get("active")?e.addClass(t):e.removeClass(t)},clicked:function(e){this.model.get("bntsVis")||this.model.get("disable")||this.toggleActive()},toggleActive:function(){var e=this.model,t=e.attributes,n=t.active;n&&!t.togglable||(e.set("active",!n),this.em.get("Commands").get("select-comp"),n?e.get("runDefaultCommand")&&this.em.runDefault():e.get("stopDefaultCommand")&&this.em.stopDefault())},render:function(){var e=this.model.get("label"),t=this.$el;return t.empty(),this.updateAttributes(),e&&t.append(e),this.checkActive(),this.updateDisable(),this}})},"./src/panels/view/ButtonsView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/panels/view/ButtonView.js"),s=n("./node_modules/underscore/modules/index-all.js");t.default=i.a.View.extend({initialize:function(e){this.opt=e||{},this.config=this.opt.config||{},this.pfx=this.config.stylePrefix||"",this.parentM=this.opt.parentM||null,this.listenTo(this.collection,"add",this.addTo),this.listenTo(this.collection,"reset remove",this.render),this.className=this.pfx+"buttons"},addTo:function(e){this.addToCollection(e)},addToCollection:function(e,t){var n=t||null,r=new(0,o.default)({model:e,config:this.config,parentM:this.parentM}).render().el;return n?n.appendChild(r):this.$el.append(r),r},render:function(){var e=document.createDocumentFragment();return this.$el.empty(),this.collection.each((function(t){this.addToCollection(t,e)}),this),this.$el.append(e),this.$el.attr("class",Object(s.result)(this,"className")),this}})},"./src/panels/view/PanelView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./src/panels/view/ButtonsView.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.default=s.a.View.extend({initialize:function(e){var t=e.config||{},n=this.model;this.config=t,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.buttons=n.get("buttons"),this.className=this.pfx+"panel",this.id=this.pfx+n.get("id"),this.listenTo(n,"change:appendContent",this.appendContent),this.listenTo(n,"change:content",this.updateContent),this.listenTo(n,"change:visible",this.toggleVisible),n.view=this},appendContent:function(){this.$el.append(this.model.get("appendContent"))},updateContent:function(){this.$el.html(this.model.get("content"))},toggleVisible:function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},attributes:function(){return this.model.get("attributes")},initResize:function(){var e=this.config.em,t=e?e.get("Editor"):"",n=this.model.get("resizable");if(t&&n){var r,o,s,a=!0===n?[1,1,1,1]:n,c=a.length,u=0;2==c?(r=a[0],s=a[0],o=a[1],u=a[1]):4==c&&(r=a[0],o=a[1],s=a[2],u=a[3]);var d=t.Utils.Resizer.init(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tc:r,cr:o,bc:s,cl:u,tl:0,tr:0,bl:0,br:0,appendTo:this.el,silentFrames:1,avoidContainerUpdate:1,prefix:t.getConfig().stylePrefix,onEnd:function(){e&&e.trigger("change:canvasOffset")},posFetcher:function(e,t){var n=t.target,r=e.style,i=d.getConfig(),o=i.keyWidth,s=i.keyHeight,a=e.getBoundingClientRect(),l="container"==n,c=r[o],u=r[s];return{left:0,top:0,width:c&&!l?parseFloat(c):a.width,height:u&&!l?parseFloat(u):a.height}}},n));d.blur=function(){},d.focus(this.el)}},render:function(){var e=this.$el,t=this.ppfx,n="".concat(this.className," ").concat(this.id," ").concat(t,"one-bg ").concat(t,"two-color");if(e.addClass(n),this.buttons.length){var r=new a.default({collection:this.buttons,config:this.config});e.append(r.render().el)}return e.append(this.model.get("content")),this}})},"./src/panels/view/PanelsView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/panels/view/PanelView.js");t.default=i.a.View.extend({initialize:function(e){this.opt=e||{},this.config=this.opt.config||{},this.pfx=this.config.stylePrefix||"";var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.render),this.listenTo(t,"remove",this.onRemove),this.className=this.pfx+"panels"},onRemove:function(e){var t=e.view;t&&t.remove()},addTo:function(e){this.addToCollection(e)},addToCollection:function(e,t){var n=t||null,r=this.config,i=e.get("el"),s=new o.default({el:i,model:e,config:r}),a=s.render().el,l=e.get("appendTo");return i||(l?document.querySelector(l).appendChild(a):n?n.appendChild(a):this.$el.append(a)),s.initResize(),a},render:function(){var e=this,t=this.$el,n=document.createDocumentFragment();return t.empty(),this.collection.each((function(t){return e.addToCollection(t,n)})),t.append(n),t.attr("class",this.className),this}})},"./src/parser/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={textTags:["br","b","i","u","a","ul","ol"],parserCss:null,parserHtml:null}},"./src/parser/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/parser/config/config.js"),s=n("./src/parser/model/ParserCss.js"),a=n("./src/parser/model/ParserHtml.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={};return{compTypes:"",parserCss:null,parserHtml:null,name:"Parser",getConfig:function(){return n},init:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(n=c(c({},o.default),r)).Parser=this,e=new a.default(n),t=new s.default(n),this.em=n.em,this.parserCss=t,this.parserHtml=e,this},parseHtml:function(n){var r=this.em,i=this.compTypes;return e.compTypes=r?r.get("DomComponents").getTypes():i,e.parse(n,t)},parseCss:function(e){return t.parse(e)}}}},"./src/parser/model/BrowserParserCss.js":function(e,t,n){"use strict";n.r(t),n.d(t,"parseSelector",(function(){return l})),n.d(t,"parseStyle",(function(){return c})),n.d(t,"parseCondition",(function(){return u})),n.d(t,"createNode",(function(){return d})),n.d(t,"parseNode",(function(){return h}));var r=n("./node_modules/underscore/modules/index-all.js"),i={4:"media",5:"font-face",6:"page",7:"keyframes",11:"counter-style",12:"supports",13:"document",14:"font-feature-values",15:"viewport"},o=Object(r.keys)(i),s=["5","6","11","15"],a=["font-face","page","counter-style","viewport"],l=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[],n=[],r=e.split(","),i=0,o=r.length;i<o;i++){var s=r[i].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(s)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(s)){var a=s.split(".").filter(Boolean);n.push(a)}else t.push(s)}return{result:n,add:t}},c=function(e){for(var t=e.style,n={},r=0,i=t.length;r<i;r++){var o=t[r],s=t.getPropertyValue(o),a=t.getPropertyPriority(o);n[o]="".concat(s).concat(a?" !".concat(a):"")}return n},u=function(e){return(e.conditionText||e.media&&e.media.mediaText||e.name||e.selectorText||"").trim()},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={},i=e.length,o=e[i-1],s=o?o.split(/:(.+)/):[],l=s[1],c=n.atRule,u=n.selectorsAdd,d=n.mediaText,h=a.indexOf(c)>=0;return h&&(r.singleAtRule=1),c&&(r.atRuleType=c),u&&(r.selectorsAdd=u),d&&(r.mediaText=d),l&&(e[i-1]=s[0],r.state=l,s.splice(s.length-1,1)),r.selectors=e,r.style=t,r},h=function e(t){for(var n=[],r=t.cssRules||[],a=0,h=r.length;a<h;a++){var f=r[a],p=f.type.toString(),g=0,m="",v="",b=f.selectorText||f.keyText,y=s.indexOf(p)>=0;if(y)g=1,m=i[p],v=u(f);else if(o.indexOf(p)>=0){var w=e(f);v=u(f);for(var x=0,O=w.length;x<O;x++){var C=w[x];v&&(C.mediaText=v),C.atRuleType=i[p]}n=n.concat(w)}if(b||y){for(var _=c(f),S=l(b),j=S.add,k=void 0,T=0,E=(b=S.result).length;T<E;T++){var P=d(b[T],_,{atRule:i[p]});n.push(P),k=P}if(j.length){var A=j.join(", ");if(k)k.selectorsAdd=A;else{var M={selectors:[],selectorsAdd:A,style:_};g&&(M.singleAtRule=g),m&&(M.atRuleType=m),v&&(M.mediaText=v),n.push(M)}}}}return n};t.default=function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t);var n=t.sheet;return document.head.removeChild(t),h(n)}},"./src/parser/model/ParserCss.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./src/parser/model/BrowserParserCss.js");t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{parse:function(t){var n=this,r=[],o=e.parserCss,s=e.em,a=s&&s.get&&s.get("Editor");return(o?o(t,a):Object(i.default)(t)).forEach((function(e){return r=r.concat(n.checkNode(e))})),s&&s.trigger("parse:css",{input:t,output:r}),r},checkNode:function(e){var t=e.selectors,n=e.style;if(Object(r.isString)(t)){var o=[],s=Object(i.parseSelector)(t),a=s.result,l=s.add.join(", "),c={atRule:e.atRule,mediaText:e.params};a.length?a.forEach((function(e){o.push(Object(i.createNode)(e,n,c))})):o.push(Object(i.createNode)([],n,c)),l&&(o[o.length-1].selectorsAdd=l),e=o}return e}}}},"./src/parser/model/ParserHtml.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/typeof.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js");t.default=function(e){var t=e,n="data-gjs-";return{compTypes:"",modelAttrStart:n,splitPropsFromAttr:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},i={};return Object(o.each)(t,(function(t,s){if(0===s.indexOf(e.modelAttrStart)){var a=s.replace(n,""),l=t.length,c=t&&Object(o.isString)(t),u=c&&t.substr(0,1),d=c&&t.substr(l-1);t="false"!==(t="true"===t||t)&&t;try{t="{"==u&&"}"==d||"["==u&&"]"==d?JSON.parse(t):t}catch(h){}r[a]=t}else i[s]=t})),{props:r,attrs:i}},parseStyle:function(e){for(var t={},n=e.split(";"),r=0,i=n.length;r<i;r++){var o=n[r].trim();if(o){var s=o.split(":");t[s[0].trim()]=s.slice(1).join(":").trim()}}return t},parseClass:function(e){for(var t=[],n=e.split(" "),r=0,i=n.length;r<i;r++){var o=n[r].trim();o&&t.push(o)}return t},parseNode:function(r){for(var o=[],s=r.childNodes,a=0,l=s.length;a<l;a++){var c=s[a],u=c.attributes||[],d=u.length,h=o[o.length-1],f=c.childNodes.length,p=this.compTypes,g={};if(p){var m="",v=c.getAttribute&&c.getAttribute("".concat(n,"type"));if(v)g={type:v};else{for(var b=0;b<p.length;b++){var y=p[b];if(m=y.model.isComponent(c)){"object"!==i()(m)&&(m={type:y.id});break}}g=m}}g.tagName||(g.tagName=c.tagName?c.tagName.toLowerCase():""),d&&(g.attributes={});for(var w=0;w<d;w++){var x=u[w].nodeName,O=u[w].nodeValue;if("style"==x)g.style=this.parseStyle(O);else if("class"==x)g.classes=this.parseClass(O);else{if("contenteditable"==x)continue;if(0===x.indexOf(n)){var C=x.replace(n,""),_=O.length,S=O&&O.substr(0,1),j=O&&O.substr(_-1);O="false"!==(O="true"===O||O)&&O;try{O="{"==S&&"}"==j||"["==S&&"]"==j?JSON.parse(O):O}catch(L){}g[C]=O}else""===O&&!0===c[x]&&(O=!0),g.attributes[x]=O}}if(f&&!g.components){var k=c.childNodes[0];1===f&&3===k.nodeType?(!g.type&&(g.type="text"),g.content=k.nodeValue):g.components=this.parseNode(c)}if("textnode"==g.type){if(h&&"textnode"==h.type){h.content+=g.content;continue}if(!e.keepEmptyTextNodes){var T=c.nodeValue;if(" "!=T&&!T.trim())continue}}var E=g.components;if(!g.type&&E){for(var P=1,A=0,M=0;M<E.length;M++){var D=E[M],I=D.type;if(["text","textnode"].indexOf(I)<0&&t.textTags.indexOf(D.tagName)<0){P=0;break}"textnode"==I&&(A=1)}P&&A&&(g.type="text")}(g.tagName||"textnode"==g.type)&&o.push(g)}return o},parse:function(e,n){var r=t.em,i=r&&r.get("Config")||{},o={html:"",css:""},s=document.createElement("div");s.innerHTML=e;var a=s.querySelectorAll("script"),l=a.length;if(!i.allowScripts)for(;l--;)a[l].parentNode.removeChild(a[l]);if(n){for(var c=s.querySelectorAll("style"),u=c.length,d="";u--;)d=c[u].innerHTML+d,c[u].parentNode.removeChild(c[u]);d&&(o.css=n.parse(d))}var h=this.parseNode(s);return o.html=1!==h.length||t.returnArray?h:h[0],r&&r.trigger("parse:html",{input:e,output:o}),o}}}},"./src/plugin_manager/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={plugins:[]}},"./src/plugin_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/plugin_manager/config/config.js");t.default=function(e){var t=e||{};for(var n in r.default)n in t||(t[n]=r.default[n]);var i={};return{add:function(e,t){return i[e]?i[e]:(i[e]=t,t)},get:function(e){return i[e]},getAll:function(){return i}}}},"./src/rich_text_editor/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"rte-",adjustToolbar:1,actions:["bold","italic","underline","strikethrough","link"]}},"./src/rich_text_editor/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./src/rich_text_editor/model/RichTextEditor.js"),l=n("./src/utils/mixins.js"),c=n("./src/rich_text_editor/config/config.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={},o=function(){var t=e.style,n="-1000px";t.top=n,t.left=n,t.display="none"};return{customRte:null,name:"RichTextEditor",getConfig:function(){return r},init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(r=d(d({},c.default),t)).pStylePrefix;return i&&(r.stylePrefix=i+r.stylePrefix),this.pfx=r.stylePrefix,(e=document.createElement("div")).className="".concat(i,"rte-toolbar ").concat(i,"one-bg"),n=this.initRte(document.createElement("div")),Object(l.on)(e,"mousedown",(function(e){return e.stopPropagation()})),this},destroy:function(){var t=this.customRte;n&&n.destroy(),t&&t.destroy&&t.destroy(),e=0,n=0,this.actionbar=0,this.actions=0},postRender:function(t){var n=t.model.get("Canvas");e.style.pointerEvents="all",o(),n.getToolsEl().appendChild(e)},initRte:function(t){var o=this.pfx,s=e,l=this.actionbar,c=this.actions||i()(r.actions),u={actionbar:"".concat(o,"actionbar"),button:"".concat(o,"action"),active:"".concat(o,"active"),inactive:"".concat(o,"inactive"),disabled:"".concat(o,"disabled")},d=new a.default({el:t,classes:u,actions:c,actionbar:l,actionbarContainer:s});return n&&n.setEl(t),d.actionbar&&(this.actionbar=d.actionbar),d.actions&&(this.actions=d.actions),d},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name=e,n.addAction(t,{sync:1})},get:function(e){var t;return n.getActions().forEach((function(n){n.name==e&&(t=n)})),t},getAll:function(){return n.getActions()},remove:function(e){var t=this.getAll(),n=this.get(e);if(n){var r=n.btn,i=t.indexOf(n);r.parentNode.removeChild(r),t.splice(i,1)}return n},getToolbarEl:function(){return e},updatePosition:function(){var n=r.em.get("Canvas"),i=e.style,o=n.getTargetToElementFixed(t,e,{event:"rteToolbarPosUpdate"});i.top=o.top+"px",i.left="0px"},enable:function(n,i){t=n.el;var o=r.em.get("Canvas"),s=r.em,a=n.getChildrenContainer(),l=this.customRte;if(o.getElementPos(t),e.style.display="",i=l?l.enable(a,i):this.initRte(a).enable(),s){setTimeout(this.updatePosition.bind(this),0);var c="change:canvasOffset canvasScroll frame:scroll component:update";s.off(c,this.updatePosition,this),s.on(c,this.updatePosition,this),s.trigger("rte:enable",n,i)}return i},disable:function(e,t){var n=r.em,i=this.customRte,s=e.getChildrenContainer();i?i.disable(s,t):t&&t.disable(),o(),n&&n.trigger("rte:disable",e,t)}}}},"./src/rich_text_editor/model/RichTextEditor.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(o),a=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(a),c=n("./src/utils/mixins.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.selection().anchorNode,n=t&&t.parentNode,r=t&&t.nextSibling;return n&&"A"==n.nodeName||r&&"A"==r.nodeName},f={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(e){return e.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(e){return e.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(e){return e.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(e){return e.exec("strikeThrough")}},link:{icon:'<span style="transform:rotate(45deg)">&supdsub;</span>',name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(e,t){return e&&e.selection()&&h(e)?1:0},result:function(e){h(e)?e.exec("unlink"):e.insertHTML('<a class="link" href="">'.concat(e.selection(),"</a>"))}}},p=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e);var r=n.el;if(r._rte)return r._rte;r._rte=this,this.setEl(r),this.updateActiveActions=this.updateActiveActions.bind(this);var i=n.actions||[];i.forEach((function(e,t){"string"==typeof e?e=f[e]:f[e.name]&&(e=d(d({},f[e.name]),e)),i[t]=e}));var o=i.length?i:Object.keys(f).map((function(e){return f[e]}));n.classes=d(d({},{actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"}),n.classes);var a=n.classes,l=n.actionbar;if(this.actionbar=l,this.settings=n,this.classes=a,this.actions=o,!l){var c=n.actionbarContainer;(l=document.createElement("div")).className=a.actionbar,c.appendChild(l),this.actionbar=l,o.forEach((function(e){return t.addAction(e)}))}return n.styleWithCSS&&this.exec("styleWithCSS"),this.syncActions(),this}return l()(e,[{key:"destroy",value:function(){this.el=0,this.doc=0,this.actionbar=0,this.settings={},this.classes={},this.actions=[]}},{key:"setEl",value:function(e){this.el=e,this.doc=e.ownerDocument}},{key:"updateActiveActions",value:function(){var e=this;this.getActions().forEach((function(t){var n=t.btn,r=t.update,i=d({},e.classes),o=i.active,s=i.inactive,a=i.disabled,l=t.state,c=t.name,u=e.doc;if(n.className=n.className.replace(o,"").trim(),n.className=n.className.replace(s,"").trim(),n.className=n.className.replace(a,"").trim(),l)switch(l(e,u)){case 1:n.className+=" ".concat(o);break;case 0:n.className+=" ".concat(s);break;case-1:n.className+=" ".concat(a)}else u.queryCommandSupported(c)&&u.queryCommandState(c)&&(n.className+=" ".concat(o));r&&r(e,t)}))}},{key:"enable",value:function(){return this.enabled||(this.actionbarEl().style.display="",this.el.contentEditable=!0,Object(c.on)(this.el,"mouseup keyup",this.updateActiveActions),this.syncActions(),this.updateActiveActions(),this.el.focus(),this.enabled=1),this}},{key:"disable",value:function(){return this.actionbarEl().style.display="none",this.el.contentEditable=!1,Object(c.off)(this.el,"mouseup keyup",this.updateActiveActions),this.enabled=0,this}},{key:"syncActions",value:function(){var e=this;this.getActions().forEach((function(t){e.settings.actionbar&&(!t.state||t.state&&t.state(e,e.doc)>=0)&&(t.btn["on".concat(t.event||"click")]=function(n){t.result(e,t),e.updateActiveActions()})}))}},{key:"addAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sync,r=document.createElement("span"),i=e.icon,o=e.attributes||{};for(var s in r.className=this.classes.button,e.btn=r,o)r.setAttribute(s,o[s]);"string"==typeof i?r.innerHTML=i:r.appendChild(i),this.actionbarEl().appendChild(r),n&&(this.actions.push(e),this.syncActions())}},{key:"getActions",value:function(){return this.actions}},{key:"selection",value:function(){return this.doc.getSelection()}},{key:"exec",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.doc.execCommand(e,!1,t)}},{key:"actionbarEl",value:function(){return this.actionbar}},{key:"insertHTML",value:function(e){var t=this.doc,n=t.getSelection();if(n&&n.rangeCount){var r=t.createElement("div"),i=n.getRangeAt(0);i.deleteContents(),r.innerHTML=e,Array.prototype.slice.call(r.childNodes).forEach((function(e){i.insertNode(e)})),n.removeAllRanges(),n.addRange(i),this.el.focus()}}}]),e}()},"./src/selector_manager/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],escapeName:0,selectedName:0,iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',render:0,componentFirst:0}},"./src/selector_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/utils/mixins.js"),a=n("./src/selector_manager/config/config.js"),l=n("./src/selector_manager/model/Selector.js"),c=n("./src/selector_manager/model/Selectors.js"),u=n("./src/selector_manager/view/ClassTagsView.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){return Object(o.isString)(e)&&"#"==e[0]},p=function(e){return Object(o.isString)(e)&&"."==e[0]};t.default=function(e){var t,n=e||{};return{Selector:l.default,Selectors:c.default,name:"SelectorManager",getConfig:function(){return n},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(n=h(h({},a.default),e)).em,i=n.pStylePrefix;return this.em=r,i&&(n.stylePrefix=i+n.stylePrefix),this.selectorTags=new u.default({collection:new c.default([],{em:r,config:n}),config:n}),(t=new c.default(n.selectors)).on("add",(function(e){return r.trigger("selector:add",e)})),t.on("remove",(function(e){return r.trigger("selector:remove",e)})),t.on("change",(function(e){return r.trigger("selector:update",e,e.previousAttributes(),e.changedAttributes())})),r.on("change:state",(function(e,t){return r.trigger("selector:state",t)})),this},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(o.isElement)(e)?e:document.querySelector(e)).appendChild(this.render([]))},select:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e)?e:[e],r=this.em.get("StyleManager").setTarget(n,t),i=r.filter((function(e){return e})).map((function(e){return Object(s.isComponent)(e)||Object(s.isRule)(e)&&!e.get("selectorsAdd")?e:e.getSelectorsString()}));return this.selectorTags.componentChanged({targets:i}),this},setState:function(e){return this.em.setState(e),this},getState:function(){return this.em.setState()},addSelector:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=h({},r);Object(o.isObject)(e)?i=e:i.name=e,f(i.name)?(i.name=i.name.substr(1),i.type=l.default.TYPE_ID):p(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var s=i.name,a=s?this.get(s,i.type):t.where(i)[0];return a||t.add(i,{config:n})},getSelector:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.TYPE_CLASS;return f(e)?(e=e.substr(1),n=l.default.TYPE_ID):p(e)&&(e=e.substr(1)),t.where({name:e,type:n})[0]},add:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.isArray)(e)?e.map((function(e){return t.addSelector(e,n)})):this.addSelector(e,n)},addClass:function(e){var t=this,n=[];return Object(o.isString)(e)&&(e=e.trim().split(" ")),e.forEach((function(e){return n.push(t.addSelector(e))})),n},get:function(e,t){var n=this;if(Object(o.isArray)(e)){var r=[];return e.map((function(e){return n.getSelector(e)})).filter((function(e){return e})).forEach((function(e){return r.indexOf(e)<0&&r.push(e)})),r}return this.getSelector(e,t)},getAll:function(){return t},escapeName:function(e){var t=n.escapeName;return t?t(e):l.default.escapeName(e)},render:function(e){return e?(this.selectorTags=new u.default({collection:new c.default(e),config:n}),this.selectorTags.render().el):this.selectorTags.render().el}}}},"./src/selector_manager/model/Selector.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r).a.Model.extend({idAttribute:"name",defaults:{name:"",label:"",type:1,active:!0,private:!1,protected:!1},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.config,r=void 0===n?{}:n,o=this.get("name"),s=this.get("label");o?s||this.set("label",o):this.set("name",s);var a=this.get("name"),l=r.escapeName,c=l?l(a):i.escapeName(a);this.set("name",c)},getFullName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.escape,n=this.get("name"),r="";switch(this.get("type")){case 1:r=".";break;case 2:r="#"}return r+(t?t(n):n)}},{TYPE_CLASS:1,TYPE_ID:2,escapeName:function(e){return"".concat(e).trim().replace(/([^a-z0-9\w-\:]+)/gi,"-")}});t.default=i},"./src/selector_manager/model/Selectors.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i),s=n("./src/selector_manager/model/Selector.js");t.default=o.a.Collection.extend({model:s.default,modelId:function(e){return"".concat(e.name,"_").concat(e.type||s.default.TYPE_CLASS)},getStyleable:function(){return Object(r.filter)(this.models,(function(e){return e.get("active")&&!e.get("private")}))},getValid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.noDisabled;return Object(r.filter)(this.models,(function(e){return!e.get("private")})).filter((function(e){return t?e.get("active"):1}))},getFullString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=e||this;return r.forEach((function(e){return n.push(e.getFullName(t))})),n.join("").trim()}})},"./src/selector_manager/view/ClassTagView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i="contentEditable";t.default=n.n(r).a.View.extend({template:function(){var e=this.pfx,t=this.config,n=this.model.get("label")||"";return'\n      <span id="'.concat(e,'checkbox" class="').concat(e,'tag-status" data-tag-status></span>\n      <span id="').concat(e,'tag-label" data-tag-name>').concat(n,'</span>\n      <span id="').concat(e,'close" class="').concat(e,'tag-close" data-tag-remove>\n        ').concat(t.iconTagRemove,"\n      </span>\n    ")},events:{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"},initialize:function(e){var t=e.config||{};this.config=t,this.coll=e.coll||null,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.em=t.em,this.listenTo(this.model,"change:active",this.updateStatus)},getInputEl:function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},startEditTag:function(){var e=this.em,t=this.getInputEl();t[i]=!0,t.focus(),e&&e.setEditing(1)},endEditTag:function(){var e=this.model,t=this.getInputEl(),n=t.textContent,r=this.em,o=r&&r.get("SelectorManager");if(t[i]=!1,r&&r.setEditing(0),o){var s=o.escapeName(n);o.get(s)?t.innerText=e.get("label"):e.set({name:s,label:n})}},changeStatus:function(){var e=this.model;e.set("active",!e.get("active"))},removeTag:function(){var e=this.em,t=this.model;(e&&e.getSelectedAll()).forEach((function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)}))},updateStatus:function(){var e=this.model,t=this.$el,n=this.config,r=n.iconTagOn,i=n.iconTagOff,o=t.find("[data-tag-status]");e.get("active")?(o.html(r),t.removeClass("opac50")):(o.html(i),t.addClass("opac50"))},render:function(){var e=this.pfx,t=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(e,"tag ").concat(t,"three-bg")),this.updateStatus(),this}})},"./src/selector_manager/view/ClassTagsView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./node_modules/backbone/backbone.js"),a=n.n(s),l=n("./src/selector_manager/view/ClassTagView.js");t.default=a.a.View.extend({template:function(e){var t=e.labelInfo,n=e.labelStates,r=e.labelHead,i=e.iconSync,o=e.iconAdd,s=e.pfx,a=e.ppfx;return'\n    <div id="'.concat(s,'up" class="').concat(s,'header">\n      <div id="').concat(s,'label" class="').concat(s,'header-label">').concat(r,'</div>\n      <div id="').concat(s,'status-c" class="').concat(s,'header-status">\n        <span id="').concat(s,'input-c" data-states-c>\n          <div class="').concat(a,"field ").concat(a,'select">\n            <span id="').concat(a,'input-holder">\n              <select id="').concat(s,'states" data-states>\n                <option value="">').concat(n,'</option>\n              </select>\n            </span>\n            <div class="').concat(a,'sel-arrow">\n              <div class="').concat(a,'d-s-arrow"></div>\n            </div>\n          </div>\n        </span>\n      </div>\n    </div>\n    <div id="').concat(s,'tags-field" class="').concat(a,'field">\n      <div id="').concat(s,'tags-c" data-selectors></div>\n      <input id="').concat(s,'new" data-input/>\n      <span id="').concat(s,'add-tag" class="').concat(s,"tags-btn ").concat(s,'tags-btn__add" data-add>\n        ').concat(o,'\n      </span>\n      <span class="').concat(s,"tags-btn ").concat(s,'tags-btn__sync" style="display: none" data-sync-style>\n        ').concat(i,'\n      </span>\n    </div>\n    <div class="').concat(s,'sels-info">\n      <div class="').concat(s,'label-sel">').concat(t,':</div>\n      <div class="').concat(s,'sels" data-selected></div>\n      <div style="clear:both"></div>\n    </div>')},events:{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=e.config||{},this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.className=this.pfx+"tags",this.stateInputId=this.pfx+"states",this.stateInputC=this.pfx+"input-c",this.states=this.config.states||[];var t=this.config.em,n=this.collection;this.target=this.config.em,this.em=t;var r=this.getStyleEmitter(),i="component:toggled component:update:classes",o="component:update:classes change:state";this.listenTo(t,i,this.componentChanged),this.listenTo(r,"update",this.componentChanged),this.listenTo(t,o,this.__handleStateChange),this.listenTo(t,"styleable:change change:device",this.checkSync),this.listenTo(n,"add",this.addNew),this.listenTo(n,"reset",this.renderClasses),this.listenTo(n,"remove",this.tagRemoved),this.delegateEvents()},syncStyle:function(){var e,t=this.em,n=this.getTarget(),r=t.get("CssComposer"),i=this.getCommonSelectors({opts:{noDisabled:1}}),o=t.get("state"),s=t.getCurrentMedia(),a=[],l=r.get(i,o,s)||r.add(i,o,s);this.getTargets().forEach((function(t){var n=r.getIdRule(t.getId(),{state:o,mediaText:s});e=n.getStyle(),n.setStyle({}),a.push(n)})),e&&l.addStyle(e),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:n,selectors:i,mediaText:s,rule:l,ruleComponents:a,state:o})},getStyleEmitter:function(){var e=this.em,t=e&&e.get("StyleManager");return t&&t.getEmitter()||{}},tagRemoved:function(e){this.updateStateVis()},getStateOptions:function(){var e=this.em,t=[];return this.states.forEach((function(n){return t.push('<option value="'.concat(n.name,'">').concat(e.t("selectorManager.states.".concat(n.name))||n.label||n.name,"</option>"))})),t.join("")},addNew:function(e){this.addToClasses(e)},startNewTag:function(){this.$addBtn.css({display:"none"}),this.$input.show().focus()},endNewTag:function(){this.$addBtn.css({display:""}),this.$input.hide().val("")},onInputKeyUp:function(e){13===e.keyCode?this.addNewTag(this.$input.val()):27===e.keyCode&&this.endNewTag()},checkStates:function(){var e=this.em.getState(),t=this.getStates();t&&t.val(e)},componentChanged:Object(o.debounce)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.targets;this.updateSelection(t)})),updateSelection:function(e){var t=e||this.getTargets(),n=[];return(t=Object(o.isArray)(t)?t:[t])&&t.length&&(n=this.getCommonSelectors({targets:t}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(t),n},getCommonSelectors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.targets,n=e.opts,r=void 0===n?{}:n,o=t||this.getTargets(),s=o.map((function(e){return e.getSelectors&&e.getSelectors().getValid(r)})).filter((function(e){return e}));return this._commonSelectors.apply(this,i()(s))},_commonSelectors:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.length?1===n.length?n[0]:2===n.length?n[0].filter((function(e){return n[1].indexOf(e)>=0})):n.slice(1).reduce((function(t,n){return e._commonSelectors(t,n)}),n[0]):[]},checkSync:Object(o.debounce)((function(){var e,t=this.$btnSyncEl,n=this.config,r=this.collection,i=this.getTarget();if(i&&n.componentFirst&&r.length){var s=i.getStyle();e=!Object(o.isEmpty)(s)}t&&t[e?"show":"hide"]()})),getTarget:function(){return this.target.getSelected()},getTargets:function(){return this.target.getSelectedAll()},updateStateVis:function(e){var t=this.em,n=t&&t.getConfig("avoidInlineStyle"),r=this.collection.length||n?"":"none";this.getStatesC().css("display",r),this.updateSelector(e)},__handleStateChange:function(){this.updateSelector(this.getTargets())},updateSelector:function(e){var t=this,n=this.el.querySelector("[data-selected]"),r=[],i=e||this.getTargets();(i=Object(o.isArray)(i)?i:[i]).forEach((function(e){return r.push(t.__getName(e))})),n&&(n.innerHTML=r.join(", ")),this.checkStates()},__getName:function(e){var t,n=this.pfx,r=this.config,i=this.em,s=r.selectedName,a=r.componentFirst;if(Object(o.isString)(e))t='<span class="'.concat(n,'sel-gen">').concat(e,"</span>");else{if(!e||!e.get)return;var l=e.getSelectors().getStyleable(),c=i.get("state"),u=e.getId?'<span class="'.concat(n,'sel-cmp">').concat(e.getName(),'</span><span class="').concat(n,'sel-id">#').concat(e.getId(),"</span>"):"";t=(t=this.collection.getFullString(l))?'<span class="'.concat(n,'sel-rule">').concat(t,"</span>"):e.get("selectorsAdd")||u,t=a&&u?u:t,t+=c?'<span class="'.concat(n,'sel-state">:').concat(c,"</span>"):"",t=s?s({result:t,state:c,target:e}):t}return t&&'<span class="'.concat(n,'sel">').concat(t,"</span>")},stateChanged:function(e){this.em.set("state",e.target.value)},addNewTag:function(e){var t=this,n=this.em;if(e.trim()){if(n){var r=n.get("SelectorManager").add({label:e});this.getTargets().forEach((function(e){e.getSelectors().add(r),t.collection.add(r),t.updateStateVis()}))}this.endNewTag()}},addToClasses:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t,r=this.getClasses(),i=new l.default({model:e,config:this.config,coll:this.collection}).render().el;return n?n.appendChild(i):r.append(i),i},renderClasses:function(){var e=this,t=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each((function(n){return e.addToClasses(n,t)})),n.append(t)},getClasses:function(){return this.$el.find("[data-selectors]")},getStates:function(){if(!this.$states){var e=this.$el.find("[data-states]");this.$states=e[0]&&e}return this.$states},getStatesC:function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},render:function(){var e=this.em,t=this.pfx,n=this.ppfx,r=this.config,i=this.$el,o=this.el,s=r.render,a={iconSync:r.iconSync,iconAdd:r.iconAdd,labelHead:e.t("selectorManager.label"),labelStates:e.t("selectorManager.emptyState"),labelInfo:e.t("selectorManager.selected"),ppfx:n,pfx:t,el:o};i.html(this.template(a));var l=s&&s(a);l&&l!==o&&i.empty().append(l),this.$input=i.find("[data-input]"),this.$addBtn=i.find("[data-add]"),this.$classes=i.find("#"+t+"tags-c"),this.$btnSyncEl=i.find("[data-sync-style]"),this.$input.hide();var c=this.getStates();return c&&c.append(this.getStateOptions()),this.renderClasses(),i.attr("class","".concat(this.className," ").concat(n,"one-bg ").concat(n,"two-color")),this}})},"./src/storage_manager/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={id:"gjs-",autosave:1,autoload:1,type:"local",stepsBeforeSave:1,storeComponents:1,storeStyles:1,storeHtml:1,storeCss:1,checkLocal:1,params:{},headers:{},urlStore:"",urlLoad:"",beforeSend:function(e,t){},onComplete:function(e,t){},contentTypeJson:!0,credentials:"include",fetchOptions:""}},"./src/storage_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/storage_manager/config/config.js"),s=n("./src/storage_manager/model/LocalStorage.js"),a=n("./src/storage_manager/model/RemoteStorage.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t={},n={},r={},i="storage:start",l="storage:end",u="storage:error";return{name:"StorageManager",init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=c(c({},o.default),n),e=t.em,t._disable&&(t.type=0),r.remote=new a.default(t),r.local=new s.default(t),t.currentStorage=t.type,this.loadDefaultProviders().setCurrent(t.type),this},getConfig:function(){return t},isAutosave:function(){return!!t.autosave},setAutosave:function(e){return t.autosave=!!e,this},getStepsBeforeSave:function(){return t.stepsBeforeSave},setStepsBeforeSave:function(e){return t.stepsBeforeSave=e,this},add:function(e,t){return n[e]=t,this},get:function(e){return n[e]||null},getStorages:function(){return n},getCurrent:function(){return t.currentStorage},setCurrent:function(e){return t.currentStorage=e,this},store:function(e,n){var r=this,i=this.get(this.getCurrent()),o={};for(var s in this.onStart("store",e),e)o[t.id+s]=e[s];return i?i.store(o,(function(e){n&&n(e),r.onEnd("store",e)}),(function(e){r.onError("store",e)})):null},load:function(e,n){var r=this,i=this.get(this.getCurrent()),o=[],s={};"string"==typeof e&&(e=[e]),this.onStart("load",e);for(var a=0,l=e.length;a<l;a++)o.push(t.id+e[a]);i?i.load(o,(function(e){var i=new RegExp("^"+t.id);for(var o in e){var a=o.replace(i,"");s[a]=e[o]}n&&n(s),r.onEnd("load",s)}),(function(e){n&&n(s),r.onError("load",e)})):n&&n(s)},loadDefaultProviders:function(){for(var e in r)this.add(e,r[e]);return this},getCurrentStorage:function(){return this.get(this.getCurrent())},onStart:function(t,n){e&&(e.trigger(i),t&&e.trigger("".concat(i,":").concat(t),n))},onEnd:function(t,n){e&&(e.trigger(l),t&&e.trigger("".concat(l,":").concat(t),n))},onError:function(t,n){e&&(e.trigger(u,n),t&&e.trigger("".concat(u,":").concat(t),n),this.onEnd(t,n))},canAutoload:function(){return this.getCurrentStorage()&&this.getConfig().autoload}}}},"./src/storage_manager/model/LocalStorage.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js");t.default=n.n(r).a.Model.extend({defaults:{checkLocal:!0},store:function(e,t){for(var n in this.checkStorageEnvironment(),e)localStorage.setItem(n,e[n]);"function"==typeof t&&t()},load:function(e,t){this.checkStorageEnvironment();for(var n={},r=0,i=e.length;r<i;r++){var o=localStorage.getItem(e[r]);o&&(n[e[r]]=o)}return"function"==typeof t&&t(n),n},remove:function(e){this.checkStorageEnvironment();for(var t=0,n=e.length;t<n;t++)localStorage.removeItem(e[t])},checkStorageEnvironment:function(){this.get("checkLocal")&&!localStorage&&console.warn("Your browser doesn't support localStorage")}})},"./src/storage_manager/model/RemoteStorage.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./src/utils/fetch.js"),l=n("./node_modules/underscore/modules/index-all.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.a.Model.extend({fetch:a.default,defaults:{urlStore:"",urlLoad:"",params:{},beforeSend:function(){},onComplete:function(){},contentTypeJson:!1,credentials:"include",fetchOptions:""},onStart:function(){this.get("em");var e=this.get("beforeSend");e&&e()},onError:function(e,t){if(t)t(e);else{var n=this.get("em");console.error(e),n&&n.trigger("storage:error",e)}},onResponse:function(e,t){var n=this.get("em"),r=this.get("onComplete"),i=this.get("contentTypeJson")&&e&&"string"==typeof e?JSON.parse(e):e;r&&r(i),t&&t(i),n&&n.trigger("storage:response",i)},store:function(e,t,n){var r={};for(var i in e)r[i]=e[i];this.request(this.get("urlStore"),{body:r},t,n)},load:function(e,t,n){this.request(this.get("urlLoad"),{method:"get"},t,n)},request:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.get("contentTypeJson"),c=this.get("headers")||{},d=this.get("params"),h="X-Requested-With",f="Content-Type",p=i.body||{};for(var g in d)p[g]=d[g];if(Object(l.isUndefined)(c[h])&&(c[h]="XMLHttpRequest"),Object(l.isUndefined)(c[f])&&a&&(c[f]="application/json; charset=utf-8"),a)n=JSON.stringify(p);else for(var m in n=new FormData,p)n.append(m,p[m]);"post"===(t={method:i.method||"post",credentials:this.get("credentials"),headers:c}).method&&(t.body=n);var v=this.get("fetchOptions")||{},b=Object(l.isFunction)(v)?v(t):t;this.onStart(),this.fetch(e,u(u({},t),b||{})).then((function(e){return 1==(e.status/200|0)?e.text():e.text().then((function(e){return Promise.reject(e)}))})).then((function(e){return r.onResponse(e,o)})).catch((function(e){return r.onError(e,s)}))}})},"./src/style_manager/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"sm-",sectors:[],appendTo:"",hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:0,avoidComputed:["width","height"]}},"./src/style_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/style_manager/config/config.js"),a=n("./src/style_manager/model/Sectors.js"),l=n("./src/style_manager/model/Properties.js"),c=n("./src/style_manager/model/PropertyFactory.js"),u=n("./src/style_manager/view/SectorsView.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={};return{PropertyFactory:Object(c.default)(),name:"StyleManager",getConfig:function(){return r},init:function(i){var o=(r=h(h({},s.default),i)).pStylePrefix;return this.em=r.em,o&&(r.stylePrefix=o+r.stylePrefix),e=new l.default,t=new a.default([],r),n=new u.default({collection:t,target:r.em,config:r}),this},onLoad:function(){t.add(r.sectors,{silent:!0})},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(o.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},addSector:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getSector(e);return i||(n.id=e,i=t.add(n,r)),i},getSector:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.where({id:e})[0];return!r&&n.warn&&this._logNoSector(e),r},removeSector:function(e){return this.getSectors().remove(this.getSector(e,{warn:1}))},getSectors:function(){return t},addProperty:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getSector(e,{warn:1}),i=null;return r&&(i=r.get("properties").add(t,n)),i},getProperty:function(e,t){var n,r=this.getSector(e,{warn:1});return r&&(n=r.get("properties").filter((function(e){return e.get("property")===t||e.get("id")===t}))[0]),n||null},removeProperty:function(e,t){var n=this.getProperties(e);return n&&n.remove(this.getProperty(e,t))},getProperties:function(e){var t=null,n=this.getSector(e,{warn:1});return n&&(t=n.get("properties")),t},getModelToStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.em,i=t.skipAdd,o=e.get("classes"),s=e.getId();if(n){var a,l=n.getConfig(),c=n.get("UndoManager"),u=n.get("CssComposer"),d=n.get("SelectorManager"),h=d?d.getConfig():{},f=l.devicePreviewMode?"":n.get("state"),p=o.getStyleable(),g=p.length,m=!h.componentFirst||t.useClasses,v={state:f};if(c.stop(),g&&m){var b=n.getCurrentMedia();(a=u.get(p,f,b))||i||(a=u.add(p,f,b))}else l.avoidInlineStyle&&(!(a=u.getIdRule(s,v))&&!i&&(a=u.setIdRule(s,{},v)),e.is("wrapper")&&a.set("wrapper",1));a&&(e=a),c.start()}return e},addType:function(t,n){e.addType(t,n)},getType:function(t){return e.getType(t)},getTypes:function(){return e.getTypes()},createType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.model,i=void 0===n?{}:n,o=t.view,s=void 0===o?{}:o,a=this.getType(e);if(a)return new a.view(h({model:new a.model(i),config:r},s))},setTarget:function(e,t){return n.setTarget(e,t)},getEmitter:function(){return n.propTarget},render:function(){return n.render().el},_logNoSector:function(e){var t=this.em;t&&t.logWarning("'".concat(e,"' sector not found"))}}}},"./src/style_manager/model/Layer.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/style_manager/model/Properties.js");t.default=i.a.Model.extend({defaults:{index:"",value:"",values:{},active:!1,preview:!1,properties:[]},initialize:function(){var e=this.get("properties"),t=this.get("value");this.set("properties",e instanceof o.default?e:new o.default(e));var n=this.get("properties");if(n.forEach(this.onPropAdd,this),this.listenTo(n,"add",this.onPropAdd),!t){var r="",i=this.get("values");for(var s in i)r+=" "+i[s];this.set("value",r.trim())}},onPropAdd:function(e){var t=this.collection;e.parent=t&&t.property},getPropertyAt:function(e){return this.get("properties").at(e)},getPropertyValue:function(e){var t="";return this.get("properties").each((function(n){n.get("property")==e&&(t=n.getFullValue())})),t},getFullValue:function(){var e=[];return this.get("properties").each((function(t){return e.push(t.getFullValue())})),e.join(" ").trim()}})},"./src/style_manager/model/Layers.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./node_modules/backbone/backbone.js"),a=n.n(s),l=n("./src/style_manager/model/Layer.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=a.a.Collection.extend({model:l.default,initialize:function(){this.idx=1,this.on("add",this.onAdd),this.on("reset",this.onReset)},onAdd:function(e,t,n){n.noIncrement||e.set("index",this.idx++),n.active&&this.active(this.indexOf(e))},onReset:function(){this.idx=1},getSeparator:function(){var e=this.property;return e?e.get("layerSeparator"):", "},getLayersFromValue:function(e){var t=this,n=[];return e.replace(/\(([\w\s,.]*)\)/g,(function(t){var n=t.replace(/,\s*/g,",");e=e.replace(t,n)})),(e?e.split(this.getSeparator()):[]).forEach((function(e){n.push({properties:t.properties.parseValue(e)})})),n},getLayersFromStyle:function(e){var t=[],n=this.properties;return n.each((function(n){var r=e[n.get("property")];(r?r.split(", "):[]).forEach((function(e,r){e=n.parseValue(e.trim()).value;var i=t[r],o=u(u({},n.attributes),{value:e});i?i.properties.push(o):t[r]={properties:[o]}}))})),t.forEach((function(e){var t=e.properties.map((function(e){return e.property}));n.each((function(n){var r=n.get("property");t.indexOf(r)<0&&e.properties.push(u({},n.attributes))}))})),t},active:function(e){this.each((function(e){return e.set("active",0)}));var t=this.at(e);t&&t.set("active",1)},getFullValue:function(){var e=[];return this.each((function(t){return e.push(t.getFullValue())})),e.join(this.getSeparator())},getPropertyValues:function(e,t){var n=[];return this.each((function(r){var i=r.getPropertyValue(e);i?n.push(i):!Object(o.isUndefined)(t)&&n.push(t)})),n.join(", ")}})},"./src/style_manager/model/Properties.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./src/domain_abstract/model/TypeableCollection.js"),l=n("./src/style_manager/model/Property.js"),c=n("./src/style_manager/model/PropertyStack.js"),u=n("./src/style_manager/view/PropertyStackView.js"),d=n("./src/style_manager/model/PropertyComposite.js"),h=n("./src/style_manager/view/PropertyCompositeView.js"),f=n("./src/style_manager/view/PropertyFileView.js"),p=n("./src/style_manager/view/PropertyColorView.js"),g=n("./src/style_manager/model/PropertySelect.js"),m=n("./src/style_manager/view/PropertySelectView.js"),v=n("./src/style_manager/model/PropertyRadio.js"),b=n("./src/style_manager/view/PropertyRadioView.js"),y=n("./src/style_manager/model/PropertySlider.js"),w=n("./src/style_manager/view/PropertySliderView.js"),x=n("./src/style_manager/model/PropertyInteger.js"),O=n("./src/style_manager/view/PropertyIntegerView.js"),C=n("./src/style_manager/view/PropertyView.js");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.a.Collection.extend(a.default).extend({extendViewApi:1,types:[{id:"stack",model:c.default,view:u.default,isType:function(e){if(e&&"stack"==e.type)return e}},{id:"composite",model:d.default,view:h.default,isType:function(e){if(e&&"composite"==e.type)return e}},{id:"file",model:l.default,view:f.default,isType:function(e){if(e&&"file"==e.type)return e}},{id:"color",model:l.default,view:p.default,isType:function(e){if(e&&"color"==e.type)return e}},{id:"select",model:g.default,view:m.default,isType:function(e){if(e&&"select"==e.type)return e}},{id:"radio",model:v.default,view:b.default,isType:function(e){if(e&&"radio"==e.type)return e}},{id:"slider",model:y.default,view:w.default,isType:function(e){if(e&&"slider"==e.type)return e}},{id:"integer",model:x.default,view:O.default,isType:function(e){if(e&&"integer"==e.type)return e}},{id:"base",model:l.default,view:C.default,isType:function(e){return e.type="base",e}}],deepClone:function(){var e=this.clone();return e.reset(e.map((function(e){var t=e.clone();return t.typeView=e.typeView,t}))),e},parseValue:function(e){var t=this,n=[];return e.split(" ").forEach((function(e,r){var i=t.at(r);i&&n.push(S(S({},i.attributes),{value:e}))})),n},getFullValue:function(){var e="";return this.each((function(t){return e+="".concat(t.getFullValue()," ")})),e.trim()}})},"./src/style_manager/model/Property.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/utils/mixins.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=s.a.Model.extend({defaults:{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:0,important:0,toRequire:0,requires:null,requiresParent:null},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get("id")||"",r=this.get("name")||"";!this.get("property")&&this.set("property",(r||n).replace(/ /g,"-"));var i=this.get("property");!this.get("id")&&this.set("id",i),!r&&this.set("name",Object(l.capitalize)(i).replace(/-/g," ")),d.callInit(this,e,t)},init:function(){},clearValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.set({value:void 0,status:""},e),this},setValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.parseValue(e),i=!t;!i&&this.set({value:void 0},{avoidStore:i,silent:!0}),this.set(r,u({avoidStore:i},n))},setValueFromInput:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.setValue(e,t,u(u({},n),{},{fromInput:1}))},parseValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={value:e},r="!important";if(Object(a.isString)(e)&&-1!==e.indexOf(r)&&(n.value=e.replace(r,"").trim(),n.important=1),!this.get("functionName")&&!t.complete)return n;var i=[],o="".concat(n.value),s=o.indexOf("(")+1,l=o.lastIndexOf(")"),c=o.substring(0,s-1);if(c&&(n.functionName=c),i.push(s),l>=0&&i.push(l),n.value=String.prototype.substring.apply(o,i),t.numeric){var u=parseFloat(n.value);n.unit=n.value.replace(u,""),n.value=u}return n},splitValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=[],r="(",i=")",o="",s=0;return(e||"").split("").forEach((function(e){e==r?(s++,o+=r):e==i&&s>0?(s--,o+=i):e===t&&0==s?(n.push(o),o=""):o+=e})),""!==o&&n.push(o),n.map((function(e){return e.trim()}))},getDefaultValue:function(){return this.get("defaults")},getFullValue:function(e){var t=this.get("functionName"),n=this.getDefaultValue(),r=Object(a.isUndefined)(e)?this.get("value"):e,i=!Object(a.isUndefined)(r)&&""!==r;if(r&&n&&r===n)return n;if(t&&i){var o="url"===t?"'".concat(r.replace(/'/g,""),"'"):r;r="".concat(t,"(").concat(o,")")}return i&&this.get("important")&&(r="".concat(r," !important")),r||""}},{callParentInit:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.prototype.initialize.apply(t,[n,u(u({},r),{},{skipInit:1})])},callInit:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.skipInit&&e.init(t,n)}});t.default=d},"./src/style_manager/model/PropertyComposite.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/style_manager/model/Property.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{detached:0,properties:[],separator:" "}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.default.callParentInit(o.default,this,e,t);var r=this.get("properties")||[],i=n("./src/style_manager/model/Properties.js").default;this.set("properties",new i(r)),this.listenTo(this,"change:value",this.updateValues),o.default.callInit(this,e,t)},clearValue:function(){return this.get("properties").each((function(e){return e.clearValue()})),o.default.prototype.clearValue.apply(this,arguments)},updateValues:function(){this.getFullValue().split(this.getSplitSeparator()),this.get("properties").each((function(e,t){}))},getSplitSeparator:function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},getDefaultValue:function(e){var t=this.get("defaults");return t&&!e?t:(t="",this.get("properties").each((function(e,n){return t+="".concat(e.getDefaultValue()," ")})),t.trim())},getFullValue:function(){return this.get("detached")?"":this.get("properties").getFullValue()},getPropertyAt:function(e){return this.get("properties").at(e)}})},"./src/style_manager/model/PropertyFactory.js":function(e,t,n){"use strict";n.r(t),t.default=function(){return{build:function(e){var t=[];"string"==typeof e&&(e=[e]);for(var n=0,r=e.length;n<r;n++){var i={},o=e[n];switch(i.property=o,o){case"border-radius-c":i.property="border-radius"}switch(o){case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"width":case"max-width":case"min-width":case"height":case"max-height":case"min-height":case"flex-basis":i.fixedValues=["initial","inherit","auto"];break;case"font-size":i.fixedValues=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"];break;case"letter-spacing":case"line-height":i.fixedValues=["normal","initial","inherit"]}switch(o){case"float":case"position":case"text-align":i.type="radio";break;case"display":case"flex-direction":case"flex-wrap":case"justify-content":case"align-items":case"align-content":case"align-self":case"font-family":case"font-weight":case"border-style":case"box-shadow-type":case"background-repeat":case"background-position":case"background-attachment":case"background-size":case"transition-property":case"transition-timing-function":case"cursor":case"overflow":case"overflow-x":case"overflow-y":i.type="select";break;case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"letter-spacing":case"line-height":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-h":case"box-shadow-v":case"box-shadow-blur":case"box-shadow-spread":case"transition-duration":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":case"order":case"flex-grow":case"flex-shrink":case"flex-basis":i.type="integer";break;case"margin":case"padding":case"border-radius":case"border":case"transform":i.type="composite";break;case"color":case"text-shadow-color":case"background-color":case"border-color":case"box-shadow-color":i.type="color";break;case"text-shadow":case"box-shadow":case"background":case"transition":i.type="stack";break;case"background-image":i.type="file"}switch(o){case"float":case"background-color":case"text-shadow":i.defaults="none";break;case"display":i.defaults="block";break;case"flex-direction":i.defaults="row";break;case"flex-wrap":i.defaults="nowrap";break;case"justify-content":i.defaults="flex-start";break;case"align-items":case"align-content":i.defaults="stretch";break;case"align-self":i.defaults="auto";break;case"position":i.defaults="static";break;case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"box-shadow-h":case"box-shadow-v":case"box-shadow-spread":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":case"order":case"flex-grow":i.defaults=0;break;case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":i.defaults="0px";break;case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":case"flex-shrink":i.defaults=1;break;case"box-shadow-blur":i.defaults="5px";break;case"top":case"right":case"bottom":case"left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"background-size":case"cursor":case"flex-basis":i.defaults="auto";break;case"font-family":i.defaults="Arial, Helvetica, sans-serif";break;case"font-size":case"border-width":i.defaults="medium";break;case"font-weight":i.defaults="400";break;case"letter-spacing":case"line-height":i.defaults="normal";break;case"color":case"text-shadow-color":case"border-color":case"box-shadow-color":i.defaults="black";break;case"text-align":i.defaults="left";break;case"border-style":i.defaults="solid";break;case"box-shadow-type":i.defaults="";break;case"background-repeat":i.defaults="repeat";break;case"background-position":i.defaults="left top";break;case"background-attachment":i.defaults="scroll";break;case"transition-property":i.defaults="width";break;case"transition-duration":i.defaults="2";break;case"transition-timing-function":i.defaults="ease";break;case"overflow":case"overflow-x":case"overflow-y":i.defaults="visible"}switch(o){case"flex-direction":case"flex-wrap":case"justify-content":case"align-items":case"align-content":i.requires={display:["flex"]};break;case"order":case"flex-basis":case"flex-grow":case"flex-shrink":case"align-self":i.requiresParent={display:["flex"]}}switch(o){case"top":case"bottom":case"margin-top":case"margin-bottom":case"padding-top":case"padding-bottom":case"min-height":case"max-height":case"height":i.units=["px","%","vh"];break;case"right":case"left":case"margin-right":case"margin-left":case"padding-right":case"padding-left":case"min-width":case"max-width":case"width":i.units=["px","%","vw"];break;case"flex-basis":i.units=["px","%","vw","vh"];break;case"text-shadow-v":case"text-shadow-h":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"box-shadow-h":case"box-shadow-v":i.units=["px","%"];break;case"font-size":case"letter-spacing":case"line-height":i.units=["px","em","rem","%"];break;case"border-width":i.units=["px","em"];break;case"box-shadow-blur":case"box-shadow-spread":case"perspective":i.units=["px"];break;case"transition-duration":i.units=["s"];break;case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":i.units=["deg"]}switch(o){case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-blur":case"transition-duration":case"perspective":case"flex-basis":i.min=0}switch(o){case"text-shadow":case"box-shadow":case"background":i.preview=!0}switch(o){case"background":i.detached=!0}switch(o){case"transform-rotate-x":i.functionName="rotateX";break;case"transform-rotate-y":i.functionName="rotateY";break;case"transform-rotate-z":i.functionName="rotateZ";break;case"transform-scale-x":i.functionName="scaleX";break;case"transform-scale-y":i.functionName="scaleY";break;case"transform-scale-z":i.functionName="scaleZ";break;case"background-image":i.functionName="url"}switch(o){case"float":i.list=[{value:"none"},{value:"left"},{value:"right"}];break;case"display":i.list=[{value:"block"},{value:"inline"},{value:"inline-block"},{value:"flex"},{value:"none"}];break;case"flex-direction":i.list=[{value:"row"},{value:"row-reverse"},{value:"column"},{value:"column-reverse"}];break;case"flex-wrap":i.list=[{value:"nowrap"},{value:"wrap"},{value:"wrap-reverse"}];break;case"justify-content":i.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"space-between"},{value:"space-around"},{value:"space-evenly"}];break;case"align-items":i.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"baseline"},{value:"stretch"}];break;case"align-content":i.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"space-between"},{value:"space-around"},{value:"stretch"}];break;case"align-self":i.list=[{value:"auto"},{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"baseline"},{value:"stretch"}];break;case"position":i.list=[{value:"static"},{value:"relative"},{value:"absolute"},{value:"fixed"}];break;case"font-family":var s=", sans-serif",a=["Arial, Helvetica"+s,"Arial Black, Gadget"+s,"Brush Script MT"+s,"Comic Sans MS, cursive"+s,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+s,"Impact, Charcoal"+s,"Lucida Sans Unicode, Lucida Grande"+s,"Tahoma, Geneva"+s,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+s,"Verdana, Geneva"+s];i.list=[];for(var l=0,c=a.length;l<c;l++){var u={};u.value=a[l],u.name=a[l].split(",")[0],i.list.push(u)}break;case"font-weight":i.list=[{value:"100",name:"Thin"},{value:"200",name:"Extra-Light"},{value:"300",name:"Light"},{value:"400",name:"Normal"},{value:"500",name:"Medium"},{value:"600",name:"Semi-Bold"},{value:"700",name:"Bold"},{value:"800",name:"Extra-Bold"},{value:"900",name:"Ultra-Bold"}];break;case"text-align":i.list=[{value:"left"},{value:"center"},{value:"right"},{value:"justify"}];break;case"border-style":i.list=[{value:"none"},{value:"solid"},{value:"dotted"},{value:"dashed"},{value:"double"},{value:"groove"},{value:"ridge"},{value:"inset"},{value:"outset"}];break;case"box-shadow-type":i.list=[{value:"",name:"Outside"},{value:"inset",name:"Inside"}];break;case"background-repeat":i.list=[{value:"repeat"},{value:"repeat-x"},{value:"repeat-y"},{value:"no-repeat"}];break;case"background-position":i.list=[{value:"left top"},{value:"left center"},{value:"left bottom"},{value:"right top"},{value:"right center"},{value:"right bottom"},{value:"center top"},{value:"center center"},{value:"center bottom"}];break;case"background-attachment":i.list=[{value:"scroll"},{value:"fixed"},{value:"local"}];break;case"background-size":i.list=[{value:"auto"},{value:"cover"},{value:"contain"}];break;case"transition-property":i.list=[{value:"all"},{value:"width"},{value:"height"},{value:"background-color"},{value:"transform"},{value:"box-shadow"},{value:"opacity"}];break;case"transition-timing-function":i.list=[{value:"linear"},{value:"ease"},{value:"ease-in"},{value:"ease-out"},{value:"ease-in-out"}];break;case"cursor":i.list=[{value:"auto"},{value:"pointer"},{value:"copy"},{value:"crosshair"},{value:"grab"},{value:"grabbing"},{value:"help"},{value:"move"},{value:"text"}];break;case"overflow":case"overflow-x":case"overflow-y":i.list=[{value:"visible"},{value:"hidden"},{value:"scroll"},{value:"auto"}]}switch(o){case"margin":i.properties=this.build(["margin-top","margin-right","margin-bottom","margin-left"]);break;case"padding":i.properties=this.build(["padding-top","padding-right","padding-bottom","padding-left"]);break;case"text-shadow":i.properties=this.build(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"]);break;case"border":i.properties=this.build(["border-width","border-style","border-color"]);break;case"border-radius":i.properties=this.build(["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"]);break;case"box-shadow":i.properties=this.build(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"]);break;case"background":i.properties=this.build(["background-image","background-repeat","background-position","background-attachment","background-size"]);break;case"transition":i.properties=this.build(["transition-property","transition-duration","transition-timing-function"]);break;case"transform":i.properties=this.build(["transform-rotate-x","transform-rotate-y","transform-rotate-z","transform-scale-x","transform-scale-y","transform-scale-z"])}t.push(i)}return t}}}},"./src/style_manager/model/PropertyInteger.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/style_manager/model/Property.js"),a=n("./src/domain_abstract/ui/InputNumber.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.default.extend({defaults:c(c({},s.default.prototype.defaults),{},{units:[],unit:"",step:1,min:"",max:""}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.default.callParentInit(s.default,this,e,t);var n=this.get("unit"),r=this.get("units");this.input=new a.default({model:this}),r.length&&!n&&this.set("unit",r[0]),s.default.callInit(this,e,t)},clearValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.set({value:void 0,unit:void 0},e),this},parseValue:function(e){var t=s.default.prototype.parseValue.apply(this,arguments),n=this.input.validateInputValue(t.value,{deepCheck:1}),r=n.value,i=n.unit;return t.value=r,t.unit=i,t},getFullValue:function(){var e=this.get("value"),t=this.get("unit");return e=Object(o.isUndefined)(e)?"":e,t=!Object(o.isUndefined)(t)&&e?t:"",e="".concat(e).concat(t),s.default.prototype.getFullValue.apply(this,[e])}})},"./src/style_manager/model/PropertyRadio.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./src/style_manager/model/Property.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=a.default.extend({defaults:function(){return c(c({},a.default.prototype.defaults),{},{options:[],full:1})},initialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.onOptionChange)},onOptionChange:function(){this.set("list",this.get("options"))},getOptions:function(){var e=this.attributes,t=e.options;return t&&t.length?t:e.list},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.set("options",e),this},addOption:function(e){if(e){var t=this.getOptions();this.setOptions([].concat(i()(t),[e]))}return this}})},"./src/style_manager/model/PropertySelect.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/style_manager/model/PropertyRadio.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:function(){return a(a({},o.default.prototype.defaults()),{},{full:0})}})},"./src/style_manager/model/PropertySlider.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/style_manager/model/PropertyInteger.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({defaults:a(a({},o.default.prototype.defaults),{},{showInput:1})})},"./src/style_manager/model/PropertyStack.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/style_manager/model/PropertyComposite.js"),a=n("./src/style_manager/model/Layers.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.default.extend({defaults:c(c({},s.default.prototype.defaults),{},{layers:[],layerSeparator:", ",prepend:0,preview:0}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.default.callParentInit(s.default,this,e,t);var n=this.get("layers"),r=new a.default(n);r.property=this,r.properties=this.get("properties"),this.set("layers",r),s.default.callInit(this,e,t)},getLayers:function(){return this.get("layers")},getCurrentLayer:function(){return this.getLayers().filter((function(e){return e.get("active")}))[0]},getFullValue:function(){return this.get("detached")?"":this.get("layers").getFullValue()},getValueFromStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getLayers().getLayersFromStyle(e);return new a.default(t).getFullValue()},clearValue:function(){return this.getLayers().reset(),s.default.prototype.clearValue.apply(this,arguments)},getValueFromTarget:function(e){var t=this.attributes,n=t.detached,r=t.property,i=t.properties,s=e.getStyle(),a={};return i.forEach((function(e){var t=e.get("property"),n=s[t];n&&(a[t]=n)})),n?Object(o.keys)(a).length?a:"":s[r]},getLayersFromTarget:function(e){}})},"./src/style_manager/model/Sector.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/style_manager/model/Properties.js"),a=n("./src/style_manager/model/PropertyFactory.js");t.default=i.a.Model.extend({defaults:{id:"",name:"",open:!0,buildProps:"",extendBuilded:1,properties:[]},initialize:function(e){var t,n=this.buildProperties((e||{}).buildProps),r=this.get("name")||"";!this.get("id")&&this.set("id",r.replace(/ /g,"_").toLowerCase()),t=n?this.extendProperties(n):this.get("properties");var i=new s.default(t);i.sector=this,this.set("properties",i)},extendProperties:function(e,t,n){for(var r=e.length,i=t||this.get("properties"),s=this.get("extendBuilded"),a=[],l=0,c=i.length;l<c;l++){for(var u=i[l],d=0,h=0;h<r;h++){var f=e[h];if(u.property!=f.property&&u.id!=f.property);else{var p=u.properties;p&&p.length&&(u.properties=this.extendProperties(f.properties||[],p,1)),e[h]=s?Object(o.extend)(f,u):u,a[h]=e[h],d=1}}d||(e.push(u),a.push(u))}return n?a.filter((function(e){return e})):e},buildProperties:function(e){var t=e||[];if(t.length)return this.propFactory||(this.propFactory=new a.default),this.propFactory.build(t)}})},"./src/style_manager/model/Sectors.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/style_manager/model/Sector.js");t.default=i.a.Collection.extend({model:o.default})},"./src/style_manager/view/LayerView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./node_modules/backbone/backbone.js"),a=n.n(s),l=n("./src/style_manager/view/PropertiesView.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=a.a.View.extend({events:{click:"active","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"},template:function(e){var t=this.pfx,n=this.ppfx,r=this.em,i="".concat(r&&r.t("styleManager.layer")," ").concat(e.get("index"));return'\n      <div id="'.concat(t,'move" class="').concat(n,'no-touch-actions" data-move-layer>\n        <i class="fa fa-arrows"></i>\n      </div>\n      <div id="').concat(t,'label">').concat(i,'</div>\n      <div id="').concat(t,'preview-box">\n      \t<div id="').concat(t,'preview" data-preview></div>\n      </div>\n      <div id="').concat(t,'close-layer" class="').concat(t,'btn-close" data-close-layer>\n        &Cross;\n      </div>\n      <div id="').concat(t,'inputs" data-properties></div>\n      <div style="clear:both"></div>\n    ')},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model;this.stackModel=e.stackModel,this.config=e.config||{},this.em=this.config.em,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.sorter=e.sorter||null,this.propsConfig=e.propsConfig||{},this.customPreview=e.onPreview,this.listenTo(t,"destroy remove",this.remove),this.listenTo(t,"change:active",this.updateVisibility),this.listenTo(t.get("properties"),"change",this.updatePreview),t.view=this,t.set({droppable:0,draggable:1}),this.$el.data("model",t)},initSorter:function(e){this.sorter&&this.sorter.startSort(this.el)},removeItem:function(e){e&&e.stopPropagation(),this.remove()},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.props,r=t.collection,i=this.stackModel;a.a.View.prototype.remove.apply(this,arguments),r&&r.contains(t)&&r.remove(t),i&&i.set&&(i.set({stackIndex:null},{silent:!0}),!e.fromTarget&&i.trigger("updateValue")),n&&n.remove()},onPreview:function(e){var t=this.stackModel,n=t&&t.get("detached"),r=e.split(" "),i=[],o={};return this.model.get("properties").each((function(e,t){var s=e.get("property"),a=n?e.getFullValue():r[t]||"";if(a&&"integer"==e.get("type")){var l=parseInt(a,10),c=a.replace(l,"");a=(l=(l=(l=isNaN(l)?0:l)>3?3:l)<-3?-3:l)+c}i.push(a),o[s]=a})),n?o:i.join(" ")},updatePreview:function(){var e=this.stackModel,t=this.customPreview,n=this.getPreviewEl(),r=this.model.getFullValue(),i=t?t(r):this.onPreview(r);if(i&&e&&n){var s=n.style;if(Object(o.isString)(i))s[e.get("property")]=i;else{var a=[];Object(o.each)(i,(function(e,t){return a.push("".concat(t,":").concat(e))})),n.setAttribute("style",a.join(";"))}}},getPropertiesWrapper:function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},getPreviewEl:function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},active:function(){var e=this.model,t=e.collection;t.active(t.indexOf(e))},updateVisibility:function(){var e=this.pfx,t=this.getPropertiesWrapper(),n=this.model.get("active");t.style.display=n?"":"none",this.$el[n?"addClass":"removeClass"]("".concat(e,"active"))},render:function(){var e=this.propsConfig,t=this.model,n=this.el,r=this.pfx,i=t.get("preview"),o=new l.default({collection:t.get("properties"),config:u(u({},this.config),{},{fromLayer:1}),target:e.target,customValue:e.customValue,propTarget:e.propTarget,onChange:e.onChange}),s=o.render().el;return n.innerHTML=this.template(t),n.className="".concat(r,"layer").concat(i?"":" ".concat(r,"no-preview")),this.props=o,this.getPropertiesWrapper().appendChild(s),this.updateVisibility(),this.updatePreview(),this}})},"./src/style_manager/view/LayersView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/style_manager/view/LayerView.js");t.default=i.a.View.extend({initialize:function(e){this.config=e.config||{},this.stackModel=e.stackModel,this.preview=e.preview,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.propsConfig=e.propsConfig;var t=this.pfx,n=this.ppfx,r=this.collection;this.className="".concat(t,"layers ").concat(n,"field"),this.listenTo(r,"add",this.addTo),this.listenTo(r,"deselectAll",this.deselectAll),this.listenTo(r,"reset",this.reset),this.items=[];var i=this.config.em||"",o=i?i.get("Utils"):"";this.sorter=o?new o.Sorter({container:this.el,ignoreViewChildren:1,containerSel:".".concat(t,"layers"),itemSel:".".concat(t,"layer"),pfx:this.config.pStylePrefix}):"",r.view=this,this.$el.data("model",r),this.$el.data("collection",r)},addTo:function(e){var t=this.collection.indexOf(e);this.addToCollection(e,null,t)},addToCollection:function(e,t,n){var r=t||null,i=this.stackModel,s=this.config,a=this.sorter,l=this.propsConfig;void 0!==this.preview&&e.set("preview",this.preview);var c=new o.default({model:e,config:s,sorter:a,stackModel:i,propsConfig:l}),u=c.render().el;if(this.items.push(c),r)r.appendChild(u);else if(void 0!==n){var d="before";this.$el.children().length==n&&(n--,d="after"),n<0?this.$el.append(u):this.$el.children().eq(n)[d](u)}else this.$el.append(u);return u},deselectAll:function(){this.$el.find("."+this.pfx+"layer").removeClass(this.pfx+"active")},reset:function(e,t){this.clearItems(t),this.render()},render:function(){var e=document.createDocumentFragment();return this.$el.empty(),this.collection.each((function(t){this.addToCollection(t,e)}),this),this.$el.append(e),this.$el.attr("class",this.className),this.sorter&&(this.sorter.plh=null),this},remove:function(){this.clearItems(),i.a.View.prototype.remove.apply(this,arguments)},clearItems:function(e){this.items.forEach((function(t){return t.remove(e)})),this.items=[]}})},"./src/style_manager/view/PropertiesView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/utils/dom.js");t.default=i.a.View.extend({initialize:function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix||"",this.target=e.target||{},this.propTarget=e.propTarget||{},this.onChange=e.onChange,this.onInputRender=e.onInputRender||{},this.customValue=e.customValue||{},this.properties=[];var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.render)},addTo:function(e,t,n){this.add(e,null,n)},add:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t||this.el,i=new e.typeView({model:e,name:e.get("name"),id:this.pfx+e.get("property"),target:this.target,propTarget:this.propTarget,onChange:this.onChange,onInputRender:this.onInputRender,config:this.config});"composite"!=e.get("type")&&(i.customValue=this.customValue),i.render();var s=i.el;this.properties.push(i),i.updateVisibility(),Object(o.appendAtIndex)(r,s,n.at)},render:function(){var e=this,t=this.$el;this.clearItems();var n=document.createDocumentFragment();return this.collection.each((function(t){return e.add(t,n)})),t.empty(),t.append(n),t.attr("class","".concat(this.pfx,"properties")),this},remove:function(){i.a.View.prototype.remove.apply(this,arguments),this.clearItems()},clearItems:function(){this.properties.forEach((function(e){return e.remove()})),this.properties=[]}})},"./src/style_manager/view/PropertyColorView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/style_manager/view/PropertyIntegerView.js"),s=n("./src/domain_abstract/ui/InputColor.js");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({setValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=l(l({},t),{},{silent:1}),this.inputInst.setValue(e,t)},onRender:function(){if(!this.input){var e=this.ppfx,t=new s.default({target:this.target,model:this.model,ppfx:e}).render();this.el.querySelector(".".concat(e,"fields")).appendChild(t.el),this.$input=t.inputEl,this.$color=t.colorEl,this.input=this.$input.get(0),this.inputInst=t}}})},"./src/style_manager/view/PropertyCompositeView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./src/style_manager/view/PropertyView.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=s.a.$;t.default=a.default.extend({templateInput:function(){var e=this.pfx;return'\n      <div class="'.concat(e,"field ").concat(e,'composite">\n        <span id="').concat(e,'input-holder"></span>\n      </div>\n    ')},inputValueChanged:function(){if(!this.model.get("detached")){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.prototype.inputValueChanged.apply(this,t)}},clear:function(e){var t=this.properties;t&&t.forEach((function(e){return e.clear()})),a.default.prototype.clear.apply(this,arguments)},onRender:function(){var e=this.model,t=e.get("properties")||[];if(this.properties=[],t.length&&(this.$input||(this.$input=u('<input type="hidden" value="0">'),this.input=this.$input.get(0)),this.props||(this.props=e.get("properties")),!this.$props)){this.props.each((function(t,n){t&&"composite"==t.get("type")&&(this.props.remove(t),console.warn("Nested composite types not yet allowed.")),t.parent=e}),this);var r=new(0,n("./src/style_manager/view/PropertiesView.js").default)(this.getPropsConfig());this.$props=r.render().$el,this.properties=r.properties,this.$el.find("#".concat(this.pfx,"input-holder")).append(this.$props)}},getPropsConfig:function(e){var t=this,n=this.model,r={config:c(c({},this.config),{},{highlightComputed:0}),collection:this.props,target:this.target,propTarget:this.propTarget,onChange:function(e,t,r){n.set("value",n.getFullValue(),r)},customValue:function(e,n){return t.valueOnIndex(n,e)}};return n.get("detached")&&delete r.onChange,r},valueOnIndex:function(e,t){var n=this.getTargetValue({ignoreDefault:1});return n?n.split(this.model.getSplitSeparator())[e]:t&&t.getTargetValue({ignoreCustomValue:1,ignoreDefault:1})},clearCached:function(){a.default.prototype.clearCached.apply(this,arguments),this.$input=null,this.props=null,this.$props=null}})},"./src/style_manager/view/PropertyFileView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./node_modules/backbone/backbone.js"),o=n.n(i),s=n("./src/style_manager/view/PropertyView.js"),a=o.a.$;t.default=s.default.extend({templateInput:function(){var e=this.pfx,t=this.em;return'\n    <div class="'.concat(e,"field ").concat(e,"file\">\n      <div id='").concat(e,"input-holder'>\n        <div class=\"").concat(e,'btn-c">\n          <button class="').concat(e,'btn" id="').concat(e,'images" type="button">\n            ').concat(t.t("styleManager.fileButton"),'\n          </button>\n        </div>\n        <div style="clear:both;"></div>\n      </div>\n      <div id="').concat(e,'preview-box">\n        <div id="').concat(e,'preview-file"></div>\n        <div id="').concat(e,'close">&Cross;</div>\n      </div>\n    </div>\n    ')},init:function(){var e=this.em;this.modal=e.get("Modal"),this.am=e.get("AssetManager"),this.events["click #"+this.pfx+"close"]="removeFile",this.events["click #"+this.pfx+"images"]="openAssetManager",this.delegateEvents()},onRender:function(){if(!this.$input){var e=this.model.getDefaultValue();this.$input=a('<input placeholder="'.concat(e,'">'))}this.$preview||(this.$preview=this.$el.find("#"+this.pfx+"preview-file")),this.$previewBox||(this.$previewBox=this.$el.find("#"+this.pfx+"preview-box")),this.setValue(this.componentValue,0)},clearCached:function(){s.default.prototype.clearCached.apply(this,arguments),this.$preview=null,this.$previewBox=null},setValue:function(e,t){s.default.prototype.setValue.apply(this,arguments),this.setPreviewView(e&&e!=this.model.getDefaultValue()),this.setPreview(e)},setPreviewView:function(e){var t=this.$previewBox;t&&t[e?"addClass":"removeClass"]("".concat(this.pfx,"show")),t&&t.css({display:e?"block":"none"})},spreadUrl:function(e){this.model.set("value",e),this.setPreviewView(1)},setPreview:function(e){var t=this.$preview;e=e&&e.indexOf("url(")<0?"url(".concat(e,")"):e,t&&t.css("background-image",e)},cleanValue:function(){this.setPreviewView(0),this.model.set({value:""},{silent:!0})},removeFile:function(){this.model.set("value",this.model.getDefaultValue());for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.default.prototype.cleanValue.apply(this,t),this.setPreviewView(0)},openAssetManager:function(e){var t=this,n=this.em,i=this.modal,o=n?n.get("Editor"):"";o&&o.runCommand("open-assets",{types:["image"],accept:"image/*",target:this.getTargetModel(),onClick:function(){},onDblClick:function(){},onSelect:function(e){i.close();var n=Object(r.isString)(e)?e:e.get("src");t.spreadUrl(n)}})}})},"./src/style_manager/view/PropertyIntegerView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./src/style_manager/view/PropertyView.js"),s=i.a.$;t.default=o.default.extend({templateInput:function(){return""},init:function(){var e=this.model;this.listenTo(e,"change:unit",this.modelValueChanged),this.listenTo(e,"el:change",this.elementUpdated),this.listenTo(e,"change:units",this.render)},setValue:function(e){var t=this.model.parseValue(e);e="".concat(t.value).concat(t.unit),this.inputInst.setValue(e,{silent:1})},onRender:function(){var e=this.ppfx;if(!this.input){var t=this.model.input;t.ppfx=e,t.render(),this.el.querySelector(".".concat(e,"fields")).appendChild(t.el),this.$input=t.inputEl,this.unit=t.unitEl,this.$unit=s(this.unit),this.input=this.$input.get(0),this.inputInst=t}},clearCached:function(){o.default.prototype.clearCached.apply(this,arguments),this.unit=null,this.$unit=null}})},"./src/style_manager/view/PropertyRadioView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/style_manager/view/PropertyView.js");t.default=r.default.extend({templateInput:function(){var e=this.ppfx;return'\n      <div class="'.concat(e,"field ").concat(e,'field-radio">\n      </div>\n    ')},onRender:function(){var e=this.pfx,t=this.ppfx,n="".concat(t,"radio-item-label"),r=this.model,i=r.get("property"),o=r.get("list")||r.get("options")||[],s=r.cid,a="".concat(e,"radio ").concat(e,"radio-").concat(i);if(!this.input&&o&&o.length){var l="";o.forEach((function(r){var o=r.className?"".concat(r.className," ").concat(e,"icon ").concat(n):"",c="".concat(i,"-").concat(r.value,"-").concat(s),u=r.name||r.value,d=r.title?'title="'.concat(r.title,'"'):"";l+='\n            <div class="'.concat(t,'radio-item">\n              <input type="radio" class="').concat(a,'" id="').concat(c,'" name="').concat(i,"-").concat(s,'" value="').concat(r.value,'"/>\n              <label class="').concat(o||n,'" ').concat(d,' for="').concat(c,'">').concat(o?"":u,"</label>\n            </div>\n          ")}));var c=this.el.querySelector(".".concat(t,"field"));c.innerHTML='<div class="'.concat(t,'radio-items">').concat(l,"</div>"),this.input=c.firstChild}},getInputValue:function(){var e=this.getCheckedEl();return e?e.value:""},getCheckedEl:function(){var e=this.getInputEl();return e?e.querySelector("input:checked"):""},setValue:function(e){var t=this.model,n=e||t.get("value")||t.getDefaultValue(),r=this.getInputEl(),i=r?r.querySelector('[value="'.concat(n,'"]')):"";if(i)i.checked=!0;else{var o=this.getCheckedEl();o&&(o.checked=!1)}}})},"./src/style_manager/view/PropertySelectView.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/backbone/backbone.js");var r=n("./src/style_manager/view/PropertyView.js");t.default=r.default.extend({templateInput:function(){var e=this.pfx,t=this.ppfx;return'\n      <div class="'.concat(t,"field ").concat(t,'select">\n        <span id="').concat(e,'input-holder"></span>\n        <div class="').concat(t,'sel-arrow">\n          <div class="').concat(t,'d-s-arrow"></div>\n        </div>\n      </div>\n    ')},initialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.prototype.initialize.apply(this,t),this.listenTo(this.model,"change:options",this.updateOptions)},updateOptions:function(){this.input=null,this.onRender()},onRender:function(){var e=this.pfx,t=this.model.getOptions();if(!this.input){var n="";t.forEach((function(e){var t=e.name||e.value,r=e.style?e.style.replace(/"/g,"&quot;"):"",i=r?'style="'.concat(r,'"'):"",o=e.value.replace(/"/g,"&quot;");n+='<option value="'.concat(o,'" ').concat(i,">").concat(t,"</option>")}));var r=this.el.querySelector("#".concat(e,"input-holder"));r.innerHTML="<select>".concat(n,"</select>"),this.input=r.firstChild}}})},"./src/style_manager/view/PropertySliderView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./src/style_manager/view/PropertyIntegerView.js");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=o.default.extend({events:function(){return a(a({},o.default.prototype.events),{},{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},templateInput:function(e){var t=this.ppfx;return'\n      <div class="'.concat(t,"field ").concat(t,'field-range">\n        <input type="range"\n          min="').concat(e.get("min"),'"\n          max="').concat(e.get("max"),'"\n          step="').concat(e.get("step"),'"/>\n      </div>\n    ')},getSliderEl:function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},inputValueChanged:function(){var e=this.model,t=e.get("step");this.getInputEl().value=this.getSliderEl().value;var n=this.getInputValue()-t;e.set("value",n,{avoidStore:1}).set("value",n+t),this.elementUpdated()},inputValueChangedSoft:function(){this.getInputEl().value=this.getSliderEl().value,this.model.set("value",this.getInputValue(),{avoidStore:1}),this.elementUpdated()},setValue:function(e){var t=this.model.parseValue(e);this.getSliderEl().value=parseFloat(t.value),o.default.prototype.setValue.apply(this,arguments)},onRender:function(){o.default.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},clearCached:function(){o.default.prototype.clearCached.apply(this,arguments),this.slider=null}})},"./src/style_manager/view/PropertyStackView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/style_manager/view/PropertyCompositeView.js"),a=n("./src/style_manager/view/LayersView.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=new(n("./src/code_manager/model/CssGenerator.js").default);t.default=s.default.extend({templateInput:function(){var e=this.pfx;return'\n      <div class="'.concat(e,"field ").concat(e,'stack">\n        <button type="button" id="').concat(e,'add" data-add-layer>+</button>\n        <div data-layers-wrapper></div>\n      </div>\n    ')},init:function(){var e=this.model;e.set("stackIndex",null),this.events["click [data-add-layer]"]="addLayer",this.listenTo(e,"change:stackIndex",this.indexChanged),this.listenTo(e,"updateValue",this.inputValueChanged),this.delegateEvents();var t=this.getPropsConfig();this.layers=new a.default({collection:this.getLayers(),stackModel:e,preview:e.get("preview"),config:this.config,propsConfig:t});var r=n("./src/style_manager/view/PropertiesView.js").default;this.propsView=new r({target:this.target,collection:e.get("properties"),stackModel:e,config:this.config,onChange:t.onChange,propTarget:t.propTarget})},targetUpdated:function(){var e,t=this;if(this.model.get("detached"))e=this._getTargetData(),this.setStatus(e.status),this.checkVisibility();else{for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e=s.default.prototype.targetUpdated.apply(this,r)}setTimeout((function(){return t.refreshLayers(e)}))},getLayers:function(){return this.model.get("layers")},indexChanged:function(e){var t=this.model;this.getLayers().active(t.get("stackIndex"))},addLayer:function(){var e=this.model,t=this.getLayers(),n=e.get("prepend"),r=e.get("properties").deepClone();r.each((function(e){return e.set("value","")}));var o=t.add({properties:r},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({active:1},n&&{at:0}));this.inputValueChanged({up:1}),e.set("stackIndex",t.indexOf(o))},inputValueChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model;e.up&&this.elementUpdated(),t.get("detached")?t.get("properties").each((function(e){return e.trigger("change:value")})):t.set("value",this.getLayerValues())},setValue:function(){},getLayerValues:function(){return this.getLayers().getFullValue()},_getClassRule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.em,n=e.skipAdd,r=void 0===n?1:n,i=t.getSelected(),o=t.get("StyleManager").getModelToStyle(i,{skipAdd:r,useClasses:1});return o!==i&&o},_getParentTarget:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=this.model,o=i.get("property"),s=n.isValid||function(e){return e.getStyle()[o]},a=r.get("CssComposer").getAll().filter((function(t){return t.selectorsToString()===e.getSelectorsString()})),l=a.reduce((function(e,t){return e[t.getAtRule()]=t,e}),{}),u=c.sortMediaObject(l),d=u.map((function(e){return e.value})),h=d.indexOf(e),f=d.splice(0,h),p=f.length-1;p>-1;p--){var g=f[p];if(s(g)){t=g;break}}return t},refreshLayers:function(){var e,t,n,r,i,s,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=[],c=this.model,u=this.em,d=this.getLayers(),h=c.get("detached"),f=c.get("property"),p=this.getTarget(),g=this.getComputedValue(),m=u.getSelected(),v={fromTarget:1};if(h){t=a.targetValue||{};var b=function(e){var t=c.get("properties").at(0).get("property");return e&&!Object(o.isUndefined)(e.getStyle()[t])};if(!Object(o.keys)(t).length&&g&&m){var y={isValid:function(e){return b(e)}};(r=this._getParentTarget(p,y))?t=r.getStyle():(n=this._getClassRule(),r=!(i=b(n)&&n.getStyle())&&this._getParentTarget(this._getClassRule({skipAdd:0}),y),s=b(r)&&r.getStyle(),t=i||s||{})}e=t,l=d.getLayersFromStyle(t)}else{var w=this.getTargetValue({ignoreDefault:1}),x=w;!x&&g&&((r=this._getParentTarget(p))?x=r.getStyle()[f]:(s=(r=!(i=(n=this._getClassRule())&&n.getStyle()[f])&&this._getParentTarget(this._getClassRule({skipAdd:0})))&&r.getStyle()[f],x=i||s||g)),e=x=x==c.getDefaultValue()?"":x,l=d.getLayersFromValue(x)}var O=c.getLayersFromTarget(p,{resultValue:e,layersObj:l})||l;d.reset(null,v),d.add(O,v),c.set({stackIndex:null},{silent:!0})},getTargetValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=t.attributes.detached,r=this.getTarget(),i=s.default.prototype.getTargetValue.call(this,e);return Object(o.isUndefined)(i)&&!n?i=t.getValueFromStyle(r.getStyle()):n&&(i=t.getValueFromTarget(r)),i},getPropsConfig:function(){var e=this,t=e.model;return{target:e.target,propTarget:e.propTarget,onChange:function(n,r,o){var s=r.model,a=t.get("status");if(t.get("detached")){var l=s.get("property"),c=s.getDefaultValue(),u=e.getLayers(),d=u.getPropertyValues(l,c);r.updateTargetStyle(d,null,o),"background-image"!=l||o.avoidStore||"computed"!=a||t.get("properties").filter((function(e){return"__"==e.get("property").substr(0,2)})).forEach((function(t){var n=t.get("property"),r=u.getPropertyValues(n,t.getDefaultValue());e.getTargets().forEach((function(e){return e.addStyle(i()({},n,r),o)}))}))}else if("updated"==a){var h=t.getFullValue();t.set("value",h,o),!h&&r.updateTargetStyle(h,null,o)}}}},onRender:function(){var e=this.layers,t=this.propsView,n=this.el.querySelector("[data-layers-wrapper]");t.render(),n.appendChild(e.render().el)}})},"./src/style_manager/view/PropertyView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(o),a=n("./node_modules/backbone/backbone.js"),l=n.n(a),c=n("./node_modules/underscore/modules/index-all.js"),u=n("./src/utils/mixins.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f="data-clear-style";t.default=l.a.View.extend({template:function(){var e=this.ppfx;return'\n      <div class="'.concat(this.pfx,'label" data-sm-label></div>\n      <div class="').concat(e,'fields" data-sm-fields></div>\n    ')},templateLabel:function(e){var t=this.pfx,n=this.em,r=e.parent,i=e.attributes,o=i.icon,s=void 0===o?"":o,a=i.info,l=void 0===a?"":a,c=i.name,u=n&&n.t("styleManager.properties.".concat(i.id))||c;return'\n      <span class="'.concat(t,"icon ").concat(s,'" title="').concat(l,'">\n        ').concat(u,"\n      </span>\n      ").concat(r?"":'<b class="'.concat(t,'clear" ').concat(f,">&Cross;</b>"),"\n    ")},templateInput:function(e){return'\n      <div class="'.concat(this.ppfx,'field">\n        <input placeholder="').concat(e.getDefaultValue(),'"/>\n      </div>\n    ')},events:s()({change:"inputValueChanged"},"click [".concat(f,"]"),"clear"),initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.bindAll)(this,"targetUpdated","__change","__updateStyle"),this.config=t.config||{};var n=this.config.em;this.em=n,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.target=t.target||{},this.propTarget=t.propTarget||{},this.onChange=t.onChange,this.onInputRender=t.onInputRender||{},this.customValue=t.customValue||{};var r=this.model;this.property=r.get("property"),this.input=null;var i=this.pfx;this.inputHolderId="#"+i+"input-holder",this.sector=r.collection&&r.collection.sector,this.__destroyFn=this.destroy?this.destroy.bind(this):function(){},r.view=this,r.get("value")||r.set("value",r.getDefaultValue()),n&&n.on("update:component:style:".concat(this.property),this.targetUpdated);var o=r.get("requires");o&&Object.keys(o).forEach((function(t){n&&n.on("component:styleUpdate:".concat(t),e.targetUpdated)})),this.listenTo(this.propTarget,"update",this.targetUpdated),this.listenTo(r,"destroy remove",this.remove),this.listenTo(r,"change:value",this.modelValueChanged),this.listenTo(r,"targetUpdated",this.targetUpdated),this.listenTo(r,"change:visible",this.updateVisibility),this.listenTo(r,"change:status",this.updateStatus),this.listenTo(r,"change:name change:className change:full",this.render);var s=this.init&&this.init.bind(this);s&&s()},remove:function(){l.a.View.prototype.remove.apply(this,arguments),this.__destroyFn(this._getClbOpts())},updateStatus:function(){var e=this.model,t=e.get("status"),n=e.parent,r=this.pfx,i=this.ppfx,o=this.config,s="".concat(i,"four-color"),a="".concat(i,"color-warn"),l=this.$el.children(".".concat(r,"label")),c=this.getClearEl(),u=c?c.style:{};switch(l.removeClass("".concat(s," ").concat(a)),u.display="none",t){case"updated":!n&&l.addClass(s),o.clearProperties&&(u.display="inline");break;case"computed":l.addClass(a)}},clear:function(e){var t=this;e&&e.stopPropagation(),this.model.clearValue(),setTimeout((function(){return t.targetUpdated()}))},getClearEl:function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(f,"]"))),this.clearEl},getTarget:function(){return this.getTargetModel()},getTargets:function(){return this.propTarget.targets||[this.getTarget()]},getTargetModel:function(){return this.propTarget&&this.propTarget.model},getHelperModel:function(){return this.propTarget&&this.propTarget.helper},inputValueChanged:function(e){e&&e.stopPropagation(),this.emit||(this.model.setValueFromInput(this.getInputValue()),this.elementUpdated())},elementUpdated:function(){this.setStatus("updated")},setStatus:function(e){this.model.set("status",e);var t=this.model.parent;t&&"updated"==e&&t.set("status",e)},emitUpdateTarget:Object(c.debounce)((function(){var e=this.config.em;e&&e.trigger("styleManager:update:target",this.getTarget())})),_getTargetData:function(){var e=this.model,t=this.config,n=this.getTargetValue({ignoreDefault:1}),r=e.getDefaultValue(),i=this.getComputedValue(),o="",s="";return n?(o=n,t.highlightChanged&&(s="updated")):i&&t.showComputed&&i!=r?(o=i,t.highlightComputed&&(s="computed")):(o=r,s=""),{value:o,status:s,targetValue:n,defaultValue:r,computedValue:i}},targetUpdated:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.config.fromLayer&&(this.emitUpdateTarget(),this.checkVisibility())){var r=this.config,o=r.em,s=this.model,a=s.get("property"),l=this._getTargetData(),c=l.status,u=l.value,d=i()(l,["status","value"]),f=h({status:c,value:u},d);return this.setStatus(c),s.setValue(u,0,h({fromTarget:1},n)),o&&(o.trigger("styleManager:change",this,a,u,f),o.trigger("styleManager:change:".concat(a),this,u,f),this._emitUpdate(f)),f}},_emitUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.em,n=this.model;if(t){var r=n.get("property"),i=h(h({},this._getEventData()),e),o=i.id;t.trigger("style:update",i),t.trigger("style:update:".concat(r),i),r!==o&&t.trigger("style:update:".concat(o),i)}},_getEventData:function(){var e=this.model;return{propertyView:this,targets:this.getTargets(),value:e.getFullValue(),property:e,id:e.get("id"),name:e.get("property")}},checkVisibility:function(){var e=1;return this.config.hideNotStylable&&(this.isTargetStylable()&&this.isComponentStylable()?this.show():(this.hide(),e=0),this.sector&&this.sector.trigger("updateVisibility")),e},getTargetValue:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.model,r=this.getTargetModel(),i=this.customValue;if(!r)return e;if((e=r.getStyle()[n.get("property")])||t.ignoreDefault||(e=n.getDefaultValue()),"function"==typeof i&&!t.ignoreCustomValue){var o=n.collection.indexOf(n),s=i(this,o,e);s&&(e=s)}return e},getComputedValue:function(){var e=this.propTarget,t=e.computed||{},n=e.computedDefault||{},r=this.config.avoidComputed||[],i=this.model.get("property"),o=r.indexOf(i)<0,s=t[i],a=n[Object(u.camelCase)(i)];return t&&o&&a!==s&&s||""},getInputValue:function(){var e=this.getInputEl();return e?e.value:""},modelValueChanged:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.model,o=i.getFullValue();if(r.fromInput||this.setValue(o),!r.fromTarget){this.getTargets().forEach((function(e){return n.__updateTarget(e,r)}));var a=this.config.em;if(!a)return;var l=i.get("property"),c=s()({},l,o);a.getSelectedAll().forEach((function(e){!r.noEmit&&a.trigger("component:update",e,c,r),a.trigger("component:styleUpdate",e,l,r),a.trigger("component:styleUpdate:".concat(l),e,o,r),e.trigger("change:style",e,c,r),e.trigger("change:style:".concat(l),e,o,r)}))}},__updateTarget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model,r=n.getFullValue(),i=this.onChange;e&&this.isComponentStylable()&&(t.fromTarget||(i&&!t.fromParent?i(e,this,t):this.updateTargetStyle(r,null,h(h({},t),{},{target:e}))),this._emitUpdate())},updateTargetStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t||this.model.get("property"),i=n.target||this.getTarget(),o=i.getStyle();e?o[r]=e:delete o[r],n.avoidStore?o.__=1:delete o.__,i.setStyle(o,n);var s=this.getHelperModel();s&&s.setStyle(o,n)},isTargetStylable:function(e){var t=e||this.getTarget(),n=this.model,r=n.get("id"),i=n.get("property"),o=n.get("toRequire"),s=t.get("unstylable"),a=t.get("stylable-require"),l=n.get("requires"),u=n.get("requiresParent"),d=this.sector?this.sector.collection:null,h=this.em?this.em.getSelected():null,f=t.get("stylable");if(Object(c.isArray)(f)&&(f=f.indexOf(i)>=0),Object(c.isArray)(s)&&(f=s.indexOf(i)<0),o&&(f=!e||a&&(a.indexOf(r)>=0||a.indexOf(i)>=0)),d&&l){var p=Object.keys(l);d.each((function(e){e.get("properties").each((function(e){if(Object(c.includes)(p,e.id)){var t=l[e.id];f=f&&Object(c.includes)(t,e.get("value"))}}))}))}if(u){var g=h&&h.parent(),m=g&&g.getEl();if(m){var v=window.getComputedStyle(m);Object(c.each)(u,(function(e,t){f=f&&v[t]&&Object(c.includes)(e,v[t])}))}else f=!1}return f},isComponentStylable:function(){var e=this.em,t=e&&e.getSelected();return!t||this.isTargetStylable(t)},setRawValue:function(e){this.setValue(this.model.parseValue(e))},setValue:function(e){var t=this.model,n=Object(c.isUndefined)(e)?t.getDefaultValue():e;if(this.update)return this.__update(n);var r=this.getInputEl();r&&(r.value=n)},getInputEl:function(){return this.input||(this.input=this.el.querySelector("input")),this.input},updateVisibility:function(){this.el.style.display=this.model.get("visible")?"":"none"},show:function(){this.model.set("visible",1)},hide:function(){this.model.set("visible",0)},cleanValue:function(){this.setValue("")},clearCached:function(){this.clearEl=null,this.input=null,this.$input=null},__update:function(e){var t=this.update&&this.update.bind(this);t&&t(h(h({},this._getClbOpts()),{},{value:e}))},__change:function(){for(var e=this.emit&&this.emit.bind(this),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e&&e.apply(void 0,[this._getClbOpts()].concat(n))},__updateStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.complete,r=i()(t,["complete"]),o=!1!==n;Object(u.isObject)(e)?this.getTargets().forEach((function(t){return t.addStyle(e,{avoidStore:!o})})):this.model.setValueFromInput(e,n,r),o&&this.elementUpdated()},_getClbOpts:function(){var e=this.model;return{el:this.el,props:e.attributes,setProps:function(){return e.set.apply(e,arguments)},change:this.__change,updateStyle:this.__updateStyle,targets:this.getTargets()}},render:function(){this.clearCached();var e=this.pfx,t=this.model,n=this.el,r=this.$el,i=t.get("property"),o=t.get("full"),s=t.get("className")||"",a="".concat(e,"property");this.createdEl&&this.__destroyFn(this._getClbOpts()),r.empty().append(this.template(t)),r.find("[data-sm-label]").append(this.templateLabel(t));var l=this.create&&this.create.bind(this);this.createdEl=l&&l(this._getClbOpts()),r.find("[data-sm-fields]").append(this.createdEl||this.templateInput(t)),n.className="".concat(a," ").concat(e).concat(t.get("type")," ").concat(a,"__").concat(i," ").concat(s).trim(),n.className+=o?" ".concat(a,"--full"):"",this.updateStatus();var c=this.onRender&&this.onRender.bind(this);c&&c(),this.setValue(t.get("value"),{fromTarget:1})}})},"./src/style_manager/view/SectorView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/style_manager/view/PropertiesView.js");t.default=i.a.View.extend({template:Object(o.template)('\n  <div class="<%= pfx %>title" data-sector-title>\n    <i id="<%= pfx %>caret" class="fa"></i>\n    <%= label %>\n  </div>'),events:{"click [data-sector-title]":"toggle"},initialize:function(e){this.config=e.config||{},this.em=this.config.em,this.pfx=this.config.stylePrefix||"",this.target=e.target||{},this.propTarget=e.propTarget||{},this.caretR="fa-caret-right",this.caretD="fa-caret-down";var t=this.model;this.listenTo(t,"change:open",this.updateOpen),this.listenTo(t,"updateVisibility",this.updateVisibility),this.listenTo(t,"destroy remove",this.remove)},updateVisibility:function(){var e;this.model.get("properties").each((function(t){t.get("visible")&&(e=1)})),this.el.style.display=e?"":"none"},updateOpen:function(){this.model.get("open")?this.show():this.hide()},show:function(){this.$el.addClass(this.pfx+"open"),this.getPropertiesEl().style.display="",this.$caret.removeClass(this.caretR).addClass(this.caretD)},hide:function(){this.$el.removeClass(this.pfx+"open"),this.getPropertiesEl().style.display="none",this.$caret.removeClass(this.caretD).addClass(this.caretR)},getPropertiesEl:function(){return this.$el.find(".".concat(this.pfx,"properties")).get(0)},toggle:function(e){var t=this.model.get("open")?0:1;this.model.set("open",t)},render:function(){var e=this.pfx,t=this.em,n=this.$el,r=this.model.attributes,i=r.id,o=r.name,s=t&&t.t("styleManager.sectors.".concat(i))||o;return n.html(this.template({pfx:e,label:s})),this.$caret=n.find("#".concat(e,"caret")),this.renderProperties(),n.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(i," no-select")),this.updateOpen(),this},renderProperties:function(){var e=this.model.get("properties");if(e){var t=new s.default({collection:e,target:this.target,propTarget:this.propTarget,config:this.config});this.$el.append(t.render().el)}}})},"./src/style_manager/view/SectorsView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/utils/mixins.js"),c=n("./src/utils/dom.js"),u=n("./src/style_manager/view/SectorView.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f="hc-state";t.default=s.a.View.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.config||{};this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.target=e.target||{},this.config=t;var n={};Object(a.extend)(n,s.a.Events);var r=document.body,i=document.createElement("el-".concat((new Date).getTime()));r.appendChild(i),n.computedDefault=h({},window.getComputedStyle(i)),r.removeChild(i),this.propTarget=n;var o=this.collection,l="component:toggled component:update:classes change:state change:device frame:resized";this.listenTo(o,"add",this.addTo),this.listenTo(o,"reset",this.render),this.listenTo(this.target,l,this.targetUpdated)},addTo:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.addToCollection(e,null,n)},toggleStateCls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;e.forEach((function(e){var n=e.getEl();n&&n.classList&&n.classList[t?"add":"remove"](f)}))},targetUpdated:function(e){var t=this.target,n=this.propTarget,r=t.getSelectedAll(),i=t.getSelected(),o=e&&e.toHTML?e:i;if(o&&this.toggleStateCls([o]),i){var s=t.get("Config").devicePreviewMode?"":t.get("state"),a=t.get("SelectorManager").getConfig().componentFirst,c=i.getEl();if(n.helper=null,n.targets=null,c&&Object(l.isTaggableNode)(c)){var u=s?":".concat(s):null;n.computed=window.getComputedStyle(c,u)}i=t.get("StyleManager").getModelToStyle(i),s&&(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.get("CssComposer"),i=r.getAll(),o=r.getClassRule(f);o?(i.remove(o),i.add(o)):o=r.setClassRule(f),o.set("important",1),o.setStyle(e),n.helper=o}(i.getStyle()),this.toggleStateCls(r,1)),n.model=i,a&&(n.targets=r),n.trigger("update")}},setTarget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.target,r=Object(a.isArray)(e)?e:[e],i=t.targetIsClass,o=t.stylable,s=[];r.forEach((function(e){var t=e;if(Object(a.isString)(e)){var r,l=n.get("CssComposer").getAll();i&&(r=l.filter((function(t){return t.get("selectors").getFullString()===e}))[0]),r||(r=l.filter((function(t){return t.get("selectorsAdd")===e}))[0]),r||(r=l.add({selectors:[],selectorsAdd:e})),o&&r.set({stylable:o}),t=r}s.push(t)}));var l=this.propTarget;return l.targets=s,l.trigger("update",{targets:s}),s},addToCollection:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.pfx,i=this.target,o=this.propTarget,s=this.config,a=this.el,l=t||a,d=new u.default({model:e,id:"".concat(r).concat(e.get("id")),name:e.get("name"),properties:e.get("properties"),target:i,propTarget:o,config:s}).render().el;return Object(c.appendAtIndex)(l,d,n.at),d},render:function(){var e=this,t=document.createDocumentFragment(),n=this.$el,r=this.pfx,i=this.ppfx;return n.empty(),this.collection.each((function(n){return e.addToCollection(n,t)})),n.append(t),n.addClass("".concat(r,"sectors ").concat(i,"one-bg ").concat(i,"two-color")),this}})},"./src/trait_manager/config/config.js":function(e,t,n){"use strict";n.r(t),t.default={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}]}},"./src/trait_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./src/trait_manager/config/config.js"),o=n("./src/trait_manager/view/TraitsView.js");t.default=function(){var e,t={};return{TraitsView:o.default,name:"TraitManager",getConfig:function(){return t},init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=n,Object(r.defaults)(t,i.default);var s=t.pStylePrefix;return s&&(t.stylePrefix="".concat(s).concat(t.stylePrefix)),e=new o.default({collection:[],editor:t.em,config:t}),this},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(r.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},getTraitsViewer:function(){return e},addType:function(t,n){e.itemsView[t]=e.itemView.extend(n)},getType:function(t){return e.itemsView[t]},render:function(){return e.render().el}}}},"./src/trait_manager/model/Trait.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.a.Model.extend({defaults:{type:"text",label:"",name:"",min:"",max:"",unit:"",step:1,value:"",target:"",default:"",placeholder:"",changeProp:0,options:[]},initialize:function(){var e=this.get("target"),t=this.get("name"),n=this.get("changeProp");if(!this.get("id")&&this.set("id",t),e){this.target=e,this.unset("target");var r=n?"change:".concat(t):"change:attributes:".concat(t);this.listenTo(e,r,this.targetUpdated)}},props:function(){return this.attributes},targetUpdated:function(){var e=this.getTargetValue();this.set({value:e},{fromTarget:1})},getTargetValue:function(){var e,t=this.get("name"),n=this.target;return e=this.get("changeProp")?n.get(t):n.getAttributes()[t],Object(a.isUndefined)(e)?"":e},setTargetValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.target,r=this.get("name");if(!Object(a.isUndefined)(e)){var i=e;if("false"===e?i=!1:"true"===e&&(i=!0),this.get("changeProp"))n.set(r,i,t);else{var o=c({},n.get("attributes"));o[r]=i,n.set("attributes",o,t)}}},setValueFromInput:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={value:e};this.set(r,c(c({},n),{},{avoidStore:1})),t&&(this.set("value","",n),this.set(r,n))},getInitValue:function(){var e,t=this.target,n=this.get("name");if(t){var r=t.get("attributes");e=this.get("changeProp")?t.get(n):r[n]}return e||this.get("value")||this.get("default")}})},"./src/trait_manager/model/TraitFactory.js":function(e,t,n){"use strict";n.r(t),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{build:function(t){var n=[];"string"==typeof t&&(t=[t]);for(var r=0;r<t.length;r++){var i={},o=t[r];switch(i.name=o,o){case"target":i.type="select",i.default=!1,i.options=e.optionsTarget}n.push(i)}return n}}}},"./src/trait_manager/model/Traits.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/trait_manager/model/Trait.js"),a=n("./src/trait_manager/model/TraitFactory.js");t.default=i.a.Collection.extend({model:s.default,initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.em=t.em||"",this.listenTo(this,"add",this.handleAdd),this.listenTo(this,"reset",this.handleReset)},handleReset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.previousModels,r=void 0===n?[]:n;r.forEach((function(e){return e.trigger("remove")}))},handleAdd:function(e){var t=this.target;t&&(e.target=t)},setTarget:function(e){this.target=e},add:function(e,t){var n=this.em;if(Object(o.isString)(e)||Object(o.isArray)(e)){var r=n&&n.get&&n.get("TraitManager"),s=r&&r.getConfig(),l=Object(a.default)(s);Object(o.isString)(e)&&(e=[e]);for(var c=0,u=e.length;c<u;c++){var d=e[c],h=Object(o.isString)(d)?l.build(d)[0]:d;h.target=this.target,e[c]=h}}return i.a.Collection.prototype.add.apply(this,[e,t])}})},"./src/trait_manager/view/TraitButtonView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./src/trait_manager/view/TraitView.js");t.default=i.default.extend({events:{"click button":"handleClick"},templateInput:"",handleClick:function(){var e=this.model,t=this.em,n=e.get("command");n&&(Object(r.isString)(n)?t.get("Commands").run(n):n(t.get("Editor"),e))},renderLabel:function(){this.model.get("label")&&i.default.prototype.renderLabel.apply(this,arguments)},getInputEl:function(){var e=this.ppfx,t=this.model.props(),n=t.full,r=t.labelButton||t.text,i="".concat(e,"btn");return'<button type="button" class="'.concat(i,"-prim").concat(n?" ".concat(i,"--full"):"",'">').concat(r,"</button>")}})},"./src/trait_manager/view/TraitCheckboxView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js"),i=n("./src/trait_manager/view/TraitView.js");t.default=i.default.extend({appendInput:0,templateInput:function(){var e=this.ppfx;return'<label class="'.concat(this.clsField,'" data-input>\n    <i class="').concat(e,'chk-icon"></i>\n  </label>')},onChange:function(){var e=this.getInputElem().checked;this.model.set("value",this.getCheckedValue(e))},getCheckedValue:function(e){var t=e,n=this.model.attributes,i=n.valueTrue,o=n.valueFalse;return t&&!Object(r.isUndefined)(i)&&(t=i),t||Object(r.isUndefined)(o)||(t=o),t},getInputEl:function(){for(var e=!this.$input,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var s=i.default.prototype.getInputEl.apply(this,n);if(e){var a,l,c=this.model,u=this.target,d=c.attributes,h=d.valueFalse,f=c.get("name");c.get("changeProp")?l=a=u.get(f):a=!(!(l=u.get("attributes")[f])&&""!==l),Object(r.isUndefined)(h)||l!==h||(a=!1),s.checked=a}return s}})},"./src/trait_manager/view/TraitColorView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/trait_manager/view/TraitView.js"),i=n("./src/domain_abstract/ui/InputColor.js");t.default=r.default.extend({templateInput:"",getInputEl:function(){if(!this.input){var e=this.model,t=this.getModelValue(),n=new i.default({model:e,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();n.setValue(t,{fromTarget:1}),this.input=n.el}return this.input}})},"./src/trait_manager/view/TraitNumberView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/trait_manager/view/TraitView.js"),i=n("./node_modules/underscore/modules/index-all.js"),o=n("./src/domain_abstract/ui/InputNumber.js");t.default=r.default.extend({getValueForTarget:function(){var e=this.model,t=e.attributes,n=t.value,r=t.unit;return Object(i.isUndefined)(n)||""===n?e.get("default"):n+r},getInputEl:function(){if(!this.input){var e=this.getModelValue(),t=new o.default({contClass:this.ppfx+"field-int",model:this.model,ppfx:this.ppfx});this.input=t.render(),this.$input=this.input.inputEl,this.$unit=this.input.unitEl,this.model.set("value",e,{fromTarget:1}),this.$input.val(e),this.input=t.el}return this.input}})},"./src/trait_manager/view/TraitSelectView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/backbone/backbone.js"),i=n.n(r),o=n("./node_modules/underscore/modules/index-all.js"),s=n("./src/trait_manager/view/TraitView.js"),a=i.a.$;t.default=s.default.extend({init:function(){this.listenTo(this.model,"change:options",this.rerender)},templateInput:function(){var e=this.ppfx;return'<div class="'.concat(this.clsField,'">\n      <div data-input></div>\n      <div class="').concat(e,'sel-arrow">\n        <div class="').concat(e,'d-s-arrow"></div>\n      </div>\n    </div>')},getInputEl:function(){if(!this.$input){var e=this.model,t=this.em,n=e.get("name"),r=e.get("options")||[],i=[],s="<select>";r.forEach((function(e){var r,a,l,c="";Object(o.isString)(e)?(r=e,a=e):(r=e.name||e.label||e.value,a="".concat(Object(o.isUndefined)(e.value)?e.id:e.value).replace(/"/g,"&quot;"),c+=(l=e.style?e.style.replace(/"/g,"&quot;"):"")?' style="'.concat(l,'"'):"");var u=t.t("traitManager.traits.options.".concat(n,".").concat(a))||r;s+='<option value="'.concat(a,'"').concat(c,">").concat(u,"</option>"),i.push(a)})),this.$input=a(s+="</select>");var l=e.getTargetValue(),c=i.indexOf(l)>=0?l:e.get("default");!Object(o.isUndefined)(c)&&this.$input.val(c)}return this.$input.get(0)}})},"./src/trait_manager/view/TraitView.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(o),a=n("./node_modules/backbone/backbone.js"),l=n.n(a),c=n("./node_modules/underscore/modules/index-all.js"),u=n("./src/utils/mixins.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=l.a.$;t.default=l.a.View.extend({events:{},eventCapture:["change"],appendInput:1,attributes:function(){return this.model.get("attributes")},templateLabel:function(){var e=this.ppfx,t=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(t,'">').concat(t,"</div>")},templateInput:function(){return'<div class="'.concat(this.clsField,'" data-input></div>')},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.config,r=void 0===n?{}:n,i=this.model,o=this.eventCapture,a=i.target,l=i.attributes.type;this.config=r,this.em=r.em,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.target=a;var c=this.ppfx;this.clsField="".concat(c,"field ").concat(c,"field-").concat(l),[["change:value",this.onValueChange],["remove",this.removeView]].forEach((function(t){var n=s()(t,2),r=n[0],o=n[1];i.off(r,o),e.listenTo(i,r,o)})),i.view=this,this.listenTo(i,"change:label",this.render),this.listenTo(i,"change:placeholder",this.rerender),o.forEach((function(t){return e.events[t]="onChange"})),this.delegateEvents(),this.init()},getClbOpts:function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},removeView:function(){this.remove(),this.removed()},init:function(){},removed:function(){},onRender:function(){},onUpdate:function(){},onEvent:function(){},onChange:function(e){var t=this.getInputElem();t&&!Object(c.isUndefined)(t.value)&&this.model.set("value",t.value),this.onEvent(h(h({},this.getClbOpts()),{},{event:e}))},getValueForTarget:function(){return this.model.get("value")},setInputValue:function(e){var t=this.getInputElem();t&&(t.value=e)},onValueChange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.fromTarget)this.setInputValue(e.get("value")),this.postUpdate();else{var r=this.getValueForTarget();e.setTargetValue(r,n)}},renderLabel:function(){var e=this.$el,t=this.target,n=this.getLabel(),r=this.templateLabel(t);this.createLabel&&(r=this.createLabel({label:n,component:t,trait:this})||""),e.find("[data-label]").append(r)},getLabel:function(){var e=this.model.attributes,t=e.label,n=e.name;return this.em.t("traitManager.traits.labels.".concat(n))||Object(u.capitalize)(t||n).replace(/-/g," ")},getComponent:function(){return this.target},getInputEl:function(){if(!this.$input){var e=this.em,t=this.model,n=t,r=t.attributes.name,i=n.get("placeholder")||n.get("default")||"",o=n.get("type")||"text",s=n.get("min"),a=n.get("max"),l=this.getModelValue(),u=f('<input type="'.concat(o,'" placeholder="').concat(i,'">')),d=e.t("traitManager.traits.attributes.".concat(r))||{};u.attr(d),Object(c.isUndefined)(l)||(n.set({value:l},{silent:!0}),u.prop("value",l)),s&&u.prop("min",s),a&&u.prop("max",a),this.$input=u}return this.$input.get(0)},getInputElem:function(){var e=this.$input;return this.input||e&&e.get&&e.get(0)||this.getElInput()},getModelValue:function(){var e,t=this.model,n=this.target,r=t.get("name");if(t.get("changeProp"))e=n.get(r);else{var i=n.get("attributes");e=t.get("value")||i[r]}return Object(c.isUndefined)(e)?"":e},getElInput:function(){return this.elInput},renderField:function(){var e=this.appendInput,t=this.model,n=this.$el.find("[data-input]"),r=n[n.length-1],i=t.el;i||(i=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),Object(c.isString)(i)?(r.innerHTML=i,this.elInput=r.firstChild):(e?r.appendChild(i):r.insertBefore(i,r.firstChild),this.elInput=i),t.el=this.elInput},hasLabel:function(){return!this.noLabel&&!1!==this.model.attributes.label},rerender:function(){this.model.el=null,this.render()},postUpdate:function(){this.onUpdate(this.getClbOpts())},render:function(){var e=this.$el,t=this.pfx,n=this.ppfx,r=this.model.attributes,i=r.type,o=r.id,s=this.hasLabel&&this.hasLabel(),a="".concat(t,"trait");this.$input=null;var l='<div class="'.concat(a," ").concat(a,"--").concat(i,'">\n      ').concat(s?'<div class="'.concat(n,'label-wrp" data-label></div>'):"",'\n      <div class="').concat(n,"field-wrp ").concat(n,"field-wrp--").concat(i,'" data-input>\n        ').concat(this.templateInput?Object(c.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"","\n      </div>\n    </div>");return e.empty().append(l),s&&this.renderLabel(),this.renderField(),this.el.className="".concat(a,"__wrp ").concat(a,"__wrp-").concat(o),this.postUpdate(),this.onRender(this.getClbOpts()),this}})},"./src/trait_manager/view/TraitsView.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/domain_abstract/view/DomainViews.js"),i=n("./src/trait_manager/view/TraitView.js"),o=n("./src/trait_manager/view/TraitSelectView.js"),s=n("./src/trait_manager/view/TraitCheckboxView.js"),a=n("./src/trait_manager/view/TraitNumberView.js"),l=n("./src/trait_manager/view/TraitColorView.js"),c=n("./src/trait_manager/view/TraitButtonView.js");t.default=r.default.extend({ns:"Traits",itemView:i.default,reuseView:1,itemsView:{text:i.default,number:a.default,select:o.default,checkbox:s.default,color:l.default,button:c.default},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.config||{};this.config=t,this.em=e.editor,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.className=this.pfx+"traits";var n="component:toggled";this.listenTo(this.em,n,this.updatedCollection),this.updatedCollection()},updatedCollection:function(){var e=this.ppfx,t=this.em.getSelected();this.el.className="".concat(this.className," ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=t?t.get("traits"):[],this.render()}})},"./src/undo_manager/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone-undo/Backbone.Undo.js"),s=n.n(o);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r,i={maximumStackLength:500};return{name:"UndoManager",init:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=l(l({},o),i),this.em=e=n.em,(t=new s.a(l({track:!0,register:[]},n))).changeUndoType("change",{condition:!1}),t.changeUndoType("add",{on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n.avoidStore)return{object:t,before:void 0,after:e,options:l({},n)}}}),t.changeUndoType("remove",{on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n.avoidStore)return{object:t,before:e,after:void 0,options:l({},n)}}});var a={on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!r&&(r=e.previousAttributes()),!n.avoidStore){var i={object:e,before:r,after:e.toJSON()};return r=null,i}},undo:function(e,t,n,r){e.set(t)},redo:function(e,t,n,r){e.set(n)}},c=["style","attributes","content","src"];return c.forEach((function(e){return t.addUndoType("change:".concat(e),a)})),t.on("undo redo",(function(){return e.trigger("component:toggled change:canvasOffset")})),["undo","redo"].forEach((function(n){return t.on(n,(function(){return e.trigger(n)}))})),this},getConfig:function(){return n},add:function(e){return t.register(e),this},remove:function(e){return t.unregister(e),this},removeAll:function(){return t.unregisterAll(),this},start:function(){return t.startTracking(),this},stop:function(){return t.stopTracking(),this},undo:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!e.isEditing()&&t.undo(n),this},undoAll:function(){return t.undoAll(),this},redo:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!e.isEditing()&&t.redo(n),this},redoAll:function(){return t.redoAll(),this},hasUndo:function(){return t.isAvailable("undo")},hasRedo:function(){return t.isAvailable("redo")},getStack:function(){return t.stack},getStackGroup:function(){var e=[],t=[];return this.getStack().forEach((function(n){var r=n.get("magicFusionIndex");t.indexOf(r)<0&&(t.push(r),e.push(n))})),e},getPointer:function(){return this.getStack().pointer},clear:function(){return t.clear(),this},getInstance:function(){return t}}}},"./src/utils/ColorPicker.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/typeof.js"),i=n.n(r);t.default=function(e,t){var n={beforeShow:d,move:d,change:d,show:d,hide:d,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},r=[],o=!!/msie/i.exec(window.navigator.userAgent),s=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div").style;return t.cssText="background-color:rgba(0,0,0,.5)",e(t.backgroundColor,"rgba")||e(t.backgroundColor,"hsla")}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),l=function(){var e="";if(o)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function c(t,n,r,i){for(var o=[],a=0;a<t.length;a++){var l=t[a];if(l){var c=S(l),u=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=S.equals(n,l)?" sp-thumb-active":"";var d=c.toString(i.preferredFormat||"rgb"),h=s?"background-color:"+c.toRgbString():"filter:"+c.toFilter();o.push('<span title="'+d+'" data-color="'+c.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+h+';"></span></span>')}else o.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",i.noColorSelectedText)).html())}return"<div class='sp-cf "+r+"'>"+o.join("")+"</div>"}function u(i,u){var d,m,v=function(t,r){var i=e.extend({},n,t);return i.callbacks={move:f(i.move,r),change:f(i.change,r),show:f(i.show,r),hide:f(i.hide,r),beforeShow:f(i.beforeShow,r)},i}(u,i),b=v.flat,y=v.showSelectionPalette,w=v.localStorageKey,x=v.theme,O=v.callbacks,C=(d=He,function(){var e=this,t=arguments,n=function(){m=null,d.apply(e,t)};m||(m=setTimeout(n,10))}),_=!1,j=!1,k=0,T=0,E=0,P=0,A=0,M=0,D=0,I=0,L=0,N=0,R=1,F=[],V=[],z={},B=v.selectionPalette.slice(0),H=v.maxSelectionSize,U="sp-dragging",$=null,W=i.ownerDocument,q=e(i),G=!1,K=e(l,W).addClass(x),Y=K.find(".sp-picker-container"),Z=K.find(".sp-color"),X=K.find(".sp-dragger"),J=K.find(".sp-hue"),Q=K.find(".sp-slider"),ee=K.find(".sp-alpha-inner"),te=K.find(".sp-alpha"),ne=K.find(".sp-alpha-handle"),re=K.find(".sp-input"),ie=K.find(".sp-palette"),oe=K.find(".sp-initial"),se=K.find(".sp-cancel"),ae=K.find(".sp-clear"),le=K.find(".sp-choose"),ce=K.find(".sp-palette-toggle"),ue=q.is("input"),de=ue&&"color"===q.attr("type")&&g(),he=ue&&!b,fe=he?e(a).addClass(x).addClass(v.className).addClass(v.replacerClassName):e([]),pe=he?fe:q,ge=fe.find(".sp-preview-inner"),me=v.color||ue&&q.val(),ve=!1,be=v.preferredFormat,ye=!v.showButtons||v.clickoutFiresChange,we=!me,xe=v.allowEmpty&&!de;function Oe(){if(v.showPaletteOnly&&(v.showPalette=!0),ce.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),v.palette){F=v.palette.slice(0),V=e.isArray(F[0])?F:[F],z={};for(var t=0;t<V.length;t++)for(var n=0;n<V[t].length;n++){var r=S(V[t][n]).toRgbString();z[r]=!0}}K.toggleClass("sp-flat",b),K.toggleClass("sp-input-disabled",!v.showInput),K.toggleClass("sp-alpha-enabled",v.showAlpha),K.toggleClass("sp-clear-enabled",xe),K.toggleClass("sp-buttons-disabled",!v.showButtons),K.toggleClass("sp-palette-buttons-disabled",!v.togglePaletteOnly),K.toggleClass("sp-palette-disabled",!v.showPalette),K.toggleClass("sp-palette-only",v.showPaletteOnly),K.toggleClass("sp-initial-disabled",!v.showInitial),K.addClass(v.className).addClass(v.containerClassName),He()}function Ce(){if(w&&window.localStorage){try{var t=window.localStorage[w].split(",#");t.length>1&&(delete window.localStorage[w],e.each(t,(function(e,t){_e(t)})))}catch(n){}try{B=window.localStorage[w].split(";")}catch(n){}}}function _e(t){if(y){var n=S(t).toRgbString();if(!z[n]&&-1===e.inArray(n,B))for(B.push(n);B.length>H;)B.shift();if(w&&window.localStorage)try{window.localStorage[w]=B.join(";")}catch(r){}}}function Se(){var t=Re(),n=e.map(V,(function(e,n){return c(e,t,"sp-palette-row sp-palette-row-"+n,v)}));Ce(),B&&n.push(c(function(){var e=[];if(v.showPalette)for(var t=0;t<B.length;t++){var n=S(B[t]).toRgbString();z[n]||e.push(B[t])}return e.reverse().slice(0,v.maxSelectionSize)}(),t,"sp-palette-row sp-palette-row-selection",v)),ie.html(n.join(""))}function je(){if(v.showInitial){var e=ve,t=Re();oe.html(c([e,t],t,"sp-palette-row-initial",v))}}function ke(){(T<=0||k<=0||P<=0)&&He(),j=!0,K.addClass(U),$=null,q.trigger("dragstart.spectrum",[Re()])}function Te(){j=!1,K.removeClass(U),q.trigger("dragstop.spectrum",[Re()])}function Ee(){var e=re.val();if(null!==e&&""!==e||!xe){var t=S(e);t.isValid()?(Ne(t),Be(!0)):re.addClass("sp-validation-error")}else Ne(null),Be(!0)}function Pe(){_?Ie():Ae()}function Ae(){var t=e.Event("beforeShow.spectrum");if(_)He();else if(q.trigger("beforeShow.spectrum",[Re()]),!1!==O.beforeShow(Re())&&!t.isDefaultPrevented()){!function(){for(var e=0;e<r.length;e++)r[e]&&r[e].hide()}(),_=!0;var n=e(W);n.bind("keydown.spectrum",Me),n.bind("click.spectrum",De),e(window).bind("resize.spectrum",C),fe.addClass("sp-active"),K.removeClass("sp-hidden"),He(),Ve(),ve=Re(),je(),O.show(ve),q.trigger("show.spectrum",[ve])}}function Me(e){27===e.keyCode&&Ie()}function De(e){2!=e.button&&(j||(ye?Be(!0):Le(),Ie()))}function Ie(){_&&!b&&(_=!1,e(W).unbind("keydown.spectrum",Me),e(W).unbind("click.spectrum",De),e(window).unbind("resize.spectrum",C),fe.removeClass("sp-active"),K.addClass("sp-hidden"),O.hide(Re()),q.trigger("hide.spectrum",[Re()]))}function Le(){Ne(ve,!0)}function Ne(e,t){var n,r;S.equals(e,Re())?Ve():(!e&&xe?we=!0:(we=!1,r=(n=S(e)).toHsv(),I=r.h%360/360,L=r.s,N=r.v,R=r.a),Ve(),n&&n.isValid()&&!t&&(be=v.preferredFormat||n.getFormat()))}function Re(e){return e=e||{},xe&&we?null:S.fromRatio({h:I,s:L,v:N,a:Math.round(100*R)/100},{format:e.format||be})}function Fe(){Ve(),O.move(Re()),q.trigger("move.spectrum",[Re()])}function Ve(){re.removeClass("sp-validation-error"),ze();var e=S.fromRatio({h:I,s:1,v:1});Z.css("background-color",e.toHexString());var t=be;R<1&&(0!==R||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var n=Re({format:t}),r="";if(ge.removeClass("sp-clear-display"),ge.css("background-color","transparent"),!n&&xe)ge.addClass("sp-clear-display");else{var i=n.toHexString(),a=n.toRgbString();if(s||1===n.alpha?ge.css("background-color",a):(ge.css("background-color","transparent"),ge.css("filter",n.toFilter())),v.showAlpha){var l=n.toRgb();l.a=0;var c=S(l).toRgbString(),u="linear-gradient(left, "+c+", "+i+")";o?ee.css("filter",S(c).toFilter({gradientType:1},i)):(ee.css("background","-webkit-"+u),ee.css("background","-moz-"+u),ee.css("background","-ms-"+u),ee.css("background","linear-gradient(to right, "+c+", "+i+")"))}r=n.toString(t)}v.showInput&&re.val(r),v.showPalette&&Se(),je()}function ze(){var e=L,t=N;if(xe&&we)ne.hide(),Q.hide(),X.hide();else{ne.show(),Q.show(),X.show();var n=e*k,r=T-t*T;n=Math.max(-E,Math.min(k-E,n-E)),r=Math.max(-E,Math.min(T-E,r-E)),X.css({top:r+"px",left:n+"px"}),ne.css({left:R*A-M/2+"px"}),Q.css({top:I*P-D+"px"})}}function Be(e){var t=Re(),n="",r=!S.equals(t,ve);t&&(n=t.toString(be),_e(t)),ue&&q.val(n),e&&r&&(O.change(t),q.trigger("change",[t]))}function He(){_&&(k=Z.width(),T=Z.height(),E=X.height(),J.width(),P=J.height(),D=Q.height(),A=te.width(),M=ne.width(),b||(K.css("position","absolute"),K.offset(v.offset?v.offset:function(t,n){var r=t.outerWidth(),i=t.outerHeight(),o=n.outerHeight(),s=t[0].ownerDocument,a=s.documentElement,l=a.clientHeight,c=a.clientWidth+e(s).scrollLeft(),u=l+e(s).scrollTop(),d=n.offset();return d.top+=o,d.left-=Math.min(d.left,d.left+r>c&&c>r?Math.abs(d.left+r-c):0),d.top-=Math.min(d.top,d.top+i>u&&u>i?Math.abs(i+o-0):0),d}(K,pe))),ze(),v.showPalette&&Se(),q.trigger("reflow.spectrum"))}function Ue(){Ie(),G=!0,q.attr("disabled",!0),pe.addClass("sp-disabled")}!function(){if(o&&K.find("*:not(input)").attr("unselectable","on"),Oe(),he&&q.after(fe).hide(),xe||ae.hide(),b)q.after(K).hide();else{var t="parent"===v.appendTo?q.parent():e(v.appendTo);1!==t.length&&(t=e("body")),t.append(K)}function n(t){return t.data&&t.data.ignore?(Ne(e(t.target).closest(".sp-thumb-el").data("color")),Fe()):(Ne(e(t.target).closest(".sp-thumb-el").data("color")),Fe(),Be(!0),v.hideAfterPaletteSelect&&Ie()),!1}Ce(),pe.bind("click.spectrum touchstart.spectrum",(function(t){G||Pe(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()})),(q.is(":disabled")||!0===v.disabled)&&Ue(),K.click(h),re.change(Ee),re.bind("paste",(function(){setTimeout(Ee,1)})),re.keydown((function(e){13==e.keyCode&&Ee()})),se.text(v.cancelText),se.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),Le(),Ie()})),ae.attr("title",v.clearText),ae.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),we=!0,Fe(),b&&Be(!0)})),le.text(v.chooseText),le.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),o&&re.is(":focus")&&re.trigger("change"),re.hasClass("sp-validation-error")||(Be(!0),Ie())})),ce.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),ce.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),v.showPaletteOnly=!v.showPaletteOnly,v.showPaletteOnly||b||K.css("left","-="+(Y.outerWidth(!0)+5)),Oe()})),p(te,(function(e,t,n){R=e/A,we=!1,n.shiftKey&&(R=Math.round(10*R)/10),Fe()}),ke,Te),p(J,(function(e,t){I=parseFloat(t/P),we=!1,v.showAlpha||(R=1),Fe()}),ke,Te),p(Z,(function(e,t,n){if(n.shiftKey){if(!$){var r=T-N*T,i=Math.abs(e-L*k)>Math.abs(t-r);$=i?"x":"y"}}else $=null;var o=!$||"y"===$;(!$||"x"===$)&&(L=parseFloat(e/k)),o&&(N=parseFloat((T-t)/T)),we=!1,v.showAlpha||(R=1),Fe()}),ke,Te),me?(Ne(me),Ve(),be=v.preferredFormat||S(me).format,_e(me)):Ve(),b&&Ae();var r=o?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ie.delegate(".sp-thumb-el",r,n),oe.delegate(".sp-thumb-el:nth-child(1)",r,{ignore:!0},n)}();var $e={show:Ae,hide:Ie,toggle:Pe,reflow:He,option:function(n,r){return n===t?e.extend({},v):r===t?v[n]:(v[n]=r,"preferredFormat"===n&&(be=v.preferredFormat),void Oe())},enable:function(){G=!1,q.attr("disabled",!1),pe.removeClass("sp-disabled")},disable:Ue,offset:function(e){v.offset=e,He()},set:function(e){Ne(e),Be()},get:Re,destroy:function(){q.show(),pe.unbind("click.spectrum touchstart.spectrum"),K.remove(),fe.remove(),r[$e.id]=null},container:K};return $e.id=r.push($e)-1,$e}function d(){}function h(e){e.stopPropagation()}function f(e,t){var n=Array.prototype.slice,r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}function p(t,n,r,i){n=n||function(){},r=r||function(){},i=i||function(){};var s=document,a=!1,l={},c=0,u=0,d="ontouchstart"in window,h={};function f(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function p(e){if(a){if(o&&s.documentMode<9&&!e.button)return g();var r=e&&e.touches&&e.touches[0],i=r&&r.pageY||e.pageY,h=Math.max(0,Math.min((r&&r.pageX||e.pageX)-l.left,u)),p=Math.max(0,Math.min(i-l.top,c));d&&f(e),n.apply(t,[h,p,e])}}function g(){a&&(e(s).unbind(h),e(s.body).removeClass("sp-dragging"),setTimeout((function(){i.apply(t,arguments)}),0)),a=!1}h.selectstart=f,h.dragstart=f,h["touchmove mousemove"]=p,h["touchend mouseup"]=g,e(t).bind("touchstart mousedown",(function(n){var i=n.which?3==n.which:2==n.button;i||a||!1!==r.apply(t,arguments)&&(a=!0,c=e(t).height(),u=e(t).width(),l=e(t).offset(),e(s).bind(h),e(s.body).addClass("sp-dragging"),p(n),f(n))}))}function g(){return e.fn.spectrum.inputTypeColorSupport()}var m="spectrum.id";e.fn.spectrum=function(t,n){if("string"==typeof t){var i=this,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=r[e(this).data(m)];if(n){var s=n[t];if(!s)throw new Error("Spectrum: no such method: '"+t+"'");"get"==t?i=n.get():"container"==t?i=n.container:"option"==t?i=n.option.apply(n,o):"destroy"==t?(n.destroy(),e(this).removeData(m)):s.apply(n,o)}})),i}return this.spectrum("destroy").each((function(){var n=u(this,e.extend({},t,e(this).data()));e(this).data(m,n.id)}))},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=p,e.fn.spectrum.defaults=n,e.fn.spectrum.inputTypeColorSupport=function t(){if(void 0===t._cachedResult){var n=e("<input type='color'/>")[0];t._cachedResult="color"===n.type&&""!==n.value}return t._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!g()&&t.spectrum({preferredFormat:"hex6"})};var v=/^[\s,#]+/,b=/\s+$/,y=0,w=Math,x=w.round,O=w.min,C=w.max,_=w.random,S=function e(t,n){if(n=n||{},(t=t||"")instanceof e)return t;if(!(this instanceof e))return new e(t,n);var r=function(e){var t,n,r={r:0,g:0,b:0},o=1,s=!1,a=!1;return"string"==typeof e&&(e=function(e){e=e.replace(v,"").replace(b,"").toLowerCase();var t,n,r=!1;if(U[e])e=U[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=ee.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=ee.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=ee.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=ee.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=ee.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=ee.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=ee.hex8.exec(e))?{a:(n=t[1],K(n)/255),r:K(t[2]),g:K(t[3]),b:K(t[4]),format:r?"name":"hex8"}:(t=ee.hex6.exec(e))?{r:K(t[1]),g:K(t[2]),b:K(t[3]),format:r?"name":"hex"}:!!(t=ee.hex3.exec(e))&&{r:K(t[1]+""+t[1]),g:K(t[2]+""+t[2]),b:K(t[3]+""+t[3]),format:r?"name":"hex"}}(e)),"object"==i()(e)&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=e.g,n=e.b,r={r:255*q(e.r,255),g:255*q(t,255),b:255*q(n,255)},s=!0,a="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=Z(e.s),e.v=Z(e.v),r=function(e,t,n){e=6*q(e,360),t=q(t,100),n=q(n,100);var r=w.floor(e),i=e-r,o=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=r%6;return{r:255*[n,s,o,o,a,n][l],g:255*[a,n,n,s,o,o][l],b:255*[o,o,a,n,n,s][l]}}(e.h,e.s,e.v),s=!0,a="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=Z(e.s),e.l=Z(e.l),r=function(e,t,n){var r,i,o;function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=q(e,360),t=q(t,100),n=q(n,100),0===t)r=i=o=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=s(l,a,e+1/3),i=s(l,a,e),o=s(l,a,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,e.s,e.l),s=!0,a="hsl"),e.hasOwnProperty("a")&&(o=e.a)),o=W(o),{ok:s,format:e.format||a,r:O(255,C(r.r,0)),g:O(255,C(r.g,0)),b:O(255,C(r.b,0)),a:o}}(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=x(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=x(this._r)),this._g<1&&(this._g=x(this._g)),this._b<1&&(this._b=x(this._b)),this._ok=r.ok,this._tc_id=y++};function j(e,t,n){e=q(e,255),t=q(t,255),n=q(n,255);var r,i,o=C(e,t,n),s=O(e,t,n),a=(o+s)/2;if(o==s)r=i=0;else{var l=o-s;switch(i=a>.5?l/(2-o-s):l/(o+s),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:a}}function k(e,t,n){e=q(e,255),t=q(t,255),n=q(n,255);var r,i,o=C(e,t,n),s=O(e,t,n),a=o,l=o-s;if(i=0===o?0:l/o,o==s)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:a}}function T(e,t,n,r){var i=[Y(x(e).toString(16)),Y(x(t).toString(16)),Y(x(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function E(e,t,n,r){var i;return[Y((i=r,Math.round(255*parseFloat(i)).toString(16))),Y(x(e).toString(16)),Y(x(t).toString(16)),Y(x(n).toString(16))].join("")}function P(e,t){t=0===t?0:t||10;var n=S(e).toHsl();return n.s-=t/100,n.s=G(n.s),S(n)}function A(e,t){t=0===t?0:t||10;var n=S(e).toHsl();return n.s+=t/100,n.s=G(n.s),S(n)}function M(e){return S(e).desaturate(100)}function D(e,t){t=0===t?0:t||10;var n=S(e).toHsl();return n.l+=t/100,n.l=G(n.l),S(n)}function I(e,t){t=0===t?0:t||10;var n=S(e).toRgb();return n.r=C(0,O(255,n.r-x(-t/100*255))),n.g=C(0,O(255,n.g-x(-t/100*255))),n.b=C(0,O(255,n.b-x(-t/100*255))),S(n)}function L(e,t){t=0===t?0:t||10;var n=S(e).toHsl();return n.l-=t/100,n.l=G(n.l),S(n)}function N(e,t){var n=S(e).toHsl(),r=(x(n.h)+t)%360;return n.h=r<0?360+r:r,S(n)}function R(e){var t=S(e).toHsl();return t.h=(t.h+180)%360,S(t)}function F(e){var t=S(e).toHsl(),n=t.h;return[S(e),S({h:(n+120)%360,s:t.s,l:t.l}),S({h:(n+240)%360,s:t.s,l:t.l})]}function V(e){var t=S(e).toHsl(),n=t.h;return[S(e),S({h:(n+90)%360,s:t.s,l:t.l}),S({h:(n+180)%360,s:t.s,l:t.l}),S({h:(n+270)%360,s:t.s,l:t.l})]}function z(e){var t=S(e).toHsl(),n=t.h;return[S(e),S({h:(n+72)%360,s:t.s,l:t.l}),S({h:(n+216)%360,s:t.s,l:t.l})]}function B(e,t,n){t=t||6,n=n||30;var r=S(e).toHsl(),i=360/n,o=[S(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(S(r));return o}function H(e,t){t=t||6;for(var n=S(e).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/t;t--;)s.push(S({h:r,s:i,v:o})),o=(o+a)%1;return s}S.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=W(e),this._roundA=x(100*this._a)/100,this},toHsv:function(){var e=k(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=k(this._r,this._g,this._b),t=x(360*e.h),n=x(100*e.s),r=x(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=j(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=j(this._r,this._g,this._b),t=x(360*e.h),n=x(100*e.s),r=x(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return T(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return E(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:x(this._r),g:x(this._g),b:x(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+x(this._r)+", "+x(this._g)+", "+x(this._b)+")":"rgba("+x(this._r)+", "+x(this._g)+", "+x(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:x(100*q(this._r,255))+"%",g:x(100*q(this._g,255))+"%",b:x(100*q(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+x(100*q(this._r,255))+"%, "+x(100*q(this._g,255))+"%, "+x(100*q(this._b,255))+"%)":"rgba("+x(100*q(this._r,255))+"%, "+x(100*q(this._g,255))+"%, "+x(100*q(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&($[T(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+E(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";return e&&(n=S(e).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1;return t||!(this._a<1&&this._a>=0)||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(D,arguments)},brighten:function(){return this._applyModification(I,arguments)},darken:function(){return this._applyModification(L,arguments)},desaturate:function(){return this._applyModification(P,arguments)},saturate:function(){return this._applyModification(A,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(N,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(B,arguments)},complement:function(){return this._applyCombination(R,arguments)},monochromatic:function(){return this._applyCombination(H,arguments)},splitcomplement:function(){return this._applyCombination(z,arguments)},triad:function(){return this._applyCombination(F,arguments)},tetrad:function(){return this._applyCombination(V,arguments)}},S.fromRatio=function(e,t){if("object"==i()(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:Z(e[r]));e=n}return S(e,t)},S.equals=function(e,t){return!(!e||!t)&&S(e).toRgbString()==S(t).toRgbString()},S.random=function(){return S.fromRatio({r:_(),g:_(),b:_()})},S.mix=function(e,t,n){n=0===n?0:n||50;var r,i=S(e).toRgb(),o=S(t).toRgb(),s=n/100,a=2*s-1,l=o.a-i.a,c=1-(r=((r=a*l==-1?a:(a+l)/(1+a*l))+1)/2);return S({r:o.r*r+i.r*c,g:o.g*r+i.g*c,b:o.b*r+i.b*c,a:o.a*s+i.a*(1-s)})},S.readability=function(e,t){var n=S(e),r=S(t),i=n.toRgb(),o=r.toRgb(),s=n.getBrightness(),a=r.getBrightness(),l=Math.max(i.r,o.r)-Math.min(i.r,o.r)+Math.max(i.g,o.g)-Math.min(i.g,o.g)+Math.max(i.b,o.b)-Math.min(i.b,o.b);return{brightness:Math.abs(s-a),color:l}},S.isReadable=function(e,t){var n=S.readability(e,t);return n.brightness>125&&n.color>500},S.mostReadable=function(e,t){for(var n=null,r=0,i=!1,o=0;o<t.length;o++){var s=S.readability(e,t[o]),a=s.brightness>125&&s.color>500,l=s.brightness/125*3+s.color/500;(a&&!i||a&&i&&l>r||!a&&!i&&l>r)&&(i=a,r=l,n=S(t[o]))}return n};var U=S.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},$=S.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(U);function W(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function q(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=O(t,C(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),w.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function G(e){return O(1,C(0,e))}function K(e){return parseInt(e,16)}function Y(e){return 1==e.length?"0"+e:""+e}function Z(e){return e<=1&&(e=100*e+"%"),e}var X,J,Q,ee=(J="[\\s|\\(]+("+(X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",Q="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",{rgb:new RegExp("rgb"+J),rgba:new RegExp("rgba"+Q),hsl:new RegExp("hsl"+J),hsla:new RegExp("hsla"+Q),hsv:new RegExp("hsv"+J),hsva:new RegExp("hsva"+Q),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=S,e((function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()}))}},"./src/utils/Dragger.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(o),a=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(a),c=n("./node_modules/underscore/modules/index-all.js"),u=n("./src/utils/mixins.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s()(this,e),this.opts={container:null,onStart:null,onDrag:null,onEnd:null,setPosition:null,getPosition:null,guidesStatic:null,guidesTarget:null,snapOffset:5,doc:0,scale:1},Object(c.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(t),this.delta={x:0,y:0},this}return l()(e,[{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=h(h({},this.opts),e)}},{key:"toggleDrag",value:function(e){var t=this.getDocumentEl(),n=this.getContainerEl(),r=this.getWindowEl(),i=e?"on":"off",o={on:u.on,off:u.off};o[i](n,"mousemove dragover",this.drag),o[i](t,"mouseup dragend touchend",this.stop),o[i](t,"keydown",this.keyHandle),o[i](r,"scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=this.lastScroll,t=this.delta,n=this.getScrollInfo(),r={x:n.x-e.x,y:n.y-e.y};this.move(t.x+r.x,t.y+r.y),this.lastScrollDiff=r}},{key:"start",value:function(e){var t=this.opts,n=t.onStart;this.toggleDrag(1),this.startPointer=this.getPointerPos(e),this.guidesStatic=Object(c.result)(t,"guidesStatic")||[],this.guidesTarget=Object(c.result)(t,"guidesTarget")||[],Object(c.isFunction)(n)&&n(e,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(e)}},{key:"drag",value:function(e){var t=this,n=this.opts,r=this.lastScrollDiff,i=this.globScrollDiff,o=n.onDrag,s=this.startPointer,a=this.getPointerPos(e),l={x:i.x+r.x,y:i.y+r.y};this.globScrollDiff=l;var u={x:a.x-s.x+l.x,y:a.y-s.y+l.y};this.lastScrollDiff={x:0,y:0};var d=this.lockedAxis;"x"===(d=e.shiftKey?!d&&this.detectAxisLock(u.x,u.y):null)?u.x=s.x:"y"===d&&(u.y=s.y);var f=function(r){["x","y"].forEach((function(e){return r[e]=r[e]*Object(c.result)(n,"scale")})),t.delta=r,t.move(r.x,r.y),Object(c.isFunction)(o)&&o(e,t)},p=h({},u);if(this.currentPointer=a,this.lockedAxis=d,this.lastScroll=this.getScrollInfo(),f(u),this.guidesTarget.length){var g=this.snapGuides(p);(g.trgX||g.trgY)&&f(g.newDelta)}0===e.which&&this.stop(e)}},{key:"snapGuides",value:function(e){var t=this,n=e,r=this.trgX,i=this.trgY;return this.guidesTarget.forEach((function(n){n.x&&t.trgX||n.y&&t.trgY||(n.active=0,t.guidesStatic.forEach((function(o){if(!(n.y&&o.x||n.x&&o.y)){var s=n.y&&o.y,a=s?"y":"x",l=n[a],u=o[a],d=e[a],h=s?i:r;t.isPointIn(l,u)&&Object(c.isUndefined)(h)&&t.setGuideLock(n,d-(l-u))}})))})),r=this.trgX,i=this.trgY,["x","y"].forEach((function(r){var i=r.toUpperCase(),o=t["trg".concat(i)];o&&!t.isPointIn(e[r],o.lock)&&(t.setGuideLock(o,null),o=null),o&&!Object(c.isUndefined)(o.lock)&&(n[r]=o.lock)})),{newDelta:n,trgX:this.trgX,trgY:this.trgY}}},{key:"isPointIn",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.offset,i=r||this.opts.snapOffset;return e>=t&&e<=t+i||e<=t&&e>=t-i}},{key:"setGuideLock",value:function(e,t){var n=Object(c.isUndefined)(e.x)?"Y":"X",r="trg".concat(n);return null!==t?(e.active=1,e.lock=t,this[r]=e):(delete e.active,delete e.lock,delete this[r]),e}},{key:"stop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.delta,r=t.cancel,i=r?0:n.x,o=r?0:n.y;this.toggleDrag(),this.lockedAxis=null,this.move(i,o,1);var s=this.opts.onEnd;Object(c.isFunction)(s)&&s(e,this,{cancelled:r})}},{key:"keyHandle",value:function(e){Object(u.isEscKey)(e)&&this.stop(e,{cancel:1})}},{key:"move",value:function(e,t,n){var r=this.el,i=this.startPosition;if(i){var o=this.opts.setPosition,s=i.x+e,a=i.y+t;this.position={x:s,y:a,end:n},Object(c.isFunction)(o)&&o(this.position),r&&(r.style.left="".concat(s,"px"),r.style.top="".concat(a,"px"))}}},{key:"getContainerEl",value:function(){var e=this.opts.container;return e?[e]:this.getDocumentEl()}},{key:"getWindowEl",value:function(){return this.getContainerEl().map((function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow}))}},{key:"getDocumentEl",value:function(e){var t=this.opts.doc;if(e=e||this.el,!this.docs){var n=[document];e&&n.push(e.ownerDocument),t&&n.push(t),this.docs=n}return this.docs}},{key:"getPointerPos",value:function(e){var t=this.opts.getPointerPosition,n=Object(u.getPointerEvent)(e);return t?t(e):{x:n.clientX,y:n.clientY}}},{key:"getStartPosition",value:function(){var e=this.el,t=this.opts.getPosition,n={x:0,y:0};return Object(c.isFunction)(t)?n=t():e&&(n={x:parseFloat(e.style.left),y:parseFloat(e.style.top)}),n}},{key:"getScrollInfo",value:function(){var e=this.opts.doc,t=e&&e.body;return{y:t?t.scrollTop:0,x:t?t.scrollLeft:0}}},{key:"detectAxisLock",value:function(e,t){var n=e,r=t,i=Math.abs(n),o=Math.abs(r);return r>=i||r<=-i?"x":n>o||n<-o?"y":void 0}}]),e}()},"./src/utils/Droppable.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(o),a=n("./src/utils/mixins.js"),l=n("./node_modules/underscore/modules/index-all.js"),c=function(){function e(t,n){var r=this;i()(this,e),this.em=t;var o=n||t.get("Canvas").getFrames().map((function(e){return e.get("root").getEl()})),s=Array.isArray(o)?o:[o];return this.el=o,this.counter=0,Object(l.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),s.forEach((function(e){return r.toggleEffects(e,1)})),this}return s()(e,[{key:"toggleEffects",value:function(e,t){var n={on:a.on,off:a.off},r=t?"on":"off";n[r](e,"dragenter",this.handleDragEnter),n[r](e,"dragover",this.handleDragOver),n[r](e,"drop",this.handleDrop),n[r](e,"dragleave",this.handleDragLeave)}},{key:"endDrop",value:function(e,t){var n=this.em,r=this.dragStop;this.counter=0,this.over=0,r&&r(e),n.runDefault({preserveSelected:1}),n.trigger("canvas:dragend",t)}},{key:"handleDragLeave",value:function(e){this.updateCounter(-1,e)}},{key:"updateCounter",value:function(e,t){this.counter+=e,0===this.counter&&this.endDrop(1,t)}},{key:"handleDragEnter",value:function(e){var t=this,n=this.em,r=e.dataTransfer;if(this.updateCounter(1,e),!this.over){this.over=1;var i,o,s=n.get("Utils"),a=n.get("Canvas"),l=a.getBody(),c=n.get("dragContent")||"<br>";if(n.stopDefault(),n.inAbsoluteMode()){var u=n.get("DomComponents").getWrapper(),d=u.append({})[0],h=n.get("Commands").run("core:component-drag",{event:e,guidesInfo:1,center:1,target:d,onEnd:function(e,n,i){if(!i.cancelled){var o=u.append(c)[0],s=d.getStyle();o.addStyle({left:s.left,top:s.top,position:s.position}),t.handleDragEnd(o,r)}d.remove()}});i=function(t){return h.stop(e,{cancel:t})},o=function(e){return c=e}}else{var f=new s.Sorter({em:n,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:l,placer:a.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(e){return t.handleDragEnd(e,r)},document:a.getFrameEl().contentDocument});f.setDropContent(c),f.startSort(),this.sorter=f,i=function(e){e&&(f.moved=0),f.endMove()},o=function(e){return f.setDropContent(e)}}this.dragStop=i,this.dragContent=o,n.trigger("canvas:dragenter",r,c)}}},{key:"handleDragEnd",value:function(e,t){if(e){var n=this.em;n.set("dragResult",e),n.trigger("canvas:drop",t,e)}}},{key:"handleDragOver",value:function(e){e.preventDefault(),this.em.trigger("canvas:dragover",e)}},{key:"handleDrop",value:function(e){e.preventDefault();var t=this.dragContent,n=this.getContentByData(e.dataTransfer).content;e.target.style.border="",n&&t&&t(n),this.endDrop(!n,e)}},{key:"getContentByData",value:function(e){var t=this.em,n=e.types,r=e.files||[],i=t.get("dragContent"),o=e.getData("text");if(r.length){o=[];for(var s=0;s<r.length;s++){var a=r[s],c=a.type.split("/")[0];"image"==c&&o.push({type:c,file:a,attributes:{alt:a.name}})}}else if(i)o=i;else if(Object(l.indexOf)(n,"text/html")>=0)o=e.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if(Object(l.indexOf)(n,"text/uri-list")>=0)o={type:"link",attributes:{href:o},content:o};else if(Object(l.indexOf)(n,"text/json")>=0){var u=e.getData("text/json");u&&(o=JSON.parse(u))}var d={content:o};return t.trigger("canvas:dragdata",e,d),d}}]),e}()},"./src/utils/Resizer.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(o),a=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(a),c=n("./node_modules/underscore/modules/index-all.js"),u=n("./src/utils/mixins.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={mousePosFetcher:null,updateTarget:null,ratioDefault:0,posFetcher:null,onStart:null,onMove:null,onEnd:null,onUpdateContainer:function(){},step:1,minDim:32,maxDim:"",unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:1,silentFrames:0,avoidContainerUpdate:0,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:1,tc:1,tr:1,cl:1,cr:1,bl:1,bc:1,br:1},p=function(e,t){var n=t||window,r=e.getBoundingClientRect();return{left:r.left+n.pageXOffset,top:r.top+n.pageYOffset,width:r.width,height:r.height}},g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s()(this,e),this.setOptions(t),Object(c.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop"),this}return l()(e,[{key:"getConfig",value:function(){return this.opts}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object(c.defaults)(e,f),this.setup()}},{key:"setup",value:function(){var e=this.opts,t=e.prefix||"",n=e.appendTo||document.body,r=this.container;for(r||((r=document.createElement("div")).className="".concat(t,"resizer-c"),n.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var i={};for(var o in["tl","tc","tr","cl","cr","bl","bc","br"].forEach((function(t){return i[t]=e[t]?function(e,t){var n=t.prefix||"",r=document.createElement("i");return r.className=n+"resizer-h "+n+"resizer-h-"+e,r.setAttribute("data-"+n+"handler",e),r}(t,e):""})),i){var s=i[o];s&&r.appendChild(s)}this.handlers=i,this.mousePosFetcher=e.mousePosFetcher,this.updateTarget=e.updateTarget,this.posFetcher=e.posFetcher,this.onStart=e.onStart,this.onMove=e.onMove,this.onEnd=e.onEnd,this.onUpdateContainer=e.onUpdateContainer}},{key:"toggleFrames",value:function(e){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");Object(c.each)(t,(function(t){return t.style.pointerEvents=e?"none":""}))}}},{key:"isHandler",value:function(e){var t=this.handlers;for(var n in t)if(t[n]===e)return!0;return!1}},{key:"getFocusedEl",value:function(){return this.el}},{key:"getDocumentEl",value:function(){return[this.el.ownerDocument,document]}},{key:"getElementPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.posFetcher||"";return n?n(e,t):p(e)}},{key:"focus",value:function(e){e&&e===this.el||(this.el=e,this.updateContainer({forceShow:1}),Object(u.on)(this.getDocumentEl(),"mousedown",this.handleMouseDown))}},{key:"blur",value:function(){this.container.style.display="none",this.el&&(Object(u.off)(this.getDocumentEl(),"mousedown",this.handleMouseDown),this.el=null)}},{key:"start",value:function(e){if(0===e.button){e.preventDefault(),e.stopPropagation();var t=this.el,n=this.opts||{},r="data-"+n.prefix+"handler",i=this.getElementPos(t,{target:"el"});this.handlerAttr=e.target.getAttribute(r),this.clickedHandler=e.target,this.startDim={t:i.top,l:i.left,w:i.width,h:i.height},this.rectDim={t:i.top,l:i.left,w:i.width,h:i.height},this.startPos={x:e.clientX,y:e.clientY};var o=this.getDocumentEl();Object(u.on)(o,"mousemove",this.move),Object(u.on)(o,"keydown",this.handleKeyDown),Object(u.on)(o,"mouseup",this.stop),Object(c.isFunction)(this.onStart)&&this.onStart(e,{docs:o,config:n,el:t,resizer:this}),this.toggleFrames(1),this.move(e)}}},{key:"move",value:function(e){var t=this.onMove,n=this.mousePosFetcher,r=n?n(e):{x:e.clientX,y:e.clientY};this.currentPos=r,this.delta={x:r.x-this.startPos.x,y:r.y-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey},this.rectDim=this.calc(this),this.updateRect(0),t&&t(e),0===e.which&&this.stop(e)}},{key:"stop",value:function(e){var t=this.opts,n=this.getDocumentEl();Object(u.off)(n,"mousemove",this.move),Object(u.off)(n,"keydown",this.handleKeyDown),Object(u.off)(n,"mouseup",this.stop),this.updateRect(1),this.toggleFrames(),Object(c.isFunction)(this.onEnd)&&this.onEnd(e,{docs:n,config:t})}},{key:"updateRect",value:function(e){var t=this.el,n=this.opts,r=this.rectDim,i=this.updateTarget,o=this.getSelectedHandler(),s=n.unitHeight,a=n.unitWidth,l=n.keyWidth,u=n.keyHeight;if(Object(c.isFunction)(i))i(t,r,{store:e,selectedHandler:o,resizer:this,config:n});else{var d=t.style;d[l]=r.w+a,d[u]=r.h+s}this.updateContainer()}},{key:"updateContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.opts,n=this.container,r=this.el,i=n.style;!t.avoidContainerUpdate&&r&&e.forceShow&&(i.display="block"),this.onUpdateContainer({el:n,resizer:this,opts:h(h({},t),e)})}},{key:"getSelectedHandler",value:function(){var e=this.handlers;if(this.selectedHandler)for(var t in e)if(e[t]===this.selectedHandler)return t}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&(this.rectDim=this.startDim,this.stop(e))}},{key:"handleMouseDown",value:function(e){var t=e.target;this.isHandler(t)?(this.selectedHandler=t,this.start(e)):t!==this.el&&(this.selectedHandler="",this.blur())}},{key:"calc",value:function(e){var t,n=this.opts||{},r=n.step,i=this.startDim,o=n.minDim,s=n.maxDim,a=e.delta.x,l=e.delta.y,c=i.w,d=i.h,h={t:0,l:0,w:c,h:d};if(e){var f=e.handlerAttr;~f.indexOf("r")&&(t=Object(u.normalizeFloat)(c+a*r,r),t=Math.max(o,t),s&&(t=Math.min(s,t)),h.w=t),~f.indexOf("b")&&(t=Object(u.normalizeFloat)(d+l*r,r),t=Math.max(o,t),s&&(t=Math.min(s,t)),h.h=t),~f.indexOf("l")&&(t=Object(u.normalizeFloat)(c-a*r,r),t=Math.max(o,t),s&&(t=Math.min(s,t)),h.w=t),~f.indexOf("t")&&(t=Object(u.normalizeFloat)(d-l*r,r),t=Math.max(o,t),s&&(t=Math.min(s,t)),h.h=t);var p=n.ratioDefault?!e.keys.shift:e.keys.shift;if(f.indexOf("c")<0&&p){var g=i.w/i.h;h.w/h.h>g?h.h=Math.round(h.w/g):h.w=Math.round(h.h*g)}return~f.indexOf("l")&&(h.l=i.w-h.w),~f.indexOf("t")&&(h.t=i.h-h.h),h}}}]),e}();t.default={init:function(e){return new g(e)}}},"./src/utils/Sorter.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n("./node_modules/backbone/backbone.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=n("./src/utils/mixins.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=s.a.$;t.default=s.a.View.extend({initialize:function(e){this.opt=e||{},Object(a.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var t=e||{};this.elT=0,this.elL=0,this.borderOffset=t.borderOffset||10;var n=t.container;this.el="string"==typeof n?document.querySelector(n):n,this.$el=d(this.el),this.containerSel=t.containerSel||"div",this.itemSel=t.itemSel||"div",this.draggable=t.draggable||!0,this.nested=t.nested||0,this.pfx=t.pfx||"",this.ppfx=t.ppfx||"",this.freezeClass=t.freezeClass||this.pfx+"freezed",this.onStart=t.onStart||"",this.onEndMove=t.onEndMove||"",this.direction=t.direction||"v",this.onMoveClb=t.onMove||"",this.relative=t.relative||0,this.ignoreViewChildren=t.ignoreViewChildren||0,this.ignoreModels=t.ignoreModels||0,this.plh=t.placer||"",this.wmargin=t.wmargin||0,this.offTop=t.offsetTop||0,this.offLeft=t.offsetLeft||0,this.document=t.document||document,this.$document=d(this.document),this.dropContent=null,this.em=t.em||"",this.dragHelper=null,this.canvasRelative=t.canvasRelative||0,this.selectOnEnd=!t.avoidSelectOnEnd,this.scale=t.scale,this.activeTextModel=null,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},getScale:function(){return Object(a.result)(this,scale)||1},getContainerEl:function(e){if(e&&(this.el=e),!this.el){var t=this.opt.container;this.el="string"==typeof t?document.querySelector(t):t,this.$el=d(this.el)}return this.el},getDocuments:function(e){var t=this.em,n=e?e.ownerDocument:t&&t.get("Canvas").getBody().ownerDocument,r=[document];return n&&r.push(n),r},updateOffset:function(){var e=this.em.get("canvasOffset")||{};this.offTop=e.top,this.offLeft=e.left},setDropContent:function(e){this.dropModel=null,this.dropContent=e},updateTextViewCursorPosition:function(e){var t=this.em.get("Canvas"),n=t.getDocument(),r=null;if(n.caretRangeFromPoint){var i=Object(l.getPointerEvent)(e);r=n.caretRangeFromPoint(i.clientX,i.clientY)}else e.rangeParent&&(r=n.createRange()).setStart(e.rangeParent,e.rangeOffset);var o=t.getWindow().getSelection();t.getFrameEl().focus(),o.removeAllRanges(),r&&o.addRange(r)},setContentEditable:function(e,t){if(e){var n=e.getEl();n.contentEditable!=t&&(n.contentEditable=t)}},toggleSortCursor:function(e){var t=this.em,n=t&&t.get("Canvas");n&&(e?n.startAutoscroll():n.stopAutoscroll())},setDragHelper:function(e,t){for(var n=t||"",r=e.cloneNode(1),i=e.getBoundingClientRect(),o=getComputedStyle(e),s="",a=0;a<o.length;a++){var l=o[a];s+="".concat(l,":").concat(o.getPropertyValue(l),";")}document.body.appendChild(r),r.className+=" ".concat(this.pfx,"bdrag"),r.setAttribute("style",s),this.dragHelper=r,r.style.width="".concat(i.width,"px"),r.style.height="".concat(i.height,"px"),n&&this.moveDragHelper(n),this.em&&d(this.em.get("Canvas").getBody().ownerDocument).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper),d(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},moveDragHelper:function(e){var t=e.target.ownerDocument;if(this.dragHelper&&t){var n=e.pageY,r=e.pageX,i=0,o=0,s=(t.defaultView||t.parentWindow).frameElement,a=this.dragHelper.style;if(s){var l=s.getBoundingClientRect();i=l.top+document.documentElement.scrollTop,o=l.left+document.documentElement.scrollLeft,n=e.clientY,r=e.clientX}a.top=n+i+"px",a.left=r+o+"px"}},matches:function(e,t,n){return l.matches.call(e,t)},closest:function(e,t){if(e){for(var n=e.parentNode;n&&1===n.nodeType;){if(this.matches(n,t))return n;n=n.parentNode}return null}},offset:function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},createPlaceholder:function(){var e=this.pfx,t=document.createElement("div"),n=document.createElement("div");return t.className=e+"placeholder",t.style.display="none",t.style["pointer-events"]="none",n.className=e+"placeholder-int",t.appendChild(n),t},startSort:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=this.itemSel,o=this.containerSel,s=this.getContainerEl(n.container),a=this.getDocuments(e),c=this.onStart,u=this.plh;this.dropModel=null,this.target=null,this.prevTarget=null,this.moved=0,e&&!this.matches(e,"".concat(i,", ").concat(o))&&(e=this.closest(e,i)),this.eV=e,u||(u=this.createPlaceholder(),s.appendChild(u),this.plh=u),e&&((t=this.getSourceModel(e))&&t.set&&t.set("status","freezed"),this.srcModel=t),Object(l.on)(s,"mousemove dragover",this.onMove),Object(l.on)(a,"mouseup dragend touchend",this.endMove),Object(l.on)(a,"keydown",this.rollback),c&&c({target:t,parent:t&&t.parent(),index:t&&t.index()}),r&&r.clearSelection(),this.toggleSortCursor(1),r&&r.trigger("sorter:drag:start",e,t)},getTargetModel:function(e){return d(e||this.target).data("model")},getSourceModel:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.target,i=n.avoidChildren,o=void 0===i?1:i,s=this.em,a=this.eV,l=e||a,c=this.dropModel,h=this.dropContent,f=function(e){return e&&r&&e.opt&&e.opt.avoidChildren&&t.isTextableActive(e,r)};if(h&&s){if(f(c)&&(c=null),!c){var p=s.get("DomComponents").getComponents(),g={avoidChildren:o,avoidStore:1,avoidUpdateStyle:1},m=p.add(h,u(u({},g),{},{temporary:1}));if(c=p.remove(m,g),this.dropModel=c=c instanceof Array?c[0]:c,f(c))return this.getSourceModel(l,{target:r,avoidChildren:0})}return c}return l&&d(l).data("model")},selectTargetModel:function(e,t){if(!(e instanceof s.a.Collection||t&&t===e)){var n=this.targetModel;n&&n!==this.srcModel&&n.set("status",""),e&&e.set&&(e.set("status","selected-parent"),this.targetModel=e)}},onMove:function(e){var t=e,n=this.em,r=this.onMoveClb,i=this.plh;this.moved=1;var o=i.style.display;o&&"none"!==o||(i.style.display="block");var s=this.offset(this.el);this.elT=this.wmargin?Math.abs(s.top):s.top,this.elL=this.wmargin?Math.abs(s.left):s.left;var l=e.pageY-this.elT+this.el.scrollTop,c=e.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&n){var u=n.get("Canvas").getMouseRelativeCanvas(e,{noScroll:1});c=u.x,l=u.y}this.rX=c,this.rY=l,this.eventMove=e;var h=this.getSourceModel(),f=this.dimsFromTarget(e.target,c,l),p=this.target,g=p&&this.getTargetModel(p);if(this.selectTargetModel(g,h),g||(i.style.display="none"),p){this.lastDims=f;var m=this.findPosition(f,c,l);this.isTextableActive(h,g)?(this.activeTextModel=g,this.setContentEditable(g,!0),i.style.display="none",this.lastPos=m,this.updateTextViewCursorPosition(t)):(this.disableTextable(),this.activeTextModel=null,this.lastPos&&this.lastPos.index==m.index&&this.lastPos.method==m.method||(this.movePlaceholder(this.plh,f,m,this.prevTargetDim),this.$plh||(this.$plh=d(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=m)),Object(a.isFunction)(r)&&r({event:e,target:h,parent:g,index:m.index+("after"==m.method?1:0)}),n&&n.trigger("sorter:drag",{target:p,targetModel:g,sourceModel:h,dims:f,pos:m,x:c,y:l})}},isTextableActive:function(e,t){return e&&e.get&&e.get("textable")&&t&&t.is("text")},disableTextable:function(){var e=this.activeTextModel;e&&e.getView().disableEditing()},isInFlow:function(e,t){return!!e&&(t=t||document.body,!!this.styleInFlow(e,t))},styleInFlow:function(e,t){if(!Object(l.isTextNode)(e)){var n=e.style||{},r=d(e),i=t&&d(t);if(!(n.overflow&&"visible"!==n.overflow||"none"!==r.css("float")||i&&"flex"==i.css("display")&&"column"!==i.css("flex-direction"))){switch(n.position){case"static":case"relative":case"":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(r.css("display")){case"block":case"list-item":case"table":case"flex":return!0}}}},validTarget:function(e,t){var n=this.getTargetModel(e),r=this.getSourceModel(t,{target:n}),i={valid:!0,src:t=r&&r.view&&r.view.el,srcModel:r,trg:e=n&&n.view&&n.view.el,trgModel:n};if(!t||!e)return i.valid=!1,i;var o=r.get("draggable");o=o instanceof Array?o.join(", "):o,i.dragInfo=o,o=Object(a.isString)(o)?this.matches(e,o):o,i.draggable=o;var l=n.get("droppable");return l=(l=l instanceof s.a.Collection?1:l)instanceof Array?l.join(", "):l,i.dropInfo=l,l=Object(a.isString)(l)?this.matches(t,l):l,l=o&&this.isTextableActive(r,n)?1:l,i.droppable=l,l&&o||(i.valid=!1),i},dimsFromTarget:function(e,t,n){var r=this.em,i=[];if(!e)return i;if(this.matches(e,"".concat(this.itemSel,", ").concat(this.containerSel))||(e=this.closest(e,this.itemSel)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),!e)return i;if(this.prevTarget&&this.prevTarget!=e&&(this.prevTarget=null),!this.prevTarget){this.targetP=this.closest(e,this.containerSel);var o=this.validTarget(e);if(r&&r.trigger("sorter:drag:validation",o),!o.valid&&this.targetP)return this.dimsFromTarget(this.targetP,t,n);this.prevTarget=e,this.prevTargetDim=this.getDim(e),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(e)}if(this.prevTarget==e&&(i=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,t,n)||!this.nested&&!this.cacheDims.length){var s=this.targetP;s&&this.validTarget(s).valid&&(i=this.cacheDimsP,this.target=s)}return this.lastPos=null,i},getTargetFromEl:function(e){var t,n=e,r=this.targetPrev,i=this.em,o=this.containerSel,s=this.itemSel;if(this.matches(n,"".concat(s,", ").concat(o))||(n=this.closest(n,s)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(","))),r&&r!=n&&(this.targetPrev=""),!this.targetPrev){t=this.closest(n,o);var a=this.validTarget(n);if(i&&i.trigger("sorter:drag:validation",a),!a.valid&&t)return this.getTargetFromEl(t);this.targetPrev=n}return this.nearElBorders(n)&&(t=this.closest(n,o))&&this.validTarget(t).valid&&(n=t),n},nearElBorders:function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument.body,r=this.getCurrentPos(),i=r.x,o=r.y,s=t.top+n.scrollTop,a=t.left+n.scrollLeft;if(o<s+10||o>s+t.height-10||i<a+10||i>a+t.width-10)return 1},getCurrentPos:function(){var e=this.eventMove;return{x:e.pageX||0,y:e.pageY||0}},getDim:function(e){var t,n,r,i,o=this.em;if(this.canvasRelative&&o){var s=o.get("Canvas"),a=s.getElementPos(e,{noScroll:1}),l=s.getElementOffsets(e);t=a.top-l.marginTop,n=a.left-l.marginLeft,r=a.height+l.marginTop+l.marginBottom,i=a.width+l.marginLeft+l.marginRight}else{var c=this.offset(e);t=this.relative?e.offsetTop:c.top-(this.wmargin?-1:1)*this.elT,n=this.relative?e.offsetLeft:c.left-(this.wmargin?-1:1)*this.elL,r=e.offsetHeight,i=e.offsetWidth}return[t,n,r,i]},getChildrenDim:function(e){var t=this,n=[];if(!e)return n;var r=this.getTargetModel(e);if(r&&r.view&&!this.ignoreViewChildren){var i=r.getCurrentView?r.getCurrentView():r.view;e=i.getChildrenContainer()}return Object(a.each)(e.children,(function(r,i){var o=Object(l.getModel)(r,d),s=o&&o.index?o.index():i;if(Object(l.isTextNode)(r)||t.matches(r,t.itemSel)){var a=t.getDim(r),c=t.direction;c="v"==c||"h"!=c&&t.isInFlow(r,e),a.push(c,r,s),n.push(a)}})),n},nearBorders:function(e,t,n){var r=0,i=this.borderOffset,o=t||0,s=n||0,a=e[0],l=e[1];return(a+i>s||s>a+e[2]-i||l+i>o||o>l+e[3]-i)&&(r=1),!!r},findPosition:function(e,t,n){for(var r={index:0,indexEl:0,method:"before"},i=0,o=0,s=0,a=0,l=0,c=0,u=0,d=0,h=e.length;d<h;d++)if(c=(u=e[d])[0]+u[2],a=u[1]+u[3]/2,l=u[0]+u[2]/2,!(o&&u[1]>o||s&&l>=s||i&&u[1]+u[3]<i))if(r.index=d,r.indexEl=u[6],u[4]){if(n<l){r.method="before";break}r.method="after"}else n<c&&(s=c),t<a?(o=a,r.method="before"):(i=a,r.method="after");return r},movePlaceholder:function(e,t,n,r){var i=0,o=0,s=0,a=0,l="px",c=n.method,u=t[n.index];if(e.classList.remove("vertical"),e.classList.add("horizontal"),u)u[4]?(s=u[3]+l,a="auto",i="before"==c?u[0]-0:u[0]+u[2]-0,o=u[1]):(s="auto",a=u[2]-0+l,i=u[0]+0,o="before"==c?u[1]-0:u[1]+u[3]-0,e.classList.remove("horizontal"),e.classList.add("vertical"));else{if(!this.nested)return void(e.style.display="none");r&&(i=r[0]+5,o=r[1]+5,s=parseInt(r[3])-10+l,a="auto")}e.style.top=i+l,e.style.left=o+l,s&&(e.style.width=s),a&&(e.style.height=a)},endMove:function(e){var t,n=this,r=this.eV,i=[],o=this.getDocuments(),s=this.getContainerEl(),c=this.onEndMove,d=this.target,h=this.lastPos;if(Object(l.off)(s,"mousemove dragover",this.onMove),Object(l.off)(o,"mouseup dragend touchend",this.endMove),Object(l.off)(o,"keydown",this.rollback),this.plh.style.display="none",r&&(t=this.getSourceModel(),this.selectOnEnd&&t&&t.set&&(t.set("status",""),t.set("status","selected"))),this.moved){var f=this.toMove;(Object(a.isArray)(f)?f:f?[f]:[r]).forEach((function(e){i.push(n.move(d,e,h))}))}this.plh&&(this.plh.style.display="none");var p=this.dragHelper;if(p&&(p.parentNode.removeChild(p),this.dragHelper=null),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),this.toMove=null,this.eventMove=0,this.dropModel=null,Object(a.isFunction)(c)){var g={target:t,parent:t&&t.parent(),index:t&&t.index()};i.length?i.forEach((function(e){return c(e,n,g)})):c(null,this,u(u({},g),{},{cancelled:1}))}},move:function(e,t,n){var r=this.em,i=this.activeTextModel,o=this.dropContent,a=Object(l.getElement)(t);r&&r.trigger("component:dragEnd:before",e,a,n);var c,h,f,p=[],g=n.indexEl,m=this.validTarget(e,a),v=d(e).data("collection"),b=m.srcModel,y=m.droppable,w=m.draggable,x=m.dropInfo,O=m.dragInfo,C=m.trgModel;y=C instanceof s.a.Collection?1:y;var _=this.isTextableActive(b,C);if(v&&y&&w){var S={at:g="after"===n.method?g+1:g,noIncrement:1};if(o?(c=o,S.silent=!1,S.avoidUpdateStyle=1):(S.temporary=1,h=v.add({},u({},S)),b.collection&&(c=b.collection.remove(b,{temporary:1}))),_){var j=i.getView();i.trigger("active");var k=j.activeRte,T=b.getEl();delete b.opt.temporary,b.getView().render(),T.setAttribute("data-gjs-textable","true"),k.insertHTML&&k.insertHTML(T.outerHTML)}else f=v.add(c,S);o?this.dropContent=null:v.remove(h),this.prevTarget=null}else v||p.push("Target collection not found"),y||p.push("Target is not droppable, accepts [".concat(x,"]")),w||p.push("Component not draggable, acceptable by [".concat(O,"]")),console.warn("Invalid target position: "+p.join(", "));return r&&r.trigger("component:dragEnd",v,c,p),r&&r.trigger("sorter:drag:end",{targetCollection:v,modelToDrop:c,warns:p,validResult:m,dst:e,srcEl:a}),f},rollback:function(e){Object(l.off)(this.getDocuments(),"keydown",this.rollback),27==(e.which||e.keyCode)&&(this.moved=0,this.endMove())}})},"./src/utils/dom.js":function(e,t,n){"use strict";n.r(t),n.d(t,"motionsEv",(function(){return o})),n.d(t,"isDoc",(function(){return s})),n.d(t,"isVisible",(function(){return a})),n.d(t,"empty",(function(){return l})),n.d(t,"replaceWith",(function(){return c})),n.d(t,"appendAtIndex",(function(){return u})),n.d(t,"append",(function(){return d})),n.d(t,"createEl",(function(){return h})),n.d(t,"createCustomEvent",(function(){return f})),n.d(t,"appendVNodes",(function(){return p}));var r=n("./node_modules/underscore/modules/index-all.js"),i="attributes",o="transitionend oTransitionEnd transitionend webkitTransitionEnd",s=function(e){return e&&9===e.nodeType},a=function(e){return e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},l=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},c=function(e,t){e.parentNode.replaceChild(t,e)},u=function(e,t,n){var i=e.childNodes,o=i.length,s=Object(r.isUndefined)(n)?o:n;Object(r.isString)(t)&&(e.insertAdjacentHTML("beforeEnd",t),e.removeChild(t=e.lastChild)),s>=o?e.appendChild(t):e.insertBefore(t,i[s])},d=function(e,t){return u(e,t)},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=document.createElement(e);return t&&Object(r.each)(t,(function(e,t){return i.setAttribute(t,e)})),n&&(Object(r.isString)(n)?i.innerHTML=n:i.appendChild(n)),i},f=function(e,t){var n;try{n=new window[t](e.type,e)}catch(e){(n=document.createEvent(t)).initEvent(e.type,!0,!0)}return n.keyCodeVal=e.keyCode,n._parentEvent=e,["keyCode","which"].forEach((function(e){Object.defineProperty(n,e,{get:function(){return this.keyCodeVal}})})),n},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(t)?t:[t];n.forEach((function(t){var n=t[i]||{},o=document.createElement(t.tag||"div");Object(r.each)(n,(function(e,t){o.setAttribute(t,e)})),e.appendChild(o)}))}},"./src/utils/extender.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/underscore/modules/index-all.js");t.default=function(e){var t=e.$;if(t&&"jQuery"!==t.prototype.constructor.name){var n=t.fn;n.hide=function(){return this.css("display","none")},n.show=function(){return this.css("display","block")},n.focus=function(){var e=this.get(0);return e&&e.focus(),this},n.bind=function(e,t){return this.on(e,t)},n.unbind=function(e,t){if(Object(r.isObject)(e)){for(var n in e)e.hasOwnProperty(n)&&this.off(n,e[n]);return this}return this.off(e,t)},n.click=function(e){return e?this.on("click",e):this.trigger("click")},n.change=function(e){return e?this.on("change",e):this.trigger("change")},n.keydown=function(e){return e?this.on("keydown",e):this.trigger("keydown")},n.delegate=function(e,t,n,r){return r||(r=n),this.on(t,e,(function(e){e.data=n,r(e)}))},n.scrollLeft=function(){var e=this.get(0),t=(e=9==e.nodeType?e.defaultView:e)instanceof Window?e:null;return t?t.pageXOffset:e.scrollLeft||0},n.scrollTop=function(){var e=this.get(0),t=(e=9==e.nodeType?e.defaultView:e)instanceof Window?e:null;return t?t.pageYOffset:e.scrollTop||0};var i=t.prototype.offset;n.offset=function(e){var t,n;return e&&(t=e.top,n=e.left),void 0!==t&&this.css("top","".concat(t,"px")),void 0!==n&&this.css("left","".concat(n,"px")),i.call(this)},t.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n};var o=Array.prototype.indexOf;t.inArray=function(e,t,n){return null==t?-1:o.call(t,e,n)},t.Event=function(e,n){if(!(this instanceof t.Event))return new t.Event(e,n);this.type=e,this.isDefaultPrevented=function(){return!1}}}}},"./src/utils/fetch.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/promise-polyfill/src/index.js");window.Promise=window.Promise||r.default,t.default="function"==typeof fetch?fetch.bind():function(e,t){return new r.default((function(n,i){var o=new XMLHttpRequest;for(var s in o.open(t.method||"get",e),o.withCredentials="include"==t.credentials,t.headers||{})o.setRequestHeader(s,t.headers[s]);o.onload=function(e){return n({status:o.status,statusText:o.statusText,text:function(){return r.default.resolve(o.responseText)}})},o.onerror=i,o.upload&&t.onProgress&&(o.upload.onprogress=t.onProgress),t.body?o.send(t.body):o.send()}))}},"./src/utils/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/Dragger.js"),i=n("./src/utils/Sorter.js"),o=n("./src/utils/Resizer.js");t.default=function(){return{name:"Utils",init:function(){return this},Sorter:i.default,Resizer:o.default,Dragger:r.default}}},"./src/utils/mixins.js":function(e,t,n){"use strict";n.r(t),n.d(t,"isCommentNode",(function(){return x})),n.d(t,"isTaggableNode",(function(){return O})),n.d(t,"on",(function(){return h})),n.d(t,"off",(function(){return f})),n.d(t,"hasDnd",(function(){return b})),n.d(t,"upFirst",(function(){return g})),n.d(t,"matches",(function(){return c})),n.d(t,"getModel",(function(){return C})),n.d(t,"getElRect",(function(){return _})),n.d(t,"camelCase",(function(){return m})),n.d(t,"isTextNode",(function(){return w})),n.d(t,"getKeyCode",(function(){return j})),n.d(t,"getKeyChar",(function(){return k})),n.d(t,"isEscKey",(function(){return T})),n.d(t,"getElement",(function(){return y})),n.d(t,"shallowDiff",(function(){return d})),n.d(t,"normalizeFloat",(function(){return v})),n.d(t,"getPointerEvent",(function(){return S})),n.d(t,"getUnitFromValue",(function(){return p})),n.d(t,"capitalize",(function(){return P})),n.d(t,"getViewEl",(function(){return D})),n.d(t,"setViewEl",(function(){return I})),n.d(t,"appendStyles",(function(){return u})),n.d(t,"isObject",(function(){return E})),n.d(t,"isComponent",(function(){return A})),n.d(t,"isRule",(function(){return M}));var r=n("./node_modules/@babel/runtime/helpers/typeof.js"),i=n.n(r),o=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),s=n.n(o),a=n("./node_modules/underscore/modules/index-all.js"),l=window.Element.prototype,c=l.matches||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector,u=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(a.isArray)(t)?s()(t):[t];if(r.length){var i=r.shift();if(i&&(!n.unique||!document.querySelector('link[href="'.concat(i,'"]')))){var o=document,l=o.head,c=document.createElement("link");c.href=i,c.rel="stylesheet",n.prepand?l.insertBefore(c,l.firstChild):l.appendChild(c)}e(r)}},d=function(e,t){var n={},r=Object(a.keys)(t);for(var i in e)if(e.hasOwnProperty(i)){var o=e[i],s=t[i];r.indexOf(i)>=0?o!==s&&(n[i]=s):n[i]=null}for(var l in t)t.hasOwnProperty(l)&&Object(a.isUndefined)(e[l])&&(n[l]=t[l]);return n},h=function(e,t,n){t=t.split(/\s+/),e=e instanceof Array?e:[e];for(var r=function(r){e.forEach((function(e){return e.addEventListener(t[r],n)}))},i=0;i<t.length;++i)r(i)},f=function(e,t,n){t=t.split(/\s+/),e=e instanceof Array?e:[e];for(var r=function(r){e.forEach((function(e){return e.removeEventListener(t[r],n)}))},i=0;i<t.length;++i)r(i)},p=function(e){return e.replace(parseFloat(e),"")},g=function(e){return e[0].toUpperCase()+e.toLowerCase().slice(1)},m=function(e){var t=e.split("-").filter(String);return t[0].toLowerCase()+t.slice(1).map(g)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0;if(isNaN(e))return n;if(e=parseFloat(e),Math.floor(e)!==e){var i=t.toString().split(".")[1];r=i?i.length:0}return r?parseFloat(e.toFixed(r)):e},b=function(e){return"draggable"in document.createElement("i")&&(e?e.get("Config").nativeDnD:1)},y=function(e){return Object(a.isElement)(e)||w(e)?e:e&&e.getEl?e.getEl():void 0},w=function(e){return e&&3===e.nodeType},x=function(e){return e&&8===e.nodeType},O=function(e){return e&&!w(e)&&!x(e)},C=function(e,t){var n=e;return Object(a.isElement)(e)&&(n=t(e).data("model")),n},_=function(e){var t,n={top:0,left:0,width:0,height:0};if(!e)return n;if(w(e)){var r=document.createRange();r.selectNode(e),t=r.getBoundingClientRect(),r.detach()}return t||(e.getBoundingClientRect?e.getBoundingClientRect():n)},S=function(e){return e.touches&&e.touches[0]?e.touches[0]:e},j=function(e){return e.which||e.keyCode},k=function(e){return String.fromCharCode(j(e))},T=function(e){return 27===j(e)},E=function(e){return null!==e&&!Array.isArray(e)&&"object"===i()(e)},P=function(e){return e&&e.charAt(0).toUpperCase()+e.substring(1)},A=function(e){return e&&e.toHTML},M=function(e){return e&&e.toCSS},D=function(e){return e.__gjsv},I=function(e,t){e.__gjsv=t}},"./src/utils/polyfills.js":function(e,t,n){"use strict";n.r(t),t.default=function(){if(function(){for(var e,t=window.navigator.userAgent,n=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],r=0;r<n.length&&!(e=n[r][1].exec(t));r++);return!!e}()){var e=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),e.apply(document.implementation,[t])}}}}}).default},e.exports=r()},"4Gpi":function(module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,r=n.eval,i=n.execScript;!r&&i&&(i.call(n,"null"),r=n.eval),forEach(Object_keys(e),(function(t){n[t]=e[t]})),forEach(globals,(function(t){e[t]&&(n[t]=e[t])}));var o=Object_keys(n),s=r.call(n,this.code);return forEach(Object_keys(n),(function(t){(t in e||-1===indexOf(o,t))&&(e[t]=n[t])})),forEach(globals,(function(t){t in e||defineProp(e,t,n[t])})),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return e&&forEach(Object_keys(t),(function(n){e[n]=t[n]})),n},forEach(Object_keys(Script.prototype),(function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}})),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),(function(n){t[n]=e[n]})),t}},KtHC:function(e,t,n){var r;"undefined"!=typeof self&&self,e.exports=(r=n("mgzZ"),function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){e.exports=r},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(10),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cmdImport="gjs-open-import-webpage",t.cmdDeviceDesktop="set-device-desktop",t.cmdDeviceTablet="set-device-tablet",t.cmdDeviceMobile="set-device-mobile",t.cmdClear="canvas-clear"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=r(n(5)),s=r(n(6)),a=r(n(7)),l=r(n(8)),c=r(n(9)),u=r(n(12)),d=r(n(13)),h=r(n(14)),f=r(n(16)),p=r(n(17)),g=r(n(18)),m=r(n(19));t.default=i.default.plugins.add("gjs-preset-webpage",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={blocks:["link-block","quote","text-basic"],modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure to clean the canvas?",showStylesOnChange:1,textGeneral:"General",textLayout:"Layout",textTypography:"Typography",textDecorations:"Decorations",textExtra:"Extra",customStyleManager:[],blocksBasicOpts:{},navbarOpts:{},countdownOpts:{},formsOpts:{},exportOpts:{},aviaryOpts:0,filestackOpts:0};for(var r in n)r in t||(t[r]=n[r]);var i=t.blocksBasicOpts,v=t.navbarOpts,b=t.countdownOpts,y=t.formsOpts,w=t.exportOpts,x=t.aviaryOpts,O=t.filestackOpts;i&&(0,o.default)(e,i),v&&(0,s.default)(e,v),b&&(0,a.default)(e,b),y&&(0,l.default)(e,y),w&&(0,c.default)(e,w),x&&(0,u.default)(e,x),O&&(0,d.default)(e,O),(0,p.default)(e,t),(0,f.default)(e,t),(0,h.default)(e,t),(0,g.default)(e,t),(0,m.default)(e,t)}))},function(e,t,n){var r;r=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.default=i.default.plugins.add("gjs-blocks-basic",(function(e){var t=r({blocks:["column1","column2","column3","column3-7","text","link","image","video","map"],flexGrid:0,stylePrefix:"",addBasicStyle:!0,category:"Basic",labelColumn1:"1 Column",labelColumn2:"2 Columns",labelColumn3:"3 Columns",labelColumn37:"2 Columns 3/7",labelText:"Text",labelLink:"Link",labelImage:"Image",labelVideo:"Video",labelMap:"Map"},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});n(2).default(e,t)}))},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.BlockManager,i=t.blocks,o=t.stylePrefix,s=t.flexGrid,a=t.addBasicStyle,l=o+"row",c=o+"cell",u=s?"\n    ."+l+" {\n      display: flex;\n      justify-content: flex-start;\n      align-items: stretch;\n      flex-wrap: nowrap;\n      padding: 10px;\n    }\n    @media (max-width: 768px) {\n      ."+l+" {\n        flex-wrap: wrap;\n      }\n    }":"\n    ."+l+" {\n      display: table;\n      padding: 10px;\n      width: 100%;\n    }\n    @media (max-width: 768px) {\n      ."+o+"cell, ."+o+"cell30, ."+o+"cell70 {\n        width: 100%;\n        display: block;\n      }\n    }",d=s?"\n    ."+c+" {\n      min-height: 75px;\n      flex-grow: 1;\n      flex-basis: 100%;\n    }":"\n    ."+c+" {\n      width: 8%;\n      display: table-cell;\n      height: 75px;\n    }",h="\n  ."+o+"cell30 {\n    width: 30%;\n  }",f="\n  ."+o+"cell70 {\n    width: 70%;\n  }",p={tl:0,tc:0,tr:0,cl:0,cr:0,bl:0,br:0,minDim:1},g=r({},p,{cr:1,bc:0,currentUnit:1,minDim:1,step:.2});s&&(g.keyWidth="flex-basis");var m={class:l,"data-gjs-droppable":"."+c,"data-gjs-resizable":p,"data-gjs-name":"Row"},v={class:c,"data-gjs-draggable":"."+l,"data-gjs-resizable":g,"data-gjs-name":"Cell"};s&&(v["data-gjs-unstylable"]=["width"],v["data-gjs-stylable-require"]=["flex-basis"]);var b=["."+l,"."+c];e.on("selector:add",(function(e){return b.indexOf(e.getFullName())>=0&&e.set("private",1)}));var y=function(e){var t=[];for(var n in e){var r=e[n],i=r instanceof Array||r instanceof Object;r=i?JSON.stringify(r):r,t.push(n+"="+(i?"'"+r+"'":'"'+r+'"'))}return t.length?" "+t.join(" "):""},w=function(e){return i.indexOf(e)>=0},x=y(m),O=y(v);w("column1")&&n.add("column1",{label:t.labelColumn1,category:t.category,attributes:{class:"gjs-fonts gjs-f-b1"},content:"<div "+x+">\n        <div "+O+"></div>\n      </div>\n      "+(a?"<style>\n          "+u+"\n          "+d+"\n        </style>":"")}),w("column2")&&n.add("column2",{label:t.labelColumn2,attributes:{class:"gjs-fonts gjs-f-b2"},category:t.category,content:"<div "+x+">\n        <div "+O+"></div>\n        <div "+O+"></div>\n      </div>\n      "+(a?"<style>\n          "+u+"\n          "+d+"\n        </style>":"")}),w("column3")&&n.add("column3",{label:t.labelColumn3,category:t.category,attributes:{class:"gjs-fonts gjs-f-b3"},content:"<div "+x+">\n        <div "+O+"></div>\n        <div "+O+"></div>\n        <div "+O+"></div>\n      </div>\n      "+(a?"<style>\n          "+u+"\n          "+d+"\n        </style>":"")}),w("column3-7")&&n.add("column3-7",{label:t.labelColumn37,category:t.category,attributes:{class:"gjs-fonts gjs-f-b37"},content:"<div "+x+">\n        <div "+O+' style="'+(s?"flex-basis":"width")+': 30%;"></div>\n        <div '+O+' style="'+(s?"flex-basis":"width")+': 70%;"></div>\n      </div>\n      '+(a?"<style>\n          "+u+"\n          "+d+"\n          "+h+"\n          "+f+"\n        </style>":"")}),w("text")&&n.add("text",{label:t.labelText,category:t.category,attributes:{class:"gjs-fonts gjs-f-text"},content:{type:"text",content:"Insert your text here",style:{padding:"10px"},activeOnRender:1}}),w("link")&&n.add("link",{label:t.labelLink,category:t.category,attributes:{class:"fa fa-link"},content:{type:"link",content:"Link",style:{color:"#d983a6"}}}),w("image")&&n.add("image",{label:t.labelImage,category:t.category,attributes:{class:"gjs-fonts gjs-f-image"},content:{style:{color:"black"},type:"image",activeOnRender:1}}),w("video")&&n.add("video",{label:t.labelVideo,category:t.category,attributes:{class:"fa fa-youtube-play"},content:{type:"video",src:"img/video2.webm",style:{height:"350px",width:"615px"}}}),w("map")&&n.add("map",{label:t.labelMap,category:t.category,attributes:{class:"fa fa-map-o"},content:{type:"map",style:{height:"350px"}}})}}])},e.exports=r(n(0))},function(e,t,n){var r;r=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hNavbarRef="h-navbar",t.navbarRef="navbar",t.navbarItemsRef="navbar-items",t.menuRef="navbar-menu"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=r(n(3)),s=r(n(4)),a=n(0);t.default=i.default.plugins.add("gjs-navbar",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={blocks:[a.hNavbarRef],defaultStyle:1,navbarClsPfx:"navbar",labelNavbar:"Navbar",labelNavbarContainer:"Navbar Container",labelMenu:"Navbar Menu",labelMenuLink:"Menu link",labelBurger:"Burger",labelBurgerLine:"Burger Line",labelNavbarBlock:"Navbar",labelNavbarCategory:"Extra",labelHome:"Home",labelAbout:"About",labelContact:"Contact"};for(var r in n)r in t||(t[r]=n[r]);(0,o.default)(e,t),(0,s.default)(e,t)}))},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.BlockManager,i=t.navbarClsPfx||"navbar",o=t.defaultStyle?"\n  <style>\n    ."+i+"-items-c {\n      display: inline-block;\n      float: right;\n    }\n\n    ."+i+" {\n      background-color: #222;\n      color: #ddd;\n      min-height: 50px;\n      width: 100%;\n    }\n\n    ."+i+"-container {\n      max-width: 950px;\n      margin: 0 auto;\n      width: 95%;\n    }\n\n    ."+i+'-container::after {\n      content: "";\n      clear: both;\n      display: block;\n    }\n\n    .'+i+"-brand {\n      vertical-align: top;\n      display: inline-block;\n      padding: 5px;\n      min-height: 50px;\n      min-width: 50px;\n      color: inherit;\n      text-decoration: none;\n    }\n\n    ."+i+"-menu {\n      padding: 10px 0;\n      display: block;\n      float: right;\n      margin: 0;\n    }\n\n    ."+i+"-menu-link {\n      margin: 0;\n      color: inherit;\n      text-decoration: none;\n      display: inline-block;\n      padding: 10px 15px;\n    }\n\n    ."+i+"-burger {\n      margin: 10px 0;\n      width: 45px;\n      padding: 5px 10px;\n      display: none;\n      float: right;\n      cursor: pointer;\n    }\n\n    ."+i+"-burger-line {\n      padding: 1px;\n      background-color: white;\n      margin: 5px 0;\n    }\n\n    @media (max-width: 768px) {\n      ."+i+"-burger {\n        display: block;\n      }\n\n      ."+i+"-items-c {\n        display: none;\n        width: 100%;\n      }\n\n      ."+i+"-menu {\n        width: 100%;\n      }\n\n      ."+i+"-menu-link {\n        display: block;\n      }\n    }\n  </style>\n  ":"";t.blocks.indexOf(r.hNavbarRef)>=0&&n.add(r.hNavbarRef,{label:'\n        <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n          <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path>\n          <rect class="gjs-block-svg-path" x="15" y="10" width="5" height="1"></rect>\n          <rect class="gjs-block-svg-path" x="15" y="13" width="5" height="1"></rect>\n          <rect class="gjs-block-svg-path" x="15" y="11.5" width="5" height="1"></rect>\n        </svg>\n        <div class="gjs-block-label">'+t.labelNavbarBlock+"</div>",category:t.labelNavbarCategory,content:'\n        <div class="'+i+'" data-gjs-droppable="false" data-gjs-custom-name="'+t.labelNavbar+'" data-gjs="'+r.navbarRef+'">\n          <div class="'+i+'-container" data-gjs-droppable="false" data-gjs-draggable="false"\n            data-gjs-removable="false" data-gjs-copyable="false" data-gjs-highlightable="false"\n            data-gjs-custom-name="'+t.labelNavbarContainer+'">\n\n            <a href="/" class="'+i+'-brand" data-gjs-droppable="true"></a>\n\n            <div class="'+i+'-burger" data-gjs-type="burger-menu">\n              <div class="'+i+'-burger-line" data-gjs-custom-name="'+t.labelBurgerLine+'" data-gjs-droppable="false" data-gjs-draggable="false"></div>\n              <div class="'+i+'-burger-line" data-gjs-custom-name="'+t.labelBurgerLine+'" data-gjs-droppable="false" data-gjs-draggable="false"></div>\n              <div class="'+i+'-burger-line" data-gjs-custom-name="'+t.labelBurgerLine+'" data-gjs-droppable="false" data-gjs-draggable="false"></div>\n            </div>\n\n            <div class="'+i+'-items-c" data-gjs="'+r.navbarItemsRef+'">\n              <nav class="'+i+'-menu" data-gjs="'+r.menuRef+'" data-gjs-custom-name="'+t.labelMenu+'">\n                <a href="#" class="'+i+'-menu-link" data-gjs-custom-name="'+t.labelMenuLink+'" data-gjs-draggable="[data-gjs='+r.menuRef+']">'+t.labelHome+'</a>\n                <a href="#" class="'+i+'-menu-link" data-gjs-custom-name="'+t.labelMenuLink+'" data-gjs-draggable="[data-gjs='+r.menuRef+']">'+t.labelAbout+'</a>\n                <a href="#" class="'+i+'-menu-link" data-gjs-custom-name="'+t.labelMenuLink+'" data-gjs-draggable="[data-gjs='+r.menuRef+']">'+t.labelContact+"</a>\n              </nav>\n            </div>\n\n          </div>\n        </div>\n        "+o+"\n      "})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.DomComponents,i=n.getType("default"),o=i.model;n.addType("burger-menu",{model:o.extend({defaults:r({},o.prototype.defaults,{"custom-name":t.labelBurger,draggable:!1,droppable:!1,copyable:!1,removable:!1,script:function(){var e,t=0,n=function(){var e,t=document.createElement("void"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}();"gjs-collapse"in this||this.addEventListener("click",(function(r){if(r.preventDefault(),!t){var i=this.closest("[data-gjs=navbar]").querySelector("[data-gjs=navbar-items]");(function(e){t=1;var n=function(e){var t=window.getComputedStyle(e),n=t.display,r=parseInt(t["max-height"]);if("none"!==n&&"0"!==r)return e.offsetHeight;e.style.height="auto",e.style.display="block",e.style.position="absolute",e.style.visibility="hidden";var i=e.offsetHeight;return e.style.height="",e.style.display="",e.style.position="",e.style.visibility="",i}(e),r=e.style;r.display="block",r.transition="max-height 0.25s ease-in-out",r.overflowY="hidden",""==r["max-height"]&&(r["max-height"]=0),0==parseInt(r["max-height"])?(r["max-height"]="0",setTimeout((function(){r["max-height"]=n+"px"}),10)):r["max-height"]="0"})(i),e||(i.addEventListener(n,(function(){t=0;var e=i.style;0==parseInt(e["max-height"])&&(e.display="",e["max-height"]="")})),e=1)}})),this["gjs-collapse"]=1}})},{isComponent:function(e){if(e.getAttribute&&"burger-menu"==e.getAttribute("data-gjs-type"))return{type:"burger-menu"}}}),view:i.view})}}])},e.exports=r(n(0))},function(e,t,n){var r;r=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countdownRef="countdown"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(2)),o=r(n(3)),s=r(n(4)),a=n(0);t.default=i.default.plugins.add("gjs-component-countdown",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={blocks:[a.countdownRef],defaultStyle:!0,startTime:"",endText:"EXPIRED",dateInputType:"date",countdownClsPfx:"countdown",labelCountdown:"Countdown",labelCountdownCategory:"Extra",labelDays:"days",labelHours:"hours",labelMinutes:"minutes",labelSeconds:"seconds"};for(var r in n)r in t||(t[r]=n[r]);(0,o.default)(e,t),(0,s.default)(e,t)}))},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.DomComponents,i=n.getType("default"),o=(n.getType("text"),i.model),s=i.view,a=t.countdownClsPfx;n.addType("countdown",{model:o.extend({defaults:r({},o.prototype.defaults,{startfrom:t.startTime,endText:t.endText,droppable:!1,traits:[{label:"Start",name:"startfrom",changeProp:1,type:t.dateInputType},{label:"End text",name:"endText",changeProp:1}],script:function(){var e=new Date("{[ startfrom ]}").getTime(),t=this.querySelector("[data-js=countdown]"),n=this.querySelector("[data-js=countdown-endtext]"),r=this.querySelector("[data-js=countdown-day]"),i=this.querySelector("[data-js=countdown-hour]"),o=this.querySelector("[data-js=countdown-minute]"),s=this.querySelector("[data-js=countdown-second]"),a=this.gjs_countdown_interval;a&&a&&clearInterval(a);var l=function(e,t,n,a){r.innerHTML=e<10?"0"+e:e,i.innerHTML=t<10?"0"+t:t,o.innerHTML=n<10?"0"+n:n,s.innerHTML=a<10?"0"+a:a},c=function(){var r=(new Date).getTime(),i=e-r,o=Math.floor(i/864e5),s=Math.floor(i%864e5/36e5),a=Math.floor(i%36e4/6e4),c=Math.floor(i%6e4/1e3);l(o,s,a,c),i<0&&(clearInterval(u),n.innerHTML="{[ endText ]}",t.style.display="none",n.style.display="")};if(e){var u=setInterval(c,1e3);this.gjs_countdown_interval=u,n.style.display="none",t.style.display="",c()}else l(0,0,0,0)}})},{isComponent:function(e){if(e.getAttribute&&"countdown"==e.getAttribute("data-gjs-type"))return{type:"countdown"}}}),view:s.extend({init:function(){this.listenTo(this.model,"change:startfrom change:endText",this.updateScript);var e=this.model.get("components");e.length||(e.reset(),e.add('\n            <span data-js="countdown" class="'+a+'-cont">\n              <div class="'+a+'-block">\n                <div data-js="countdown-day" class="'+a+'-digit"></div>\n                <div class="'+a+'-label">'+t.labelDays+'</div>\n              </div>\n              <div class="'+a+'-block">\n                <div data-js="countdown-hour" class="'+a+'-digit"></div>\n                <div class="'+a+'-label">'+t.labelHours+'</div>\n              </div>\n              <div class="'+a+'-block">\n                <div data-js="countdown-minute" class="'+a+'-digit"></div>\n                <div class="'+a+'-label">'+t.labelMinutes+'</div>\n              </div>\n              <div class="'+a+'-block">\n                <div data-js="countdown-second" class="'+a+'-digit"></div>\n                <div class="'+a+'-label">'+t.labelSeconds+'</div>\n              </div>\n            </span>\n            <span data-js="countdown-endtext" class="'+a+'-endtext"></span>\n          '))}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.BlockManager,i=t.countdownClsPfx,o=t.defaultStyle?"<style>\n    ."+i+" {\n      text-align: center;\n      font-family: Helvetica, serif;\n    }\n\n    ."+i+"-block {\n      display: inline-block;\n      margin: 0 10px;\n      padding: 10px;\n    }\n\n    ."+i+"-digit {\n      font-size: 5rem;\n    }\n\n    ."+i+"-endtext {\n      font-size: 5rem;\n    }\n\n    ."+i+"-cont,\n    ."+i+"-block {\n      display: inline-block;\n    }\n  </style>":"";t.blocks.indexOf(r.countdownRef)>=0&&n.add(r.countdownRef,{label:t.labelCountdown,category:t.labelCountdownCategory,attributes:{class:"fa fa-clock-o"},content:'\n        <div class="'+i+'" data-gjs-type="countdown"></div>\n        '+o+"\n      "})};var r=n(0)}])},e.exports=r(n(0))},function(e,t,n){var r;r=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.default=r.default.plugins.add("gjs-plugin-forms",(function(e,t){var r=t||{},i=(e.getConfig(),{blocks:["form","input","textarea","select","button","label","checkbox","radio"],labelTraitMethod:"Method",labelTraitAction:"Action",labelTraitState:"State",labelTraitId:"ID",labelTraitFor:"For",labelInputName:"Input",labelTextareaName:"Textarea",labelSelectName:"Select",labelCheckboxName:"Checkbox",labelRadioName:"Radio",labelButtonName:"Button",labelTraitName:"Name",labelTraitPlaceholder:"Placeholder",labelTraitValue:"Value",labelTraitRequired:"Required",labelTraitType:"Type",labelTraitOptions:"Options",labelTraitChecked:"Checked",labelTypeText:"Text",labelTypeEmail:"Email",labelTypePassword:"Password",labelTypeNumber:"Number",labelTypeSubmit:"Submit",labelTypeReset:"Reset",labelTypeButton:"Button",labelNameLabel:"Label",labelForm:"Form",labelSelectOption:"- Select option -",labelOption:"Option",labelStateNormal:"Normal",labelStateSuccess:"Success",labelStateError:"Error"});for(var o in i)o in r||(r[o]=i[o]);n(2).default(e,r),n(3).default(e,r),n(4).default(e,r)}))},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.DomComponents,i=n.getType("default"),o=n.getType("text"),s=i.model,a=i.view,l=o.model,c=o.view,u={name:"id",label:t.labelTraitId},d={name:"for",label:t.labelTraitFor},h={name:"name",label:t.labelTraitName},f={name:"placeholder",label:t.labelTraitPlaceholder},p={name:"value",label:t.labelTraitValue},g={type:"checkbox",name:"required",label:t.labelTraitRequired},m={label:t.labelTraitChecked,type:"checkbox",name:"checked",changeProp:1};n.addType("form",{model:s.extend({defaults:r({},s.prototype.defaults,{droppable:":not(form)",draggable:":not(form)",traits:[{type:"select",label:t.labelTraitMethod,name:"method",options:[{value:"post",name:"POST"},{value:"get",name:"GET"}]},{label:t.labelTraitAction,name:"action"}]}),init:function(){this.listenTo(this,"change:formState",this.updateFormState)},updateFormState:function(){switch(this.get("formState")){case"success":this.showState("success");break;case"error":this.showState("error");break;default:this.showState("normal")}},showState:function(e){var t,n,r=e||"normal";"success"==r?(t="none",n="block"):"error"==r?(t="block",n="none"):(t="none",n="none");var i=this.getStateModel("success"),o=this.getStateModel("error"),s=i.getStyle(),a=o.getStyle();s.display=n,a.display=t,i.setStyle(s),o.setStyle(a)},getStateModel:function(e){for(var t,n=e||"success",r=this.get("components"),i=0;i<r.length;i++){var o=r.models[i];if(o.get("form-state-type")==n){t=o;break}}if(!t){var s=formMsgSuccess;"error"==n&&(s=formMsgError),t=r.add({"form-state-type":n,type:"text",removable:!1,copyable:!1,draggable:!1,attributes:{"data-form-state":n},content:s})}return t}},{isComponent:function(e){if("FORM"==e.tagName)return{type:"form"}}}),view:a.extend({events:{submit:function(e){e.preventDefault()}}})}),n.addType("input",{model:s.extend({defaults:r({},s.prototype.defaults,{"custom-name":t.labelInputName,tagName:"input",draggable:"form, form *",droppable:!1,traits:[h,f,{label:t.labelTraitType,type:"select",name:"type",options:[{value:"text",name:t.labelTypeText},{value:"email",name:t.labelTypeEmail},{value:"password",name:t.labelTypePassword},{value:"number",name:t.labelTypeNumber}]},g]})},{isComponent:function(e){if("INPUT"==e.tagName)return{type:"input"}}}),view:a});var v=n.getType("input"),b=v.model;n.addType("textarea",{model:v.model.extend({defaults:r({},b.prototype.defaults,{"custom-name":t.labelTextareaName,tagName:"textarea",traits:[h,f,g]})},{isComponent:function(e){if("TEXTAREA"==e.tagName)return{type:"textarea"}}}),view:a}),n.addType("select",{model:s.extend({defaults:r({},b.prototype.defaults,{"custom-name":t.labelSelectName,tagName:"select",traits:[h,{label:t.labelTraitOptions,type:"select-options"},g]})},{isComponent:function(e){if("SELECT"==e.tagName)return{type:"select"}}}),view:i.view.extend({events:{mousedown:"handleClick"},handleClick:function(e){e.preventDefault()}})}),n.addType("checkbox",{model:s.extend({defaults:r({},b.prototype.defaults,{"custom-name":t.labelCheckboxName,copyable:!1,attributes:{type:"checkbox"},traits:[u,h,p,g,m]}),init:function(){this.listenTo(this,"change:checked",this.handleChecked)},handleChecked:function(){var e=this.get("checked"),t=this.get("attributes"),n=this.view;e?t.checked="checked":delete t.checked,n&&(n.el.checked=e),this.set("attributes",r({},t))}},{isComponent:function(e){if("INPUT"==e.tagName&&"checkbox"==e.type)return{type:"checkbox"}}}),view:a.extend({events:{click:"handleClick"},handleClick:function(e){e.preventDefault()}})});var y=n.getType("checkbox");n.addType("radio",{model:y.model.extend({defaults:r({},y.model.prototype.defaults,{"custom-name":t.labelRadioName,attributes:{type:"radio"}})},{isComponent:function(e){if("INPUT"==e.tagName&&"radio"==e.type)return{type:"radio"}}}),view:y.view}),n.addType("button",{model:s.extend({defaults:r({},b.prototype.defaults,{"custom-name":t.labelButtonName,tagName:"button",traits:[{type:"content",label:"Text"},{label:t.labelTraitType,type:"select",name:"type",options:[{value:"submit",name:t.labelTypeSubmit},{value:"reset",name:t.labelTypeReset},{value:"button",name:t.labelTypeButton}]}]})},{isComponent:function(e){if("BUTTON"==e.tagName)return{type:"button"}}}),view:a.extend({events:{click:"handleClick"},init:function(){this.listenTo(this.model,"change:content",this.updateContent)},updateContent:function(){this.el.innerHTML=this.model.get("content")},handleClick:function(e){e.preventDefault()}})}),n.addType("label",{model:l.extend({defaults:r({},l.prototype.defaults,{"custom-name":t.labelNameLabel,tagName:"label",traits:[d]})},{isComponent:function(e){if("LABEL"==e.tagName)return{type:"label"}}}),view:c})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.TraitManager,n=t.getType("text");t.addType("content",{events:{keyup:"onChange"},onValueChange:function(){var e=this.model;e.target.set("content",e.get("value"))},getInputEl:function(){return this.inputEl||(this.inputEl=n.prototype.getInputEl.bind(this)(),this.inputEl.value=this.target.get("content")),this.inputEl}}),t.addType("select-options",{events:{keyup:"onChange"},onValueChange:function(){for(var e=this.model.get("value").trim().split("\n"),t=[],n=0;n<e.length;n++){var r=e[n].split("::"),i={tagName:"option",attributes:{}};r[1]?(i.content=r[1],i.attributes.value=r[0]):(i.content=r[0],i.attributes.value=r[0]),t.push(i)}this.target.get("components").reset(t),this.target.view.render()},getInputEl:function(){if(!this.$input){for(var e=this.target,t=(this.model.get("name"),""),n=e.get("components"),r=0;r<n.length;r++){var i=n.models[r];t+=(i.get("attributes").value||"")+"::"+i.get("content")+"\n"}this.$input=document.createElement("textarea"),this.$input.value=t}return this.$input}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.BlockManager;t.blocks.indexOf("form")>=0&&n.add("form",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,5.5 C22,5.2 21.5,5 20.75,5 L3.25,5 C2.5,5 2,5.2 2,5.5 L2,8.5 C2,8.8 2.5,9 3.25,9 L20.75,9 C21.5,9 22,8.8 22,8.5 L22,5.5 Z M21,8 L3,8 L3,6 L21,6 L21,8 Z" fill-rule="nonzero"></path>\n        <path class="gjs-block-svg-path" d="M22,10.5 C22,10.2 21.5,10 20.75,10 L3.25,10 C2.5,10 2,10.2 2,10.5 L2,13.5 C2,13.8 2.5,14 3.25,14 L20.75,14 C21.5,14 22,13.8 22,13.5 L22,10.5 Z M21,13 L3,13 L3,11 L21,11 L21,13 Z" fill-rule="nonzero"></path>\n        <rect class="gjs-block-svg-path" x="2" y="15" width="10" height="3" rx="0.5"></rect>\n      </svg>\n      <div class="gjs-block-label">'+t.labelForm+"</div>",category:"Forms",content:'\n        <form class="form">\n          <div class="form-group">\n            <label class="label">Name</label>\n            <input placeholder="Type here your name" class="input"/>\n          </div>\n          <div class="form-group">\n            <label class="label">Email</label>\n            <input type="email" placeholder="Type here your email" class="input"/>\n          </div>\n          <div class="form-group">\n            <label class="label">Gender</label>\n            <input type="checkbox" class="checkbox" value="M">\n            <label class="checkbox-label">M</label>\n            <input type="checkbox" class="checkbox" value="F">\n            <label class="checkbox-label">F</label>\n          </div>\n          <div class="form-group">\n            <label class="label">Message</label>\n            <textarea class="textarea"></textarea>\n          </div>\n          <div class="form-group">\n            <button type="submit" class="button">Send</button>\n          </div>\n        </form>\n      '}),t.blocks.indexOf("input")>=0&&n.add("input",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z"></path>\n        <polygon class="gjs-block-svg-path" points="4 10 5 10 5 14 4 14"></polygon>\n      </svg>\n      <div class="gjs-block-label">'+t.labelInputName+"</div>",category:"Forms",content:'<input class="input"/>'}),t.blocks.indexOf("textarea")>=0&&n.add("textarea",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,7.5 C22,6.6 21.5,6 20.75,6 L3.25,6 C2.5,6 2,6.6 2,7.5 L2,16.5 C2,17.4 2.5,18 3.25,18 L20.75,18 C21.5,18 22,17.4 22,16.5 L22,7.5 Z M21,17 L3,17 L3,7 L21,7 L21,17 Z"></path>\n        <polygon class="gjs-block-svg-path" points="4 8 5 8 5 12 4 12"></polygon>\n        <polygon class="gjs-block-svg-path" points="19 7 20 7 20 17 19 17"></polygon>\n        <polygon class="gjs-block-svg-path" points="20 8 21 8 21 9 20 9"></polygon>\n        <polygon class="gjs-block-svg-path" points="20 15 21 15 21 16 20 16"></polygon>\n      </svg>\n      <div class="gjs-block-label">'+t.labelTextareaName+"</div>",category:"Forms",content:'<textarea class="textarea"></textarea>'}),t.blocks.indexOf("select")>=0&&n.add("select",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path>\n        <polygon class="gjs-block-svg-path" transform="translate(18.500000, 12.000000) scale(1, -1) translate(-18.500000, -12.000000) " points="18.5 11 20 13 17 13"></polygon>\n        <rect class="gjs-block-svg-path" x="4" y="11.5" width="11" height="1"></rect>\n      </svg>\n      <div class="gjs-block-label">'+t.labelSelectName+"</div>",category:"Forms",content:'<select class="select">\n        '+(t.labelSelectOption?'<option value="">'+t.labelSelectOption+"</option>":"")+'\n        <option value="1">'+t.labelOption+" 1</option>\n        </select>"}),t.blocks.indexOf("button")>=0&&n.add("button",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path>\n        <rect class="gjs-block-svg-path" x="4" y="11.5" width="16" height="1"></rect>\n      </svg>\n      <div class="gjs-block-label">'+t.labelButtonName+"</div>",category:"Forms",content:'<button class="button">Send</button>'}),t.blocks.indexOf("label")>=0&&n.add("label",{label:'\n      <svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <path class="gjs-block-svg-path" d="M22,11.875 C22,11.35 21.5,11 20.75,11 L3.25,11 C2.5,11 2,11.35 2,11.875 L2,17.125 C2,17.65 2.5,18 3.25,18 L20.75,18 C21.5,18 22,17.65 22,17.125 L22,11.875 Z M21,17 L3,17 L3,12 L21,12 L21,17 Z" fill-rule="nonzero"></path>\n        <rect class="gjs-block-svg-path" x="2" y="5" width="14" height="5" rx="0.5"></rect>\n        <polygon class="gjs-block-svg-path" fill-rule="nonzero" points="4 13 5 13 5 16 4 16"></polygon>\n      </svg>\n      <div class="gjs-block-label">'+t.labelNameLabel+"</div>",category:"Forms",content:'<label class="label">Label</label>'}),t.blocks.indexOf("checkbox")>=0&&n.add("checkbox",{label:t.labelCheckboxName,attributes:{class:"fa fa-check-square"},category:"Forms",content:'<input type="checkbox" class="checkbox"/>'}),t.blocks.indexOf("radio")>=0&&n.add("radio",{label:t.labelRadioName,attributes:{class:"fa fa-dot-circle-o"},category:"Forms",content:'<input type="radio" class="radio"/>'})}}])},e.exports=r(n(0))},function(e,t,n){(function(t,r){!function(t,r){e.exports=r(n(0))}(0,(function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=50)}([function(e,t,n){"use strict";function r(e){return o(e,l.uint8array?new Uint8Array(e.length):new Array(e.length))}function i(e){return e}function o(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function s(e){var n=65536,r=t.getTypeOf(e),i=!0;if("uint8array"===r?i=f.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=f.applyCanBeUsed.nodebuffer),i)for(;n>1;)try{return f.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return f.stringifyByChar(e)}function a(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}var l=n(3),c=n(29),u=n(14),d=n(66),h=n(9);t.newBlob=function(e,n){t.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)r.push(String.fromCharCode.apply(null,"array"===t||"nodebuffer"===t?e.slice(i,Math.min(i+n,o)):e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&1===String.fromCharCode.apply(null,u.allocBuffer(1)).length}catch(e){return!1}}()}};t.applyFromCharCode=s;var p={};p.string={string:i,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:function(e){return o(e,u.allocBuffer(e.length))}},p.array={string:s,array:i,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u.newBufferFrom(e)}},p.arraybuffer={string:function(e){return s(new Uint8Array(e))},array:function(e){return a(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:i,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:s,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:i,nodebuffer:function(e){return u.newBufferFrom(e)}},p.nodebuffer={string:s,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return a(e,new Uint8Array(e.length))},nodebuffer:i},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return p[r][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":l.nodebuffer&&u.isBuffer(e)?"nodebuffer":l.uint8array&&e instanceof Uint8Array?"uint8array":l.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!l[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},t.delay=function(e,t,n){d((function(){e.apply(n||null,t||[])}))},t.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},t.prepareContent=function(e,n,i,o,s){return h.Promise.resolve(n).then((function(e){return l.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new h.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(n){var a=t.getTypeOf(n);return a?("arraybuffer"===a?n=t.transformTo("uint8array",n):"string"===a&&(s?n=c.decode(n):i&&!0!==o&&(n=r(n))),n):h.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},e.exports=r},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=o.prototype:(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t).__proto__=o.prototype:e=c(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),s=(e=i(e,r)).write(t,n);return s!==r&&(e=e.slice(0,s)),e}(e,t,n):function(e,t){if(o.isBuffer(t)){var n=0|u(t.length);return 0===(e=i(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?i(e,0):c(e,t);if("Buffer"===t.type&&B(t.data))return c(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(a(t),e=i(e,t<0?0:0|u(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t){var n=t.length<0?0:0|u(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function u(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function d(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return _(this,t,n);case"latin1":case"binary":return S(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var s,a=1,l=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,l/=2,c/=2,n/=2}if(i){var u=-1;for(s=n;s<l;s++)if(o(e,s)===o(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===c)return u*a}else-1!==u&&(s-=s-u),u=-1}else for(n+c>l&&(n=l-c),s=n;s>=0;s--){for(var d=!0,h=0;h<c;h++)if(o(e,s+h)!==o(t,h)){d=!1;break}if(d)return s}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function v(e,t,n,r){return F(N(t,e.length-n),e,n,r)}function b(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function y(e,t,n,r){return b(e,t,n,r)}function w(e,t,n,r){return F(R(t),e,n,r)}function x(e,t,n,r){return F(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(t,e.length-n),e,n,r)}function O(e,t,n){return V.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,l,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:s=e[i+2],128==(192&(o=e[i+1]))&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[i+2],a=e[i+3],128==(192&(o=e[i+1]))&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(r.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=H)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=H));return n}(r)}function _(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function j(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=L(e[o]);return i}function k(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function A(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,i){return i||M(e,0,n,4),z.write(e,t,n,r,23,4),n+4}function I(e,t,n,r,i){return i||M(e,0,n,8),z.write(e,t,n,r,52,8),n+8}function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function R(e){return V.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}var V=n(54),z=n(55),B=n(24);t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return s(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return function(e,t,n,r){return a(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}(null,e,t,n)},o.allocUnsafe=function(e){return l(null,e)},o.allocUnsafeSlow=function(e){return l(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!B(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=d,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):h.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),l=Math.min(s,a),c=this.slice(r,i),u=e.slice(t,n),d=0;d<l;++d)if(c[d]!==u[d]){s=c[d],a=u[d];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return y(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;o.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),z.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),z.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),z.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),z.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):A(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);E(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);E(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):A(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=o.isBuffer(e)?e:N(new o(e,r).toString()),l=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%l]}return this};var U=/[^+\/0-9A-Za-z-_]/g}).call(t,n(10))},function(e,t,n){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),t.blob=0===i.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!n(25).Readable}catch(e){t.nodestream=!1}}).call(t,n(2).Buffer)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)s.set(o=e[t],i),i+=o.length;return s}},s={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(i)},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);c.call(this,e),u.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var a=n(16),l=n(8);l.inherits=n(7);var c=n(26),u=n(17);l.inherits(r,c);for(var d=s(u.prototype),h=0;h<d.length;h++){var f=d[h];r.prototype[f]||(r.prototype[f]=u.prototype[f])}},function(e,t,n){"use strict";function r(){l.call(this,"utf-8 decode"),this.leftOver=null}function i(){l.call(this,"utf-8 encode")}for(var o=n(0),s=n(3),a=n(14),l=n(1),c=new Array(256),u=0;u<256;u++)c[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;c[254]=c[254]=1,t.utf8encode=function(e){return s.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,n,r,i,o,a=e.length,l=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=s.uint8array?new Uint8Array(l):new Array(l),o=0,i=0;o<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}(e)},t.utf8decode=function(e){return s.nodebuffer?o.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,r,i,s=e.length,a=new Array(2*s);for(n=0,t=0;t<s;)if((r=e[t++])<128)a[n++]=r;else if((i=c[r])>4)a[n++]=65533,t+=i-1;else{for(r&=2===i?31:3===i?15:7;i>1&&t<s;)r=r<<6|63&e[t++],i--;i>1?a[n++]=65533:r<65536?a[n++]=r:(a[n++]=55296|(r-=65536)>>10&1023,a[n++]=56320|1023&r)}return a.length!==n&&(a.subarray?a=a.subarray(0,n):a.length=n),o.applyFromCharCode(a)}(e=o.transformTo(s.uint8array?"uint8array":"array",e))},o.inherits(r,l),r.prototype.processChunk=function(e){var n=o.transformTo(s.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var r=n;(n=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),n.set(r,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var i=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+c[e[n]]>t?n:t}(n),a=n;i!==n.length&&(s.uint8array?(a=n.subarray(0,i),this.leftOver=n.subarray(i,n.length)):(a=n.slice(0,i),this.leftOver=n.slice(i,n.length))),this.push({data:t.utf8decode(a),meta:e.meta})},r.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=r,o.inherits(i,l),i.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=i},function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(t,n(2).Buffer)},function(e,t,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:n(80),e.exports={Promise:r}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(12).EventEmitter;n(7)(r,i),r.Readable=n(56),r.Writable=n(62),r.Duplex=n(63),r.Transform=n(64),r.PassThrough=n(65),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,e.end())}function s(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(l(),0===i.listenerCount(this,"error"))throw e}function l(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",l),c.removeListener("close",l),e.removeListener("close",l)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(c.on("end",o),c.on("close",s));var u=!1;return c.on("error",a),e.on("error",a),c.on("end",l),c.on("close",l),e.on("close",l),e.emit("pipe",c),e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(c=n.slice()).length,l=0;l<s;l++)c[l].apply(this,a);return!0},n.prototype.on=n.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(){p&&h&&(p=!1,h.length?f=h.concat(f):g=-1,f.length&&s())}function s(){if(!p){var e=i(o);p=!0;for(var t=f.length;t;){for(h=f,f=[];++g<t;)h&&h[g].run();g=-1,t=f.length}h=null,p=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var c,u,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(e){u=r}}();var h,f=[],p=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new a(e,t)),1!==f.length||p||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){e.exports={isNode:void 0!==t,newBufferFrom:function(e,n){return new t(e,n)},allocBuffer:function(e){return t.alloc?t.alloc(e):new t(e)},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(t,n(2).Buffer)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";(function(t){e.exports=!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick((function(){e.apply(null,o)}))}}:t.nextTick}).call(t,n(13))},function(e,t,n){"use strict";(function(t,r){function i(){}function o(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function s(e,t){x=x||n(5),this.objectMode=!!(e=e||{}).objectMode,t instanceof x&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark;this.highWaterMark=r||0===r?r:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.decodeStrings=!(!1===e.decodeStrings),this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?m(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}(e,n,r,t,i);else{var o=h(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||d(e,n),r?v(u,e,n,o,i):u(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new g(this),this.corkedRequestsFree.next=new g(this)}function a(e){if(x=x||n(5),!(this instanceof a||this instanceof x))return new a(e);this._writableState=new s(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),w.call(this)}function l(e,t,n,r,i){n=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=new b(t,n)),t}(t,n,r),b.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new o(n,r,i),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else c(e,t,!1,s,n,r,i);return a}function c(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function u(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),p(e,t)}function d(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=new Array(t.bufferedRequestCount),i=t.corkedRequestsFree;i.entry=n;for(var o=0;n;)r[o]=n,n=n.next,o+=1;c(e,t,!0,t.length,r,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=i.next,i.next=null}else{for(;n;){var s=n.chunk;if(c(e,t,!1,t.objectMode?1:s.length,s,n.encoding,n.callback),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function h(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function f(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function p(e,t){var n=h(t);return n&&(0===t.pendingcb?(f(e,t),t.finished=!0,e.emit("finish")):f(e,t)),n}function g(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=a;var m=n(16),v=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:m,b=n(2).Buffer;a.WritableState=s;var y=n(8);y.inherits=n(7);var w,x,O={deprecate:n(60)};!function(){try{w=n(11)}catch(e){}finally{w||(w=n(12).EventEmitter)}}(),b=n(2).Buffer,y.inherits(a,w),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:O.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}(),a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},a.prototype.write=function(e,t,n){var r=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),b.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=i),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),m(t,n)}(this,n):function(e,t,n,r){var i=!0;if(!b.isBuffer(n)&&"string"!=typeof n&&null!=n&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),m(r,o),i=!1}return i}(this,r,e,n)&&(r.pendingcb++,o=l(this,r,e,t,n)),o},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||d(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},a.prototype._write=function(e,t,n){n(new Error("not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,p(e,t),n&&(t.finished?m(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)}}).call(t,n(13),n(58).setImmediate)},function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return function(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){o(t,e)})):o(t)}))}function o(e,t){if(t)return e.emit("error",t);var n=e._transformState;if(e._writableState.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=i;var s=n(5),a=n(8);a.inherits=n(7),a.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(32)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";function r(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}var i=n(9),o=n(36),s=n(37),a=n(38);s=n(37),r.prototype={getContentWorker:function(){var e=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},r.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new s("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,s=0+n;e^=-1;for(var a=0;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var o=i,s=0+n;e^=-1;for(var a=0;a<s;a++)e=e>>>8^o[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length):0}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(11)},function(e,t,n){"use strict";(function(t){function r(e,t){C=C||n(5),this.objectMode=!!(e=e||{}).objectMode,t instanceof C&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark;this.highWaterMark=r||0===r?r:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(O||(O=n(27).StringDecoder),this.decoder=new O(e.encoding),this.encoding=e.encoding)}function i(e){if(C=C||n(5),!(this instanceof i))return new i(e);this._readableState=new r(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),y.call(this)}function o(e,t,n,r,i){var o=function(e,t){var n=null;return b.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,a(e)}}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i)s=new Error("stream.unshift() after end event"),e.emit("error",s);else{var l;!t.decoder||i||r||(n=t.decoder.write(n),l=!t.objectMode&&0===n.length),i||(t.reading=!1),l||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&a(e))),function(e,t){t.readingMore||(t.readingMore=!0,m(c,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function s(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=j?e=j:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function a(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(S("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?m(l,e):l(e))}function l(e){S("emit readable"),e.emit("readable"),h(e)}function c(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(S("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function u(e){S("readable nexttick read 0"),e.read(0)}function d(e,t){t.reading||(S("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),h(e),t.flowing&&!t.reading&&e.read(0)}function h(e){var t=e._readableState;if(S("flow",t.flowing),t.flowing)do{var n=e.read()}while(null!==n&&t.flowing)}function f(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder;if(0===r.length)return null;if(0===i)n=null;else if(t.objectMode)n=r.shift();else if(!e||e>=i)n=o?r.join(""):1===r.length?r[0]:b.concat(r,i),r.length=0;else if(e<r[0].length)n=(c=r[0]).slice(0,e),r[0]=c.slice(e);else if(e===r[0].length)n=r.shift();else{n=o?"":new b(e);for(var s=0,a=0,l=r.length;a<l&&s<e;a++){var c=r[0],u=Math.min(e-s,c.length);o?n+=c.slice(0,u):c.copy(n,s,0,u),u<c.length?r[0]=c.slice(u):r.shift(),s+=u}}return n}function p(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,m(g,t,e))}function g(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}e.exports=i;var m=n(16),v=n(24),b=n(2).Buffer;i.ReadableState=r;var y,w=(n(12),function(e,t){return e.listeners(t).length});!function(){try{y=n(11)}catch(e){}finally{y||(y=n(12).EventEmitter)}}(),b=n(2).Buffer;var x=n(8);x.inherits=n(7);var O,C,_=n(57),S=void 0;S=_&&_.debuglog?_.debuglog("stream"):function(){},x.inherits(i,y),i.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=new b(e,t),t=""),o(this,n,e,t,!1)},i.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},i.prototype.isPaused=function(){return!1===this._readableState.flowing},i.prototype.setEncoding=function(e){return O||(O=n(27).StringDecoder),this._readableState.decoder=new O(e),this._readableState.encoding=e,this};var j=8388608;i.prototype.read=function(e){S("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return S("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?p(this):a(this),null;if(0===(e=s(e,t))&&t.ended)return 0===t.length&&p(this),null;var r,i=t.needReadable;return S("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&S("length less than watermark",i=!0),(t.ended||t.reading)&&S("reading or ended",i=!1),i&&(S("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=s(n,t)),null===(r=e>0?f(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&p(this),null!==r&&this.emit("data",r),r},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,n){function r(e){S("onunpipe"),e===d&&o()}function i(){S("onend"),e.end()}function o(){S("cleanup"),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("drain",g),e.removeListener("error",a),e.removeListener("unpipe",r),d.removeListener("end",i),d.removeListener("end",o),d.removeListener("data",s),b=!0,!f.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){S("ondata"),!1===e.write(t)&&(1!==f.pipesCount||f.pipes[0]!==e||1!==d.listenerCount("data")||b||(S("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++),d.pause())}function a(t){S("onerror",t),u(),e.removeListener("error",a),0===w(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",c),u()}function c(){S("onfinish"),e.removeListener("close",l),u()}function u(){S("unpipe"),d.unpipe(e)}var d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,S("pipe count=%d opts=%j",f.pipesCount,n);var p=n&&!1===n.end||e===t.stdout||e===t.stderr?o:i;f.endEmitted?m(p):d.once("end",p),e.on("unpipe",r);var g=function(e){return function(){var t=e._readableState;S("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&w(e,"data")&&(t.flowing=!0,h(e))}}(d);e.on("drain",g);var b=!1;return d.on("data",s),e._events&&e._events.error?v(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",l),e.once("finish",c),e.emit("pipe",d),f.flowing||(S("pipe resume"),d.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},i.prototype.addListener=i.prototype.on=function(e,t){var n=y.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&a(this):m(u,this))}return n},i.prototype.resume=function(){var e=this._readableState;return e.flowing||(S("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,m(d,e,t))}(this,e)),this},i.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var i in e.on("end",(function(){if(S("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)})),e.on("data",(function(i){S("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!=i)&&(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n])}(["error","close","destroy","pause","resume"],(function(t){e.on(t,r.emit.bind(r,t))})),r._read=function(t){S("wrapped _read",t),n&&(n=!1,e.resume())},r},i._fromList=f}).call(t,n(13))},function(e,t,n){"use strict";function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(h.isEncoding===f||!f(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=s,this.end=a,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=l,this.end=c,t=3;break;default:return this.write=u,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd".repeat(n+2)}}(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function a(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}var h=n(61).Buffer,f=h.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd".repeat(this.lastTotal-this.lastNeed):t},r.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=i(t[r]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--r<n?0:(o=i(t[r]))>=0?(o>0&&(e.lastNeed=o-2),o):--r<n?0:(o=i(t[r]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}e.exports=r;var i=n(18),o=n(8);o.inherits=n(7),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var r=n(0),i=n(3),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var t,n,i,s,a,l,c=[],u=0,d=e.length,h=d,f="string"!==r.getTypeOf(e);u<e.length;)h=d-u,f?(t=e[u++],n=u<d?e[u++]:0,i=u<d?e[u++]:0):(t=e.charCodeAt(u++),n=u<d?e.charCodeAt(u++):0,i=u<d?e.charCodeAt(u++):0),s=(3&t)<<4|n>>4,a=h>1?(15&n)<<2|i>>6:64,l=h>2?63&i:64,c.push(o.charAt(t>>2)+o.charAt(s)+o.charAt(a)+o.charAt(l));return c.join("")},t.decode=function(e){var t,n,r,s,a,l,c=0,u=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var d,h=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&h--,e.charAt(e.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|h):new Array(0|h);c<e.length;)r=o.indexOf(e.charAt(c++)),t=(15&(s=o.indexOf(e.charAt(c++))))<<4|(a=o.indexOf(e.charAt(c++)))>>2,n=(3&a)<<6|(l=o.indexOf(e.charAt(c++))),d[u++]=r<<2|s>>4,64!==a&&(d[u++]=t),64!==l&&(d[u++]=n);return d}},function(e,t){var n=e.exports={version:"2.3.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(69);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(19),i=n(15).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){"use strict";(function(t){function r(e,t,n){switch(e){case"blob":return s.newBlob(s.transformTo("arraybuffer",t),n);case"base64":return c.encode(t);default:return s.transformTo(e,t)}}function i(e,n){var r,i=0,o=null,s=0;for(r=0;r<n.length;r++)s+=n[r].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(s),r=0;r<n.length;r++)o.set(n[r],i),i+=n[r].length;return o;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}function o(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,s.checkSupport(r),this._worker=e.pipe(new a(r)),e.lock()}catch(e){this._worker=new l("error"),this._worker.error(e)}}var s=n(0),a=n(82),l=n(1),c=n(29),u=n(3),d=n(9),h=null;if(u.nodestream)try{h=n(83)}catch(e){}o.prototype={accumulate:function(e){return function(e,t){return new d.Promise((function(n,o){var s=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,n){s.push(e),t&&t(n)})).on("error",(function(e){s=[],o(e)})).on("end",(function(){try{var e=r(l,i(a,s),c);n(e)}catch(e){o(e)}s=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return this._worker.on(e,"data"===e?function(e){t.call(n,e.data,e.meta)}:function(){s.delay(t,arguments,n)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(s.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:"nodebuffer"!==this._outputType},e)}},e.exports=o}).call(t,n(2).Buffer)},function(e,t,n){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},function(e,t,n){"use strict";function r(e){o.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}var i=n(0),o=n(1);i.inherits(r,o),r.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=r},function(e,t,n){"use strict";function r(e){o.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}var i=n(0),o=n(1);i.inherits(r,o),r.prototype.processChunk=function(e){e&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+e.data.length),o.prototype.processChunk.call(this,e)},e.exports=r},function(e,t,n){"use strict";function r(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var i=n(1),o=n(22);n(0).inherits(r,i),r.prototype.processChunk=function(e){this.streamInfo.crc32=o(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=r},function(e,t,n){"use strict";var r=n(1);t.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=n(86)},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var o=r,s=i+n;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var i=n(4),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var a=new i.Buf8(256),l=0;l<256;l++)a[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;a[254]=a[254]=1,t.string2buf=function(e){var t,n,r,o,s,a=e.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),s=0,o=0;s<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,i,o,s,l=t||e.length,c=new Array(2*l);for(i=0,n=0;n<l;)if((o=e[n++])<128)c[i++]=o;else if((s=a[o])>4)c[i++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&n<l;)o=o<<6|63&e[n++],s--;s>1?c[i++]=65533:o<65536?c[i++]=o:(c[i++]=55296|(o-=65536)>>10&1023,c[i++]=56320|1023&o)}return r(c,i)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";t.LOCAL_FILE_HEADER="PK\x03\x04",t.CENTRAL_FILE_HEADER="PK\x01\x02",t.CENTRAL_DIRECTORY_END="PK\x05\x06",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",t.DATA_DESCRIPTOR="PK\x07\b"},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(47),s=n(100),a=n(101),l=n(49);e.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new l(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new s(e)}},function(e,t,n){"use strict";function r(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}var i=n(48);n(0).inherits(r,i),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}var i=n(0);r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=n(47);n(0).inherits(r,i),r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(51)),o=r(n(52)),s=r(n(103));t.default=i.default.plugins.add("gjs-plugin-export",(function(e,t){var n=t||{},r=e.getConfig().stylePrefix,i=document.createElement("BUTTON"),a={addExportBtn:1,btnLabel:"Export to ZIP",preHtml:'<!doctype html><html lang="en"><head><meta charset="utf-8"><link rel="stylesheet" href="./css/style.css"></head><body>',postHtml:"</body><html>",preCss:"",postCss:""};for(var l in a)l in n||(n[l]=a[l]);i.innerHTML=n.btnLabel,i.className=r+"btn-prim",e.Commands.add("gjs-export-zip",{run:function(){var t=new o.default,r=t.folder("css"),i="grapesjs_template_"+Date.now()+".zip";t.file("index.html",n.preHtml+e.getHtml()+n.postHtml),r.file("style.css",n.preCss+e.getCss()+n.postCss),t.generateAsync({type:"blob"}).then((function(e){s.default.saveAs(e,i)}))}}),n.addExportBtn&&e.on("run:export-template",(function(){e.Modal.getContentEl().appendChild(i),i.onclick=function(){e.runCommand("gjs-export-zip")}}))}))},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=n(53)).loadAsync=n(98),r.support=n(3),r.defaults=n(35),r.version="3.1.5",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=n(9),e.exports=r},function(e,t,n){"use strict";function r(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var i=n(6),o=n(0),s=n(1),a=n(34),l=n(35),c=n(21),u=n(84),d=n(85),h=n(14),f=n(97),p=function(e,t,n){var r,i,a=o.getTypeOf(t),d=o.extend(n||{},l);d.date=d.date||new Date,null!==d.compression&&(d.compression=d.compression.toUpperCase()),"string"==typeof d.unixPermissions&&(d.unixPermissions=parseInt(d.unixPermissions,8)),d.unixPermissions&&16384&d.unixPermissions&&(d.dir=!0),d.dosPermissions&&16&d.dosPermissions&&(d.dir=!0),d.dir&&(e=m(e)),d.createFolders&&(r=g(e))&&v.call(this,r,!0),n&&void 0!==n.binary||(d.binary=!("string"===a&&!1===d.binary&&!1===d.base64)),(t instanceof c&&0===t.uncompressedSize||d.dir||!t||0===t.length)&&(d.base64=!1,d.binary=!0,t="",d.compression="STORE",a="string"),i=t instanceof c||t instanceof s?t:h.isNode&&h.isStream(t)?new f(e,t):o.prepareContent(e,t,d.binary,d.optimizedBinaryString,d.base64);var p=new u(e,i,d);this.files[e]=p},g=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||p.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1===arguments.length){if(r(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null}return p.call(this,e=this.root+e,t,n),this},folder:function(e){if(!e)return this;if(r(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=v.call(this,this.root+e),n=this.clone();return n.root=t.name,n},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS"),t=d.generateWorker(this,n,n.comment||this.comment||"")}catch(e){(t=new s("error")).error(e)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};e.exports=b},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function o(e,t,n){for(var r=[],o=t;o<n;o+=3)r.push(i((e[o]<<16)+(e[o+1]<<8)+e[o+2]));return r.join("")}t.byteLength=function(e){return 3*e.length/4-r(e)},t.toByteArray=function(e){var t,n,i,o,s,c=e.length;o=r(e),s=new l(3*c/4-o),n=o>0?c-4:c;var u=0;for(t=0;t<n;t+=4)i=a[e.charCodeAt(t)]<<18|a[e.charCodeAt(t+1)]<<12|a[e.charCodeAt(t+2)]<<6|a[e.charCodeAt(t+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===o?(i=a[e.charCodeAt(t)]<<2|a[e.charCodeAt(t+1)]>>4,s[u++]=255&i):1===o&&(i=a[e.charCodeAt(t)]<<10|a[e.charCodeAt(t+1)]<<4|a[e.charCodeAt(t+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i="",a=[],l=0,c=n-r;l<c;l+=16383)a.push(o(e,l,l+16383>c?c:l+16383));return 1===r?(i+=s[(t=e[n-1])>>2],i+=s[t<<4&63],i+="=="):2===r&&(i+=s[(t=(e[n-2]<<8)+e[n-1])>>10],i+=s[t>>4&63],i+=s[t<<2&63],i+="="),a.push(i),a.join("")};for(var s=[],a=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,d=c.length;u<d;++u)s[u]=c[u],a[c.charCodeAt(u)]=u;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*g}},function(e,t,n){var r=function(){try{return n(11)}catch(e){}}();(t=e.exports=n(26)).Stream=r||t,t.Readable=t,t.Writable=n(17),t.Duplex=n(5),t.Transform=n(18),t.PassThrough=n(28)},function(e,t){},function(e,n,i){function o(e,t){this._id=e,this._clearFn=t}var s=Function.prototype.apply;n.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i(59),n.setImmediate=t,n.clearImmediate=r},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){delete a[e]}function i(e){if(l)setTimeout(i,0,e);else{var t=a[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{r(e),l=!1}}}}if(!e.setImmediate){var o,s=1,a={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){i(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},o=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;o=function(t){var n=c.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():o=function(e){setTimeout(i,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return a[s]={callback:e,args:t},o(s),s++},u.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(10),n(13))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(t,n(10))},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return s(e,t,n)}var o=n(2),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=i),r(s,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,n){e.exports=n(17)},function(e,t,n){e.exports=n(5)},function(e,t,n){e.exports=n(18)},function(e,t,n){e.exports=n(28)},function(e,t,n){n(67),e.exports=n(30).setImmediate},function(e,t,n){var r=n(68),i=n(76);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){var r=n(15),i=n(30),o=n(31),s=n(70),a=function(e,t,n){var l,c,u,d=e&a.F,h=e&a.G,f=e&a.S,p=e&a.P,g=e&a.B,m=e&a.W,v=h?i:i[t]||(i[t]={}),b=v.prototype,y=h?r:f?r[t]:(r[t]||{}).prototype;for(l in h&&(n=t),n)(c=!d&&y&&void 0!==y[l])&&l in v||(u=c?y[l]:n[l],v[l]=h&&"function"!=typeof y[l]?n[l]:g&&c?o(u,r):m&&y[l]==u?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):p&&"function"==typeof u?o(Function.call,u):u,p&&((v.virtual||(v.virtual={}))[l]=u,e&a.R&&b&&!b[l]&&s(b,l,u)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(71),i=n(75);e.exports=n(20)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(72),i=n(73),o=n(74),s=Object.defineProperty;t.f=n(20)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(19);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(20)&&!n(32)((function(){return 7!=Object.defineProperty(n(33)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(19);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r,i,o,s=n(31),a=n(77),l=n(78),c=n(33),u=n(15),d=u.process,h=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,g=0,m={},v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){v.call(e.data)};h&&f||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){a("function"==typeof e?e:Function(e),t)},r(g),g},f=function(e){delete m[e]},"process"==n(79)(d)?r=function(e){d.nextTick(s(v,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,r=s(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(e){u.postMessage(e+"","*")},u.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(s(v,e,1),0)}),e.exports={set:h,clear:f}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){e.exports=n(15).document&&document.documentElement},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,e!==r&&l(this,e)}function o(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function s(e,t,n){u((function(){var r;try{r=t(n)}catch(t){return d.reject(e,t)}r===e?d.reject(e,new TypeError("Cannot resolve promise with itself")):d.resolve(e,r)}))}function a(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function l(e,t){function n(t){i||(i=!0,d.reject(e,t))}function r(t){i||(i=!0,d.resolve(e,t))}var i=!1,o=c((function(){t(r,n)}));"error"===o.status&&n(o.value)}function c(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}var u=n(81),d={},h=["REJECTED"],f=["FULFILLED"],p=["PENDING"];e.exports=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===f||"function"!=typeof t&&this.state===h)return this;var n=new this.constructor(r);return this.state!==p?s(n,this.state===f?e:t,this.outcome):this.queue.push(new o(n,e,t)),n},o.prototype.callFulfilled=function(e){d.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){s(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){d.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){s(this.promise,this.onRejected,e)},d.resolve=function(e,t){var n=c(a,t);if("error"===n.status)return d.reject(e,n.value);var r=n.value;if(r)l(e,r);else{e.state=f,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},d.reject=function(e,t){e.state=h,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},i.resolve=function(e){return e instanceof this?e:d.resolve(new this(r),e)},i.reject=function(e){var t=new this(r);return d.reject(t,e)},i.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,a=-1,l=new this(r);++a<n;)!function(e,r){t.resolve(e).then((function(e){o[r]=e,++s!==n||i||(i=!0,d.resolve(l,o))}),(function(e){i||(i=!0,d.reject(l,e))}))}(e[a],a);return l},i.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var o=-1,s=new this(r);++o<n;)!function(e){t.resolve(e).then((function(e){i||(i=!0,d.resolve(s,e))}),(function(e){i||(i=!0,d.reject(s,e))}))}(e[o]);return s}},function(e,t,n){"use strict";(function(t){function n(){c=!0;for(var e,t,n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}c=!1}var r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(n),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),r=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var l=new t.MessageChannel;l.port1.onmessage=n,r=function(){l.port2.postMessage(0)}}var c,u=[];e.exports=function(e){1!==u.push(e)||c||r()}}).call(t,n(10))},function(e,t,n){"use strict";function r(e){i.call(this,"ConvertWorker to "+e),this.destType=e}var i=n(1),o=n(0);o.inherits(r,i),r.prototype.processChunk=function(e){this.push({data:o.transformTo(this.destType,e.data),meta:e.meta})},e.exports=r},function(e,t,n){"use strict";function r(e,t,n){i.call(this,t),this._helper=e;var r=this;e.on("data",(function(e,t){r.push(e)||r._helper.pause(),n&&n(t)})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}var i=n(25).Readable;n(0).inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},function(e,t,n){"use strict";var r=n(34),i=n(36),o=n(6),s=n(21),a=n(1),l=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};l.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!i&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&i&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new a("error")).error(e)}return new r(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof a?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)l.prototype[c[d]]=u;e.exports=l},function(e,t,n){"use strict";var r=n(39),i=n(96),o=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i};t.generateWorker=function(e,t,n){var r=new i(t.streamFiles,n,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,n){s++;var i=o(n.options.compression,t.compression),a=n.dir,l=n.date;n._compressWorker(i,n.options.compressionOptions||t.compressionOptions||{}).withStreamInfo("file",{name:e,dir:a,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(r)})),r.entriesCount=s}catch(e){r.error(e)}return r}},function(e,t,n){"use strict";function r(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=n(87),s=n(0),a=n(1),l=i?"uint8array":"array";t.magic="\b\0",s.inherits(r,a),r.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(l,e.data),!1)},r.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},r.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},r.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},t.compressWorker=function(e){return new r("Deflate",e)},t.uncompressWorker=function(){return new r("Inflate",{})}},function(e,t,n){"use strict";var r={};(0,n(4).assign)(r,n(88),n(91),n(44)),e.exports=r},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==d)throw new Error(l[n]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=o.deflateSetDictionary(this.strm,i))!==d)throw new Error(l[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}var o=n(89),s=n(4),a=n(42),l=n(23),c=n(43),u=Object.prototype.toString,d=0,h=-1,f=0,p=8;r.prototype.push=function(e,t){var n,r,i=this.strm,l=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,i.input="string"==typeof e?a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(l),i.next_out=0,i.avail_out=l),1!==(n=o.deflate(i,r))&&n!==d)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||this.onData("string"===this.options.to?a.buf2binstring(s.shrinkBuf(i.output,i.next_out)):s.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===d):2!==r||(this.onEnd(d),i.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===d&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=r,t.deflate=i,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,i(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,i(e,t)}},function(e,t,n){"use strict";function r(e,t){return e.msg=k[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(C.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function a(e,t){_._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function c(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function u(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,C.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=S(e.adler,t,i,n):2===e.state.wrap&&(e.adler=j(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function d(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-W?e.strstart-(e.w_size-W):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+$,f=c[o+s-1],p=c[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+s]===p&&c[n+s-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<h);if(r=$-(h-o),o=h-$,r>s){if(e.match_start=t,s=r,r>=a)break;f=c[o+s-1],p=c[o+s]}}}while((t=d[t&u])>l&&0!=--i);return s<=e.lookahead?s:e.lookahead}function h(e){var t,n,r,i,o,s=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-W)){C.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=s?r-s:0}while(--n);t=n=s;do{r=e.prev[--t],e.prev[t]=r>=s?r-s:0}while(--n);i+=s}if(0===e.strm.avail_in)break;if(n=u(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=U)for(e.ins_h=e.window[o=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+U-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<U)););}while(e.lookahead<W&&0!==e.strm.avail_in)}function f(e,t){for(var n,r;;){if(e.lookahead<W){if(h(e),e.lookahead<W&&t===T)return Z;if(0===e.lookahead)break}if(n=0,e.lookahead>=U&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-W&&(e.match_length=d(e,n)),e.match_length>=U)if(r=_._tr_tally(e,e.strstart-e.match_start,e.match_length-U),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=U){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=_._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(a(e,!1),0===e.strm.avail_out))return Z}return e.insert=e.strstart<U-1?e.strstart:U-1,t===E?(a(e,!0),0===e.strm.avail_out?J:Q):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?Z:X}function p(e,t){for(var n,r,i;;){if(e.lookahead<W){if(h(e),e.lookahead<W&&t===T)return Z;if(0===e.lookahead)break}if(n=0,e.lookahead>=U&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=U-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-W&&(e.match_length=d(e,n),e.match_length<=5&&(e.strategy===D||e.match_length===U&&e.strstart-e.match_start>4096)&&(e.match_length=U-1)),e.prev_length>=U&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-U,r=_._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-U),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=U-1,e.strstart++,r&&(a(e,!1),0===e.strm.avail_out))return Z}else if(e.match_available){if((r=_._tr_tally(e,0,e.window[e.strstart-1]))&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Z}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=_._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<U-1?e.strstart:U-1,t===E?(a(e,!0),0===e.strm.avail_out?J:Q):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?Z:X}function g(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=$){if(h(e),e.lookahead<=$&&t===T)return Z;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=U&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+$;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=$-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=U?(n=_._tr_tally(e,1,e.match_length-U),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=_._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(a(e,!1),0===e.strm.avail_out))return Z}return e.insert=0,t===E?(a(e,!0),0===e.strm.avail_out?J:Q):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?Z:X}function m(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===T)return Z;break}if(e.match_length=0,n=_._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return Z}return e.insert=0,t===E?(a(e,!0),0===e.strm.avail_out?J:Q):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?Z:X}function v(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=N,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*B),this.dyn_dtree=new C.Buf16(2*(2*V+1)),this.bl_tree=new C.Buf16(2*(2*z+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(H+1),this.heap=new C.Buf16(2*F+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*F+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function y(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=L,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?q:K,e.adler=2===t.wrap?0:1,t.last_flush=T,_._tr_init(t),P):r(e,A)}function w(e){var t=y(e);return t===P&&function(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=O[e.level].max_lazy,e.good_match=O[e.level].good_length,e.nice_match=O[e.level].nice_length,e.max_chain_length=O[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=U-1,e.match_available=0,e.ins_h=0}(e.state),t}function x(e,t,n,i,o,s){if(!e)return A;var a=1;if(t===M&&(t=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),o<1||o>R||n!==N||i<8||i>15||t<0||t>9||s<0||s>I)return r(e,A);8===i&&(i=9);var l=new b;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+U-1)/U),l.window=new C.Buf8(2*l.w_size),l.head=new C.Buf16(l.hash_size),l.prev=new C.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new C.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,w(e)}var O,C=n(4),_=n(90),S=n(40),j=n(41),k=n(23),T=0,E=4,P=0,A=-2,M=-1,D=1,I=4,L=2,N=8,R=9,F=286,V=30,z=19,B=2*F+1,H=15,U=3,$=258,W=$+U+1,q=42,G=103,K=113,Y=666,Z=1,X=2,J=3,Q=4;O=[new v(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===T)return Z;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,a(e,!1),0===e.strm.avail_out))return Z;if(e.strstart-e.block_start>=e.w_size-W&&(a(e,!1),0===e.strm.avail_out))return Z}return e.insert=0,t===E?(a(e,!0),0===e.strm.avail_out?J:Q):(e.strstart>e.block_start&&a(e,!1),Z)})),new v(4,4,8,4,f),new v(4,5,16,8,f),new v(4,6,32,32,f),new v(4,4,16,16,p),new v(8,16,32,32,p),new v(8,16,128,128,p),new v(8,32,128,256,p),new v(32,128,258,1024,p),new v(32,258,258,4096,p)],t.deflateInit=function(e,t){return x(e,t,N,15,8,0)},t.deflateInit2=x,t.deflateReset=w,t.deflateResetKeep=y,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?A:(e.state.gzhead=t,P):A},t.deflate=function(e,t){var n,a,u,d;if(!e||!e.state||t>5||t<0)return e?r(e,A):A;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===Y&&t!==E)return r(e,0===e.avail_out?-5:A);if(a.strm=e,n=a.last_flush,a.last_flush=t,a.status===q)if(2===a.wrap)e.adler=0,l(a,31),l(a,139),l(a,8),a.gzhead?(l(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),l(a,255&a.gzhead.time),l(a,a.gzhead.time>>8&255),l(a,a.gzhead.time>>16&255),l(a,a.gzhead.time>>24&255),l(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),l(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(l(a,255&a.gzhead.extra.length),l(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=j(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(l(a,0),l(a,0),l(a,0),l(a,0),l(a,0),l(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),l(a,3),a.status=K);else{var h=N+(a.w_bits-8<<4)<<8;h|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(h|=32),h+=31-h%31,a.status=K,c(a,h),0!==a.strstart&&(c(a,e.adler>>>16),c(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(u=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>u&&(e.adler=j(e.adler,a.pending_buf,a.pending-u,u)),s(e),u=a.pending,a.pending!==a.pending_buf_size));)l(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>u&&(e.adler=j(e.adler,a.pending_buf,a.pending-u,u)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(e.adler=j(e.adler,a.pending_buf,a.pending-u,u)),s(e),u=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,l(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>u&&(e.adler=j(e.adler,a.pending_buf,a.pending-u,u)),0===d&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(e.adler=j(e.adler,a.pending_buf,a.pending-u,u)),s(e),u=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,l(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>u&&(e.adler=j(e.adler,a.pending_buf,a.pending-u,u)),0===d&&(a.status=G)}else a.status=G;if(a.status===G&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(e),a.pending+2<=a.pending_buf_size&&(l(a,255&e.adler),l(a,e.adler>>8&255),e.adler=0,a.status=K)):a.status=K),0!==a.pending){if(s(e),0===e.avail_out)return a.last_flush=-1,P}else if(0===e.avail_in&&i(t)<=i(n)&&t!==E)return r(e,-5);if(a.status===Y&&0!==e.avail_in)return r(e,-5);if(0!==e.avail_in||0!==a.lookahead||t!==T&&a.status!==Y){var f=2===a.strategy?m(a,t):3===a.strategy?g(a,t):O[a.level].func(a,t);if(f!==J&&f!==Q||(a.status=Y),f===Z||f===J)return 0===e.avail_out&&(a.last_flush=-1),P;if(f===X&&(1===t?_._tr_align(a):5!==t&&(_._tr_stored_block(a,0,0,!1),3===t&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(e),0===e.avail_out))return a.last_flush=-1,P}return t!==E?P:a.wrap<=0?1:(2===a.wrap?(l(a,255&e.adler),l(a,e.adler>>8&255),l(a,e.adler>>16&255),l(a,e.adler>>24&255),l(a,255&e.total_in),l(a,e.total_in>>8&255),l(a,e.total_in>>16&255),l(a,e.total_in>>24&255)):(c(a,e.adler>>>16),c(a,65535&e.adler)),s(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?P:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==q&&69!==t&&73!==t&&91!==t&&t!==G&&t!==K&&t!==Y?r(e,A):(e.state=null,t===K?r(e,-3):P):A},t.deflateSetDictionary=function(e,t){var n,r,i,s,a,l,c,u,d=t.length;if(!e||!e.state)return A;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==q||n.lookahead)return A;for(1===s&&(e.adler=S(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===s&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new C.Buf8(n.w_size),C.arraySet(u,t,d-n.w_size,n.w_size,0),t=u,d=n.w_size),a=e.avail_in,l=e.next_in,c=e.input,e.avail_in=d,e.next_in=0,e.input=t,h(n);n.lookahead>=U;){r=n.strstart,i=n.lookahead-(U-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+U-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=U-1,h(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=U-1,n.match_available=0,e.next_in=l,e.input=c,e.avail_in=a,n.wrap=s,P},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function s(e){return e<256?z[e]:z[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,n){e.bi_valid>E-n?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>E-e.bi_valid,e.bi_valid+=n-E):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function c(e,t,n){l(e,n[2*t],n[2*t+1])}function u(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function d(e,t,n){var r,i,o=new Array(T+1),s=0;for(r=1;r<=T;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=u(o[a]++,a))}}function h(e){var t;for(t=0;t<_;t++)e.dyn_ltree[2*t]=0;for(t=0;t<S;t++)e.dyn_dtree[2*t]=0;for(t=0;t<j;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*P]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function f(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function p(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function g(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&p(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!p(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function m(e,t,n){var r,i,o,a,u=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],i=e.pending_buf[e.l_buf+u],u++,0===r?c(e,i,t):(c(e,(o=B[i])+C+1,t),0!==(a=I[o])&&l(e,i-=H[o],a),c(e,o=s(--r),n),0!==(a=L[o])&&l(e,r-=U[o],a))}while(u<e.last_lit);c(e,P,t)}function v(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=k,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)g(e,o,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],g(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,g(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,s,a,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=T;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<k;n++)(o=l[2*l[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,g++),l[2*r+1]=o,r>c||(e.bl_count[o]++,s=0,r>=f&&(s=h[r-f]),e.opt_len+=(a=l[2*r])*(o+s),d&&(e.static_len+=a*(u[2*r+1]+s)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>c||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(e,t),d(o,c,e.bl_count)}function b(e,t,n){var r,i,o=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<l&&i===s||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*A]++):a<=10?e.bl_tree[2*M]++:e.bl_tree[2*D]++,a=0,o=i,0===s?(l=138,c=3):i===s?(l=6,c=3):(l=7,c=4))}function y(e,t,n){var r,i,o=-1,s=t[1],a=0,u=7,d=4;for(0===s&&(u=138,d=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<u&&i===s)){if(a<d)do{c(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(c(e,i,e.bl_tree),a--),c(e,A,e.bl_tree),l(e,a-3,2)):a<=10?(c(e,M,e.bl_tree),l(e,a-3,3)):(c(e,D,e.bl_tree),l(e,a-11,7));a=0,o=i,0===s?(u=138,d=3):i===s?(u=6,d=3):(u=7,d=4)}}function w(e,t,n,r){l(e,(O<<1)+(r?1:0),3),function(e,t,n,r){f(e),a(e,n),a(e,~n),x.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}var x=n(4),O=0,C=256,_=C+1+29,S=30,j=19,k=2*_+1,T=15,E=16,P=256,A=16,M=17,D=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(_+2));r(F);var V=new Array(2*S);r(V);var z=new Array(512);r(z);var B=new Array(256);r(B);var H=new Array(29);r(H);var U=new Array(S);r(U);var $,W,q,G=!1;t._tr_init=function(e){G||(function(){var e,t,n,r,o,s=new Array(T+1);for(n=0,r=0;r<28;r++)for(H[r]=n,e=0;e<1<<I[r];e++)B[n++]=r;for(B[n-1]=r,o=0,r=0;r<16;r++)for(U[r]=o,e=0;e<1<<L[r];e++)z[o++]=r;for(o>>=7;r<S;r++)for(U[r]=o<<7,e=0;e<1<<L[r]-7;e++)z[256+o++]=r;for(t=0;t<=T;t++)s[t]=0;for(e=0;e<=143;)F[2*e+1]=8,e++,s[8]++;for(;e<=255;)F[2*e+1]=9,e++,s[9]++;for(;e<=279;)F[2*e+1]=7,e++,s[7]++;for(;e<=287;)F[2*e+1]=8,e++,s[8]++;for(d(F,_+1,s),e=0;e<S;e++)V[2*e+1]=5,V[2*e]=u(e,5);$=new i(F,I,C+1,_,T),W=new i(V,L,0,S,T),q=new i(new Array(0),N,0,j,7)}(),G=!0),e.l_desc=new o(e.dyn_ltree,$),e.d_desc=new o(e.dyn_dtree,W),e.bl_desc=new o(e.bl_tree,q),e.bi_buf=0,e.bi_valid=0,h(e)},t._tr_stored_block=w,t._tr_flush_block=function(e,t,n,r){var i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<C;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),v(e,e.l_desc),v(e,e.d_desc),s=function(e){var t;for(b(e,e.dyn_ltree,e.l_desc.max_code),b(e,e.dyn_dtree,e.d_desc.max_code),v(e,e.bl_desc),t=j-1;t>=3&&0===e.bl_tree[2*R[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(o=e.static_len+3+7>>>3)<=(i=e.opt_len+3+7>>>3)&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?w(e,t,n,r):4===e.strategy||o===i?(l(e,2+(r?1:0),3),m(e,F,V)):(l(e,4+(r?1:0),3),function(e,t,n,r){var i;for(l(e,t-257,5),l(e,n-1,5),l(e,r-4,4),i=0;i<r;i++)l(e,e.bl_tree[2*R[i]+1],3);y(e,e.dyn_ltree,t-1),y(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),m(e,e.dyn_ltree,e.dyn_dtree)),h(e),r&&f(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(B[n]+C+1)]++,e.dyn_dtree[2*s(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){l(e,2,3),c(e,P,F),function(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(c[n]);this.header=new d,o.inflateGetHeader(this.strm,this.header)}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}var o=n(92),s=n(4),a=n(42),l=n(44),c=n(23),u=n(43),d=n(95),h=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,i,c,u,d,f=this.strm,p=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,f.input="string"==typeof e?a.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?new Uint8Array(e):e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(p),f.next_out=0,f.avail_out=p),(n=o.inflate(f,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&g&&(d="string"==typeof g?a.string2buf(g):"[object ArrayBuffer]"===h.call(g)?new Uint8Array(g):g,n=o.inflateSetDictionary(this.strm,d)),n===l.Z_BUF_ERROR&&!0===m&&(n=l.Z_OK,m=!1),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==l.Z_STREAM_END&&(0!==f.avail_in||r!==l.Z_FINISH&&r!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(i=a.utf8border(f.output,f.next_out),c=f.next_out-i,u=a.buf2string(f.output,i),f.next_out=c,f.avail_out=p-c,c&&s.arraySet(f.output,f.output,i,c,0),this.onData(u)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(r=l.Z_FINISH),r===l.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):r!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),f.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===l.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=i,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,i(e,t)},t.ungzip=i},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=O,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new f.Buf32(S),t.distcode=t.distdyn=new f.Buf32(j),t.sane=1,t.back=-1,w):x}function s(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,o(e)):x}function a(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?x:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,s(e))):x}function l(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,(n=a(e,t))!==w&&(e.state=null),n):x}function c(e){if(k){var t;for(d=new f.Buf32(512),h=new f.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(v(b,e.lens,0,288,d,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;v(y,e.lens,0,32,h,0,e.work,{bits:5}),k=!1}e.lencode=d,e.lenbits=9,e.distcode=h,e.distbits=5}function u(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new f.Buf8(o.wsize)),r>=o.wsize?(f.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),f.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(f.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var d,h,f=n(4),p=n(40),g=n(41),m=n(93),v=n(94),b=1,y=2,w=0,x=-2,O=1,C=12,_=30,S=852,j=592,k=!0;t.inflateReset=s,t.inflateReset2=a,t.inflateResetKeep=o,t.inflateInit=function(e){return l(e,15)},t.inflateInit2=l,t.inflate=function(e,t){var n,i,o,s,a,l,d,h,S,j,k,T,E,P,A,M,D,I,L,N,R,F,V,z,B=0,H=new f.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return x;(n=e.state).mode===C&&(n.mode=13),a=e.next_out,o=e.output,s=e.next_in,i=e.input,h=n.hold,S=n.bits,j=l=e.avail_in,k=d=e.avail_out,F=w;e:for(;;)switch(n.mode){case O:if(0===n.wrap){n.mode=13;break}for(;S<16;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if(2&n.wrap&&35615===h){n.check=0,H[0]=255&h,H[1]=h>>>8&255,n.check=g(n.check,H,2,0),h=0,S=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=_;break}if(8!=(15&h)){e.msg="unknown compression method",n.mode=_;break}if(S-=4,R=8+(15&(h>>>=4)),0===n.wbits)n.wbits=R;else if(R>n.wbits){e.msg="invalid window size",n.mode=_;break}n.dmax=1<<R,e.adler=n.check=1,n.mode=512&h?10:C,h=0,S=0;break;case 2:for(;S<16;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if(n.flags=h,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=_;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=_;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(H[0]=255&h,H[1]=h>>>8&255,n.check=g(n.check,H,2,0)),h=0,S=0,n.mode=3;case 3:for(;S<32;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}n.head&&(n.head.time=h),512&n.flags&&(H[0]=255&h,H[1]=h>>>8&255,H[2]=h>>>16&255,H[3]=h>>>24&255,n.check=g(n.check,H,4,0)),h=0,S=0,n.mode=4;case 4:for(;S<16;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(H[0]=255&h,H[1]=h>>>8&255,n.check=g(n.check,H,2,0)),h=0,S=0,n.mode=5;case 5:if(1024&n.flags){for(;S<16;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(H[0]=255&h,H[1]=h>>>8&255,n.check=g(n.check,H,2,0)),h=0,S=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((T=n.length)>l&&(T=l),T&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),f.arraySet(n.head.extra,i,s,T,R)),512&n.flags&&(n.check=g(n.check,i,T,s)),l-=T,s+=T,n.length-=T),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===l)break e;T=0;do{R=i[s+T++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R))}while(R&&T<l);if(512&n.flags&&(n.check=g(n.check,i,T,s)),l-=T,s+=T,R)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===l)break e;T=0;do{R=i[s+T++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R))}while(R&&T<l);if(512&n.flags&&(n.check=g(n.check,i,T,s)),l-=T,s+=T,R)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;S<16;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=_;break}h=0,S=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=C;break;case 10:for(;S<32;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}e.adler=n.check=r(h),h=0,S=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=d,e.next_in=s,e.avail_in=l,n.hold=h,n.bits=S,2;e.adler=n.check=1,n.mode=C;case C:if(5===t||6===t)break e;case 13:if(n.last){h>>>=7&S,S-=7&S,n.mode=27;break}for(;S<3;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}switch(n.last=1&h,S-=1,3&(h>>>=1)){case 0:n.mode=14;break;case 1:if(c(n),n.mode=20,6===t){h>>>=2,S-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=_}h>>>=2,S-=2;break;case 14:for(h>>>=7&S,S-=7&S;S<32;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=_;break}if(n.length=65535&h,h=0,S=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(T=n.length){if(T>l&&(T=l),T>d&&(T=d),0===T)break e;f.arraySet(o,i,s,T,a),l-=T,s+=T,d-=T,a+=T,n.length-=T;break}n.mode=C;break;case 17:for(;S<14;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if(n.nlen=257+(31&h),S-=5,n.ndist=1+(31&(h>>>=5)),S-=5,n.ncode=4+(15&(h>>>=5)),h>>>=4,S-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=_;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;S<3;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}n.lens[U[n.have++]]=7&h,h>>>=3,S-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F=v(0,n.lens,0,19,n.lencode,0,n.work,V={bits:n.lenbits}),n.lenbits=V.bits,F){e.msg="invalid code lengths set",n.mode=_;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;M=(B=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,D=65535&B,!((A=B>>>24)<=S);){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if(D<16)h>>>=A,S-=A,n.lens[n.have++]=D;else{if(16===D){for(z=A+2;S<z;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if(h>>>=A,S-=A,0===n.have){e.msg="invalid bit length repeat",n.mode=_;break}R=n.lens[n.have-1],T=3+(3&h),h>>>=2,S-=2}else if(17===D){for(z=A+3;S<z;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}S-=A,R=0,T=3+(7&(h>>>=A)),h>>>=3,S-=3}else{for(z=A+7;S<z;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}S-=A,R=0,T=11+(127&(h>>>=A)),h>>>=7,S-=7}if(n.have+T>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=_;break}for(;T--;)n.lens[n.have++]=R}}if(n.mode===_)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=_;break}if(n.lenbits=9,F=v(b,n.lens,0,n.nlen,n.lencode,0,n.work,V={bits:n.lenbits}),n.lenbits=V.bits,F){e.msg="invalid literal/lengths set",n.mode=_;break}if(n.distbits=6,n.distcode=n.distdyn,F=v(y,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,V={bits:n.distbits}),n.distbits=V.bits,F){e.msg="invalid distances set",n.mode=_;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(l>=6&&d>=258){e.next_out=a,e.avail_out=d,e.next_in=s,e.avail_in=l,n.hold=h,n.bits=S,m(e,k),a=e.next_out,o=e.output,d=e.avail_out,s=e.next_in,i=e.input,l=e.avail_in,h=n.hold,S=n.bits,n.mode===C&&(n.back=-1);break}for(n.back=0;M=(B=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,D=65535&B,!((A=B>>>24)<=S);){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if(M&&0==(240&M)){for(I=A,L=M,N=D;M=(B=n.lencode[N+((h&(1<<I+L)-1)>>I)])>>>16&255,D=65535&B,!(I+(A=B>>>24)<=S);){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}h>>>=I,S-=I,n.back+=I}if(h>>>=A,S-=A,n.back+=A,n.length=D,0===M){n.mode=26;break}if(32&M){n.back=-1,n.mode=C;break}if(64&M){e.msg="invalid literal/length code",n.mode=_;break}n.extra=15&M,n.mode=22;case 22:if(n.extra){for(z=n.extra;S<z;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,S-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;M=(B=n.distcode[h&(1<<n.distbits)-1])>>>16&255,D=65535&B,!((A=B>>>24)<=S);){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if(0==(240&M)){for(I=A,L=M,N=D;M=(B=n.distcode[N+((h&(1<<I+L)-1)>>I)])>>>16&255,D=65535&B,!(I+(A=B>>>24)<=S);){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}h>>>=I,S-=I,n.back+=I}if(h>>>=A,S-=A,n.back+=A,64&M){e.msg="invalid distance code",n.mode=_;break}n.offset=D,n.extra=15&M,n.mode=24;case 24:if(n.extra){for(z=n.extra;S<z;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,S-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=_;break}n.mode=25;case 25:if(0===d)break e;if(n.offset>(T=k-d)){if((T=n.offset-T)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=_;break}E=T>n.wnext?n.wsize-(T-=n.wnext):n.wnext-T,T>n.length&&(T=n.length),P=n.window}else P=o,E=a-n.offset,T=n.length;T>d&&(T=d),d-=T,n.length-=T;do{o[a++]=P[E++]}while(--T);0===n.length&&(n.mode=21);break;case 26:if(0===d)break e;o[a++]=n.length,d--,n.mode=21;break;case 27:if(n.wrap){for(;S<32;){if(0===l)break e;l--,h|=i[s++]<<S,S+=8}if(e.total_out+=k-=d,n.total+=k,k&&(e.adler=n.check=n.flags?g(n.check,o,k,a-k):p(n.check,o,k,a-k)),k=d,(n.flags?h:r(h))!==n.check){e.msg="incorrect data check",n.mode=_;break}h=0,S=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;S<32;){if(0===l)break e;l--,h+=i[s++]<<S,S+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=_;break}h=0,S=0}n.mode=29;case 29:F=1;break e;case _:F=-3;break e;case 31:return-4;case 32:default:return x}return e.next_out=a,e.avail_out=d,e.next_in=s,e.avail_in=l,n.hold=h,n.bits=S,(n.wsize||k!==e.avail_out&&n.mode<_&&(n.mode<27||4!==t))&&u(e,e.output,e.next_out,k-e.avail_out)?(n.mode=31,-4):(k-=e.avail_out,e.total_in+=j-=e.avail_in,e.total_out+=k,n.total+=k,n.wrap&&k&&(e.adler=n.check=n.flags?g(n.check,o,k,e.next_out-k):p(n.check,o,k,e.next_out-k)),e.data_type=n.bits+(n.last?64:0)+(n.mode===C?128:0)+(20===n.mode||15===n.mode?256:0),(0===j&&0===k||4===t)&&F===w&&(F=-5),F)},t.inflateEnd=function(e){if(!e||!e.state)return x;var t=e.state;return t.window&&(t.window=null),e.state=null,w},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?x:(n.head=t,t.done=!1,w):x},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?x:11===n.mode&&p(1,t,r,0)!==n.check?-3:u(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,w):x},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,s,a,l,c,u,d,h,f,p,g,m,v,b,y,w,x,O,C,_,S,j;S=e.input,i=(r=e.next_in)+(e.avail_in-5),j=e.output,s=(o=e.next_out)-(t-e.avail_out),a=o+(e.avail_out-257),l=(n=e.state).dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,f=n.hold,p=n.bits,g=n.lencode,m=n.distcode,v=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{p<15&&(f+=S[r++]<<p,f+=S[r++]<<(p+=8),p+=8),y=g[f&v];t:for(;;){if(f>>>=w=y>>>24,p-=w,0==(w=y>>>16&255))j[o++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=g[(65535&y)+(f&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&y,(w&=15)&&(p<w&&(f+=S[r++]<<p,p+=8),x+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=S[r++]<<p,f+=S[r++]<<(p+=8),p+=8),y=m[f&b];n:for(;;){if(f>>>=w=y>>>24,p-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=m[(65535&y)+(f&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(O=65535&y,p<(w&=15)&&(f+=S[r++]<<p,(p+=8)<w&&(f+=S[r++]<<p,p+=8)),(O+=f&(1<<w)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=w,p-=w,O>(w=o-s)){if((w=O-w)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(C=0,_=h,0===d){if(C+=c-w,w<x){x-=w;do{j[o++]=h[C++]}while(--w);C=o-O,_=j}}else if(d<w){if(C+=c+d-w,(w-=d)<x){x-=w;do{j[o++]=h[C++]}while(--w);if(C=0,d<x){x-=w=d;do{j[o++]=h[C++]}while(--w);C=o-O,_=j}}}else if(C+=d-w,w<x){x-=w;do{j[o++]=h[C++]}while(--w);C=o-O,_=j}for(;x>2;)j[o++]=_[C++],j[o++]=_[C++],j[o++]=_[C++],x-=3;x&&(j[o++]=_[C++],x>1&&(j[o++]=_[C++]))}else{C=o-O;do{j[o++]=j[C++],j[o++]=j[C++],j[o++]=j[C++],x-=3}while(x>2);x&&(j[o++]=j[C++],x>1&&(j[o++]=j[C++]))}break}}break}}while(r<i&&o<a);f&=(1<<(p-=(x=p>>3)<<3))-1,e.next_in=r-=x,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=f,n.bits=p}},function(e,t,n){"use strict";var r=n(4),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,c,u,d,h){var f,p,g,m,v,b,y,w,x,O=h.bits,C=0,_=0,S=0,j=0,k=0,T=0,E=0,P=0,A=0,M=0,D=null,I=0,L=new r.Buf16(16),N=new r.Buf16(16),R=null,F=0;for(C=0;C<=15;C++)L[C]=0;for(_=0;_<l;_++)L[t[n+_]]++;for(k=O,j=15;j>=1&&0===L[j];j--);if(k>j&&(k=j),0===j)return c[u++]=20971520,c[u++]=20971520,h.bits=1,0;for(S=1;S<j&&0===L[S];S++);for(k<S&&(k=S),P=1,C=1;C<=15;C++)if(P<<=1,(P-=L[C])<0)return-1;if(P>0&&(0===e||1!==j))return-1;for(N[1]=0,C=1;C<15;C++)N[C+1]=N[C]+L[C];for(_=0;_<l;_++)0!==t[n+_]&&(d[N[t[n+_]]++]=_);if(0===e?(D=R=d,b=19):1===e?(D=i,I-=257,R=o,F-=257,b=256):(D=s,R=a,b=-1),M=0,_=0,C=S,v=u,T=k,E=0,g=-1,m=(A=1<<k)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){y=C-E,d[_]<b?(w=0,x=d[_]):d[_]>b?(w=R[F+d[_]],x=D[I+d[_]]):(w=96,x=0),f=1<<C-E,S=p=1<<T;do{c[v+(M>>E)+(p-=f)]=y<<24|w<<16|x|0}while(0!==p);for(f=1<<C-1;M&f;)f>>=1;if(0!==f?(M&=f-1,M+=f):M=0,_++,0==--L[C]){if(C===j)break;C=t[n+d[_]]}if(C>k&&(M&m)!==g){for(0===E&&(E=k),v+=S,P=1<<(T=C-E);T+E<j&&!((P-=L[T+E])<=0);)T++,P<<=1;if(A+=1<<T,1===e&&A>852||2===e&&A>592)return 1;c[g=M&m]=k<<24|T<<16|v-u|0}}return 0!==M&&(c[v+M]=C-E<<24|64<<16|0),h.bits=k,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){"use strict";function r(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var i=n(0),o=n(1),s=n(6),a=n(22),l=n(45),c=function(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},u=function(e,t,n,r,o,u){var d,h,f=e.file,p=e.compression,g=u!==s.utf8encode,m=i.transformTo("string",u(f.name)),v=i.transformTo("string",s.utf8encode(f.name)),b=f.comment,y=i.transformTo("string",u(b)),w=i.transformTo("string",s.utf8encode(b)),x=v.length!==f.name.length,O=w.length!==b.length,C="",_="",S="",j=f.dir,k=f.date,T={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(T.crc32=e.crc32,T.compressedSize=e.compressedSize,T.uncompressedSize=e.uncompressedSize);var E=0;t&&(E|=8),g||!x&&!O||(E|=2048);var P=0,A=0;j&&(P|=16),"UNIX"===o?(A=798,P|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,j)):(A=20,P|=function(e,t){return 63&(e||0)}(f.dosPermissions)),d=k.getUTCHours(),d<<=6,d|=k.getUTCMinutes(),d<<=5,d|=k.getUTCSeconds()/2,h=k.getUTCFullYear()-1980,h<<=4,h|=k.getUTCMonth()+1,h<<=5,h|=k.getUTCDate(),x&&(_=c(1,1)+c(a(m),4)+v,C+="up"+c(_.length,2)+_),O&&(S=c(1,1)+c(a(y),4)+w,C+="uc"+c(S.length,2)+S);var M="";return M+="\n\0",M+=c(E,2),M+=p.magic,M+=c(d,2),M+=c(h,2),M+=c(T.crc32,4),M+=c(T.compressedSize,4),M+=c(T.uncompressedSize,4),M+=c(m.length,2),M+=c(C.length,2),{fileRecord:l.LOCAL_FILE_HEADER+M+m+C,dirRecord:l.CENTRAL_FILE_HEADER+c(A,2)+M+c(y.length,2)+"\0\0\0\0"+c(P,4)+c(r,4)+m+C+y}},d=function(e){return l.DATA_DESCRIPTOR+c(e.crc32,4)+c(e.compressedSize,4)+c(e.uncompressedSize,4)};i.inherits(r,o),r.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},r.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=u(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=u(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:d(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=function(e,t,n,r,o){var s=i.transformTo("string",o(r));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(e,2)+c(e,2)+c(t,4)+c(n,4)+c(s.length,2)+s}(this.dirRecords.length,this.bytesWritten-e,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},r.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},r.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},e.exports=r},function(e,t,n){"use strict";function r(e,t){o.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}var i=n(0),o=n(1);i.inherits(r,o),r.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},r.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=r},function(e,t,n){"use strict";function r(e){return new o.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new l);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}var i=n(0),o=n(9),s=n(6),a=(i=n(0),n(99)),l=n(38),c=n(14);e.exports=function(e,t){var n=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),c.isNode&&c.isStream(e)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[o.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var s=0;s<i.length;s++)n.push(r(i[s]));return o.Promise.all(n)})).then((function(e){for(var r=e.shift(),i=r.files,o=0;o<i.length;o++){var s=i[o];n.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},function(e,t,n){"use strict";function r(e){this.files=[],this.loadOptions=e}var i=n(46),o=n(0),s=n(45),a=n(102),l=(n(6),n(3));r.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.transformTo(l.uint8array?"uint8array":"array",e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)this.reader.setIndex((t=this.files[e]).localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(r>0)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=n(48);n(0).inherits(r,i),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e)}var i=n(49);n(0).inherits(r,i),r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";function r(e,t){this.options=e,this.loadOptions=t}var i=n(46),o=n(0),s=n(21),a=n(22),l=n(6),c=n(39),u=n(3);r.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(c.hasOwnProperty(t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:l.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:l.utf8decode(t.readData(e.length-5))}return null}},e.exports=r},function(e,t,n){var r,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},a=function(e){setTimeout((function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()}),4e4)},l=function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){s(e)}}},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(s,u,d){d||(s=c(s));var h,f=this,p="application/octet-stream"===s.type,g=function(){l(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,r)return h=t().createObjectURL(s),void setTimeout((function(){n.href=h,n.download=u,function(e){var t=new MouseEvent("click");e.dispatchEvent(t)}(n),g(),a(h),f.readyState=f.DONE}));!function(){if((o||p&&i)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=o?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,f.readyState=f.DONE,g()},n.readAsDataURL(s),void(f.readyState=f.INIT)}h||(h=t().createObjectURL(s)),p?e.location.href=h:e.open(h,"_blank")||(e.location.href=h),f.readyState=f.DONE,g(),a(h)}()},d=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,n){return new u(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=i:null!==n(104)&&null!==n(105)&&void 0!==(r=(function(){return i}).call(t,n,t,e))&&(e.exports=r)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})}])}))}).call(t,n(1).setImmediate,n(1).clearImmediate)},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){delete a[e]}function i(e){if(l)setTimeout(i,0,e);else{var t=a[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{r(e),l=!1}}}}if(!e.setImmediate){var o,s=1,a={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){i(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),o=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},o=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;o=function(t){var n=c.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():o=function(e){setTimeout(i,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return a[s]={callback:e,args:t},o(s),s++},u.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(2),n(11))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(){p&&h&&(p=!1,h.length?f=h.concat(f):g=-1,f.length&&s())}function s(){if(!p){var e=i(o);p=!0;for(var t=f.length;t;){for(h=f,f=[];++g<t;)h&&h[g].run();g=-1,t=f.length}h=null,p=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var c,u,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(e){u=r}}();var h,f=[],p=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new a(e,t)),1!==f.length||p||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){var r;r=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.default=r.default.plugins.add("gjs-aviary",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getModel(),r=void 0,i={key:"1",onApply:null,getFilename:null,closeOnApply:!0,config:{}};for(var o in i)o in t||(t[o]=i[o]);var s=t.config;s.apiKey=t.key,s.onSave=function(e,n){r.set("src",n);var i=("function"==typeof t.getFilename?t.getFilename:c)(r);("function"==typeof t.onApply?t.onApply:u)(n,i,r),t.closeOnApply&&a.close()};var a=new Aviary.Feather(s),l=e.Commands,c=function(e){var t=e.get("src").split("/").pop();return Date.now()+"_"+t.slice(-15)},u=function(t,n){e.AssetManager.add({src:t,name:n})},d=document.createElement("img");l.add("image-editor",{run:function(e,t,i){var o=(i||{}).model||e.getSelected();r=o,d.src=o.get("src"),a.launch({image:d}),n.trigger("gjs-aviary:launch",o,a)}})}))},function(t,n){t.exports=e}])},e.exports=r(n(0))},function(e,t,n){var r;r=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.default=r.default.plugins.add("gjs-plugin-filestack",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getConfig().stylePrefix||"",r=void 0,i={key:"",btnEl:"",btnText:"Add images",filestackOpts:{accept:"image/*",maxFiles:10},onComplete:function(e,t){}};for(var o in i)o in t||(t[o]=i[o]);if(!filestack)throw new Error("Filestack instance not found");if(!t.key)throw new Error("Filestack's API key not found");var s=filestack.init(t.key);e.on("run:open-assets",(function(){var i=e.Modal.getContentEl(),o=i.querySelector("."+n+"am-file-uploader"),l=i.querySelector("."+n+"am-assets-header"),c=i.querySelector("."+n+"am-assets-cont");o&&(o.style.display="none"),l&&(l.style.display="none"),c.style.width="100%",r||((r=t.btnEl)||((r=document.createElement("button")).className=n+"btn-prim "+n+"btn-filestack",r.innerHTML=t.btnText),r.onclick=function(){s.pick(t.filestackOpts).then((function(e){var n=e.filesUploaded,r=n instanceof Array?n:[n],i=a(r);t.onComplete(r,i)}))}),c.insertBefore(r,l)}));var a=function(t){var n=t.map((function(e){return e.src=e.url,e}));return e.AssetManager.add(n)}}))},function(t,n){t.exports=e}])},e.exports=r(n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(15)),i=n(3);t.default=function(e,t){var n=e.Commands,o=t.textCleanCanvas;n.add(i.cmdImport,(0,r.default)(e,t)),n.add(i.cmdDeviceDesktop,(function(e){return e.setDevice("Desktop")})),n.add(i.cmdDeviceTablet,(function(e){return e.setDevice("Tablet")})),n.add(i.cmdDeviceMobile,(function(e){return e.setDevice("Mobile portrait")})),n.add(i.cmdClear,(function(e){return confirm(o)&&e.runCommand("core:canvas-clear")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){var n=e.getConfig("stylePrefix"),i=e.Modal,o=e.CodeManager.getViewer("CodeMirror").clone(),s=document.createElement("div"),a=t.modalImportLabel,l=t.modalImportContent,c=o.editor,u=document.createElement("button");return u.type="button",u.innerHTML=t.modalImportButton,u.className=n+"btn-prim "+n+"btn-import",u.onclick=function(t){e.setComponents(c.getValue().trim()),i.close()},o.set(r({codeName:"htmlmixed",theme:"hopscotch",readOnly:0},t.importViewerOptions)),{run:function(e){var r=this;if(!c){var d=document.createElement("textarea");if(a){var h=document.createElement("div");h.className=n+"import-label",h.innerHTML=a,s.appendChild(h)}s.appendChild(d),s.appendChild(u),o.init(d),c=o.editor}i.setTitle(t.modalImportTitle),i.setContent(s);var f="function"==typeof l?l(e):l;o.setContent(f||""),i.open().getModel().once("change:open",(function(){return e.stopCommand(r.id)})),c.refresh()},stop:function(){i.close()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.BlockManager,r=function(e){return t.blocks.indexOf(e)>=0};r("link-block")&&n.add("link-block",{category:"Basic",label:"Link Block",attributes:{class:"fa fa-link"},content:{type:"link",editable:!1,droppable:!0,style:{display:"inline-block",padding:"5px","min-height":"50px","min-width":"50px"}}}),r("quote")&&n.add("quote",{label:"Quote",category:"Basic",attributes:{class:"fa fa-quote-right"},content:'<blockquote class="quote">\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit\n      </blockquote>'}),r("text-basic")&&n.add("text-basic",{category:"Basic",label:"Text section",attributes:{class:"gjs-fonts gjs-f-h1p"},content:'<section class="bdg-sect">\n      <h1 class="heading">Insert title here</h1>\n      <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>\n      </section>'})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.DomComponents.getType("default")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.default=function(e,t){var n=e.Panels,i=e.getConfig(),o="sw-visibility",s="export-template",a="open-sm",l="open-layers",c="open-blocks",u="fullscreen",d="preview";i.showDevices=0,n.getPanels().reset([{id:"commands",buttons:[{}]},{id:"options",buttons:[{id:o,command:o,context:o,className:"fa fa-square-o"},{id:d,context:d,command:function(e){return e.runCommand(d)},className:"fa fa-eye"},{id:u,command:u,context:u,className:"fa fa-arrows-alt"},{id:s,className:"fa fa-code",command:function(e){return e.runCommand(s)}},{id:"undo",className:"fa fa-undo",command:function(e){return e.runCommand("core:undo")}},{id:"redo",className:"fa fa-repeat",command:function(e){return e.runCommand("core:redo")}},{id:r.cmdImport,className:"fa fa-download",command:function(e){return e.runCommand(r.cmdImport)}},{id:r.cmdClear,className:"fa fa-trash",command:function(e){return e.runCommand(r.cmdClear)}}]},{id:"views",buttons:[{id:a,command:a,active:!0,className:"fa fa-paint-brush"},{id:"open-tm",command:"open-tm",className:"fa fa-cog"},{id:l,command:l,className:"fa fa-bars"},{id:c,command:c,className:"fa fa-th-large"}]}]),n.addPanel({id:"devices-c"}).get("buttons").add([{id:r.cmdDeviceDesktop,command:r.cmdDeviceDesktop,className:"fa fa-desktop",active:1},{id:r.cmdDeviceTablet,command:r.cmdDeviceTablet,className:"fa fa-tablet"},{id:r.cmdDeviceMobile,command:r.cmdDeviceMobile,className:"fa fa-mobile"}]);var h=n.getButton("views",c);e.on("load",(function(){return h&&h.set("active",1)})),t.showStylesOnChange&&e.on("component:selected",(function(){var t=n.getButton("views",a),r=n.getButton("views",l);r&&r.get("active")||!e.getSelected()||t&&t.set("active",1)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.customStyleManager;e.StyleManager.getSectors().reset(n&&n.length?n:[{name:t.textGeneral,open:!1,buildProps:["float","display","position","top","right","left","bottom"]},{name:t.textLayout,open:!1,buildProps:["width","height","max-width","min-height","margin","padding"]},{name:t.textTypography,open:!1,buildProps:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"],properties:[{property:"text-align",list:[{value:"left",className:"fa fa-align-left"},{value:"center",className:"fa fa-align-center"},{value:"right",className:"fa fa-align-right"},{value:"justify",className:"fa fa-align-justify"}]}]},{name:t.textDecorations,open:!1,buildProps:["border-radius-c","background-color","border-radius","border","box-shadow","background"]},{name:t.textExtra,open:!1,buildProps:["transition","perspective","transform"]}])}}]))},kvMl:function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=s(n(1)),o=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=r({id:"tooltip",labelTooltip:"Tooltip",blockTooltip:{},propsTooltip:{},extendTraits:function(e){return e},attrTooltip:"data-tooltip",classTooltip:"tooltip-component",style:"",styleAdditional:"",privateClasses:1,stylableTooltip:["background-color","padding","padding-top","padding-right","padding-bottom","padding-left","font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","border-radius","border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius","border","border-width","border-style","border-color"],showTooltipOnStyle:1},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});(0,i.default)(e,t),(0,o.default)(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.DomComponents,i=n.getType("default"),o=i.model,s=i.view,a=e.CssComposer,l=t.id,c=t.labelTooltip,u=t.propsTooltip,d=t.attrTooltip,h=t.classTooltip,f=t.style,p=t.styleAdditional,g=t.stylableTooltip,m=t.showTooltipOnStyle,v=t.extendTraits,b=h+"__body",y=h+"--empty",w=d+"-visible",x=d+"-pos",O=d+"-length";t.privateClasses&&e.SelectorManager.getAll().add([{private:1,name:h},{private:1,name:b},{private:1,name:y}]),m&&e.on("styleManager:update:target",(function(t){var n=e.getSelected();if(n){var r=n.getEl();n.is(l)&&!n.getTrait(w).getTargetValue()&&t.getSelectors().getFullString().trim()=="."+b&&(r.setAttribute(w,"true"),e.once("styleManager:update:target",(function(){r.removeAttribute(w)})))}})),n.addType(l,{model:o.extend({defaults:r({},o.prototype.defaults,{name:c,classes:[h],attributes:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},d,c),"style-signature":["["+d,"."+h],traits:v([{name:d,label:"Text"},{name:x,label:"Position",type:"select",options:[{value:"top",name:"Top"},{value:"right",name:"Right"},{value:"bottom",name:"Bottom"},{value:"left",name:"Left"}]},{name:O,label:"Length",type:"select",options:[{value:"",name:"One line"},{value:"small",name:"Small"},{value:"medium",name:"Medium"},{value:"large",name:"Large"},{value:"fit",name:"Fit"}]},{name:w,label:"Visible",type:"checkbox",valueTrue:"true"},{name:"style-tooltip",labelButton:"Style tooltip",type:"button",full:1,command:function(e,t){var n=e.Panels.getButton("views","open-sm");n&&n.set("active",1),e.StyleManager.setTarget("."+b,{targetIsClass:1,stylable:g})}}])},u),init:function(){this.listenTo(this.components(),"add remove",this.checkEmpty),this.checkEmpty()},checkEmpty:function(){this[this.components().length?"removeClass":"addClass"](""+y)}},{isComponent:function(e){if(e.hasAttribute&&e.hasAttribute(d))return{type:l}}}),view:s.extend({init:function(){!a.getClassRule(h)&&function(){var e=f||"\n      ."+h+" {\n        position: relative;\n        display: inline-block;\n        vertical-align: top;\n      }\n\n      ."+y+" {\n        width: 50px;\n        height: 50px;\n      }\n\n      ."+b+",\n      ["+d+"]::after {\n        font-family: Helvetica, sans-serif;\n        background: rgba(55, 61, 73, 0.95);\n        border-radius: 3px;\n        bottom: 100%;\n        color: #fff;\n        content: attr("+d+");\n        display: block;\n        font-size: 12px;\n        left: 50%;\n        line-height: normal;\n        max-width: 32rem;\n        opacity: 0;\n        overflow: hidden;\n        padding: 8px 16px;\n        pointer-events: none;\n        position: absolute;\n        text-overflow: ellipsis;\n        transform: translate(-50%, 0);\n        transition: opacity 0.25s, transform 0.25s;\n        white-space: nowrap;\n        box-sizing: border-box;\n        z-index: 10;\n      }\n\n      ["+w+"=true]::after,\n      ["+d+"]:focus::after,\n      ["+d+"]:hover::after {\n        opacity: 1;\n        transform: translate(-50%, -0.5rem);\n      }\n\n      ["+x+"=right]::after {\n        bottom: 50%;\n        left: 100%;\n        transform: translate(0, 50%);\n      }\n\n      ["+x+"=right]:focus::after,\n      ["+x+"=right]:hover::after,\n      ["+w+"=true]["+x+"=right]::after {\n        transform: translate(0.5rem, 50%);\n      }\n\n      ["+x+"=bottom]::after {\n        bottom: auto;\n        top: 100%;\n        transform: translate(-50%, 0);\n      }\n\n      ["+x+"=bottom]:focus::after,\n      ["+x+"=bottom]:hover::after,\n      ["+w+"=true]["+x+"=bottom]::after {\n        transform: translate(-50%, 0.5rem);\n      }\n\n      ["+x+"=left]::after {\n        bottom: 50%;\n        left: auto;\n        right: 100%;\n        transform: translate(0, 50%);\n      }\n\n      ["+x+"=left]:focus::after,\n      ["+x+"=left]:hover::after,\n      ["+w+"=true]["+x+"=left]::after {\n        transform: translate(-0.5rem, 50%);\n      }\n\n      ["+O+"=small]::after {\n        white-space: normal;\n        width: 80px;\n      }\n\n      ["+O+"=medium]::after {\n        white-space: normal;\n        width: 150px;\n      }\n\n      ["+O+"=large]::after {\n        white-space: normal;\n        width: 300px;\n      }\n\n      ["+O+"=fit]::after {\n        white-space: normal;\n        width: 100%;\n      }\n\n      // IE 11 bugfix\n      button["+d+"] {\n        overflow: visible;\n      }\n    ";a.getAll().add(e+p)}()}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.blockTooltip,i=t.id;n&&e.BlockManager.add(i,r({label:'<svg viewBox="0 0 24 24">\n        <path d="M4 2h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2h-4l-4 4-4-4H4c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2m0 2v12h4.83L12 19.17 15.17 16H20V4H4z"></path>\n      </svg>\n      <div>'+t.labelTooltip+"</div>",category:"Extra",select:!0,content:{type:i}},n))}}])},mgzZ:function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=94)}([function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return rn})),n.d(t,"VERSION",(function(){return i.e})),n.d(t,"restArguments",(function(){return o})),n.d(t,"isObject",(function(){return s})),n.d(t,"isNull",(function(){return a})),n.d(t,"isUndefined",(function(){return l})),n.d(t,"isBoolean",(function(){return c})),n.d(t,"isElement",(function(){return u})),n.d(t,"isString",(function(){return h})),n.d(t,"isNumber",(function(){return f})),n.d(t,"isDate",(function(){return p})),n.d(t,"isRegExp",(function(){return g})),n.d(t,"isError",(function(){return m})),n.d(t,"isSymbol",(function(){return v})),n.d(t,"isMap",(function(){return b})),n.d(t,"isWeakMap",(function(){return y})),n.d(t,"isSet",(function(){return w})),n.d(t,"isWeakSet",(function(){return x})),n.d(t,"isArrayBuffer",(function(){return O})),n.d(t,"isDataView",(function(){return C})),n.d(t,"isArray",(function(){return _})),n.d(t,"isFunction",(function(){return j})),n.d(t,"isArguments",(function(){return E})),n.d(t,"isFinite",(function(){return P})),n.d(t,"isNaN",(function(){return A})),n.d(t,"isTypedArray",(function(){return F})),n.d(t,"isEmpty",(function(){return U})),n.d(t,"isMatch",(function(){return $})),n.d(t,"isEqual",(function(){return q})),n.d(t,"keys",(function(){return H})),n.d(t,"allKeys",(function(){return G})),n.d(t,"values",(function(){return K})),n.d(t,"pairs",(function(){return Y})),n.d(t,"invert",(function(){return Z})),n.d(t,"functions",(function(){return X})),n.d(t,"methods",(function(){return X})),n.d(t,"extend",(function(){return Q})),n.d(t,"extendOwn",(function(){return ee})),n.d(t,"assign",(function(){return ee})),n.d(t,"defaults",(function(){return te})),n.d(t,"create",(function(){return re})),n.d(t,"clone",(function(){return ie})),n.d(t,"tap",(function(){return oe})),n.d(t,"has",(function(){return se})),n.d(t,"mapObject",(function(){return ge})),n.d(t,"identity",(function(){return ae})),n.d(t,"constant",(function(){return M})),n.d(t,"noop",(function(){return me})),n.d(t,"property",(function(){return ue})),n.d(t,"propertyOf",(function(){return ve})),n.d(t,"matcher",(function(){return le})),n.d(t,"matches",(function(){return le})),n.d(t,"times",(function(){return be})),n.d(t,"random",(function(){return ye})),n.d(t,"now",(function(){return we})),n.d(t,"escape",(function(){return Ce})),n.d(t,"unescape",(function(){return _e})),n.d(t,"templateSettings",(function(){return Se})),n.d(t,"template",(function(){return Pe})),n.d(t,"result",(function(){return Ae})),n.d(t,"uniqueId",(function(){return De})),n.d(t,"chain",(function(){return Ie})),n.d(t,"iteratee",(function(){return fe})),n.d(t,"partial",(function(){return Re})),n.d(t,"bind",(function(){return Fe})),n.d(t,"bindAll",(function(){return ze})),n.d(t,"memoize",(function(){return Be})),n.d(t,"delay",(function(){return He})),n.d(t,"defer",(function(){return Ue})),n.d(t,"throttle",(function(){return $e})),n.d(t,"debounce",(function(){return We})),n.d(t,"wrap",(function(){return qe})),n.d(t,"negate",(function(){return Ge})),n.d(t,"compose",(function(){return Ke})),n.d(t,"after",(function(){return Ye})),n.d(t,"before",(function(){return Ze})),n.d(t,"once",(function(){return Xe})),n.d(t,"findKey",(function(){return Je})),n.d(t,"findIndex",(function(){return et})),n.d(t,"findLastIndex",(function(){return tt})),n.d(t,"sortedIndex",(function(){return nt})),n.d(t,"indexOf",(function(){return it})),n.d(t,"lastIndexOf",(function(){return ot})),n.d(t,"find",(function(){return st})),n.d(t,"detect",(function(){return st})),n.d(t,"findWhere",(function(){return at})),n.d(t,"each",(function(){return lt})),n.d(t,"forEach",(function(){return lt})),n.d(t,"map",(function(){return ct})),n.d(t,"collect",(function(){return ct})),n.d(t,"reduce",(function(){return dt})),n.d(t,"foldl",(function(){return dt})),n.d(t,"inject",(function(){return dt})),n.d(t,"reduceRight",(function(){return ht})),n.d(t,"foldr",(function(){return ht})),n.d(t,"filter",(function(){return ft})),n.d(t,"select",(function(){return ft})),n.d(t,"reject",(function(){return pt})),n.d(t,"every",(function(){return gt})),n.d(t,"all",(function(){return gt})),n.d(t,"some",(function(){return mt})),n.d(t,"any",(function(){return mt})),n.d(t,"contains",(function(){return vt})),n.d(t,"includes",(function(){return vt})),n.d(t,"include",(function(){return vt})),n.d(t,"invoke",(function(){return bt})),n.d(t,"pluck",(function(){return yt})),n.d(t,"where",(function(){return wt})),n.d(t,"max",(function(){return xt})),n.d(t,"min",(function(){return Ot})),n.d(t,"shuffle",(function(){return _t})),n.d(t,"sample",(function(){return Ct})),n.d(t,"sortBy",(function(){return St})),n.d(t,"groupBy",(function(){return kt})),n.d(t,"indexBy",(function(){return Tt})),n.d(t,"countBy",(function(){return Et})),n.d(t,"partition",(function(){return Pt})),n.d(t,"toArray",(function(){return Mt})),n.d(t,"size",(function(){return Dt})),n.d(t,"pick",(function(){return Lt})),n.d(t,"omit",(function(){return Nt})),n.d(t,"first",(function(){return Ft})),n.d(t,"head",(function(){return Ft})),n.d(t,"take",(function(){return Ft})),n.d(t,"initial",(function(){return Rt})),n.d(t,"last",(function(){return zt})),n.d(t,"rest",(function(){return Vt})),n.d(t,"tail",(function(){return Vt})),n.d(t,"drop",(function(){return Vt})),n.d(t,"compact",(function(){return Bt})),n.d(t,"flatten",(function(){return Ht})),n.d(t,"without",(function(){return $t})),n.d(t,"uniq",(function(){return Wt})),n.d(t,"unique",(function(){return Wt})),n.d(t,"union",(function(){return qt})),n.d(t,"intersection",(function(){return Gt})),n.d(t,"difference",(function(){return Ut})),n.d(t,"unzip",(function(){return Kt})),n.d(t,"transpose",(function(){return Kt})),n.d(t,"zip",(function(){return Yt})),n.d(t,"object",(function(){return Zt})),n.d(t,"range",(function(){return Xt})),n.d(t,"chunk",(function(){return Jt})),n.d(t,"mixin",(function(){return en}));var r={};n.r(r),n.d(r,"VERSION",(function(){return i.e})),n.d(r,"restArguments",(function(){return o})),n.d(r,"isObject",(function(){return s})),n.d(r,"isNull",(function(){return a})),n.d(r,"isUndefined",(function(){return l})),n.d(r,"isBoolean",(function(){return c})),n.d(r,"isElement",(function(){return u})),n.d(r,"isString",(function(){return h})),n.d(r,"isNumber",(function(){return f})),n.d(r,"isDate",(function(){return p})),n.d(r,"isRegExp",(function(){return g})),n.d(r,"isError",(function(){return m})),n.d(r,"isSymbol",(function(){return v})),n.d(r,"isMap",(function(){return b})),n.d(r,"isWeakMap",(function(){return y})),n.d(r,"isSet",(function(){return w})),n.d(r,"isWeakSet",(function(){return x})),n.d(r,"isArrayBuffer",(function(){return O})),n.d(r,"isDataView",(function(){return C})),n.d(r,"isArray",(function(){return _})),n.d(r,"isFunction",(function(){return j})),n.d(r,"isArguments",(function(){return E})),n.d(r,"isFinite",(function(){return P})),n.d(r,"isNaN",(function(){return A})),n.d(r,"isTypedArray",(function(){return F})),n.d(r,"isEmpty",(function(){return U})),n.d(r,"isMatch",(function(){return $})),n.d(r,"isEqual",(function(){return q})),n.d(r,"keys",(function(){return H})),n.d(r,"allKeys",(function(){return G})),n.d(r,"values",(function(){return K})),n.d(r,"pairs",(function(){return Y})),n.d(r,"invert",(function(){return Z})),n.d(r,"functions",(function(){return X})),n.d(r,"methods",(function(){return X})),n.d(r,"extend",(function(){return Q})),n.d(r,"extendOwn",(function(){return ee})),n.d(r,"assign",(function(){return ee})),n.d(r,"defaults",(function(){return te})),n.d(r,"create",(function(){return re})),n.d(r,"clone",(function(){return ie})),n.d(r,"tap",(function(){return oe})),n.d(r,"has",(function(){return se})),n.d(r,"mapObject",(function(){return ge})),n.d(r,"identity",(function(){return ae})),n.d(r,"constant",(function(){return M})),n.d(r,"noop",(function(){return me})),n.d(r,"property",(function(){return ue})),n.d(r,"propertyOf",(function(){return ve})),n.d(r,"matcher",(function(){return le})),n.d(r,"matches",(function(){return le})),n.d(r,"times",(function(){return be})),n.d(r,"random",(function(){return ye})),n.d(r,"now",(function(){return we})),n.d(r,"escape",(function(){return Ce})),n.d(r,"unescape",(function(){return _e})),n.d(r,"templateSettings",(function(){return Se})),n.d(r,"template",(function(){return Pe})),n.d(r,"result",(function(){return Ae})),n.d(r,"uniqueId",(function(){return De})),n.d(r,"chain",(function(){return Ie})),n.d(r,"iteratee",(function(){return fe})),n.d(r,"partial",(function(){return Re})),n.d(r,"bind",(function(){return Fe})),n.d(r,"bindAll",(function(){return ze})),n.d(r,"memoize",(function(){return Be})),n.d(r,"delay",(function(){return He})),n.d(r,"defer",(function(){return Ue})),n.d(r,"throttle",(function(){return $e})),n.d(r,"debounce",(function(){return We})),n.d(r,"wrap",(function(){return qe})),n.d(r,"negate",(function(){return Ge})),n.d(r,"compose",(function(){return Ke})),n.d(r,"after",(function(){return Ye})),n.d(r,"before",(function(){return Ze})),n.d(r,"once",(function(){return Xe})),n.d(r,"findKey",(function(){return Je})),n.d(r,"findIndex",(function(){return et})),n.d(r,"findLastIndex",(function(){return tt})),n.d(r,"sortedIndex",(function(){return nt})),n.d(r,"indexOf",(function(){return it})),n.d(r,"lastIndexOf",(function(){return ot})),n.d(r,"find",(function(){return st})),n.d(r,"detect",(function(){return st})),n.d(r,"findWhere",(function(){return at})),n.d(r,"each",(function(){return lt})),n.d(r,"forEach",(function(){return lt})),n.d(r,"map",(function(){return ct})),n.d(r,"collect",(function(){return ct})),n.d(r,"reduce",(function(){return dt})),n.d(r,"foldl",(function(){return dt})),n.d(r,"inject",(function(){return dt})),n.d(r,"reduceRight",(function(){return ht})),n.d(r,"foldr",(function(){return ht})),n.d(r,"filter",(function(){return ft})),n.d(r,"select",(function(){return ft})),n.d(r,"reject",(function(){return pt})),n.d(r,"every",(function(){return gt})),n.d(r,"all",(function(){return gt})),n.d(r,"some",(function(){return mt})),n.d(r,"any",(function(){return mt})),n.d(r,"contains",(function(){return vt})),n.d(r,"includes",(function(){return vt})),n.d(r,"include",(function(){return vt})),n.d(r,"invoke",(function(){return bt})),n.d(r,"pluck",(function(){return yt})),n.d(r,"where",(function(){return wt})),n.d(r,"max",(function(){return xt})),n.d(r,"min",(function(){return Ot})),n.d(r,"shuffle",(function(){return _t})),n.d(r,"sample",(function(){return Ct})),n.d(r,"sortBy",(function(){return St})),n.d(r,"groupBy",(function(){return kt})),n.d(r,"indexBy",(function(){return Tt})),n.d(r,"countBy",(function(){return Et})),n.d(r,"partition",(function(){return Pt})),n.d(r,"toArray",(function(){return Mt})),n.d(r,"size",(function(){return Dt})),n.d(r,"pick",(function(){return Lt})),n.d(r,"omit",(function(){return Nt})),n.d(r,"first",(function(){return Ft})),n.d(r,"head",(function(){return Ft})),n.d(r,"take",(function(){return Ft})),n.d(r,"initial",(function(){return Rt})),n.d(r,"last",(function(){return zt})),n.d(r,"rest",(function(){return Vt})),n.d(r,"tail",(function(){return Vt})),n.d(r,"drop",(function(){return Vt})),n.d(r,"compact",(function(){return Bt})),n.d(r,"flatten",(function(){return Ht})),n.d(r,"without",(function(){return $t})),n.d(r,"uniq",(function(){return Wt})),n.d(r,"unique",(function(){return Wt})),n.d(r,"union",(function(){return qt})),n.d(r,"intersection",(function(){return Gt})),n.d(r,"difference",(function(){return Ut})),n.d(r,"unzip",(function(){return Kt})),n.d(r,"transpose",(function(){return Kt})),n.d(r,"zip",(function(){return Yt})),n.d(r,"object",(function(){return Zt})),n.d(r,"range",(function(){return Xt})),n.d(r,"chunk",(function(){return Jt})),n.d(r,"mixin",(function(){return en})),n.d(r,"default",(function(){return tn}));var i=n(4);function o(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}}function s(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function a(e){return null===e}function l(e){return void 0===e}function c(e){return!0===e||!1===e||"[object Boolean]"===i.s.call(e)}function u(e){return!(!e||1!==e.nodeType)}function d(e){return function(t){return i.s.call(t)==="[object "+e+"]"}}var h=d("String"),f=d("Number"),p=d("Date"),g=d("RegExp"),m=d("Error"),v=d("Symbol"),b=d("Map"),y=d("WeakMap"),w=d("Set"),x=d("WeakSet"),O=d("ArrayBuffer"),C=d("DataView"),_=i.k||d("Array"),S=d("Function");"object"!=typeof Int8Array&&"function"!=typeof(i.p.document&&i.p.document.childNodes)&&(S=function(e){return"function"==typeof e||!1});var j=S;function k(e,t){return null!=e&&i.i.call(e,t)}var T=d("Arguments");!function(){T(arguments)||(T=function(e){return k(e,"callee")})}();var E=T;function P(e){return!v(e)&&Object(i.f)(e)&&!isNaN(parseFloat(e))}function A(e){return f(e)&&Object(i.g)(e)}function M(e){return function(){return e}}function D(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=i.b}}function I(e){return function(t){return null==t?void 0:t[e]}}var L=I("byteLength"),N=D(L),R=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,F=i.r?function(e){return i.l?Object(i.l)(e)&&!C(e):N(e)&&R.test(i.s.call(e))}:M(!1),V=I("length"),z=D(V);function B(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=i.n.length,r=e.constructor,o=j(r)&&r.prototype||i.c,s="constructor";for(k(e,s)&&!t.contains(s)&&t.push(s);n--;)(s=i.n[n])in e&&e[s]!==o[s]&&!t.contains(s)&&t.push(s)}function H(e){if(!s(e))return[];if(i.m)return Object(i.m)(e);var t=[];for(var n in e)k(e,n)&&t.push(n);return i.h&&B(e,t),t}function U(e){return null==e||(z(e)&&(_(e)||h(e)||E(e))?0===e.length:0===H(e).length)}function $(e,t){var n=H(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0}function W(e){return e instanceof W?e:this instanceof W?void(this._wrapped=e):new W(e)}function q(e,t){return function e(t,n,r,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var s=typeof t;return("function"===s||"object"===s||"object"==typeof n)&&function t(n,r,o,s){n instanceof W&&(n=n._wrapped),r instanceof W&&(r=r._wrapped);var a=i.s.call(n);if(a!==i.s.call(r))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/+n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return i.d.valueOf.call(n)===i.d.valueOf.call(r);case"[object ArrayBuffer]":return t(new DataView(n),new DataView(r),o,s);case"[object DataView]":var l=L(n);if(l!==L(r))return!1;for(;l--;)if(n.getUint8(l)!==r.getUint8(l))return!1;return!0}if(F(n))return t(new DataView(n.buffer),new DataView(r.buffer),o,s);var c="[object Array]"===a;if(!c){if("object"!=typeof n||"object"!=typeof r)return!1;var u=n.constructor,d=r.constructor;if(u!==d&&!(j(u)&&u instanceof u&&j(d)&&d instanceof d)&&"constructor"in n&&"constructor"in r)return!1}s=s||[];for(var h=(o=o||[]).length;h--;)if(o[h]===n)return s[h]===r;if(o.push(n),s.push(r),c){if((h=n.length)!==r.length)return!1;for(;h--;)if(!e(n[h],r[h],o,s))return!1}else{var f,p=H(n);if(h=p.length,H(r).length!==h)return!1;for(;h--;)if(!k(r,f=p[h])||!e(n[f],r[f],o,s))return!1}return o.pop(),s.pop(),!0}(t,n,r,o)}(e,t)}function G(e){if(!s(e))return[];var t=[];for(var n in e)t.push(n);return i.h&&B(e,t),t}function K(e){for(var t=H(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function Y(e){for(var t=H(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function Z(e){for(var t={},n=H(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function X(e){var t=[];for(var n in e)j(e[n])&&t.push(n);return t.sort()}function J(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,l=0;l<a;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}}W.VERSION=i.e,W.prototype.valueOf=W.prototype.toJSON=W.prototype.value=function(){return this._wrapped},W.prototype.toString=function(){return String(this._wrapped)};var Q=J(G),ee=J(H),te=J(G,!0);function ne(e){if(!s(e))return{};if(i.j)return Object(i.j)(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function re(e,t){var n=ne(e);return t&&ee(n,t),n}function ie(e){return s(e)?_(e)?e.slice():Q({},e):e}function oe(e,t){return t(e),e}function se(e,t){if(!_(t))return k(e,t);for(var n=t.length,r=0;r<n;r++){var o=t[r];if(null==e||!i.i.call(e,o))return!1;e=e[o]}return!!n}function ae(e){return e}function le(e){return e=ee({},e),function(t){return $(t,e)}}function ce(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function ue(e){return _(e)?function(t){return ce(t,e)}:I(e)}function de(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}}function he(e,t,n){return null==e?ae:j(e)?de(e,t,n):s(e)&&!_(e)?le(e):ue(e)}function fe(e,t){return he(e,t,1/0)}function pe(e,t,n){return W.iteratee!==fe?W.iteratee(e,t):he(e,t,n)}function ge(e,t,n){t=pe(t,n);for(var r=H(e),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=t(e[a],a,e)}return o}function me(){}function ve(e){return null==e?function(){}:function(t){return _(t)?ce(e,t):e[t]}}function be(e,t,n){var r=Array(Math.max(0,e));t=de(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}function ye(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}W.iteratee=fe;var we=Date.now||function(){return(new Date).getTime()};function xe(e){var t=function(t){return e[t]},n="(?:"+H(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return r.test(e=null==e?"":""+e)?e.replace(i,t):e}}var Oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ce=xe(Oe),_e=xe(Z(Oe)),Se=W.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},je=/(.)^/,ke={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Te=/\\|'|\r|\n|\u2028|\u2029/g;function Ee(e){return"\\"+ke[e]}function Pe(e,t,n){!t&&n&&(t=n),t=te({},t,W.templateSettings);var r,i=RegExp([(t.escape||je).source,(t.interpolate||je).source,(t.evaluate||je).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,(function(t,n,r,i,a){return s+=e.slice(o,a).replace(Te,Ee),o=a+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),t})),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var a=function(e){return r.call(this,e,W)};return a.source="function("+(t.variable||"obj")+"){\n"+s+"}",a}function Ae(e,t,n){_(t)||(t=[t]);var r=t.length;if(!r)return j(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=j(o)?o.call(e):o}return e}var Me=0;function De(e){var t=++Me+"";return e?e+t:t}function Ie(e){var t=W(e);return t._chain=!0,t}function Le(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=ne(e.prototype),a=e.apply(o,i);return s(a)?a:o}var Ne=o((function(e,t){var n=Ne.placeholder,r=function(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===n?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return Le(e,r,this,this,s)};return r}));Ne.placeholder=W;var Re=Ne,Fe=o((function(e,t,n){if(!j(e))throw new TypeError("Bind must be called on a function");var r=o((function(i){return Le(e,r,t,this,n.concat(i))}));return r}));function Ve(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var i=r.length,o=0,s=V(e);o<s;o++){var a=e[o];if(z(a)&&(_(a)||E(a)))if(t>1)Ve(a,t-1,n,r),i=r.length;else for(var l=0,c=a.length;l<c;)r[i++]=a[l++];else n||(r[i++]=a)}return r}var ze=o((function(e,t){var n=(t=Ve(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=Fe(e[r],e)}return e}));function Be(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return k(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n}var He=o((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),Ue=Re(He,W,1);function $e(e,t,n){var r,i,o,s,a=0;n||(n={});var l=function(){a=!1===n.leading?0:we(),r=null,s=e.apply(i,o),r||(i=o=null)},c=function(){var c=we();a||!1!==n.leading||(a=c);var u=t-(c-a);return i=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),a=c,s=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,u)),s};return c.cancel=function(){clearTimeout(r),a=0,r=i=o=null},c}function We(e,t,n){var r,i,s=function(t,n){r=null,n&&(i=e.apply(t,n))},a=o((function(o){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(s,t),a&&(i=e.apply(this,o))}else r=He(s,t,this,o);return i}));return a.cancel=function(){clearTimeout(r),r=null},a}function qe(e,t){return Re(t,e)}function Ge(e){return function(){return!e.apply(this,arguments)}}function Ke(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function Ye(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Ze(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var Xe=Re(Ze,2);function Je(e,t,n){t=pe(t,n);for(var r,i=H(e),o=0,s=i.length;o<s;o++)if(t(e[r=i[o]],r,e))return r}function Qe(e){return function(t,n,r){n=pe(n,r);for(var i=V(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}var et=Qe(1),tt=Qe(-1);function nt(e,t,n,r){for(var i=(n=pe(n,r,1))(t),o=0,s=V(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o}function rt(e,t,n){return function(r,o,s){var a=0,l=V(r);if("number"==typeof s)e>0?a=s>=0?s:Math.max(s+l,a):l=s>=0?Math.min(s+1,l):s+l+1;else if(n&&s&&l)return r[s=n(r,o)]===o?s:-1;if(o!=o)return(s=t(i.q.call(r,a,l),A))>=0?s+a:-1;for(s=e>0?a:l-1;s>=0&&s<l;s+=e)if(r[s]===o)return s;return-1}}var it=rt(1,et,nt),ot=rt(-1,tt);function st(e,t,n){var r=(z(e)?et:Je)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function at(e,t){return st(e,le(t))}function lt(e,t,n){var r,i;if(t=de(t,n),z(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=H(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e}function ct(e,t,n){t=pe(t,n);for(var r=!z(e)&&H(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o}function ut(e){var t=function(t,n,r,i){var o=!z(t)&&H(t),s=(o||t).length,a=e>0?0:s-1;for(i||(r=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var l=o?o[a]:a;r=n(r,t[l],l,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,de(n,i,4),r,o)}}var dt=ut(1),ht=ut(-1);function ft(e,t,n){var r=[];return t=pe(t,n),lt(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function pt(e,t,n){return ft(e,Ge(pe(t)),n)}function gt(e,t,n){t=pe(t,n);for(var r=!z(e)&&H(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0}function mt(e,t,n){t=pe(t,n);for(var r=!z(e)&&H(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1}function vt(e,t,n,r){return z(e)||(e=K(e)),("number"!=typeof n||r)&&(n=0),it(e,t,n)>=0}var bt=o((function(e,t,n){var r,i;return j(t)?i=t:_(t)&&(r=t.slice(0,-1),t=t[t.length-1]),ct(e,(function(e){var o=i;if(!o){if(r&&r.length&&(e=ce(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)}))}));function yt(e,t){return ct(e,ue(t))}function wt(e,t){return ft(e,le(t))}function xt(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=z(e)?e:K(e)).length;a<l;a++)null!=(r=e[a])&&r>o&&(o=r);else t=pe(t,n),lt(e,(function(e,n,r){((i=t(e,n,r))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)}));return o}function Ot(e,t,n){var r,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=z(e)?e:K(e)).length;a<l;a++)null!=(r=e[a])&&r<o&&(o=r);else t=pe(t,n),lt(e,(function(e,n,r){((i=t(e,n,r))<s||i===1/0&&o===1/0)&&(o=e,s=i)}));return o}function Ct(e,t,n){if(null==t||n)return z(e)||(e=K(e)),e[ye(e.length-1)];var r=z(e)?ie(e):K(e),i=V(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=ye(s,o),l=r[s];r[s]=r[a],r[a]=l}return r.slice(0,t)}function _t(e){return Ct(e,1/0)}function St(e,t,n){var r=0;return t=pe(t,n),yt(ct(e,(function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")}function jt(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=pe(r,i),lt(n,(function(t,i){var s=r(t,i,n);e(o,t,s)})),o}}var kt=jt((function(e,t,n){k(e,n)?e[n].push(t):e[n]=[t]})),Tt=jt((function(e,t,n){e[n]=t})),Et=jt((function(e,t,n){k(e,n)?e[n]++:e[n]=1})),Pt=jt((function(e,t,n){e[n?0:1].push(t)}),!0),At=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Mt(e){return e?_(e)?i.q.call(e):h(e)?e.match(At):z(e)?ct(e,ae):K(e):[]}function Dt(e){return null==e?0:z(e)?e.length:H(e).length}function It(e,t,n){return t in n}var Lt=o((function(e,t){var n={},r=t[0];if(null==e)return n;j(r)?(t.length>1&&(r=de(r,t[1])),t=G(e)):(r=It,t=Ve(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];r(a,s,e)&&(n[s]=a)}return n})),Nt=o((function(e,t){var n,r=t[0];return j(r)?(r=Ge(r),t.length>1&&(n=t[1])):(t=ct(Ve(t,!1,!1),String),r=function(e,n){return!vt(t,n)}),Lt(e,r,n)}));function Rt(e,t,n){return i.q.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Ft(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:Rt(e,e.length-t)}function Vt(e,t,n){return i.q.call(e,null==t||n?1:t)}function zt(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:Vt(e,Math.max(0,e.length-t))}function Bt(e){return ft(e,Boolean)}function Ht(e,t){return Ve(e,t,!1)}var Ut=o((function(e,t){return t=Ve(t,!0,!0),ft(e,(function(e){return!vt(t,e)}))})),$t=o((function(e,t){return Ut(e,t)}));function Wt(e,t,n,r){c(t)||(r=n,n=t,t=!1),null!=n&&(n=pe(n,r));for(var i=[],o=[],s=0,a=V(e);s<a;s++){var l=e[s],u=n?n(l,s,e):l;t&&!n?(s&&o===u||i.push(l),o=u):n?vt(o,u)||(o.push(u),i.push(l)):vt(i,l)||i.push(l)}return i}var qt=o((function(e){return Wt(Ve(e,!0,!0))}));function Gt(e){for(var t=[],n=arguments.length,r=0,i=V(e);r<i;r++){var o=e[r];if(!vt(t,o)){var s;for(s=1;s<n&&vt(arguments[s],o);s++);s===n&&t.push(o)}}return t}function Kt(e){for(var t=e&&xt(e,V).length||0,n=Array(t),r=0;r<t;r++)n[r]=yt(e,r);return n}var Yt=o(Kt);function Zt(e,t){for(var n={},r=0,i=V(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function Xt(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i}function Jt(e,t){if(null==t||t<1)return[];for(var n=[],r=0,o=e.length;r<o;)n.push(i.q.call(e,r,r+=t));return n}function Qt(e,t){return e._chain?W(t).chain():t}function en(e){return lt(X(e),(function(t){var n=W[t]=e[t];W.prototype[t]=function(){var e=[this._wrapped];return i.o.apply(e,arguments),Qt(this,n.apply(W,e))}})),W}lt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=i.a[e];W.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Qt(this,n)}})),lt(["concat","join","slice"],(function(e){var t=i.a[e];W.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Qt(this,e)}}));var tn=W,nn=en(r);nn._=nn;var rn=nn},function(e,t,n){(function(r){var i,o,s;s="object"==typeof self&&self.self===self&&self||"object"==typeof r&&r.global===r&&r,i=[n(0),n(11),t],void 0===(o=(function(e,t,n){s.Backbone=function(e,t,n,r){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,r){n.each(t,(function(t,i){n[i]&&(e.prototype[i]=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],a(e,this),i)};case 4:return function(e,i,o){return n[t](this[r],a(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}}(t,i,r))}))},a=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?l(e):n.isString(e)?function(t){return t.get(e)}:e},l=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},c=t.Events={},u=/\s+/,d=function(e,t,r,i,o){var s,a=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(s=n.keys(r);a<s.length;a++)t=d(e,t,s[a],r[s[a]],o)}else if(r&&u.test(r))for(s=r.split(u);a<s.length;a++)t=e(t,s[a],i,o);else t=e(t,r,i,o);return t};c.on=function(e,t,n){return h(this,e,t,n)};var h=function(e,t,n,r,i){return e._events=d(f,e._events||{},t,n,{context:r,ctx:e,listening:i}),i&&((e._listeners||(e._listeners={}))[i.id]=i),e};c.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[i];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=o[i]={obj:e,objId:i,id:a,listeningTo:o,count:0}}return h(e,t,r,this,s),this};var f=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return e};c.off=function(e,t,n){return this._events?(this._events=d(p,this._events,e,t,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:n.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(t,r,this)}return this};var p=function(e,t,r,i){if(e){var o,s=0,a=i.context,l=i.listeners;if(t||r||a){for(var c=t?[t]:n.keys(e);s<c.length;s++){var u=e[t=c[s]];if(!u)break;for(var d=[],h=0;h<u.length;h++){var f=u[h];r&&r!==f.callback&&r!==f.callback._callback||a&&a!==f.context?d.push(f):(o=f.listening)&&0==--o.count&&(delete l[o.id],delete o.listeningTo[o.objId])}d.length?e[t]=d:delete e[t]}return e}for(var p=n.keys(l);s<p.length;s++)delete l[(o=l[p[s]]).id],delete o.listeningTo[o.objId]}};c.once=function(e,t,r){var i=d(g,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},c.listenToOnce=function(e,t,r){var i=d(g,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var g=function(e,t,r,i){if(r){var o=e[t]=n.once((function(){i(t,o),r.apply(this,arguments)}));o._callback=r}return e};c.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return d(m,this._events,e,void 0,n),this};var m=function(e,t,n,r){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&v(i,r),o&&v(o,[t].concat(r))}return e},v=function(e,t){var n,r=-1,i=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};c.bind=c.on,c.unbind=c.off,n.extend(t,c);var b=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,s=r.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,d=this._previousAttributes;for(var h in i)n.isEqual(c[h],t=i[h])||a.push(h),n.isEqual(d[h],t)?delete u[h]:u[h]=t,o?delete c[h]:c[h]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=r);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,c[a[f]],r)}if(l)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var o=e[i];n.isEqual(t[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},R(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var s=this,a=r.success,l=this.attributes;r.success=function(e){s.attributes=l;var t=r.parse?s.parse(e,r):e;if(o&&(t=n.extend({},i,t)),t&&!s.set(t,r))return!1;a&&a.call(r.context,s,e,r),s.trigger("sync",s,e,r)},R(this,r),i&&o&&(this.attributes=n.extend({},l,i));var c=this.isNew()?"create":r.patch?"patch":"update";"patch"!==c||r.attrs||(r.attrs=i);var u=this.sync(c,this,r);return this.attributes=l,u},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&o(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var s=!1;return this.isNew()?n.defer(e.success):(R(this,e),s=this.sync("delete",this,e)),i||o(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||N();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}}),s(b,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},O=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r,i=Array(e.length-n),o=t.length;for(r=0;r<i.length;r++)i[r]=e[r+n];for(r=0;r<o;r++)e[r+n]=t[r];for(r=0;r<i.length;r++)e[r+o+n]=i[r]};n.extend(y.prototype,c,{model:b,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){(t=n.extend({},w,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,s,a=[],l=[],c=[],u=[],d={},h=t.add,f=t.merge,p=t.remove,g=!1,m=this.comparator&&null==i&&!1!==t.sort,v=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){var b=this.get(o=e[s]);if(b){if(f&&o!==b){var y=this._isModel(o)?o.attributes:o;t.parse&&(y=b.parse(y,t)),b.set(y,t),c.push(b),m&&!g&&(g=b.hasChanged(v))}d[b.cid]||(d[b.cid]=!0,a.push(b)),e[s]=b}else h&&(o=e[s]=this._prepareModel(o,t))&&(l.push(o),this._addReference(o,t),d[o.cid]=!0,a.push(o))}if(p){for(s=0;s<this.length;s++)d[(o=this.models[s]).cid]||u.push(o);u.length&&this._removeModels(u,t)}var x=!1;if(a.length&&!m&&h&&p?(x=this.length!==a.length||n.some(this.models,(function(e,t){return e!==a[t]})),this.models.length=0,O(this.models,a,0),this.length=this.models.length):l.length&&(m&&(g=!0),O(this.models,l,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!t.silent){for(s=0;s<l.length;s++)null!=i&&(t.index=i+s),(o=l[s]).trigger("add",o,this,t);(g||x)&&this.trigger("sort",this,t),(l.length||u.length||c.length)&&(t.changes={added:l,removed:u,merged:c},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,r=this;return e.success=function(n){r[e.reset?"reset":"set"](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},R(this,e),this.sync("read",this,e)},create:function(e,t){var r=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;r||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,n){r&&i.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=o,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}}),s(y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments)},_=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(_);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var o=j[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||N()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1);var l=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,l&&l.call(i.context,e,t,n)};var c=i.xhr=t.ajax(n.extend(s,i));return r.trigger("request",r,c,i),c};var j={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,P=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,c,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,(function(n){var s=o._extractParameters(e,n);!1!==o.execute(i,s,r)&&(o.trigger.apply(o,["route:"+r].concat(s)),o.trigger("route",r,s),t.history.trigger("route",o,r,s))})),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(T,"(?:$1)?").replace(E,(function(e,t){return t?e:"([^/?]+)"})).replace(P,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,(function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null}))}});var M=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,L=/#.*$/;M.started=!1,n.extend(M.prototype,c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(D,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");if(M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(I,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0})))},navigate:function(e,t){if(!M.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(L,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M,b.extend=y.extend=k.extend=C.extend=M.extend=function(e,t){var r,i=this;return r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t),r.prototype=n.create(i.prototype,e),r.prototype.constructor=r,r.__super__=i.prototype,r};var N=function(){throw new Error('A "url" property or function must be specified')},R=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}(s,n,e,t)}).apply(t,i))||(e.exports=o)}).call(this,n(26))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";n.d(t,"p",(function(){return x})),n.d(t,"u",(function(){return h})),n.d(t,"t",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"r",(function(){return c})),n.d(t,"g",(function(){return O})),n.d(t,"d",(function(){return C})),n.d(t,"b",(function(){return m})),n.d(t,"q",(function(){return w})),n.d(t,"f",(function(){return j})),n.d(t,"m",(function(){return k})),n.d(t,"e",(function(){return y})),n.d(t,"w",(function(){return d})),n.d(t,"s",(function(){return v})),n.d(t,"h",(function(){return _})),n.d(t,"i",(function(){return p})),n.d(t,"c",(function(){return E})),n.d(t,"j",(function(){return M})),n.d(t,"v",(function(){return D})),n.d(t,"a",(function(){return u})),n.d(t,"n",(function(){return T})),n.d(t,"l",(function(){return P})),n.d(t,"o",(function(){return A}));var r=n(9),i=n.n(r),o=n(8),s=n.n(o),a=n(0),l=window.Element.prototype,c=l.matches||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector,u=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(a.isArray)(t)?s()(t):[t];if(r.length){var i=r.shift();if(i&&(!n.unique||!document.querySelector('link[href="'.concat(i,'"]')))){var o=document.head,l=document.createElement("link");l.href=i,l.rel="stylesheet",n.prepand?o.insertBefore(l,o.firstChild):o.appendChild(l)}e(r)}},d=function(e,t){var n={},r=Object(a.keys)(t);for(var i in e)if(e.hasOwnProperty(i)){var o=e[i],s=t[i];r.indexOf(i)>=0?o!==s&&(n[i]=s):n[i]=null}for(var l in t)t.hasOwnProperty(l)&&Object(a.isUndefined)(e[l])&&(n[l]=t[l]);return n},h=function(e,t,n){t=t.split(/\s+/),e=e instanceof Array?e:[e];for(var r=function(r){e.forEach((function(e){return e.addEventListener(t[r],n)}))},i=0;i<t.length;++i)r(i)},f=function(e,t,n){t=t.split(/\s+/),e=e instanceof Array?e:[e];for(var r=function(r){e.forEach((function(e){return e.removeEventListener(t[r],n)}))},i=0;i<t.length;++i)r(i)},p=function(e){return e.replace(parseFloat(e),"")},g=function(e){return e[0].toUpperCase()+e.toLowerCase().slice(1)},m=function(e){var t=e.split("-").filter(String);return t[0].toLowerCase()+t.slice(1).map(g)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0;if(isNaN(e))return n;if(e=parseFloat(e),Math.floor(e)!==e){var i=t.toString().split(".")[1];r=i?i.length:0}return r?parseFloat(e.toFixed(r)):e},b=function(e){return"draggable"in document.createElement("i")&&(e?e.get("Config").nativeDnD:1)},y=function(e){return Object(a.isElement)(e)||w(e)?e:e&&e.getEl?e.getEl():void 0},w=function(e){return e&&3===e.nodeType},x=function(e){return e&&!w(e)&&!function(e){return e&&8===e.nodeType}(e)},O=function(e,t){var n=e;return Object(a.isElement)(e)&&(n=t(e).data("model")),n},C=function(e){var t,n={top:0,left:0,width:0,height:0};if(!e)return n;if(w(e)){var r=document.createRange();r.selectNode(e),t=r.getBoundingClientRect(),r.detach()}return t||(e.getBoundingClientRect?e.getBoundingClientRect():n)},_=function(e){return e.touches&&e.touches[0]?e.touches[0]:e},S=function(e){return e.which||e.keyCode},j=function(e){return String.fromCharCode(S(e))},k=function(e){return 27===S(e)},T=function(e){return null!==e&&!Array.isArray(e)&&"object"===i()(e)},E=function(e){return e&&e.charAt(0).toUpperCase()+e.substring(1)},P=function(e){return e&&e.toHTML},A=function(e){return e&&e.toCSS},M=function(e){return e.__gjsv},D=function(e,t){e.__gjsv=t}},function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return r})),n.d(t,"p",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"o",(function(){return l})),n.d(t,"q",(function(){return c})),n.d(t,"s",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"r",(function(){return h})),n.d(t,"k",(function(){return f})),n.d(t,"m",(function(){return p})),n.d(t,"j",(function(){return g})),n.d(t,"l",(function(){return m})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"h",(function(){return y})),n.d(t,"n",(function(){return w})),n.d(t,"b",(function(){return x}));var r="1.11.0",i="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||Function("return this")()||{},o=Array.prototype,s=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,l=o.push,c=o.slice,u=s.toString,d=s.hasOwnProperty,h="undefined"!=typeof ArrayBuffer,f=Array.isArray,p=Object.keys,g=Object.create,m=h&&ArrayBuffer.isView,v=isNaN,b=isFinite,y=!{toString:null}.propertyIsEnumerable("toString"),w=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],x=Math.pow(2,53)-1}).call(this,n(26))},function(e,t,n){"use strict";n.r(t),n.d(t,"eventDrag",(function(){return O}));var r=n(9),i=n.n(r),o=n(2),s=n.n(o),a=n(0),l=n(3),c=n(23),u=n(1),d=n.n(u),h=n(21),f=n(10),p=n(12);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=d.a.Model.extend({defaults:{type:"text",label:"",name:"",min:"",max:"",unit:"",step:1,value:"",target:"",default:"",placeholder:"",changeProp:0,options:[]},initialize:function(){var e=this.get("target"),t=this.get("name"),n=this.get("changeProp");if(!this.get("id")&&this.set("id",t),e){this.target=e,this.unset("target");var r=n?"change:".concat(t):"change:attributes:".concat(t);this.listenTo(e,r,this.targetUpdated)}},props:function(){return this.attributes},targetUpdated:function(){var e=this.getTargetValue();this.set({value:e},{fromTarget:1})},getTargetValue:function(){var e,t=this.get("name"),n=this.target;return e=this.get("changeProp")?n.get(t):n.getAttributes()[t],Object(a.isUndefined)(e)?"":e},setTargetValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.target,r=this.get("name");if(!Object(a.isUndefined)(e)){var i=e;if("false"===e?i=!1:"true"===e&&(i=!0),this.get("changeProp"))n.set(r,i,t);else{var o=m({},n.get("attributes"));o[r]=i,n.set("attributes",o,t)}}},setValueFromInput:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={value:e};this.set(r,m(m({},n),{},{avoidStore:1})),t&&(this.set("value","",n),this.set(r,n))},getInitValue:function(){var e,t=this.target,n=this.get("name");if(t){var r=t.get("attributes");e=this.get("changeProp")?t.get(n):r[n]}return e||this.get("value")||this.get("default")}}),b=d.a.Collection.extend({model:v,initialize:function(e){this.em=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).em||"",this.listenTo(this,"add",this.handleAdd),this.listenTo(this,"reset",this.handleReset)},handleReset:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).previousModels;(void 0===t?[]:t).forEach((function(e){return e.trigger("remove")}))},handleAdd:function(e){var t=this.target;t&&(e.target=t)},setTarget:function(e){this.target=e},add:function(e,t){var n=this.em;if(Object(a.isString)(e)||Object(a.isArray)(e)){var r=n&&n.get&&n.get("TraitManager"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{build:function(t){var n=[];"string"==typeof t&&(t=[t]);for(var r=0;r<t.length;r++){var i={},o=t[r];switch(i.name=o,o){case"target":i.type="select",i.default=!1,i.options=e.optionsTarget}n.push(i)}return n}}}(r&&r.getConfig());Object(a.isString)(e)&&(e=[e]);for(var o=0,s=e.length;o<s;o++){var l=e[o],c=Object(a.isString)(l)?i.build(l)[0]:l;c.target=this.target,e[o]=c}}return d.a.Collection.prototype.add.apply(this,[e,t])}});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},O="component:drag",C=d.a.Model.extend(c.a).extend({defaults:{tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",classes:"",script:"","script-export":"",attributes:"",traits:["id","title"],propagate:"",dmode:"",toolbar:null},init:function(){},updated:function(e,t,n){},removed:function(){},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.em,i=this.parent(),o=i&&i.attributes;if(o&&o.propagate){var s={},l=o.propagate;l.forEach((function(e){return s[e]=i.get(e)})),s.propagate=l,s=w(w({},s),t),this.set(s)}var c=this.get("propagate");c&&this.set("propagate",Object(a.isArray)(c)?c:[c]),n&&n.config&&n.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),n.em=r,this.opt=n,this.em=r,this.frame=n.frame,this.config=n.config||{},this.set("attributes",w(w({},this.defaults.attributes||{}),this.get("attributes")||{})),this.ccid=C.createId(this,n),this.initClasses(),this.initTraits(),this.initComponents(),this.initToolbar(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.set("status",""),this.views=[],["classes","traits","components"].forEach((function(t){var n="add remove ".concat("components"!==t?"change":"");e.listenTo(e.get(t),n.trim(),(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.emitUpdate.apply(e,[t].concat(r))}))})),n.temporary||(this.init(),r&&r.trigger("component:create",this))},is:function(e){return!(this.get("type")!=e)},props:function(){return this.attributes},index:function(){var e=this.collection;return e&&e.indexOf(this)},setDragMode:function(e){return this.set("dmode",e)},find:function(e){var t=[],n=this.view.$el.find(e);return n.each((function(e){var r=n.eq(e).data("model");r&&t.push(r)})),t},findType:function(e){var t=[];return function n(r){return r.forEach((function(r){r.is(e)&&t.push(r),n(r.components())}))}(this.components()),t},closest:function(e){var t=this.view.$el.closest(e);return t.length&&t.data("model")},closestType:function(e){for(var t=this.parent();t&&!t.is(e);)t=t.parent();return t},tagUpdated:function(){var e=this.collection,t=e.indexOf(this);e.remove(this),e.add(this,{at:t})},replaceWith:function(e){var t=this.collection,n=t.indexOf(this);return t.remove(this),t.add(e,{at:n})},attrUpdated:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.get("attributes"),o=i.class;o&&this.setClass(o),delete i.class;var s=i.style;s&&this.setStyle(s),delete i.style;var c=w({},this.previous("attributes")),u=Object(l.w)(c,this.get("attributes"));Object(a.keys)(u).forEach((function(e){return n.trigger("change:attributes:".concat(e),n,u[e],r)}))},setAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.set("attributes",w({},e),t),this},addAttributes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=w(w({},this.getAttributes()),e);return this.setAttributes(n,t),this},getStyle:function(){var e=this.em;if(e&&e.getConfig("avoidInlineStyle")){var t=e.get("state"),n=e.get("CssComposer").getIdRule(this.getId(),{state:t});if(this.rule=n,n)return n.getStyle()}return c.a.getStyle.call(this)},setStyle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=this.opt;if(r&&r.getConfig("avoidInlineStyle")&&!i.temporary){var o=this.get("style")||{};t=w(w({},t=Object(a.isString)(t)?this.parseStyle(t):t),o);var s=r.get("state"),u=r.get("CssComposer"),d=this.getStyle();this.rule=u.setIdRule(this.getId(),t,w(w({},n),{},{state:s}));var h=Object(l.w)(d,t);this.set("style",{},{silent:1}),Object(a.keys)(h).forEach((function(t){return e.trigger("change:style:".concat(t))}))}else t=c.a.setStyle.apply(this,arguments);return t},getAttributes:function(){var e,t=this.em,n=[],r=w({},this.get("attributes")),i=t&&t.get("SelectorManager"),o=this.getId();return this.get("classes").forEach((function(e){return n.push(Object(a.isString)(e)?e:e.get("name"))})),n.length&&(r.class=n.join(" ")),Object(a.has)(r,"id")||(function(e){return e&&e.getConfig("avoidInlineStyle")}(t)?e=i&&i.get(o,i.Selector.TYPE_ID):Object(a.isEmpty)(this.getStyle())||(e=1),e&&(r.id=this.getId())),r},addClass:function(e){var t=this.em.get("SelectorManager").addClass(e);return this.get("classes").add(t)},setClass:function(e){return this.get("classes").reset(),this.addClass(e)},removeClass:function(e){var t=[];e=Object(a.isArray)(e)?e:[e];var n=this.get("classes"),r=f.a.TYPE_CLASS;return e.forEach((function(e){e.split(" ").forEach((function(e){var i=n.where({name:e,type:r})[0];i&&t.push(n.remove(i))}))})),t},getClasses:function(){var e=this.getAttributes().class;return e?e.split(" "):[]},initClasses:function(){var e=this.get("attributes").class||[],t=[this,"change:classes",this.initClasses],n=this.get("classes")||e,r=Object(a.isString)(n)?n.split(" "):n;this.stopListening.apply(this,t);var i=this.normalizeClasses(r),o=new p.a([]);return this.set("classes",o),o.add(i),this.listenTo.apply(this,t),this},initComponents:function(){var e=[this,"change:components",this.initComponents];this.stopListening.apply(this,e);var t=new h.a(null,this.opt);t.parent=this;var n=this.get("components"),r=!this.opt.avoidChildren;return this.set("components",t),r&&t.add(Object(a.isFunction)(n)?n(this):n),this.listenTo.apply(this,e),this},initTraits:function(e){var t=this.em,n=[this,"change:traits",this.initTraits];this.stopListening.apply(this,n),this.loadTraits();var r=w({},this.get("attributes")),i=this.get("traits");return i.each((function(e){if(!e.get("changeProp")){var t=e.get("name"),n=e.getInitValue();t&&n&&(r[t]=n)}})),i.length&&this.set("attributes",r),this.listenTo.apply(this,n),e&&t&&t.trigger("component:toggled"),this},append:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.components().add(e,t);return Object(a.isArray)(n)?n:[n]},components:function(e){var t=this.get("components");return Object(a.isUndefined)(e)?t:(t.reset(),e&&this.append(e))},empty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.components().reset(null,e),this},parent:function(){var e=this.collection;return e&&e.parent},scriptUpdated:function(){this.set("scriptUpdated",1)},initToolbar:function(){var e=this.em,t=e&&e.getConfig("stylePrefix")||"";if(!this.get("toolbar")){var n=[];this.collection&&n.push({attributes:{class:"fa fa-arrow-up"},command:function(e){return e.runCommand("core:component-exit",{force:1})}}),this.get("draggable")&&n.push({attributes:{class:"fa fa-arrows ".concat(t,"no-touch-actions"),draggable:!0},command:"tlb-move"}),this.get("copyable")&&n.push({attributes:{class:"fa fa-clone"},command:"tlb-clone"}),this.get("removable")&&n.push({attributes:{class:"fa fa-trash-o"},command:"tlb-delete"}),this.set("toolbar",n)}},loadTraits:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=e||this.get("traits"),!((e=Object(a.isFunction)(e)?e(this):e)instanceof b)){var n=new b([],this.opt);n.setTarget(this),e.length&&(e.forEach((function(e){return e.attributes&&delete e.attributes.value})),n.add(e)),this.set("traits",n,t)}return this},getTrait:function(e){return this.get("traits").filter((function(t){return t.get("id")===e||t.get("name")===e}))[0]},updateTrait:function(e,t){var n=this.em,r=this.getTrait(e);return r&&r.set(t),n&&n.trigger("component:toggled"),this},getTraitIndex:function(e){var t=this.getTrait(e);return t?this.get("traits").indexOf(t):t},removeTrait:function(e){var t=this,n=this.em,r=(Object(a.isArray)(e)?e:[e]).map((function(e){return t.getTrait(e)})),i=this.get("traits").remove(r);return n&&n.trigger("component:toggled"),i},addTrait:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.em,r=this.get("traits").add(e,t);return n&&n.trigger("component:toggled"),r},normalizeClasses:function(e){var t=[],n=this.em;if(n){var r=n.get("SelectorManager");if(r)return e.forEach((function(e){var n=r.add("string"==typeof e?e:e.name);t.push(n)})),t}},clone:function(){var e=this.em,t=this.getStyle(),n=w({},this.attributes),r=w({},this.opt);n.attributes=w({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.get("components").each((function(e,t){n.components[t]=e.clone()})),this.get("traits").each((function(e,t){n.traits[t]=e.clone()})),this.get("classes").each((function(e,t){n.classes[t]=e.get("name")})),n.status="",n.view="",r.collection=null,e&&e.getConfig("avoidInlineStyle")&&!Object(a.isEmpty)(t)&&(n.style=t);var i=new this.constructor(n,r);return e&&e.trigger("component:clone",i),this.trigger("component:clone",i),i},getName:function(){var e=this.em,t=this.attributes,n=t.type,r=t.tagName,i=this.get("name"),o="div"==r,s=n||(o?"box":r),a=!n&&r&&!o&&r,c="domComponents.names.",u=i&&e&&e.t("".concat(c).concat(i)),d=a&&e&&e.t("".concat(c).concat(a)),h=e&&(e.t("".concat(c).concat(n))||e.t("".concat(c).concat(r)));return this.get("custom-name")||u||i||d||Object(l.c)(a)||h||Object(l.c)(s)},getIcon:function(){var e=this.get("icon");return e?e+" ":""},toHTML:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=[],r=e.tag||t.get("tagName"),i=t.get("void"),o=e.attributes,s=this.getAttrToHTML();for(var l in delete e.tag,o&&(Object(a.isFunction)(o)?s=o(t,s)||{}:Object(a.isObject)(o)&&(s=o)),s){var c=s[l],u=Object(a.isString)(c)?c.replace(/"/g,"&quot;"):c;Object(a.isUndefined)(u)||(Object(a.isBoolean)(u)?u&&n.push(l):n.push("".concat(l,'="').concat(u,'"')))}var d=n.length?" ".concat(n.join(" ")):"",h="<".concat(r).concat(d).concat(i?"/":"",">").concat(t.get("content"));return t.get("components").each((function(t){return h+=t.toHTML(e)})),!i&&(h+="</".concat(r,">")),h},getAttrToHTML:function(){var e=this.getAttributes();return delete e.style,e},toJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=d.a.Model.prototype.toJSON.apply(this,t);return r.attributes=this.getAttributes(),delete r.attributes.class,delete r.toolbar,delete r.traits,this.em.getConfig("avoidDefaults")&&this.getChangedProps(r),r},getChangedProps:function(e){var t=e||d.a.Model.prototype.toJSON.apply(this),n=Object(a.result)(this,"defaults");return Object(a.forEach)(n,(function(e,n){-1===["type","content"].indexOf(n)&&t[n]===e&&delete t[n]})),Object(a.isEmpty)(t.type)&&delete t.type,Object(a.forEach)(["attributes","style"],(function(e){Object(a.isEmpty)(n[e])&&Object(a.isEmpty)(t[e])&&delete t[e]})),Object(a.forEach)(["classes","components"],(function(e){(!t[e]||Object(a.isEmpty)(n[e])&&!t[e].length)&&delete t[e]})),t},getId:function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},setId:function(e,t){var n=w({},this.get("attributes"));return n.id=e,this.set("attributes",n,t),this},getEl:function(e){var t=this.getView(e);return t&&t.el},getView:function(e){var t=this.view;return e&&(t=this.views.filter((function(t){return t._getFrame()===e.view}))[0]),t},getCurrentView:function(){var e=(this.em.get("currentFrame")||{}).model;return this.getView(e)},getScriptString:function(e){var t=this,n=e||this.get("script");if(!n)return n;if("function"==typeof n){var r=n.toString().trim();n=(r=r.replace(/^function[\s\w]*\(\)\s?\{/,"").replace(/\}$/,"")).trim()}var o=this.em.getConfig(),s=x(o.tagVarStart||"{[ "),l=x(o.tagVarEnd||" ]}"),c=new RegExp("".concat(s,"([\\w\\d-]*)").concat(l),"g");return n.replace(c,(function(e,n){t.scriptUpdated();var r=t.attributes[n]||"";return Object(a.isArray)(r)||"object"==i()(r)?JSON.stringify(r):r}))},emitUpdate:function(e){for(var t=this.em,n="component:update"+(e?":".concat(e):""),r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e&&this.updated.apply(this,[e,e&&this.get(e),e&&this.previous(e)].concat(i)),this.trigger.apply(this,[n].concat(i)),t&&t.trigger.apply(t,[n,this].concat(i))},onAll:function(e){return Object(a.isFunction)(e)&&(e(this),this.components().forEach((function(t){return t.onAll(e)}))),this},remove:function(){var e=this.collection;return e&&e.remove(this)},resetId:function(){var e=this.em,t=this.getId();if(t){var n=C.createId(this);this.setId(n);var r=e&&e.get("CssComposer").getIdRule(t),i=r&&r.get("selectors").at(0);return i&&i.set("name",n),this}},_getStyleRule:function(){var e=this.em,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id||this.getId();return e&&e.get("CssComposer").getIdRule(t)},_getStyleSelector:function(e){var t=this._getStyleRule(e);return t&&t.get("selectors").at(0)},_idUpdated:function(e,t){if(!(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).idUpdate){var n=this.ccid,r=(this.get("attributes")||{}).id,i=(this.previous("attributes")||{}).id||n,o=C.getList(this);if(o[r])return this.setId(i,{idUpdate:1});delete o[i],o[r]=this,this.ccid=r;var s=this._getStyleSelector({id:i});s&&s.set({name:r,label:r})}}},{isComponent:function(e){return{tagName:e.tagName?e.tagName.toLowerCase():""}},ensureInList:function(e){var t=C.getList(e),n=e.getId(),r=t[n];if(r){if(r!==e){var i=C.getIncrementId(n,t);e.setId(i),t[i]=e}}else t[n]=e;e.components().forEach((function(e){return C.ensureInList(e)}))},createId:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=C.getList(e),i=e.get("attributes").id;return i?(t=C.getIncrementId(i,r,n),e.setId(t)):t=C.getNewId(r),r[t]=e,t},getNewId:function(e){for(var t=Object.keys(e).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-t),r="i".concat(n);e[r];)r=C.getNewId(e);return r},getIncrementId:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).keepIds,r=1,i=e;if((void 0===n?[]:n).indexOf(e)<0)for(;t[i];)r++,i="".concat(e,"-").concat(r);return i},getList:function(e){var t=e.opt&&e.opt.domc;return t?t.componentsById:{}},checkId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object(a.isArray)(e)?e:[e],o=r.keepIds,s=void 0===o?[]:o;i.forEach((function(e){var i=e.attributes,o=void 0===i?{}:i,l=e.components,c=o.id;if(c&&n[c]&&s.indexOf(c)<0){var u=C.getIncrementId(c,n);o.id=u,Object(a.isArray)(t)&&t.forEach((function(e){var t=e.selectors;t.forEach((function(e,n){e==="#".concat(c)&&(t[n]="#".concat(u))}))}))}l&&C.checkId(l,t,n,r)}))}});t.default=C},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(1),s=n.n(o),a=n(0),l=n(21),c=n(35),u=n(12),d=n(7),h=n(3);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=s.a.View.extend({className:function(){return this.getClasses()},tagName:function(){return this.model.get("tagName")},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=e.config||{},r=n.em,i=t.opt||{},o=this.$el,s=this.el;this.opts=e,this.modelOpt=i,this.config=n,this.em=r||"",this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.attr=t.get("attributes"),this.classe=this.attr.class||[],this.listenTo(t,"change:style",this.updateStyle),this.listenTo(t,"change:attributes change:_innertext",this.renderAttributes),this.listenTo(t,"change:highlightable",this.updateHighlight),this.listenTo(t,"change:status",this.updateStatus),this.listenTo(t,"change:script",this.reset),this.listenTo(t,"change:content",this.updateContent),this.listenTo(t,"change",this.handleChange),this.listenTo(t,"active",this.onActive),this.listenTo(t,"disable",this.onDisable),o.data("model",t),Object(h.v)(s,this),t.view=this,this._getFrame()&&t.views.push(this),this.initClasses(),this.initComponents({avoidRender:1}),this.events=p(p({},this.events),this.__isDraggable()&&{dragstart:"handleDragStart"}),this.delegateEvents(),!i.temporary&&this.init(this._clbObj())},__isDraggable:function(){var e=this.model.attributes;return this.config.draggableComponents&&e.draggable&&!e._innertext},_clbObj:function(){var e=this.em,t=this.model,n=this.el;return{editor:e&&e.getEditor(),model:t,el:n}},init:function(){},removed:function(){},onActive:function(){},onDisable:function(){},remove:function(){var e=this;s.a.View.prototype.remove.apply(e,arguments);var t=e.model,n=(e._getFrame()||{}).model;t.components().forEach((function(e){var t=e.getView(n);t&&t.remove()}));var r=t.views;return r.splice(r.indexOf(e),1),e.removed(e._clbObj()),e.$el.data({model:"",collection:"",view:""}),delete e.model,delete e.$el,delete e.el.__gjsv,delete e.childrenView,delete e.scriptContainer,delete e.opts,e},handleDragStart:function(e){e.preventDefault(),e.stopPropagation(),this.em.get("Commands").run("tlb-move",{target:this.model,event:e})},initClasses:function(){var e=this.model,t=e.get("classes");t instanceof u.a&&(this.stopListening(e,"change:classes",this.initClasses),this.listenTo(e,"change:classes",this.initClasses),this.listenTo(t,"add remove change",this.updateClasses),t.length&&this.importClasses())},initComponents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.$el,r=this.childrenView,i="change:components",o=t.get("components"),s=[t,i,this.initComponents];o instanceof l.a&&(n.data("collection",o),r&&r.remove(),this.stopListening.apply(this,s),!e.avoidRender&&this.renderChildren(),this.listenTo.apply(this,s))},handleChange:function(){var e=this.model,t=Object(a.keys)(e.changed);if(1!==t.length||"status"!==t[0])for(var n in e.emitUpdate(),e.changed)e.emitUpdate(n)},importClasses:function(){var e=this.config.em.get("SelectorManager");e&&this.model.get("classes").each((function(t){e.add(t.get("name"))}))},updateStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.el,n=this.model.get("status"),r=this.ppfx,i="".concat(r,"selected"),o="".concat(i,"-parent"),s="".concat(r,"freezed"),a="".concat(r,"hovered");this.$el.removeClass([i,o,s,a].join(" "));var l=t.getAttribute("class")||"",c="";switch(n){case"selected":c="".concat(l," ").concat(i);break;case"selected-parent":c="".concat(l," ").concat(o);break;case"freezed":c="".concat(l," ").concat(s);break;case"freezed-selected":c="".concat(l," ").concat(s," ").concat(i);break;case"hovered":c=e.avoidHover?"":"".concat(l," ").concat(a)}(c=c.trim())&&t.setAttribute("class",c)},updateHighlight:function(){var e=this.model.get("highlightable");this.setAttribute("data-highlightable",e?1:"")},updateStyle:function(){var e=this.model,t=this.em,n=this.el;if(t&&t.getConfig("avoidInlineStyle")){var r=e.getStyle(),i=Object(a.isEmpty)(r);!i&&e.setStyle(r),e.get("_innertext")&&i?n.removeAttribute("id"):n.id=e.getId()}else this.setAttribute("style",e.styleToString())},updateClasses:function(){var e=this.model.get("classes").pluck("name").join(" ");this.setAttribute("class",e),this.updateStatus()},setAttribute:function(e,t){var n=this.$el;t?n.attr(e,t):n.removeAttr(e)},getClasses:function(){return this.model.getClasses().join(" ")},updateAttributes:function(){var e=[],t=this.model,n=this.$el,r=this.el,i=t.attributes,o=i.highlightable,s=i.textable,l=p(p(p({"data-gjs-type":i.type||"default"},this.__isDraggable()?{draggable:!0}:{}),o?{"data-highlightable":1}:{}),s?{contenteditable:"false","data-gjs-textable":"true"}:{});Object(a.each)(r.attributes,(function(t){return e.push(t.nodeName)})),e.forEach((function(e){return n.removeAttr(e)}));var c=p(p({},l),t.getAttributes());Object(a.keys)(c).forEach((function(e){return!1===c[e]&&delete c[e]})),n.attr(c),this.updateStyle()},updateContent:function(){this.getChildrenContainer().innerHTML=this.model.get("content")},prevDef:function(e){e.preventDefault()},updateScript:function(){var e=this.em;this.model.get("script")&&e&&e.get("Canvas").getCanvasView().updateScript(this)},getChildrenContainer:function(){var e=this.el;return"function"==typeof this.getChildrenSelector&&(e=this.el.querySelector(this.getChildrenSelector())),e},getOffsetRect:function(){var e={},t=this.el,n=0,r=0;return function i(o){var s=o.offsetParent;s?(n+=s.offsetTop,r+=s.offsetLeft,i(s)):(e.top=t.offsetTop+n,e.left=t.offsetLeft+r,e.bottom=e.top+t.offsetHeight,e.right=e.left+t.offsetWidth)}(t),e},isInViewport:function(){var e=this.el.ownerDocument,t=e.body,n=e.defaultView.frameElement,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rect||this.getOffsetRect(),i=r.top,o=r.left,s=this._getFrame().getOffsetRect();return i>=s.scrollTop&&o>=s.scrollLeft&&i<=s.scrollBottom&&o<=n.offsetWidth+t.scrollLeft},scrollIntoView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getOffsetRect();if(!this.isInViewport({rect:t})||e.force){var n=this.el;"smooth"!==e.behavior?n.ownerDocument.defaultView.scrollTo(0,t.top):n.scrollIntoView(p({behavior:"smooth",block:"nearest"},e))}},reset:function(){var e=this.el;this.el="",this._ensureElement(),this._setData(),Object(d.j)(e,this.el),this.render()},_setData:function(){var e=this.model,t=e.components();this.$el.data({model:e,collection:t,view:this})},_getFrame:function(){return this.config.frameView},renderChildren:function(){this.updateContent();var e=this.getChildrenContainer(),t=this.childrenView||new c.a({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});t.render(e),this.childrenView=t;for(var n=Array.prototype.slice.call(t.el.childNodes),r=0,i=n.length;r<i;r++)e.appendChild(n.shift())},renderAttributes:function(){this.updateAttributes(),this.updateClasses()},render:function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),Object(h.v)(this.el,this),this.postRender()),this},postRender:function(){var e=this.em,t=this.model;this.modelOpt.temporary||(this.onRender(this._clbObj()),e&&e.trigger("component:mount",t))},onRender:function(){}})},function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"j",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return f}));var r=n(0),i="transitionend oTransitionEnd transitionend webkitTransitionEnd",o=function(e){return e&&9===e.nodeType},s=function(e){return e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},a=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},l=function(e,t){e.parentNode.replaceChild(t,e)},c=function(e,t,n){var i=e.childNodes,o=i.length,s=Object(r.isUndefined)(n)?o:n;Object(r.isString)(t)&&(e.insertAdjacentHTML("beforeEnd",t),e.removeChild(t=e.lastChild)),s>=o?e.appendChild(t):e.insertBefore(t,i[s])},u=function(e,t){return c(e,t)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=document.createElement(e);return t&&Object(r.each)(t,(function(e,t){return i.setAttribute(t,e)})),n&&(Object(r.isString)(n)?i.innerHTML=n:i.appendChild(n)),i},h=function(e,t){var n;try{n=new window[t](e.type,e)}catch(e){(n=document.createEvent(t)).initEvent(e.type,!0,!0)}return n.keyCodeVal=e.keyCode,n._parentEvent=e,["keyCode","which"].forEach((function(e){Object.defineProperty(n,e,{get:function(){return this.keyCodeVal}})})),n},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(Array.isArray(t)?t:[t]).forEach((function(t){var n=t.attributes||{},i=document.createElement(t.tag||"div");Object(r.each)(n,(function(e,t){i.setAttribute(t,e)})),e.appendChild(i)}))}},function(e,t,n){var r=n(73),i=n(74),o=n(43),s=n(75);e.exports=function(e){return r(e)||i(e)||o(e)||s()}},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";var r=n(1),i=n.n(r).a.Model.extend({idAttribute:"name",defaults:{name:"",label:"",type:1,active:!0,private:!1,protected:!1},initialize:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).config,n=void 0===t?{}:t,r=this.get("name"),o=this.get("label");r?o||this.set("label",r):this.set("name",o);var s=this.get("name"),a=n.escapeName,l=a?a(s):i.escapeName(s);this.set("name",l)},getFullName:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).escape,t=this.get("name"),n="";switch(this.get("type")){case 1:n=".";break;case 2:n="#"}return n+(e?e(t):t)}},{TYPE_CLASS:1,TYPE_ID:2,escapeName:function(e){return"".concat(e).trim().replace(/([^a-z0-9\w-\:]+)/gi,"-")}});t.a=i},function(e,t,n){"use strict";n.r(t);var r=document,i=window,o=Array.prototype,s=o.filter,a=o.indexOf,l=o.map,c=o.push,u=o.reverse,d=o.slice,h=/^#[\w-]*$/,f=/^\.[\w-]*$/,p=/<.+>/,g=/^\w+$/;function m(e,t){return void 0===t&&(t=r),f.test(e)?t.getElementsByClassName(e.slice(1)):g.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e)}function v(e,t){if(void 0===t&&(t=r),e){if(e.__cash)return e;var n=e;if(k(e)){if(t.__cash&&(t=t[0]),!(n=h.test(e)?t.getElementById(e.slice(1)):p.test(e)?le(e):m(e,t)))return}else if(j(e))return this.ready(e);(n.nodeType||n===i)&&(n=[n]),this.length=n.length;for(var o=0,s=this.length;o<s;o++)this[o]=n[o]}}function b(e,t){return new v(e,t)}var y=b.fn=b.prototype=v.prototype={constructor:b,__cash:!0,length:0,splice:o.splice};y.get=function(e){return void 0===e?d.call(this):this[e<0?e+this.length:e]},y.eq=function(e){return b(this.get(e))},y.first=function(){return this.eq(0)},y.last=function(){return this.eq(-1)},y.map=function(e){return b(l.call(this,(function(t,n){return e.call(t,n,t)})))},y.slice=function(){return b(d.apply(this,arguments))};var w=/(?:^\w|[A-Z]|\b\w)/g,x=/[\s-_]+/g;function O(e){return e.replace(w,(function(e,t){return e[t?"toUpperCase":"toLowerCase"]()})).replace(x,"")}function C(e,t){for(var n=0,r=e.length;n<r&&!1!==t.call(e[n],e[n],n,e);n++);}b.camelCase=O,b.each=C,y.each=function(e){return C(this,(function(t,n){return e.call(t,n,t)})),this},y.removeProp=function(e){return this.each((function(t,n){delete n[e]}))},b.extend=y.extend=function(e){void 0===e&&(e=this);for(var t=arguments,n=t.length,r=n<2?0:1;r<n;r++)for(var i in t[r])e[i]=t[r][i];return e};var _=1;function S(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector);return!!n&&n.call(e,t)}function j(e){return"function"==typeof e}function k(e){return"string"==typeof e}function T(e){return!isNaN(parseFloat(e))&&isFinite(e)}b.guid=_,b.matches=S,b.isFunction=j,b.isString=k,b.isNumeric=T;var E=Array.isArray;function P(e){return k(e)?function(t,n){return S(n,e)}:e.__cash?function(t,n){return e.is(n)}:function(e,t,n){return t===n}}b.isArray=E,y.prop=function(e,t){if(e){if(k(e))return arguments.length<2?this[0]&&this[0][e]:this.each((function(n,r){r[e]=t}));for(var n in e)this.prop(n,e[n]);return this}},y.filter=function(e){if(!e)return b();var t=j(e)?e:P(e);return b(s.call(this,(function(n,r){return t.call(n,r,n,e)})))};var A=/\S+/g;function M(e){return k(e)&&e.match(A)||[]}function D(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}function I(e,t,n){if(1===e.nodeType){var r=i.getComputedStyle(e,null);return t?n?r.getPropertyValue(t):r[t]:r}}function L(e,t){return parseInt(I(e,t),10)||0}y.hasClass=function(e){var t=M(e),n=!1;return t.length&&this.each((function(e,r){return!(n=r.classList.contains(t[0]))})),n},y.removeAttr=function(e){var t=M(e);return t.length?this.each((function(e,n){C(t,(function(e){n.removeAttribute(e)}))})):this},y.attr=function(e,t){if(e){if(k(e)){if(arguments.length<2){if(!this[0])return;var n=this[0].getAttribute(e);return null===n?void 0:n}return null===t?this.removeAttr(e):this.each((function(n,r){r.setAttribute(e,t)}))}for(var r in e)this.attr(r,e[r]);return this}},y.toggleClass=function(e,t){var n=M(e),r=void 0!==t;return n.length?this.each((function(e,i){C(n,(function(e){r?t?i.classList.add(e):i.classList.remove(e):i.classList.toggle(e)}))})):this},y.addClass=function(e){return this.toggleClass(e,!0)},y.removeClass=function(e){return arguments.length?this.toggleClass(e,!1):this.attr("class","")},b.unique=D,y.add=function(e,t){return b(D(this.get().concat(b(e,t).get())))};var N=/^--/;function R(e){return N.test(e)}var F={},V=r.createElement("div").style,z=["webkit","moz","ms","o"];function B(e,t){if(void 0===t&&(t=R(e)),t)return e;if(!F[e]){var n=O(e),r=""+n.charAt(0).toUpperCase()+n.slice(1);C((n+" "+z.join(r+" ")+r).split(" "),(function(t){if(t in V)return F[e]=t,!1}))}return F[e]}b.prefixedProp=B;var H={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function U(e,t,n){return void 0===n&&(n=R(e)),n||H[e]||!T(t)?t:t+"px"}y.css=function(e,t){if(k(e)){var n=R(e);return e=B(e,n),arguments.length<2?this[0]&&I(this[0],e,n):e?(t=U(e,t,n),this.each((function(r,i){1===i.nodeType&&(n?i.style.setProperty(e,t):i.style[e]=t)}))):this}for(var r in e)this.css(r,e[r]);return this};var $=/^data-(.*)/;function W(e){return e.__cashData=e.__cashData||{}}function q(e,t){var n=W(e);if(t){if(!(t in n)){var r=e.dataset?e.dataset[t]||e.dataset[O(t)]:b(e).attr("data-"+t);if(void 0!==r){try{r=JSON.parse(r)}catch(e){}n[t]=r}}return n[t]}return n}function G(e,t){return L(e,"border"+(t?"Left":"Top")+"Width")+L(e,"padding"+(t?"Left":"Top"))+L(e,"padding"+(t?"Right":"Bottom"))+L(e,"border"+(t?"Right":"Bottom")+"Width")}function K(e,t){for(var n=0,r=t.length;n<r;n++)if(e.indexOf(t[n])<0)return!1;return!0}function Y(e,t,n){C(e[n],(function(e){t.removeEventListener(n,e[1])})),delete e[n]}function Z(e){return e.__cashEvents=e.__cashEvents||{}}function X(e){var t=e.split(".");return[t[0],t.slice(1).sort()]}function J(e,t,n,r){var i=Z(e);if(t){var o=i[t];if(!o)return;r&&(r.guid=r.guid||_++),i[t]=o.filter((function(i){var o=i[1];if(r&&o.guid!==r.guid||!K(i[0],n))return!0;e.removeEventListener(t,o)}))}else if(n&&n.length)for(t in i)J(e,t,n,r);else for(t in i)Y(i,e,t)}b.hasData=function(e){return"__cashData"in e},y.data=function(e,t){var n=this;if(!e){if(!this[0])return;return C(this[0].attributes,(function(e){var t=e.name.match($);t&&n.data(t[1])})),q(this[0])}if(k(e))return void 0===t?this[0]&&q(this[0],e):this.each((function(n,r){return function(e,t,n){W(e)[t]=n}(r,e,t)}));for(var r in e)this.data(r,e[r]);return this},y.removeData=function(e){return this.each((function(t,n){return function(e,t){void 0===t?delete e.__cashData:delete W(e)[t]}(n,e)}))},C(["Width","Height"],(function(e){y["inner"+e]=function(){if(this[0])return this[0]===i?i["inner"+e]:this[0]["client"+e]}})),C(["width","height"],(function(e,t){y[e]=function(n){return this[0]?arguments.length?(n=parseInt(n,10),this.each((function(r,i){if(1===i.nodeType){var o=I(i,"boxSizing");i.style[e]=U(e,n+("border-box"===o?G(i,!t):0))}}))):this[0]===i?this[0][O("outer-"+e)]:this[0].getBoundingClientRect()[e]-G(this[0],!t):void 0===n?void 0:this}})),C(["Width","Height"],(function(e,t){y["outer"+e]=function(n){if(this[0])return this[0]===i?i["outer"+e]:this[0]["offset"+e]+(n?L(this[0],"margin"+(t?"Top":"Left"))+L(this[0],"margin"+(t?"Bottom":"Right")):0)}})),y.off=function(e,t){var n=this;return void 0===e?this.each((function(e,t){return J(t)})):C(M(e),(function(e){var r=X(e),i=r[0],o=r[1];n.each((function(e,n){return J(n,i,o,t)}))})),this},y.on=function(e,t,n,r){var i=this;if(!k(e)){for(var o in e)this.on(o,t,e[o]);return this}return j(t)&&(n=t,t=!1),C(M(e),(function(e){var o=X(e),s=o[0],a=o[1];i.each((function(e,i){var o=function e(o){if(!o.namespace||K(a,o.namespace.split("."))){var l=i;if(t){for(var c=o.target;!S(c,t);){if(c===i)return;if(!(c=c.parentNode))return}l=c}o.namespace=o.namespace||"";var u=n.call(l,o,o.data);r&&J(i,s,a,e),!1===u&&(o.preventDefault(),o.stopPropagation())}};o.guid=n.guid=n.guid||_++,function(e,t,n,r){r.guid=r.guid||_++;var i=Z(e);i[t]=i[t]||[],i[t].push([n,r]),e.addEventListener(t,r)}(i,s,a,o)}))})),this},y.one=function(e,t,n){return this.on(e,t,n,!0)},y.ready=function(e){var t=function(){return e(b)};return"loading"!==r.readyState?setTimeout(t):r.addEventListener("DOMContentLoaded",t),this},y.trigger=function(e,t){var n=e;if(k(e)){var i=X(e),o=i[0],s=i[1];(n=r.createEvent("HTMLEvents")).initEvent(o,!0,!0),n.namespace=s.join(".")}return n.data=t,this.each((function(e,t){t.dispatchEvent(n)}))};var Q=/select-one/i,ee=/select-multiple/i;function te(e){var t=e.type;return Q.test(t)?function(e){return e.selectedIndex<0?null:e.options[e.selectedIndex].value}(e):ee.test(t)?function(e){var t=[];return C(e.options,(function(e){!e.selected||e.disabled||e.parentNode.disabled||t.push(e.value)})),t}(e):e.value}var ne=/%20/g,re=/file|reset|submit|button|image/i,ie=/radio|checkbox/i;y.serialize=function(){var e="";return this.each((function(t,n){C(n.elements||[n],(function(t){if(!t.disabled&&t.name&&"FIELDSET"!==t.tagName&&!re.test(t.type)&&(!ie.test(t.type)||t.checked)){var n=te(t);void 0!==n&&C(E(n)?n:[n],(function(n){e+=function(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t).replace(ne,"+")}(t.name,n)}))}}))})),e.substr(1)},y.val=function(e){return void 0===e?this[0]&&te(this[0]):this.each((function(t,n){var r=ee.test(n.type),i=null===e?r?[]:"":e;r&&E(i)?C(n.options,(function(e){e.selected=i.indexOf(e.value)>=0})):n.value=i}))},y.clone=function(){return this.map((function(e,t){return t.cloneNode(!0)}))},y.detach=function(){return this.each((function(e,t){t.parentNode&&t.parentNode.removeChild(t)}))};var oe,se=/^\s*<(\w+)[^>]*>/,ae=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function le(e){if(function(){if(!oe){var e=r.createElement("table"),t=r.createElement("tr");oe={"*":r.createElement("div"),tr:r.createElement("tbody"),td:t,th:t,thead:e,tbody:e,tfoot:e}}}(),!k(e))return[];if(ae.test(e))return[r.createElement(RegExp.$1)];var t=se.test(e)&&RegExp.$1,n=oe[t]||oe["*"];return n.innerHTML=e,b(n.childNodes).detach().get()}function ce(e,t,n){if(void 0!==t){var r=k(t);!r&&t.length?C(t,(function(t){return ce(e,t,n)})):C(e,r?function(e){e.insertAdjacentHTML(n?"afterbegin":"beforeend",t)}:function(e,r){return function(e,t,n){n?e.insertBefore(t,e.childNodes[0]):e.appendChild(t)}(e,r?t.cloneNode(!0):t,n)})}}b.parseHTML=le,y.empty=function(){var e=this[0];if(e)for(;e.firstChild;)e.removeChild(e.firstChild);return this},y.append=function(){var e=this;return C(arguments,(function(t){ce(e,t)})),this},y.appendTo=function(e){return ce(b(e),this),this},y.html=function(e){if(void 0===e)return this[0]&&this[0].innerHTML;var t=e.nodeType?e[0].outerHTML:e;return this.each((function(e,n){n.innerHTML=t}))},y.insertAfter=function(e){var t=this;return b(e).each((function(e,n){var r=n.parentNode;t.each((function(t,i){r.insertBefore(e?i.cloneNode(!0):i,n.nextSibling)}))})),this},y.after=function(){var e=this;return C(u.apply(arguments),(function(t){u.apply(b(t).slice()).insertAfter(e)})),this},y.insertBefore=function(e){var t=this;return b(e).each((function(e,n){var r=n.parentNode;t.each((function(t,i){r.insertBefore(e?i.cloneNode(!0):i,n)}))})),this},y.before=function(){var e=this;return C(arguments,(function(t){b(t).insertBefore(e)})),this},y.prepend=function(){var e=this;return C(arguments,(function(t){ce(e,t,!0)})),this},y.prependTo=function(e){return ce(b(e),u.apply(this.slice()),!0),this},y.remove=function(){return this.detach().off()},y.replaceWith=function(e){var t=this;return this.each((function(n,r){var i=r.parentNode;if(i){var o=n?b(e).clone():b(e);if(!o[0])return t.remove(),!1;i.replaceChild(o[0],r),b(o[0]).after(o.slice(1))}}))},y.replaceAll=function(e){return b(e).replaceWith(this),this},y.text=function(e){return void 0===e?this[0]?this[0].textContent:"":this.each((function(t,n){n.textContent=e}))};var ue=r.documentElement;y.offset=function(){var e=this[0];if(e){var t=e.getBoundingClientRect();return{top:t.top+i.pageYOffset-ue.clientTop,left:t.left+i.pageXOffset-ue.clientLeft}}},y.offsetParent=function(){return b(this[0]&&this[0].offsetParent)},y.position=function(){var e=this[0];if(e)return{left:e.offsetLeft,top:e.offsetTop}},y.children=function(e){var t=[];return this.each((function(e,n){c.apply(t,n.children)})),t=b(D(t)),e?t.filter((function(t,n){return S(n,e)})):t},y.contents=function(){var e=[];return this.each((function(t,n){c.apply(e,"IFRAME"===n.tagName?[n.contentDocument]:n.childNodes)})),b(e.length&&D(e))},y.find=function(e){for(var t=[],n=0,r=this.length;n<r;n++){var i=m(e,this[n]);i.length&&c.apply(t,i)}return b(t.length&&D(t))},y.has=function(e){var t=k(e)?function(t,n){return!!m(e,n).length}:function(t,n){return n.contains(e)};return this.filter(t)},y.is=function(e){if(!e||!this[0])return!1;var t=P(e),n=!1;return this.each((function(r,i){return!(n=t(r,i,e))})),n},y.next=function(){return b(this[0]&&this[0].nextElementSibling)},y.not=function(e){if(!e||!this[0])return this;var t=P(e);return this.filter((function(n,r){return!t(n,r,e)}))},y.parent=function(){var e=[];return this.each((function(t,n){n&&n.parentNode&&e.push(n.parentNode)})),b(D(e))},y.index=function(e){var t=e?b(e)[0]:this[0],n=e?this:b(t).parent().children();return a.call(n,t)},y.closest=function(e){return e&&this[0]?this.is(e)?this.filter(e):this.parent().closest(e):b()},y.parents=function(e){var t,n=[];return this.each((function(i,o){for(t=o;t&&t.parentNode&&t!==r.body.parentNode;)t=t.parentNode,(!e||e&&S(t,e))&&n.push(t)})),b(D(n))},y.prev=function(){return b(this[0]&&this[0].previousElementSibling)},y.siblings=function(){var e=this[0];return this.parent().children().filter((function(t,n){return n!==e}))},t.default=b},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n.n(i),s=n(10);t.a=o.a.Collection.extend({model:s.a,modelId:function(e){return"".concat(e.name,"_").concat(e.type||s.a.TYPE_CLASS)},getStyleable:function(){return Object(r.filter)(this.models,(function(e){return e.get("active")&&!e.get("private")}))},getValid:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).noDisabled;return Object(r.filter)(this.models,(function(e){return!e.get("private")})).filter((function(t){return e?t.get("active"):1}))},getFullString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return(e||this).forEach((function(e){return n.push(e.getFullName(t))})),n.join("").trim()}})},function(e,t,n){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=r||i||o,a=s&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),d=/Opera\//.test(e),h=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),g=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=/Android/.test(e),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=g||/Mac/.test(t),y=/\bCrOS\b/.test(e),w=/win/i.test(t),x=d&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(d=!1,l=!0);var O=b&&(c||d&&(null==x||x<12.11)),C=n||s&&a>=9;function _(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var S,j=function(e,t){var n=e.className,r=_(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function k(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function T(e,t){return k(e).appendChild(t)}function E(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function P(e,t,n,r){var i=E(e,t,n,r);return i.setAttribute("role","presentation"),i}function A(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function M(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function D(e,t){var n=e.className;_(t).test(n)||(e.className+=(n?" ":"")+t)}function I(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!_(n[r]).test(t)&&(t+=" "+n[r]);return t}S=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var L=function(e){e.select()};function N(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function R(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function F(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,s=i||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}g?L=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(L=function(e){try{e.select()}catch(e){}});var V=function(){this.id=null,this.f=null,this.time=0,this.handler=N(this.onTimeout,this)};function z(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}V.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},V.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var B={toString:function(){return"CodeMirror.Pass"}},H={scroll:!1},U={origin:"*mouse"},$={origin:"+move"};function W(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var s=o-r;if(o==e.length||i+s>=t)return r+Math.min(s,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var q=[""];function G(e){for(;q.length<=e;)q.push(K(q)+" ");return q[e]}function K(e){return e[e.length-1]}function Y(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Z(){}function X(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&R(t,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Q(e))||t.test(e):Q(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ne=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function re(e){return e.charCodeAt(0)>=768&&ne.test(e)}function ie(e,t,n){for(;(n<0?t>0:t<e.length)&&re(e.charAt(t));)t+=n;return t}function oe(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}var se=null;function ae(e,t,n){var r;se=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:se=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:se=i)}return null!=r?r:se}var le=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function o(e,t,n){this.level=e,this.from=t,this.to=n}return function(s,a){var l="ltr"==a?"L":"R";if(0==s.length||"ltr"==a&&!e.test(s))return!1;for(var c,u=s.length,d=[],h=0;h<u;++h)d.push((c=s.charCodeAt(h))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(c):1424<=c&&c<=1524?"R":1536<=c&&c<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(c-1536):1774<=c&&c<=2220?"r":8192<=c&&c<=8203?"w":8204==c?"b":"L");for(var f=0,p=l;f<u;++f){var g=d[f];"m"==g?d[f]=p:p=g}for(var m=0,v=l;m<u;++m){var b=d[m];"1"==b&&"r"==v?d[m]="n":n.test(b)&&(v=b,"r"==b&&(d[m]="R"))}for(var y=1,w=d[0];y<u-1;++y){var x=d[y];"+"==x&&"1"==w&&"1"==d[y+1]?d[y]="1":","!=x||w!=d[y+1]||"1"!=w&&"n"!=w||(d[y]=w),w=x}for(var O=0;O<u;++O){var C=d[O];if(","==C)d[O]="N";else if("%"==C){var _=void 0;for(_=O+1;_<u&&"%"==d[_];++_);for(var S=O&&"!"==d[O-1]||_<u&&"1"==d[_]?"1":"N",j=O;j<_;++j)d[j]=S;O=_-1}}for(var k=0,T=l;k<u;++k){var E=d[k];"L"==T&&"1"==E?d[k]="L":n.test(E)&&(T=E)}for(var P=0;P<u;++P)if(t.test(d[P])){var A=void 0;for(A=P+1;A<u&&t.test(d[A]);++A);for(var M="L"==(P?d[P-1]:l),D=M==("L"==(A<u?d[A]:l))?M?"L":"R":l,I=P;I<A;++I)d[I]=D;P=A-1}for(var L,N=[],R=0;R<u;)if(r.test(d[R])){var F=R;for(++R;R<u&&r.test(d[R]);++R);N.push(new o(0,F,R))}else{var V=R,z=N.length,B="rtl"==a?1:0;for(++R;R<u&&"L"!=d[R];++R);for(var H=V;H<R;)if(i.test(d[H])){V<H&&(N.splice(z,0,new o(1,V,H)),z+=B);var U=H;for(++H;H<R&&i.test(d[H]);++H);N.splice(z,0,new o(2,U,H)),z+=B,V=H}else++H;V<R&&N.splice(z,0,new o(1,V,R))}return"ltr"==a&&(1==N[0].level&&(L=s.match(/^\s+/))&&(N[0].from=L[0].length,N.unshift(new o(0,0,L[0].length))),1==K(N).level&&(L=s.match(/\s+$/))&&(K(N).to-=L[0].length,N.push(new o(0,u-L[0].length,u)))),"rtl"==a?N.reverse():N}}();function ce(e,t){var n=e.order;return null==n&&(n=e.order=le(e.text,t)),n}var ue=[],de=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||ue).concat(n)}};function he(e,t){return e._handlers&&e._handlers[t]||ue}function fe(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=z(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function pe(e,t){var n=he(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ge(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),pe(e,n||t.type,e,t),xe(t)||t.codemirrorIgnore}function me(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==z(n,t[r])&&n.push(t[r])}function ve(e,t){return he(e,t).length>0}function be(e){e.prototype.on=function(e,t){de(this,e,t)},e.prototype.off=function(e,t){fe(this,e,t)}}function ye(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function we(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function xe(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Oe(e){ye(e),we(e)}function Ce(e){return e.target||e.srcElement}function _e(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Se,je,ke=function(){if(s&&a<9)return!1;var e=E("div");return"draggable"in e||"dragDrop"in e}();function Te(e){if(null==Se){var t=E("span","\u200b");T(e,E("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Se=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=Se?E("span","\u200b"):E("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ee(e){if(null!=je)return je;var t=T(e,document.createTextNode("A\u062eA")),n=S(t,0,1).getBoundingClientRect(),r=S(t,1,2).getBoundingClientRect();return k(e),!(!n||n.left==n.right)&&(je=r.right-n.right<3)}var Pe,Ae=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Me=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},De="oncopy"in(Pe=E("div"))||(Pe.setAttribute("oncopy","return;"),"function"==typeof Pe.oncopy),Ie=null,Le={},Ne={};function Re(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Le[e]=t}function Fe(e){if("string"==typeof e&&Ne.hasOwnProperty(e))e=Ne[e];else if(e&&"string"==typeof e.name&&Ne.hasOwnProperty(e.name)){var t=Ne[e.name];"string"==typeof t&&(t={name:t}),(e=X(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Fe("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Fe("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ve(e,t){t=Fe(t);var n=Le[t.name];if(!n)return Ve(e,"text/plain");var r=n(e,t);if(ze.hasOwnProperty(t.name)){var i=ze[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r}var ze={};function Be(e,t){R(t,ze.hasOwnProperty(e)?ze[e]:ze[e]={})}function He(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Ue(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function $e(e,t,n){return!e.startState||e.startState(t,n)}var We=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function qe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function Ge(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i})),r}function Ke(e,t,n){var r=[];return e.iter(t,n,(function(e){r.push(e.text)})),r}function Ye(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Ze(e){if(null==e.parent)return null;for(var t=e.parent,n=z(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Xe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return n+s}function Je(e,t){return t>=e.first&&t<e.first+e.size}function Qe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function et(e,t,n){if(void 0===n&&(n=null),!(this instanceof et))return new et(e,t,n);this.line=e,this.ch=t,this.sticky=n}function tt(e,t){return e.line-t.line||e.ch-t.ch}function nt(e,t){return e.sticky==t.sticky&&0==tt(e,t)}function rt(e){return et(e.line,e.ch)}function it(e,t){return tt(e,t)<0?t:e}function ot(e,t){return tt(e,t)<0?e:t}function st(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function at(e,t){if(t.line<e.first)return et(e.first,0);var n=e.first+e.size-1;return t.line>n?et(n,qe(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?et(e.line,t):n<0?et(e.line,0):e}(t,qe(e,t.line).text.length)}function lt(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=at(e,t[r]);return n}We.prototype.eol=function(){return this.pos>=this.string.length},We.prototype.sol=function(){return this.pos==this.lineStart},We.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},We.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},We.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},We.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},We.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},We.prototype.skipToEnd=function(){this.pos=this.string.length},We.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},We.prototype.backUp=function(e){this.pos-=e},We.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},We.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},We.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},We.prototype.current=function(){return this.string.slice(this.start,this.pos)},We.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},We.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},We.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ct=function(e,t){this.state=e,this.lookAhead=t},ut=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function dt(e,t,n,r){var i=[e.state.modeGen],o={};wt(e,t.text,e.doc.mode,n,(function(e,t){return i.push(e,t)}),o,r);for(var s=n.state,a=function(r){n.baseTokens=i;var a=e.state.overlays[r],l=1,c=0;n.state=!0,wt(e,t.text,a.mode,n,(function(e,t){for(var n=l;c<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(a.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)a(l);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function ht(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=ft(e,Ze(t)),i=t.text.length>e.options.maxHighlightLength&&He(e.doc.mode,r.state),o=dt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ft(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new ut(r,!0,t);var o=function(e,t,n){for(var r,i,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=qe(o,a-1),c=l.stateAfter;if(c&&(!n||a+(c instanceof ct?c.lookAhead:0)<=o.modeFrontier))return a;var u=F(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=a-1,r=u)}return i}(e,t,n),s=o>r.first&&qe(r,o-1).stateAfter,a=s?ut.fromSaved(r,s,o):new ut(r,$e(r.mode),o);return r.iter(o,t,(function(n){pt(e,n.text,a);var r=a.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?a.save():null,a.nextLine()})),n&&(r.modeFrontier=a.line),a}function pt(e,t,n,r){var i=e.doc.mode,o=new We(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&gt(i,n.state);!o.eol();)mt(i,o,n.state),o.start=o.pos}function gt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ue(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function mt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Ue(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ut.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ut.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ut.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ut.fromSaved=function(e,t,n){return t instanceof ct?new ut(e,He(e.mode,t.state),n,t.lookAhead):new ut(e,He(e.mode,t),n)},ut.prototype.save=function(e){var t=!1!==e?He(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ct(t,this.maxLookAhead):t};var vt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function bt(e,t,n,r){var i,o,s=e.doc,a=s.mode,l=qe(s,(t=at(s,t)).line),c=ft(e,t.line,n),u=new We(l.text,e.options.tabSize,c);for(r&&(o=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=mt(a,u,c.state),r&&o.push(new vt(u,i,He(s.mode,c.state)));return r?o:new vt(u,i,c.state)}function yt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function wt(e,t,n,r,i,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,d=new We(t,e.options.tabSize,r),h=e.options.addModeClass&&[null];for(""==t&&yt(gt(n,r.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,s&&pt(e,t,r,d.pos),d.pos=t.length,l=null):l=yt(mt(n,d,r.state,h),o),h){var f=h[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||u!=l){for(;c<d.start;)i(c=Math.min(d.start,c+5e3),u);u=l}d.start=d.pos}for(;c<d.pos;){var p=Math.min(d.pos,c+5e3);i(p,u),c=p}}var xt=!1,Ot=!1;function Ct(e,t,n){this.marker=e,this.from=t,this.to=n}function _t(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function St(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function jt(e,t){if(t.full)return null;var n=Je(e,t.from.line)&&qe(e,t.from.line).markedSpans,r=Je(e,t.to.line)&&qe(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,s=0==tt(t.from,t.to),a=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;null!=o.from&&!(s.inclusiveLeft?o.from<=t:o.from<t)&&(o.from!=t||"bookmark"!=s.type||n&&o.marker.insertLeft)||(r||(r=[])).push(new Ct(s,o.from,null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)?null:o.to))}return r}(n,i,s),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft))&&(r||(r=[])).push(new Ct(s,null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)?null:o.from-t,null==o.to?null:o.to-t))}return r}(r,o,s),c=1==t.text.length,u=K(t.text).length+(c?i:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var f=_t(l,h.marker);f?c&&(h.to=null==f.to?null:f.to+u):h.to=i}}if(l)for(var p=0;p<l.length;++p){var g=l[p];null!=g.to&&(g.to+=u),null==g.from?_t(a,g.marker)||(g.from=u,c&&(a||(a=[])).push(g)):(g.from+=u,c&&(a||(a=[])).push(g))}a&&(a=kt(a)),l&&l!=a&&(l=kt(l));var m=[a];if(!c){var v,b=t.text.length-2;if(b>0&&a)for(var y=0;y<a.length;++y)null==a[y].to&&(v||(v=[])).push(new Ct(a[y].marker,null,null));for(var w=0;w<b;++w)m.push(v);m.push(l)}return m}function kt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Tt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Et(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Pt(e){return e.inclusiveLeft?-1:0}function At(e){return e.inclusiveRight?1:0}function Mt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=tt(r.from,i.from)||Pt(e)-Pt(t);return o?-o:tt(r.to,i.to)||At(e)-At(t)||t.id-e.id}function Dt(e,t){var n,r=Ot&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Mt(n,i.marker)<0)&&(n=i.marker);return n}function It(e){return Dt(e,!0)}function Lt(e){return Dt(e,!1)}function Nt(e,t){var n,r=Ot&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Mt(n,o.marker)<0)&&(n=o.marker)}return n}function Rt(e,t,n,r,i){var o=qe(e,t),s=Ot&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=tt(c.from,n)||Pt(l.marker)-Pt(i),d=tt(c.to,r)||At(l.marker)-At(i);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?tt(c.to,n)>=0:tt(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?tt(c.from,r)<=0:tt(c.from,r)<0)))return!0}}}function Ft(e){for(var t;t=It(e);)e=t.find(-1,!0).line;return e}function Vt(e,t){var n=qe(e,t),r=Ft(n);return n==r?t:Ze(r)}function zt(e,t){if(t>e.lastLine())return t;var n,r=qe(e,t);if(!Bt(e,r))return t;for(;n=Lt(r);)r=n.find(1,!0).line;return Ze(r)+1}function Bt(e,t){var n=Ot&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Ht(e,t,r))return!0}}function Ht(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Ht(e,r.line,_t(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ht(e,t,i))return!0}function Ut(e){for(var t=0,n=(e=Ft(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function $t(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=It(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Lt(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Wt(e){var t=e.display,n=e.doc;t.maxLine=qe(n,n.first),t.maxLineLength=$t(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=$t(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var qt=function(e,t,n){this.text=e,Et(this,t),this.height=n?n(this):1};function Gt(e){e.parent=null,Tt(e)}qt.prototype.lineNo=function(){return Ze(this)},be(qt);var Kt={},Yt={};function Zt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Yt:Kt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Xt(e,t){var n=P("span",null,null,l?"padding-right: .1px":null),r={pre:P("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,s=void 0;r.pos=0,r.addToken=Qt,Ee(e.display.measure)&&(s=ce(o,e.doc.direction))&&(r.addToken=en(r.addToken,s)),r.map=[],nn(o,r,ht(e,o,t!=e.display.externalMeasured&&Ze(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=I(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=I(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Te(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var a=r.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return pe(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=I(r.pre.className,r.textClass||"")),r}function Jt(e){var t=E("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,r,i,o,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o="\xa0"),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,d=e.cm.state.specialChars,h=!1;if(d.test(t)){c=document.createDocumentFragment();for(var f=0;;){d.lastIndex=f;var p=d.exec(t),g=p?p.index-f:t.length-f;if(g){var m=document.createTextNode(u.slice(f,f+g));c.appendChild(s&&a<9?E("span",[m]):m),e.map.push(e.pos,e.pos+g,m),e.col+=g,e.pos+=g}if(!p)break;f+=g+1;var v=void 0;if("\t"==p[0]){var b=e.cm.options.tabSize,y=b-e.col%b;(v=c.appendChild(E("span",G(y),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=y}else"\r"==p[0]||"\n"==p[0]?((v=c.appendChild(E("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),c.appendChild(s&&a<9?E("span",[v]):v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),s&&a<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||h||o){var w=n||"";r&&(w+=r),i&&(w+=i);var x=E("span",[c],w,o);if(l)for(var O in l)l.hasOwnProperty(O)&&"style"!=O&&"class"!=O&&x.setAttribute(O,l[O]);return e.content.appendChild(x)}e.content.appendChild(c)}}function en(e,t){return function(n,r,i,o,s,a,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var d=void 0,h=0;h<t.length&&!((d=t[h]).to>c&&d.from<=c);h++);if(d.to>=u)return e(n,r,i,o,s,a,l);e(n,r.slice(0,d.to-c),i,o,null,a,l),o=null,r=r.slice(d.to-c),c=d.to}}}function tn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var s,a,l,c,u,d,h,f=i.length,p=0,g=1,m="",v=0;;){if(v==p){l=c=u=a="",h=null,d=null,v=1/0;for(var b=[],y=void 0,w=0;w<r.length;++w){var x=r[w],O=x.marker;if("bookmark"==O.type&&x.from==p&&O.widgetNode)b.push(O);else if(x.from<=p&&(null==x.to||x.to>p||O.collapsed&&x.to==p&&x.from==p)){if(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),O.className&&(l+=" "+O.className),O.css&&(a=(a?a+";":"")+O.css),O.startStyle&&x.from==p&&(u+=" "+O.startStyle),O.endStyle&&x.to==v&&(y||(y=[])).push(O.endStyle,x.to),O.title&&((h||(h={})).title=O.title),O.attributes)for(var C in O.attributes)(h||(h={}))[C]=O.attributes[C];O.collapsed&&(!d||Mt(d.marker,O)<0)&&(d=x)}else x.from>p&&v>x.from&&(v=x.from)}if(y)for(var _=0;_<y.length;_+=2)y[_+1]==v&&(c+=" "+y[_]);if(!d||d.from==p)for(var S=0;S<b.length;++S)tn(t,0,b[S]);if(d&&(d.from||0)==p){if(tn(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=f)break;for(var j=Math.min(f,v);;){if(m){var k=p+m.length;if(!d){var T=k>j?m.slice(0,j-p):m;t.addToken(t,T,s?s+l:l,u,p+T.length==v?c:"",a,h)}if(k>=j){m=m.slice(j-p),p=j;break}p=k,u=""}m=i.slice(o,o=n[g++]),s=Zt(n[g++],t.cm.options)}}else for(var E=1;E<n.length;E+=2)t.addToken(t,i.slice(o,o=n[E]),Zt(n[E+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Lt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Ze(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Bt(e,t)}function on(e,t,n){for(var r,i=[],o=t;o<n;o=r){var s=new rn(e.doc,qe(e.doc,o),o);r=o+s.size,i.push(s)}return i}var sn=null,an=null;function ln(e,t){var n=he(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);sn?r=sn.delayedCallbacks:an?r=an:(r=an=[],setTimeout(cn,0));for(var o=function(e){r.push((function(){return n[e].apply(null,i)}))},s=0;s<n.length;++s)o(s)}}function cn(){var e=an;an=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?fn(e,t):"gutter"==o?gn(e,t,n,r):"class"==o?pn(e,t):"widget"==o&&mn(e,t,r)}t.changes=null}function dn(e){return e.node==e.text&&(e.node=E("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function hn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Xt(e,t)}function fn(e,t){var n=t.text.className,r=hn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,pn(e,t)):n&&(t.text.className=n)}function pn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=dn(t);t.background=r.insertBefore(E("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?dn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function gn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=dn(t);t.gutterBackground=E("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=dn(t),a=t.gutter=E("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(E("div",Qe(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.display.gutterSpecs.length;++l){var c=e.display.gutterSpecs[l].className,u=o.hasOwnProperty(c)&&o[c];u&&a.appendChild(E("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function mn(e,t,n){t.alignable&&(t.alignable=null);for(var r=_("CodeMirror-linewidget"),i=t.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);bn(e,t,n)}function vn(e,t,n,r){var i=hn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),pn(e,t),gn(e,t,n,r),bn(e,t,r),t.node}function bn(e,t,n){if(yn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)yn(e,t.rest[r],t,n,!1)}function yn(e,t,n,r,i){if(t.widgets)for(var o=dn(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=E("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),wn(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),ln(l,"redraw")}}function wn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function xn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!A(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),T(t.display.measure,E("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function On(e,t){for(var n=Ce(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Cn(e){return e.lineSpace.offsetTop}function _n(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Sn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=T(e.measure,E("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function jn(e){return 50-e.display.nativeBarWidth}function kn(e){return e.display.scroller.clientWidth-jn(e)-e.display.barWidth}function Tn(e){return e.display.scroller.clientHeight-jn(e)-e.display.barHeight}function En(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(Ze(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Pn(e,t,n,r){return Dn(e,Mn(e,t),n,r)}function An(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ur(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Mn(e,t){var n=Ze(t),r=An(e,n);r&&!r.text?r=null:r&&r.changes&&(un(e,r,n,or(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=Ze(t=Ft(t)),r=e.display.externalMeasured=new rn(e.doc,t,n);r.lineN=n;var i=r.built=Xt(e,r);return r.text=i.pre,T(e.display.lineMeasure,i.pre),r}(e,t));var i=En(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Dn(e,t,n,r,i){t.before&&(n=-1);var o,l=n+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&kn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Nn(t.map,n,r),l=o.node,c=o.start,u=o.end,d=o.collapse;if(3==l.nodeType){for(var h=0;h<4;h++){for(;c&&re(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&re(t.line.text.charAt(o.coverStart+u));)++u;if((i=s&&a<9&&0==c&&u==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Rn(S(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,d="right"}s&&a<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ie)return Ie;var t=T(e,E("span","x")),n=t.getBoundingClientRect(),r=S(t,0,1).getBoundingClientRect();return Ie=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var f;c>0&&(d=r="right"),i=e.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==r?f.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!c&&(!i||!i.left&&!i.right)){var p=l.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+ir(e.display),top:p.top,bottom:p.bottom}:Ln}for(var g=i.top-t.rect.top,m=i.bottom-t.rect.top,v=(g+m)/2,b=t.view.measure.heights,y=0;y<b.length-1&&!(v<b[y]);y++);var w={left:("right"==d?i.right:i.left)-t.rect.left,right:("left"==d?i.left:i.right)-t.rect.left,top:y?b[y-1]:0,bottom:b[y]};return i.left||i.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=g,w.rbottom=m),w}(e,t,n,r)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var In,Ln={left:0,right:0,top:0,bottom:0};function Nn(e,t,n){for(var r,i,o,s,a,l,c=0;c<e.length;c+=3)if(l=e[c+1],t<(a=e[c])?(i=0,o=1,s="left"):t<l?o=1+(i=t-a):(c==e.length-3||t==l&&e[c+3]>t)&&(i=(o=l-a)-1,t>=l&&(s="right")),null!=i){if(r=e[c+2],a==l&&n==(r.insertLeft?"left":"right")&&(s=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],s="left";if("right"==n&&i==l-a)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],s="right";break}return{node:r,start:i,end:o,collapse:s,coverStart:a,coverEnd:l}}function Rn(e,t){var n=Ln;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function Fn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Vn(e){e.display.externalMeasure=null,k(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Fn(e.display.view[t])}function zn(e){Vn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Bn(){return u&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Hn(){return u&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Un(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=xn(e.widgets[n]));return t}function $n(e,t,n,r,i){if(!i){var o=Un(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var s=Ut(t);if("local"==r?s+=Cn(e.display):s-=e.display.viewOffset,"page"==r||"window"==r){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==r?0:Hn());var l=a.left+("window"==r?0:Bn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function Wn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Bn(),i-=Hn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:r-s.left,top:i-s.top}}function qn(e,t,n,r,i){return r||(r=qe(e.doc,t.line)),$n(e,r,Pn(e,r,t.ch,i),n)}function Gn(e,t,n,r,i,o){function s(t,s){var a=Dn(e,i,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,$n(e,r,a,n)}r=r||qe(e.doc,t.line),i||(i=Mn(e,r));var a=ce(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return s("before"==c?l-1:l,"before"==c);function u(e,t,n){return s(n?e-1:e,1==a[t].level!=n)}var d=ae(a,l,c),h=se,f=u(l,d,"before"==c);return null!=h&&(f.other=u(l,h,"before"!=c)),f}function Kn(e,t){var n=0;t=at(e.doc,t),e.options.lineWrapping||(n=ir(e.display)*t.ch);var r=qe(e.doc,t.line),i=Ut(r)+Cn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Yn(e,t,n,r,i){var o=et(e,t,n);return o.xRel=i,r&&(o.outside=r),o}function Zn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Yn(r.first,0,null,-1,-1);var i=Xe(r,n),o=r.first+r.size-1;if(i>o)return Yn(r.first+r.size-1,qe(r,o).text.length,null,1,1);t<0&&(t=0);for(var s=qe(r,i);;){var a=er(e,s,i,t,n),l=Nt(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!l)return a;var c=l.find(1);if(c.line==i)return c;s=qe(r,i=c.line)}}function Xn(e,t,n,r){r-=Un(t);var i=t.text.length,o=oe((function(t){return Dn(e,n,t-1).bottom<=r}),i,0);return{begin:o,end:i=oe((function(t){return Dn(e,n,t).top>r}),o,i)}}function Jn(e,t,n,r){return n||(n=Mn(e,t)),Xn(e,t,n,$n(e,t,Dn(e,n,r),"line").top)}function Qn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function er(e,t,n,r,i){i-=Ut(t);var o=Mn(e,t),s=Un(t),a=0,l=t.text.length,c=!0,u=ce(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?nr:tr)(e,t,n,o,u,r,i);a=(c=1!=d.level)?d.from:d.to-1,l=c?d.to:d.from-1}var h,f,p=null,g=null,m=oe((function(t){var n=Dn(e,o,t);return n.top+=s,n.bottom+=s,!!Qn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(p=t,g=n),!0)}),a,l),v=!1;if(g){var b=r-g.left<g.right-r,y=b==c;m=p+(y?0:1),f=y?"after":"before",h=b?g.left:g.right}else{c||m!=l&&m!=a||m++,f=0==m?"after":m==t.text.length?"before":Dn(e,o,m-(c?1:0)).bottom+s<=i==c?"after":"before";var w=Gn(e,et(n,m,f),"line",t,o);h=w.left,v=i<w.top?-1:i>=w.bottom?1:0}return Yn(n,m=ie(t.text,m,1),f,v,r-h)}function tr(e,t,n,r,i,o,s){var a=oe((function(a){var l=i[a],c=1!=l.level;return Qn(Gn(e,et(n,c?l.to:l.from,c?"before":"after"),"line",t,r),o,s,!0)}),0,i.length-1),l=i[a];if(a>0){var c=1!=l.level,u=Gn(e,et(n,c?l.from:l.to,c?"after":"before"),"line",t,r);Qn(u,o,s,!0)&&u.top>s&&(l=i[a-1])}return l}function nr(e,t,n,r,i,o,s){var a=Xn(e,t,r,s),l=a.begin,c=a.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,d=null,h=0;h<i.length;h++){var f=i[h];if(!(f.from>=c||f.to<=l)){var p=Dn(e,r,1!=f.level?Math.min(c,f.to)-1:Math.max(l,f.from)).right,g=p<o?o-p+1e9:p-o;(!u||d>g)&&(u=f,d=g)}}return u||(u=i[i.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}function rr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==In){In=E("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)In.appendChild(document.createTextNode("x")),In.appendChild(E("br"));In.appendChild(document.createTextNode("x"))}T(e.measure,In);var n=In.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),k(e.measure),n||1}function ir(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=E("span","xxxxxxxxxx"),n=E("pre",[t],"CodeMirror-line-like");T(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function or(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+i,r[a]=o.clientWidth}return{fixedPos:sr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function sr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ar(e){var t=rr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/ir(e.display)-3);return function(i){if(Bt(e.doc,i))return 0;var o=0;if(i.widgets)for(var s=0;s<i.widgets.length;s++)i.widgets[s].height&&(o+=i.widgets[s].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function lr(e){var t=e.doc,n=ar(e);t.iter((function(e){var t=n(e);t!=e.height&&Ye(e,t)}))}function cr(e,t,n,r){var i=e.display;if(!n&&"true"==Ce(t).getAttribute("cm-not-content"))return null;var o,s,a=i.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(e){return null}var l,c=Zn(e,o,s);if(r&&c.xRel>0&&(l=qe(e.doc,c.line).text).length==c.ch){var u=F(l,l.length,e.options.tabSize)-l.length;c=et(c.line,Math.max(0,Math.round((o-Sn(e.display).left)/ir(e.display))-u))}return c}function ur(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function dr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Ot&&Vt(e.doc,t)<i.viewTo&&fr(e);else if(n<=i.viewFrom)Ot&&zt(e.doc,n+r)>i.viewFrom?fr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)fr(e);else if(t<=i.viewFrom){var o=pr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):fr(e)}else if(n>=i.viewTo){var s=pr(e,t,t,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):fr(e)}else{var a=pr(e,t,t,-1),l=pr(e,n,n+r,1);a&&l?(i.view=i.view.slice(0,a.index).concat(on(e,a.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):fr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function hr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[ur(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==z(s,n)&&s.push(n)}}}function fr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function pr(e,t,n,r){var i,o=ur(e,t),s=e.display.view;if(!Ot||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=t){if(r>0){if(o==s.length-1)return null;i=a+s[o].size-t,o++}else i=a-t;t+=i,n+=i}for(;Vt(e.doc,n)!=n;){if(o==(r<0?0:s.length-1))return null;n+=r*s[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function gr(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function mr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function vr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&br(e,a.head,i),l||wr(e,a,o)}}return r}function br(e,t,n){var r=Gn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(E("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(E("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function yr(e,t){return e.top-t.top||e.left-t.left}function wr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),s=Sn(e.display),a=s.left,l=Math.max(r.sizerWidth,kn(e)-r.sizer.offsetLeft)-s.right,c="ltr"==i.direction;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(E("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function d(t,n,r){var o,s,d=qe(i,t),h=d.text.length;function f(n,r){return qn(e,et(t,n),"div",d,r)}function p(t,n,r){var i=Jn(e,d,null,t),o="ltr"==n==("after"==r)?"left":"right";return f("after"==r?i.begin:i.end-(/\s/.test(d.text.charAt(i.end-1))?2:1),o)[o]}var g=ce(d,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(r(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(g,n||0,null==r?h:r,(function(e,t,i,d){var m="ltr"==i,v=f(e,m?"left":"right"),b=f(t-1,m?"right":"left"),y=null==n&&0==e,w=null==r&&t==h,x=0==d,O=!g||d==g.length-1;if(b.top-v.top<=3){var C=(c?y:w)&&x?a:(m?v:b).left;u(C,v.top,((c?w:y)&&O?l:(m?b:v).right)-C,v.bottom)}else{var _,S,j,k;m?(_=c&&y&&x?a:v.left,S=c?l:p(e,i,"before"),j=c?a:p(t,i,"after"),k=c&&w&&O?l:b.right):(_=c?p(e,i,"before"):a,S=!c&&y&&x?l:v.right,j=!c&&w&&O?a:b.left,k=c?p(t,i,"after"):l),u(_,v.top,S-_,v.bottom),v.bottom<b.top&&u(a,v.bottom,null,b.top),u(j,b.top,k-j,b.bottom)}(!o||yr(v,o)<0)&&(o=v),yr(b,o)<0&&(o=b),(!s||yr(v,s)<0)&&(s=v),yr(b,s)<0&&(s=b)})),{start:o,end:s}}var h=t.from(),f=t.to();if(h.line==f.line)d(h.line,h.ch,f.ch);else{var p=qe(i,h.line),g=qe(i,f.line),m=Ft(p)==Ft(g),v=d(h.line,h.ch,m?p.text.length+1:null).end,b=d(f.line,m?0:null,f.ch).start;m&&(v.top<b.top-2?(u(v.right,v.top,null,v.bottom),u(a,b.top,b.left,b.bottom)):u(v.right,v.top,b.left-v.right,v.bottom)),v.bottom<b.top&&u(a,v.bottom,null,b.top)}n.appendChild(o)}function xr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Or(e){e.state.focused||(e.display.input.focus(),_r(e))}function Cr(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Sr(e))}),100)}function _r(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(pe(e,"focus",e,t),e.state.focused=!0,D(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),xr(e))}function Sr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(pe(e,"blur",e,t),e.state.focused=!1,j(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function jr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=e.options.lineWrapping,l=void 0,c=0;if(!i.hidden){if(s&&a<8){var u=i.node.offsetTop+i.node.offsetHeight;l=u-n,n=u}else{var d=i.node.getBoundingClientRect();l=d.bottom-d.top,!o&&i.text.firstChild&&(c=i.text.firstChild.getBoundingClientRect().right-d.left-1)}var h=i.line.height-l;if((h>.005||h<-.005)&&(Ye(i.line,l),kr(i.line),i.rest))for(var f=0;f<i.rest.length;f++)kr(i.rest[f]);if(c>e.display.sizerWidth){var p=Math.ceil(c/ir(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=i.line,e.display.maxLineChanged=!0)}}}}function kr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Tr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Cn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=Xe(t,r),s=Xe(t,i);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=Xe(t,Ut(qe(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=Xe(t,Ut(qe(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function Er(e,t){var n=e.display,r=rr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Tn(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+_n(n),l=t.bottom>a-r;if(t.top<i)s.scrollTop=t.top<r?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(l?a:t.bottom)-o);c!=i&&(s.scrollTop=c)}var u=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,d=kn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),h=t.right-t.left>d;return h&&(t.right=t.left+d),t.left<10?s.scrollLeft=0:t.left<u?s.scrollLeft=Math.max(0,t.left-(h?0:10)):t.right>d+u-3&&(s.scrollLeft=t.right+(h?0:10)-d),s}function Pr(e,t){null!=t&&(Dr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ar(e){Dr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Mr(e,t,n){null==t&&null==n||Dr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Dr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ir(e,Kn(e,t.from),Kn(e,t.to),t.margin))}function Ir(e,t,n,r){var i=Er(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Mr(e,i.scrollLeft,i.scrollTop)}function Lr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||li(e,{top:t}),Nr(e,t,!0),n&&li(e),ri(e,100))}function Nr(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Rr(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,di(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Fr(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+_n(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+jn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Vr=function(e,t,n){this.cm=n;var r=this.vert=E("div",[E("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=E("div",[E("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),de(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),de(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Vr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?r:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?r:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Vr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Vr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Vr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=b&&!f?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new V,this.disableVert=new V},Vr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,(function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)}))},Vr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var zr=function(){};function Br(e,t){t||(t=Fr(e));var n=e.display.barWidth,r=e.display.barHeight;Hr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&jr(e),Hr(e,Fr(e)),n=e.display.barWidth,r=e.display.barHeight}function Hr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}zr.prototype.update=function(){return{bottom:0,right:0}},zr.prototype.setScrollLeft=function(){},zr.prototype.setScrollTop=function(){},zr.prototype.clear=function(){};var Ur={native:Vr,null:zr};function $r(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&j(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Ur[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),de(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?Rr(e,t):Lr(e,t)}),e),e.display.scrollbars.addClass&&D(e.display.wrapper,e.display.scrollbars.addClass)}var Wr=0;function qr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Wr},t=e.curOp,sn?sn.ops.push(t):t.ownsGroup=sn={ops:[t],delayedCallbacks:[]}}function Gr(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{sn=null,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Kr(t[n]);for(var r=0;r<t.length;r++)Yr(t[r]);for(var i=0;i<t.length;i++)Zr(t[i]);for(var o=0;o<t.length;o++)Xr(t[o]);for(var s=0;s<t.length;s++)Jr(t[s])}(e)}(n)}}(t)}function Kr(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=jn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=jn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Wt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new oi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Yr(e){e.updatedDisplay=e.mustUpdate&&si(e.cm,e.update)}function Zr(e){var t=e.cm,n=t.display;e.updatedDisplay&&jr(t),e.barMeasure=Fr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Pn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+jn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-kn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Xr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Rr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==M();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Br(t,e.barMeasure),e.updatedDisplay&&ui(t,e.barMeasure),e.selectionChanged&&xr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Or(e.cm)}function Jr(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&ai(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Nr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Rr(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!ge(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=E("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Cn(e.display))+"px;\n                         height: "+(t.bottom-t.top+jn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?et(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?et(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var s=!1,a=Gn(e,t),l=n&&n!=t?Gn(e,n):a,c=Er(e,i={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-r,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+r}),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=c.scrollTop&&(Lr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(s=!0)),null!=c.scrollLeft&&(Rr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return i}(t,at(r,e.scrollToPos.from),at(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var s=0;s<i.length;++s)i[s].lines.length||pe(i[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&pe(o[a],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&pe(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Qr(e,t){if(e.curOp)return t();qr(e);try{return t()}finally{Gr(e)}}function ei(e,t){return function(){if(e.curOp)return t.apply(e,arguments);qr(e);try{return t.apply(e,arguments)}finally{Gr(e)}}}function ti(e){return function(){if(this.curOp)return e.apply(this,arguments);qr(this);try{return e.apply(this,arguments)}finally{Gr(this)}}}function ni(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);qr(t);try{return e.apply(this,arguments)}finally{Gr(t)}}}function ri(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,N(ii,e))}function ii(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=ft(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(r.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?He(t.mode,r.state):null,l=dt(e,o,r,!0);a&&(r.state=a),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var d=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),h=0;!d&&h<s.length;++h)d=s[h]!=o.styles[h];d&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&pt(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(e,e.options.workDelay),!0})),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Qr(e,(function(){for(var t=0;t<i.length;t++)hr(e,i[t],"text")}))}}var oi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Tr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=kn(e),this.force=n,this.dims=or(e),this.events=[]};function si(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return fr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==gr(e))return!1;hi(e)&&(fr(e),t.dims=or(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),s=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(i,n.viewTo)),Ot&&(o=Vt(e.doc,o),s=zt(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=on(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=on(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(ur(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(on(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,ur(e,n)))),r.viewTo=n}(e,o,s),n.viewOffset=Ut(qe(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=gr(e);if(!a&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=M();if(!t||!A(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&A(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,d=0;d<c.length;d++){var h=c[d];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;s!=h.node;)s=a(s);var f=i&&null!=t&&t<=u&&h.lineNumber;h.changes&&(z(h.changes,"gutter")>-1&&(f=!1),un(e,h,u,n)),f&&(k(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(Qe(e.options,u)))),s=h.node.nextSibling}else{var p=vn(e,h,u,n);o.insertBefore(p,s)}u+=h.size}for(;s;)s=a(s)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=M()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&A(document.body,e.anchorNode)&&A(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),k(n.cursorDiv),k(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ri(e,400)),n.updateLineNumbers=null,!0}function ai(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=kn(e))r&&(t.visible=Tr(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+_n(e.display)-Tn(e),n.top)}),t.visible=Tr(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!si(e,t))break;jr(e);var i=Fr(e);mr(e),Br(e,i),ui(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function li(e,t){var n=new oi(e,t);if(si(e,n)){jr(e),ai(e,n);var r=Fr(e);mr(e),Br(e,r),ui(e,r),n.finish()}}function ci(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px"}function ui(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+jn(e)+"px"}function di(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=sr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function hi(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Qe(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(E("div",[E("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,s=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ci(e.display),!0}return!1}function fi(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var o=e[i],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;r=!0}n.push({className:o,style:s})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function pi(e){var t=e.gutters,n=e.gutterSpecs;k(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],o=i.className,s=i.style,a=t.appendChild(E("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",ci(e)}function gi(e){pi(e.display),dr(e),di(e)}function mi(e,t,r,i){var o=this;this.input=r,o.scrollbarFiller=E("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=E("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=P("div",null,"CodeMirror-code"),o.selectionDiv=E("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=E("div",null,"CodeMirror-cursors"),o.measure=E("div",null,"CodeMirror-measure"),o.lineMeasure=E("div",null,"CodeMirror-measure"),o.lineSpace=P("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var c=P("div",[o.lineSpace],"CodeMirror-lines");o.mover=E("div",[c],null,"position: relative"),o.sizer=E("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=E("div",null,null,"position: absolute; height: 50px; width: 1px;"),o.gutters=E("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=E("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=E("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&v||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=fi(i.gutters,i.lineNumbers),pi(o),r.init(o)}oi.prototype.signal=function(e,t){ve(e,t)&&this.events.push(arguments)},oi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)pe.apply(null,this.events[e])};var vi=0,bi=null;function yi(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function wi(e){var t=yi(e);return t.x*=bi,t.y*=bi,t}function xi(e,t){var r=yi(t),i=r.x,o=r.y,s=e.display,a=s.scroller,c=a.scrollHeight>a.clientHeight;if(i&&a.scrollWidth>a.clientWidth||o&&c){if(o&&b&&l)e:for(var u=t.target,h=s.view;u!=a;u=u.parentNode)for(var f=0;f<h.length;f++)if(h[f].node==u){e.display.currentWheelTarget=u;break e}if(i&&!n&&!d&&null!=bi)return o&&c&&Lr(e,Math.max(0,a.scrollTop+o*bi)),Rr(e,Math.max(0,a.scrollLeft+i*bi)),(!o||o&&c)&&ye(t),void(s.wheelStartX=null);if(o&&null!=bi){var p=o*bi,g=e.doc.scrollTop,m=g+s.wrapper.clientHeight;p<0?g=Math.max(0,g+p-50):m=Math.min(e.doc.height,m+p+50),li(e,{top:g,bottom:m})}vi<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(bi=(bi*vi+n)/(vi+1),++vi)}}),200)):(s.wheelDX+=i,s.wheelDY+=o))}}s?bi=-.53:n?bi=15:u?bi=-.7:h&&(bi=-1/3);var Oi=function(e,t){this.ranges=e,this.primIndex=t};Oi.prototype.primary=function(){return this.ranges[this.primIndex]},Oi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!nt(n.anchor,r.anchor)||!nt(n.head,r.head))return!1}return!0},Oi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ci(rt(this.ranges[t].anchor),rt(this.ranges[t].head));return new Oi(e,this.primIndex)},Oi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Oi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(tt(t,r.from())>=0&&tt(e,r.to())<=0)return n}return-1};var Ci=function(e,t){this.anchor=e,this.head=t};function _i(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort((function(e,t){return tt(e.from(),t.from())})),n=z(t,i);for(var o=1;o<t.length;o++){var s=t[o],a=t[o-1],l=tt(a.to(),s.from());if(r&&!s.empty()?l>0:l>=0){var c=ot(a.from(),s.from()),u=it(a.to(),s.to()),d=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,t.splice(--o,2,new Ci(d?u:c,d?c:u))}}return new Oi(t,n)}function Si(e,t){return new Oi([new Ci(e,t||e)],0)}function ji(e){return e.text?et(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function ki(e,t){if(tt(e,t.from)<0)return e;if(tt(e,t.to)<=0)return ji(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=ji(t).ch-t.to.ch),et(n,r)}function Ti(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new Ci(ki(i.anchor,t),ki(i.head,t)))}return _i(e.cm,n,e.sel.primIndex)}function Ei(e,t,n){return e.line==t.line?et(n.line,e.ch-t.ch+n.ch):et(n.line+(e.line-t.line),e.ch)}function Pi(e){e.doc.mode=Ve(e.options,e.doc.modeOption),Ai(e)}function Ai(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ri(e,100),e.state.modeGen++,e.curOp&&dr(e)}function Mi(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Di(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Tt(e),Et(e,n);var i=r?r(e):1;i!=e.height&&Ye(e,i)}(e,n,i,r),ln(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new qt(c[o],i(o),r));return n}var a=t.from,l=t.to,c=t.text,u=qe(e,a.line),d=qe(e,l.line),h=K(c),f=i(c.length-1),p=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(Mi(e,t)){var g=s(0,c.length-1);o(d,d.text,f),p&&e.remove(a.line,p),g.length&&e.insert(a.line,g)}else if(u==d)if(1==c.length)o(u,u.text.slice(0,a.ch)+h+u.text.slice(l.ch),f);else{var m=s(1,c.length-1);m.push(new qt(h+u.text.slice(l.ch),f,r)),o(u,u.text.slice(0,a.ch)+c[0],i(0)),e.insert(a.line+1,m)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+d.text.slice(l.ch),i(0)),e.remove(a.line+1,p);else{o(u,u.text.slice(0,a.ch)+c[0],i(0)),o(d,h+d.text.slice(l.ch),f);var v=s(1,c.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,v)}ln(e,"change",e,t)}function Ii(e,t,n){!function e(r,i,o){if(r.linked)for(var s=0;s<r.linked.length;++s){var a=r.linked[s];if(a.doc!=i){var l=o&&a.sharedHist;n&&!l||(t(a.doc,l),e(a.doc,r,l))}}}(e,null,!0)}function Li(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,lr(e),Pi(e),Ni(e),e.options.lineWrapping||Wt(e),e.options.mode=t.modeOption,dr(e)}function Ni(e){("rtl"==e.doc.direction?D:j)(e.display.lineDiv,"CodeMirror-rtl")}function Ri(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Fi(e,t){var n={from:rt(t.from),to:ji(t),text:Ge(e,t.from,t.to)};return Hi(e,n,t.from.line,t.to.line+1),Ii(e,(function(e){return Hi(e,n,t.from.line,t.to.line+1)}),!0),n}function Vi(e){for(;e.length&&K(e).ranges;)e.pop()}function zi(e,t,n,r){var i=e.history;i.undone.length=0;var o,s,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Vi(e.done),K(e.done)):e.done.length&&!K(e.done).ranges?K(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),K(e.done)):void 0}(i,i.lastOp==r)))s=K(o.changes),0==tt(t.from,t.to)&&0==tt(t.from,s.to)?s.to=ji(t):o.changes.push(Fi(e,t));else{var l=K(i.done);for(l&&l.ranges||Bi(e.sel,i.done),o={changes:[Fi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||pe(e,"historyAdded")}function Bi(e,t){var n=K(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Hi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),(function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function Ui(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function $i(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Ui(n[i]));return r}(e,t),r=jt(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],s=r[i];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(n[i]=s)}return n}function Wi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?Oi.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(u=d.match(/^spans_(\d+)$/))&&z(t,Number(u[1]))>-1&&(K(a)[d]=c[d],delete c[d])}}}return r}function qi(e,t,n,r){if(r){var i=e.anchor;if(n){var o=tt(t,i)<0;o!=tt(n,i)<0?(i=t,t=n):o!=tt(t,n)<0&&(t=n)}return new Ci(i,t)}return new Ci(n||t,t)}function Gi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Ji(e,new Oi([qi(e.sel.primary(),t,n,i)],0),r)}function Ki(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=qi(e.sel.ranges[o],t[o],null,i);Ji(e,_i(e.cm,r,e.sel.primIndex),n)}function Yi(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Ji(e,_i(e.cm,i,e.sel.primIndex),r)}function Zi(e,t,n,r){Ji(e,Si(t,n),r)}function Xi(e,t,n){var r=e.history.done,i=K(r);i&&i.ranges?(r[r.length-1]=t,Qi(e,t,n)):Ji(e,t,n)}function Ji(e,t,n){Qi(e,t,n),function(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,K(i.done),t))?i.done[i.done.length-1]=t:Bi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Vi(i.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Qi(e,t,n){(ve(e,"beforeSelectionChange")||e.cm&&ve(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new Ci(at(e,t[n].anchor),at(e,t[n].head))},origin:n&&n.origin};return pe(e,"beforeSelectionChange",e,r),e.cm&&pe(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?_i(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(tt(t.primary().head,e.sel.primary().head)<0?-1:1);eo(e,no(e,t,r,!0)),n&&!1===n.scroll||!e.cm||Ar(e.cm)}function eo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,me(e.cm)),ln(e,"cursorActivity",e))}function to(e){eo(e,no(e,e.sel,null,!1))}function no(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=io(e,s.anchor,a&&a.anchor,n,r),c=io(e,s.head,a&&a.head,n,r);(i||l!=s.anchor||c!=s.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new Ci(l,c))}return i?_i(e.cm,i,t.primIndex):t}function ro(e,t,n,r,i){var o=qe(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(c?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(u?a.to>=t.ch:a.to>t.ch))){if(i&&(pe(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var d=l.find(r<0?1:-1),h=void 0;if((r<0?u:c)&&(d=oo(e,d,-r,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(h=tt(d,n))&&(r<0?h<0:h>0))return ro(e,d,t,r,i)}var f=l.find(r<0?-1:1);return(r<0?c:u)&&(f=oo(e,f,r,f.line==t.line?o:null)),f?ro(e,f,t,r,i):null}}return t}function io(e,t,n,r,i){var o=r||1;return ro(e,t,n,o,i)||!i&&ro(e,t,n,o,!0)||ro(e,t,n,-o,i)||!i&&ro(e,t,n,-o,!0)||(e.cantEdit=!0,et(e.first,0))}function oo(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?at(e,et(t.line-1)):null:n>0&&t.ch==(r||qe(e,t.line)).text.length?t.line<e.first+e.size-1?et(t.line+1,0):null:new et(t.line,t.ch+n)}function so(e){e.setSelection(et(e.firstLine(),0),et(e.lastLine()),H)}function ao(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=at(e,t)),n&&(r.to=at(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),pe(e,"beforeChange",e,r),e.cm&&pe(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function lo(e,t,n){if(e.cm){if(!e.cm.curOp)return ei(e.cm,lo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"))||(t=ao(e,t,!0))){var r=xt&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=z(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var s=r[o],a=s.find(0),l=0;l<i.length;++l){var c=i[l];if(!(tt(c.to,a.from)<0||tt(c.from,a.to)>0)){var u=[l,1],d=tt(c.from,a.from),h=tt(c.to,a.to);(d<0||!s.inclusiveLeft&&!d)&&u.push({from:c.from,to:a.from}),(h>0||!s.inclusiveRight&&!h)&&u.push({from:a.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)co(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else co(e,t)}}function co(e,t){if(1!=t.text.length||""!=t.text[0]||0!=tt(t.from,t.to)){var n=Ti(e,t);zi(e,t,n,e.cm?e.cm.curOp.id:NaN),fo(e,t,n,jt(e,t));var r=[];Ii(e,(function(e,n){n||-1!=z(r,e.history)||(vo(e.history,t),r.push(e.history)),fo(e,t,null,jt(e,t))}))}}function uo(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,c=0;c<a.length&&(i=a[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(r)return void a.push(i);break}if(Bi(i,l),n&&!i.equals(e.sel))return void Ji(e,i,{clearRedo:!1});s=i}var u=[];Bi(s,l),l.push({changes:u,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var d=ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"),h=function(n){var r=i.changes[n];if(r.origin=t,d&&!ao(e,r,!1))return a.length=0,{};u.push(Fi(e,r));var o=n?Ti(e,r):K(a);fo(e,r,o,$i(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:ji(r)});var s=[];Ii(e,(function(e,t){t||-1!=z(s,e.history)||(vo(e.history,r),s.push(e.history)),fo(e,r,null,$i(e,r))}))},f=i.changes.length-1;f>=0;--f){var p=h(f);if(p)return p.v}}}}function ho(e,t){if(0!=t&&(e.first+=t,e.sel=new Oi(Y(e.sel.ranges,(function(e){return new Ci(et(e.anchor.line+t,e.anchor.ch),et(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){dr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)hr(e.cm,r,"gutter")}}function fo(e,t,n,r){if(e.cm&&!e.cm.curOp)return ei(e.cm,fo)(e,t,n,r);if(t.to.line<e.first)ho(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ho(e,i),t={from:et(e.first,0),to:et(t.to.line+i,t.to.ch),text:[K(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:et(o,qe(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ge(e,t.from,t.to),n||(n=Ti(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=Ze(Ft(qe(r,o.line))),r.iter(l,s.line+1,(function(e){if(e==i.maxLine)return a=!0,!0}))),r.sel.contains(t.from,t.to)>-1&&me(e),Di(r,t,n,ar(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,(function(e){var t=$t(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=qe(e,r).stateAfter;if(i&&(!(i instanceof ct)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,o.line),ri(e,400);var c=t.text.length-(s.line-o.line)-1;t.full?dr(e):o.line!=s.line||1!=t.text.length||Mi(e.doc,t)?dr(e,o.line,s.line+1,c):hr(e,o.line,"text");var u=ve(e,"changes"),d=ve(e,"change");if(d||u){var h={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&ln(e,"change",e,h),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}(e.cm,t,r):Di(e,t,r),Qi(e,n,H),e.cantEdit&&io(e,et(e.firstLine(),0))&&(e.cantEdit=!1)}}function po(e,t,n,r,i){var o;r||(r=n),tt(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),lo(e,{from:n,to:r,text:t,origin:i})}function go(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function mo(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],s=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)go(o.ranges[a].anchor,t,n,r),go(o.ranges[a].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=et(c.from.line+r,c.from.ch),c.to=et(c.to.line+r,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,i+1),i=0)}}}function vo(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;mo(e.done,n,r,i),mo(e.undone,n,r,i)}function bo(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=qe(e,st(e,t)):i=Ze(t),null==i?null:(r(o,i)&&e.cm&&hr(e.cm,i,n),o)}function yo(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function wo(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}Ci.prototype.from=function(){return ot(this.anchor,this.head)},Ci.prototype.to=function(){return it(this.anchor,this.head)},Ci.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},yo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Gt(i),ln(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},wo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),s=r.height;if(r.removeInner(e,o),this.height-=s-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof yo))){var a=[];this.collapse(a),this.children=[new yo(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var s=i.lines.length%25+25,a=s;a<i.lines.length;){var l=new yo(i.lines.slice(a,a+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new wo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=z(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new wo(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var s=Math.min(t,o-e);if(i.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var xo=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function Oo(e,t,n){Ut(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Pr(e,n)}xo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=Ze(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=xn(this);Ye(n,Math.max(0,n.height-o)),e&&(Qr(e,(function(){Oo(e,n,-o),hr(e,r,"widget")})),ln(e,"lineWidgetCleared",e,this,r))}},xo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=xn(this)-t;i&&(Bt(this.doc,r)||Ye(r,r.height+i),n&&Qr(n,(function(){n.curOp.forceUpdate=!0,Oo(n,r,i),ln(n,"lineWidgetChanged",n,e,Ze(r))})))},be(xo);var Co=0,_o=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Co};function So(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=R(r)).shared=!1;var o=[So(e,t,n,r,i)],s=o[0],a=r.widgetNode;return Ii(e,(function(e){a&&(r.widgetNode=a.cloneNode(!0)),o.push(So(e,at(e,t),at(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=K(o)})),new jo(o,s)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return ei(e.cm,So)(e,t,n,r,i);var o=new _o(e,i),s=tt(t,n);if(r&&R(r,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=P("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Rt(e,t.line,t,n,o)||t.line!=n.line&&Rt(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ot=!0}o.addToHistory&&zi(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,(function(e){c&&o.collapsed&&!c.options.lineWrapping&&Ft(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&Ye(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Ct(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){Bt(e,t)&&Ye(t,0)})),o.clearOnEnter&&de(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(xt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Co,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)dr(c,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=t.line;u<=n.line;u++)hr(c,u,"text");o.atomic&&to(c.doc),ln(c,"markerAdded",c,o)}return o}_o.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&qr(e),ve(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=_t(s.markedSpans,this);e&&!this.collapsed?hr(e,Ze(s),"text"):e&&(null!=a.to&&(i=Ze(s)),null!=a.from&&(r=Ze(s))),s.markedSpans=St(s.markedSpans,a),null==a.from&&this.collapsed&&!Bt(this.doc,s)&&e&&Ye(s,rr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Ft(this.lines[l]),u=$t(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&dr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&to(e.doc)),e&&ln(e,"markerCleared",e,this,r,i),t&&Gr(e),this.parent&&this.parent.clear()}},_o.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],s=_t(o.markedSpans,this);if(null!=s.from&&(n=et(t?o:Ze(o),s.from),-1==e))return n;if(null!=s.to&&(r=et(t?o:Ze(o),s.to),1==e))return r}return n&&{from:n,to:r}},_o.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Qr(r,(function(){var i=t.line,o=Ze(t.line),s=An(r,o);if(s&&(Fn(s),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Bt(n.doc,i)&&null!=n.height){var a=n.height;n.height=null;var l=xn(n)-a;l&&Ye(i,i.height+l)}ln(r,"markerChanged",r,e)}))},_o.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=z(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},_o.prototype.detachLine=function(e){if(this.lines.splice(z(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},be(_o);var jo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ko(e){return e.findMarks(et(e.first,0),e.clipPos(et(e.lastLine())),(function(e){return e.parent}))}function To(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Ii(n.primary.doc,(function(e){return r.push(e)}));for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==z(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}jo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ln(this,"clear")}},jo.prototype.find=function(e,t){return this.primary.find(e,t)},be(jo);var Eo=0,Po=function(e,t,n,r,i){if(!(this instanceof Po))return new Po(e,t,n,r,i);null==n&&(n=0),wo.call(this,[new yo([new qt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=et(n,0);this.sel=Si(o),this.history=new Ri(null),this.id=++Eo,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Di(this,{from:o,to:o,text:e}),Ji(this,Si(o),H)};Po.prototype=X(wo.prototype,{constructor:Po,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ke(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:ni((function(e){var t=et(this.first,0),n=this.first+this.size-1;lo(this,{from:t,to:et(n,qe(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Mr(this.cm,0,0),Ji(this,Si(t),H)})),replaceRange:function(e,t,n,r){po(this,e,t=at(this,t),n=n?at(this,n):t,r)},getRange:function(e,t,n){var r=Ge(this,at(this,e),at(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Je(this,e))return qe(this,e)},getLineNumber:function(e){return Ze(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=qe(this,e)),Ft(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ni((function(e,t,n){Zi(this,at(this,"number"==typeof e?et(e,t||0):e),null,n)})),setSelection:ni((function(e,t,n){Zi(this,at(this,e),at(this,t||e),n)})),extendSelection:ni((function(e,t,n){Gi(this,at(this,e),t&&at(this,t),n)})),extendSelections:ni((function(e,t){Ki(this,lt(this,e),t)})),extendSelectionsBy:ni((function(e,t){Ki(this,lt(this,Y(this.sel.ranges,e)),t)})),setSelections:ni((function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new Ci(at(this,e[i].anchor),at(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ji(this,_i(this.cm,r,t),n)}})),addSelection:ni((function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new Ci(at(this,e),at(this,t||e))),Ji(this,_i(this.cm,r,r.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=Ge(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Ge(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:ni((function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var s=i.ranges[o];r[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&function(e,t,n){for(var r=[],i=et(e.first,0),o=i,s=0;s<t.length;s++){var a=t[s],l=Ei(a.from,i,o),c=Ei(ji(a),i,o);if(i=a.to,o=c,"around"==n){var u=e.sel.ranges[s],d=tt(u.head,u.anchor)<0;r[s]=new Ci(d?c:l,d?l:c)}else r[s]=new Ci(l,l)}return new Oi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)lo(this,r[l]);a?Xi(this,a):this.cm&&Ar(this.cm)})),undo:ni((function(){uo(this,"undo")})),redo:ni((function(){uo(this,"redo")})),undoSelection:ni((function(){uo(this,"undo",!0)})),redoSelection:ni((function(){uo(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Ri(this.history.maxGeneration),Ii(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Wi(this.history.done),undone:Wi(this.history.undone)}},setHistory:function(e){var t=this.history=new Ri(this.history.maxGeneration);t.done=Wi(e.done.slice(0),null,!0),t.undone=Wi(e.undone.slice(0),null,!0)},setGutterMarker:ni((function(e,t,n){return bo(this,e,"gutter",(function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&te(r)&&(e.gutterMarkers=null),!0}))})),clearGutter:ni((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&bo(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,te(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!Je(this,e))return null;if(t=e,!(e=qe(this,e)))return null}else if(null==(t=Ze(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:ni((function(e,t,n){return bo(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(_(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0}))})),removeLineClass:ni((function(e,t,n){return bo(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(_(n));if(!o)return!1;var s=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&s!=i.length?" ":"")+i.slice(s)||null}return!0}))})),addLineWidget:ni((function(e,t,n){return function(e,t,n,r){var i=new xo(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),bo(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Bt(e,t)){var r=Ut(t)<e.scrollTop;Ye(t,t.height+xn(i)),r&&Pr(o,i.height),o.curOp.forceUpdate=!0}return!0})),o&&ln(o,"lineWidgetAdded",o,i,"number"==typeof t?t:Ze(t)),i}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return So(this,at(this,e),at(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return So(this,e=at(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=qe(this,(e=at(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=at(this,e),t=at(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i})),r},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)})),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter((function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n})),at(this,et(n,t))},indexFromPos:function(e){var t=(e=at(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Po(Ke(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Po(Ke(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),s=e.clipPos(i.to);if(tt(o,s)){var a=So(e,o,s,r.primary,r.primary.type);r.markers.push(a),a.parent=r}}}(r,ko(this)),r},unlinkDoc:function(e){if(e instanceof Ss&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),To(ko(this));break}if(e.history==this.history){var n=[e.id];Ii(e,(function(e){return n.push(e.id)}),!0),e.history=new Ri(null),e.history.done=Wi(this.history.done,n),e.history.undone=Wi(this.history.undone,n)}},iterLinkedDocs:function(e){Ii(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ae(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ni((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Qr(t=this.cm,(function(){Ni(t),dr(t)})))}))}),Po.prototype.eachLine=Po.prototype.iter;var Ao=0;function Mo(e){var t=this;if(Do(t),!ge(t,e)&&!On(t.display,e)){ye(e),s&&(Ao=+new Date);var n=cr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,l=function(){++a==i&&ei(t,(function(){var e={from:n=at(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};lo(t.doc,e),Xi(t.doc,Si(at(t.doc,n),at(t.doc,ji(e))))}))()},c=function(e,n){if(t.options.allowDropFileTypes&&-1==z(t.options.allowDropFileTypes,e.type))l();else{var r=new FileReader;r.onerror=function(){return l()},r.onload=function(){var e=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[n]=e),l()},r.readAsText(e)}},u=0;u<r.length;u++)c(r[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData("Text");if(d){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Qi(t.doc,Si(n,n)),h)for(var f=0;f<h.length;++f)po(t.doc,"",h[f].anchor,h[f].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Do(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Io(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Lo=!1;function No(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ro={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Fo=0;Fo<10;Fo++)Ro[Fo+48]=Ro[Fo+96]=String(Fo);for(var Vo=65;Vo<=90;Vo++)Ro[Vo]=String.fromCharCode(Vo);for(var zo=1;zo<=12;zo++)Ro[zo+111]=Ro[zo+63235]="F"+zo;var Bo={};function Ho(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Uo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Y(n.split(" "),Ho),o=0;o<i.length;o++){var s=void 0,a=void 0;o==i.length-1?(a=i.join(" "),s=r):(a=i.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var c in t)e[c]=t[c];return e}function $o(e,t,n,r){var i=(t=Ko(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return $o(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var s=$o(e,t.fallthrough[o],n,r);if(s)return s}}}function Wo(e){var t="string"==typeof e?e:Ro[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function qo(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(O?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(O?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Go(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=Ro[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),qo(n,e,t))}function Ko(e){return"string"==typeof e?Bo[e]:e}function Yo(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&tt(o.from,K(r).to)<=0;){var s=r.pop();if(tt(s.from,o.from)<0){o.from=s.from;break}}r.push(o)}Qr(e,(function(){for(var t=r.length-1;t>=0;t--)po(e.doc,"",r[t].from,r[t].to,"+delete");Ar(e)}))}function Zo(e,t,n){var r=ie(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Xo(e,t,n){var r=Zo(e,t.ch,n);return null==r?null:new et(t.line,r,n<0?"after":"before")}function Jo(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var o=ce(n,t.doc.direction);if(o){var s,a=i<0?K(o):o[0],l=i<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var c=Mn(t,n),u=Dn(t,c,s=i<0?n.text.length-1:0).top;s=oe((function(e){return Dn(t,c,e).top==u}),i<0==(1==a.level)?a.from:a.to-1,s),"before"==l&&(s=Zo(n,s,1))}else s=i<0?a.to:a.from;return new et(r,s,l)}}return new et(r,i<0?n.text.length:0,i<0?"before":"after")}Bo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Bo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Bo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Bo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Bo.default=b?Bo.macDefault:Bo.pcDefault;var Qo={selectAll:so,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),H)},killLine:function(e){return Yo(e,(function(t){if(t.empty()){var n=qe(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:et(t.head.line+1,0)}:{from:t.head,to:et(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Yo(e,(function(t){return{from:et(t.from().line,0),to:at(e.doc,et(t.to().line+1,0))}}))},delLineLeft:function(e){return Yo(e,(function(e){return{from:et(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Yo(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Yo(e,(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(et(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(et(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return es(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ts(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var n=qe(e.doc,t),r=function(e){for(var t;t=Lt(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=Ze(r)),Jo(!0,e,n,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),$)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),$)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?ts(e,t.head):r}),$)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),s=F(e.getLine(o.line),o.ch,r);t.push(G(r-s%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Qr(e,(function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=qe(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new et(i.line,i.ch-1)),i.ch>0)i=new et(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),et(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var s=qe(e.doc,i.line-1).text;s&&(i=new et(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),et(i.line-1,s.length-1),i,"+transpose"))}n.push(new Ci(i,i))}e.setSelections(n)}))},newlineAndIndent:function(e){return Qr(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Ar(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function es(e,t){var n=qe(e.doc,t),r=Ft(n);return r!=n&&(t=Ze(r)),Jo(!0,e,r,t,1)}function ts(e,t){var n=es(e,t.line),r=qe(e.doc,n.line),i=ce(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(n.ch,r.text.search(/\S/));return et(n.line,t.line==n.line&&t.ch<=o&&t.ch?0:o,n.sticky)}return n}function ns(e,t,n){if("string"==typeof t&&!(t=Qo[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=B}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var rs=new V;function is(e,t,n,r){var i=e.state.keySeq;if(i){if(Wo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:rs.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),os(e,i+" "+t,n,r))return!0}return os(e,t,n,r)}function os(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=$o(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&$o(t,e.options.extraKeys,n,e)||$o(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&ln(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(ye(n),xr(e)),!!i}function ss(e,t){var n=Go(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?is(e,"Shift-"+n,t,(function(t){return ns(e,t,!0)}))||is(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ns(e,t)})):is(e,n,t,(function(t){return ns(e,t)})))}var as=null;function ls(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=M(),ge(t,e)))){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var i=ss(t,e);d&&(as=i?r:null,i||88!=r||De||!(b?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!b&&!i&&46==r&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(j(t,"CodeMirror-crosshair"),fe(document,"keyup",n),fe(document,"mouseover",n))}D(t,"CodeMirror-crosshair"),de(document,"keyup",n),de(document,"mouseover",n)}(t)}}function cs(e){16==e.keyCode&&(this.doc.sel.shift=!1),ge(this,e)}function us(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||On(t.display,e)||ge(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(d&&n==as)return as=null,void ye(e);if(!d||e.which&&!(e.which<10)||!ss(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return is(e,"'"+n+"'",t,(function(t){return ns(e,t,!0)}))}(t,e,i)||t.display.input.onKeyPress(e))}}}var ds,hs,fs=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ps(e){var t=this,n=t.display;if(!(ge(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,On(n,e))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!vs(t,e)){var r=cr(t,e),i=_e(e),o=r?function(e,t){var n=+new Date;return hs&&hs.compare(n,e,t)?(ds=hs=null,"triple"):ds&&ds.compare(n,e,t)?(hs=new fs(n,e,t),ds=null,"double"):(ds=new fs(n,e,t),hs=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),is(e,qo(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,(function(t){if("string"==typeof t&&(t=Qo[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=B}finally{e.state.suppressEdits=!1}return r}))}(t,i,r,o,e)||(1==i?r?function(e,t,n,r){s?setTimeout(N(Or,e),0):e.curOp.focus=M();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};return null==i.unit&&(i.unit=(y?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=b?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(b?n.altKey:n.ctrlKey)),i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&ke&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(tt((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(tt(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,o=!1,c=ei(e,(function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,fe(i.wrapper.ownerDocument,"mouseup",c),fe(i.wrapper.ownerDocument,"mousemove",u),fe(i.scroller,"dragstart",d),fe(i.scroller,"drop",c),o||(ye(t),r.addNew||Gi(e.doc,n,null,null,r.extend),l&&!h||s&&9==a?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),de(i.wrapper.ownerDocument,"mouseup",c),de(i.wrapper.ownerDocument,"mousemove",u),de(i.scroller,"dragstart",d),de(i.scroller,"drop",c),Cr(e),setTimeout((function(){return i.input.focus()}),20)}(e,r,t,o):function(e,t,n,r){var i=e.display,o=e.doc;ye(t);var s,a,l=o.sel,c=l.ranges;if(r.addNew&&!r.extend?(a=o.sel.contains(n),s=a>-1?c[a]:new Ci(n,n)):(s=o.sel.primary(),a=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(s=new Ci(n,n)),n=cr(e,t,!0,!0),a=-1;else{var u=gs(e,n,r.unit);s=r.extend?qi(s,u.anchor,u.head,r.extend):u}r.addNew?-1==a?(a=c.length,Ji(o,_i(e,c.concat([s]),a),{scroll:!1,origin:"*mouse"})):c.length>1&&c[a].empty()&&"char"==r.unit&&!r.extend?(Ji(o,_i(e,c.slice(0,a).concat(c.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Yi(o,a,s,U):(a=0,Ji(o,new Oi([s],0),U),l=o.sel);var d=n;function h(t){if(0!=tt(d,t))if(d=t,"rectangle"==r.unit){for(var i=[],c=e.options.tabSize,u=F(qe(o,n.line).text,n.ch,c),h=F(qe(o,t.line).text,t.ch,c),f=Math.min(u,h),p=Math.max(u,h),g=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=m;g++){var v=qe(o,g).text,b=W(v,f,c);f==p?i.push(new Ci(et(g,b),et(g,b))):v.length>b&&i.push(new Ci(et(g,b),et(g,W(v,p,c))))}i.length||i.push(new Ci(n,n)),Ji(o,_i(e,l.ranges.slice(0,a).concat(i),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y,w=s,x=gs(e,t,r.unit),O=w.anchor;tt(x.anchor,O)>0?(y=x.head,O=ot(w.from(),x.anchor)):(y=x.anchor,O=it(w.to(),x.head));var C=l.ranges.slice(0);C[a]=function(e,t){var n=t.anchor,r=t.head,i=qe(e.doc,n.line);if(0==tt(n,r)&&n.sticky==r.sticky)return t;var o=ce(i);if(!o)return t;var s=ae(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var l,c=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=ae(o,r.ch,r.sticky),d=u-s||(r.ch-n.ch)*(1==a.level?-1:1);l=u==c-1||u==c?d<0:d>0}var h=o[c+(l?-1:0)],f=l==(1==h.level),p=f?h.from:h.to,g=f?"after":"before";return n.ch==p&&n.sticky==g?t:new Ci(new et(n.line,p,g),r)}(e,new Ci(at(o,O),y)),Ji(o,_i(e,C,a),U)}}var f=i.wrapper.getBoundingClientRect(),p=0;function g(t){e.state.selectingText=!1,p=1/0,t&&(ye(t),i.input.focus()),fe(i.wrapper.ownerDocument,"mousemove",m),fe(i.wrapper.ownerDocument,"mouseup",v),o.history.lastSelOrigin=null}var m=ei(e,(function(t){0!==t.buttons&&_e(t)?function t(n){var s=++p,a=cr(e,n,!0,"rectangle"==r.unit);if(a)if(0!=tt(a,d)){e.curOp.focus=M(),h(a);var l=Tr(i,o);(a.line>=l.to||a.line<l.from)&&setTimeout(ei(e,(function(){p==s&&t(n)})),150)}else{var c=n.clientY<f.top?-20:n.clientY>f.bottom?20:0;c&&setTimeout(ei(e,(function(){p==s&&(i.scroller.scrollTop+=c,t(n))})),50)}}(t):g(t)})),v=ei(e,g);e.state.selectingText=v,de(i.wrapper.ownerDocument,"mousemove",m),de(i.wrapper.ownerDocument,"mouseup",v)}(e,r,t,o)}(t,r,o,e):Ce(e)==n.scroller&&ye(e):2==i?(r&&Gi(t.doc,r),setTimeout((function(){return n.input.focus()}),20)):3==i&&(C?t.display.input.onContextMenu(e):Cr(t)))}}function gs(e,t,n){if("char"==n)return new Ci(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new Ci(et(t.line,0),at(e.doc,et(t.line+1,0)));var r=n(e,t);return new Ci(r.from,r.to)}function ms(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(e){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ye(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!ve(e,n))return xe(t);o-=a.top-s.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i)return pe(e,n,e,Xe(e.doc,o),e.display.gutterSpecs[l].className,t),xe(t)}}function vs(e,t){return ms(e,t,"gutterClick",!0)}function bs(e,t){On(e.display,t)||function(e,t){return!!ve(e,"gutterContextMenu")&&ms(e,t,"gutterContextMenu",!1)}(e,t)||ge(e,t,"contextmenu")||C||e.display.input.onContextMenu(t)}function ys(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zn(e)}fs.prototype.compare=function(e,t,n){return this.time+400>e&&0==tt(t,this.pos)&&n==this.button};var ws={toString:function(){return"CodeMirror.Init"}},xs={},Os={};function Cs(e,t,n){if(!t!=!(n&&n!=ws)){var r=e.display.dragFunctions,i=t?de:fe;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function _s(e){e.options.lineWrapping?(D(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(j(e.display.wrapper,"CodeMirror-wrap"),Wt(e)),lr(e),dr(e),zn(e),setTimeout((function(){return Br(e)}),100)}function Ss(e,t){var n=this;if(!(this instanceof Ss))return new Ss(e,t);this.options=t=t?R(t):{},R(xs,t,!1);var r=t.value;"string"==typeof r?r=new Po(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new Ss.inputStyles[t.inputStyle](this),o=this.display=new mi(e,r,i,t);for(var c in o.wrapper.CodeMirror=this,ys(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$r(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new V,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(e){var t=e.display;de(t.scroller,"mousedown",ei(e,ps)),de(t.scroller,"dblclick",s&&a<11?ei(e,(function(t){if(!ge(e,t)){var n=cr(e,t);if(n&&!vs(e,t)&&!On(e.display,t)){ye(t);var r=e.findWordAt(n);Gi(e.doc,r.anchor,r.head)}}})):function(t){return ge(e,t)||ye(t)}),de(t.scroller,"contextmenu",(function(t){return bs(e,t)})),de(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||bs(e,n)}));var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(r=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}de(t.scroller,"touchstart",(function(i){if(!ge(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!vs(e,i)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}})),de(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),de(t.scroller,"touchend",(function(n){var r=t.activeTouch;if(r&&!On(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=e.coordsChar(t.activeTouch,"page");s=!r.prev||o(r,r.prev)?new Ci(a,a):!r.prev.prev||o(r,r.prev.prev)?e.findWordAt(a):new Ci(et(a.line,0),at(e.doc,et(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),ye(n)}i()})),de(t.scroller,"touchcancel",i),de(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Lr(e,t.scroller.scrollTop),Rr(e,t.scroller.scrollLeft,!0),pe(e,"scroll",e))})),de(t.scroller,"mousewheel",(function(t){return xi(e,t)})),de(t.scroller,"DOMMouseScroll",(function(t){return xi(e,t)})),de(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){ge(e,t)||Oe(t)},over:function(t){ge(e,t)||(function(e,t){var n=cr(e,t);if(n){var r=document.createDocumentFragment();br(e,n,r),e.display.dragCursor||(e.display.dragCursor=E("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),T(e.display.dragCursor,r)}}(e,t),Oe(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-Ao<100))Oe(t);else if(!ge(e,t)&&!On(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!h)){var n=E("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}(e,t)},drop:ei(e,Mo),leave:function(t){ge(e,t)||Do(e)}};var l=t.input.getField();de(l,"keyup",(function(t){return cs.call(e,t)})),de(l,"keydown",ei(e,ls)),de(l,"keypress",ei(e,us)),de(l,"focus",(function(t){return _r(e,t)})),de(l,"blur",(function(t){return Sr(e,t)}))}(this),function(){var e;Lo||(de(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Io(No)}),100))})),de(window,"blur",(function(){return Io(Sr)})),Lo=!0)}(),qr(this),this.curOp.forceUpdate=!0,Li(this,r),t.autofocus&&!v||this.hasFocus()?setTimeout(N(_r,this),20):Sr(this),Os)Os.hasOwnProperty(c)&&Os[c](this,t[c],ws);hi(this),t.finishInit&&t.finishInit(this);for(var u=0;u<js.length;++u)js[u](this);Gr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ss.defaults=xs,Ss.optionHandlers=Os;var js=[];function ks(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=ft(e,t).state:n="prev");var s=e.options.tabSize,a=qe(o,t),l=F(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(r||/\S/.test(a.text)){if("smart"==n&&((c=o.mode.indent(i,a.text.slice(u.length),a.text))==B||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?F(qe(o,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(c/s);f;--f)h+=s,d+="\t";if(h<c&&(d+=G(c-h)),d!=u)return po(o,d,et(t,0),et(t,u.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<u.length){var m=et(t,u.length);Yi(o,p,new Ci(m,m));break}}}Ss.defineInitHook=function(e){return js.push(e)};var Ts=null;function Es(e){Ts=e}function Ps(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var s=+new Date-200,a="paste"==i||e.state.pasteIncoming>s,l=Ae(t),c=null;if(a&&r.ranges.length>1)if(Ts&&Ts.text.join("\n")==t){if(r.ranges.length%Ts.text.length==0){c=[];for(var u=0;u<Ts.text.length;u++)c.push(o.splitLines(Ts.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=Y(l,(function(e){return[e]})));for(var d=e.curOp.updateInput,h=r.ranges.length-1;h>=0;h--){var f=r.ranges[h],p=f.from(),g=f.to();f.empty()&&(n&&n>0?p=et(p.line,p.ch-n):e.state.overwrite&&!a?g=et(g.line,Math.min(qe(o,g.line).text.length,g.ch+K(l).length)):a&&Ts&&Ts.lineWise&&Ts.text.join("\n")==l.join("\n")&&(p=g=et(p.line,0)));var m={from:p,to:g,text:c?c[h%c.length]:l,origin:i||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};lo(e.doc,m),ln(e,"inputRead",e,m)}t&&!a&&Ms(e,t),Ar(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function As(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Qr(t,(function(){return Ps(t,n,0,null,"paste")})),!0}function Ms(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=ks(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(qe(e.doc,i.head.line).text.slice(0,i.head.ch))&&(s=ks(e,i.head.line,"smart"));s&&ln(e,"electricInput",e,i.head.line)}}}function Ds(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:et(i,0),head:et(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Is(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Ls(){var e=E("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=E("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),Is(e),t}function Ns(e,t,n,r,i){var o=t,s=n,a=qe(e,t.line),l=i&&"rtl"==e.direction?-n:n;function c(r){var o,s;if(null==(o=i?function(e,t,n,r){var i=ce(t,e.doc.direction);if(!i)return Xo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ae(i,n.ch,n.sticky),s=i[o];if("ltr"==e.doc.direction&&s.level%2==0&&(r>0?s.to>n.ch:s.from<n.ch))return Xo(t,n,r);var a,l=function(e,n){return Zo(t,e instanceof et?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(a=a||Mn(e,t),Jn(e,t,a,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var d=1==s.level==r<0,h=l(n,d?1:-1);if(null!=h&&(d?h<=s.to&&h<=u.end:h>=s.from&&h>=u.begin))return new et(n.line,h,d?"before":"after")}var f=function(e,t,r){for(var o=function(e,t){return t?new et(n.line,l(e,1),"before"):new et(n.line,e,"after")};e>=0&&e<i.length;e+=t){var s=i[e],a=t>0==(1!=s.level),c=a?r.begin:l(r.end,-1);if(s.from<=c&&c<s.to)return o(c,a);if(c=a?s.from:l(s.to,-1),r.begin<=c&&c<r.end)return o(c,a)}},p=f(o+r,r,u);if(p)return p;var g=r>0?u.end:l(u.begin,-1);return null==g||r>0&&g==t.text.length||!(p=f(r>0?0:i.length-1,r,c(g)))?null:p}(e.cm,a,t,n):Xo(a,t,n))){if(r||(s=t.line+l)<e.first||s>=e.first+e.size||(t=new et(s,t.ch,t.sticky),!(a=qe(e,s))))return!1;t=Jo(i,e.cm,a,t.line,l)}else t=o;return!0}if("char"==r)c();else if("column"==r)c(!0);else if("word"==r||"group"==r)for(var u=null,d="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),f=!0;!(n<0)||c(!f);f=!1){var p=a.text.charAt(t.ch)||"\n",g=ee(p,h)?"w":d&&"\n"==p?"n":!d||/\s/.test(p)?null:"p";if(!d||f||g||(g="s"),u&&u!=g){n<0&&(n=1,c(),t.sticky="after");break}if(g&&(u=g),n>0&&!c(!f))break}var m=io(e,t,o,s,!0);return nt(o,m)&&(m.hitSide=!0),m}function Rs(e,t,n,r){var i,o,s=e.doc,a=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*rr(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=Zn(e,a,i)).outside;){if(n<0?i<=0:i>=s.height){o.hitSide=!0;break}i+=5*n}return o}var Fs=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new V,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Vs(e,t){var n=An(e,t.line);if(!n||n.hidden)return null;var r=qe(e.doc,t.line),i=En(n,r,t.line),o=ce(r,e.doc.direction),s="left";o&&(s=ae(o,t.ch)%2?"right":"left");var a=Nn(i.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function zs(e,t){return t&&(e.bad=!0),e}function Bs(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return zs(e.clipPos(et(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return Hs(o,t,n)}}function Hs(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!A(r,t))return zs(et(Ze(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?K(e.rest):e.line;return zs(et(Ze(o),o.text.length),i)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=r;)a=a.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?l.map:c[i],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var u=Ze(i<0?e.line:e.rest[i]),d=o[s]+r;return(r<0||a!=t)&&(d=o[s+(r?1:0)]),et(u,d)}}}var d=u(s,a,n);if(d)return zs(d,i);for(var h=a.nextSibling,f=s?s.nodeValue.length-n:0;h;h=h.nextSibling){if(d=u(h,h.firstChild,0))return zs(et(d.line,d.ch-f),i);f+=h.textContent.length}for(var p=a.previousSibling,g=n;p;p=p.previousSibling){if(d=u(p,p.firstChild,-1))return zs(et(d.line,d.ch+g),i);g+=p.textContent.length}}Fs.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function s(e){if(o(e)&&!ge(r,e)){if(r.somethingSelected())Es({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Ds(r);Es({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation((function(){r.setSelections(t.ranges,0,H),r.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var s=Ts.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Ls(),l=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),l.value=Ts.text.join("\n");var c=document.activeElement;L(l),setTimeout((function(){r.display.lineSpace.removeChild(a),c.focus(),c==i&&n.showPrimarySelection()}),50)}}Is(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),de(i,"paste",(function(e){!o(e)||ge(r,e)||As(e,r)||a<=11&&setTimeout(ei(r,(function(){return t.updateFromDOM()})),20)})),de(i,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),de(i,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),de(i,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),de(i,"touchstart",(function(){return n.forceCompositionEnd()})),de(i,"input",(function(){t.composing||t.readFromDOMSoon()})),de(i,"copy",s),de(i,"cut",s)},Fs.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Fs.prototype.prepareSelection=function(){var e=vr(this.cm,!1);return e.focus=document.activeElement==this.div,e},Fs.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Fs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Fs.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=Bs(t,e.anchorNode,e.anchorOffset),a=Bs(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=tt(ot(s,a),i)||0!=tt(it(s,a),o)){var l=t.display.view,c=i.line>=t.display.viewFrom&&Vs(t,i)||{node:l[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Vs(t,o);if(!u){var d=l[l.length-1].measure,h=d.maps?d.maps[d.maps.length-1]:d.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(c&&u){var f,p=e.rangeCount&&e.getRangeAt(0);try{f=S(c.node,c.offset,u.offset,u.node)}catch(e){}f&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Fs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Fs.prototype.showMultipleSelections=function(e){T(this.cm.display.cursorDiv,e.cursors),T(this.cm.display.selectionDiv,e.selection)},Fs.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Fs.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return A(this.div,t)},Fs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Fs.prototype.blur=function(){this.div.blur()},Fs.prototype.getField=function(){return this.div},Fs.prototype.supportsTouch=function(){return!0},Fs.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Qr(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Fs.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Fs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(m&&u&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Bs(t,e.anchorNode,e.anchorOffset),r=Bs(t,e.focusNode,e.focusOffset);n&&r&&Qr(t,(function(){Ji(t.doc,Si(n,r),H),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}}},Fs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>r.firstLine()&&(s=et(s.line-1,qe(r.doc,s.line-1).length)),a.ch==qe(r.doc,a.line).text.length&&a.line<r.lastLine()&&(a=et(a.line+1,0)),s.line<i.viewFrom||a.line>i.viewTo-1)return!1;s.line==i.viewFrom||0==(e=ur(r,s.line))?(t=Ze(i.view[0].line),n=i.view[0].node):(t=Ze(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=ur(r,a.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=Ze(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var d=r.doc.splitLines(function(e,t,n,r,i){var o="",s=!1,a=e.doc.lineSeparator(),l=!1;function c(){s&&(o+=a,l&&(o+=a),s=l=!1)}function u(e){e&&(c(),o+=e)}function d(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var o,h=t.getAttribute("cm-marker");if(h){var f=e.findMarks(et(r,0),et(i+1,0),(m=+h,function(e){return e.id==m}));return void(f.length&&(o=f[0].find(0))&&u(Ge(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;p&&c();for(var g=0;g<t.childNodes.length;g++)d(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),p&&(s=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var m}for(;d(t),t!=n;)t=t.nextSibling,l=!1;return o}(r,n,c,t,l)),h=Ge(r.doc,et(t,0),et(l,qe(r.doc,l).text.length));d.length>1&&h.length>1;)if(K(d)==K(h))d.pop(),h.pop(),l--;else{if(d[0]!=h[0])break;d.shift(),h.shift(),t++}for(var f=0,p=0,g=d[0],m=h[0],v=Math.min(g.length,m.length);f<v&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var b=K(d),y=K(h),w=Math.min(b.length-(1==d.length?f:0),y.length-(1==h.length?f:0));p<w&&b.charCodeAt(b.length-p-1)==y.charCodeAt(y.length-p-1);)++p;if(1==d.length&&1==h.length&&t==s.line)for(;f&&f>s.ch&&b.charCodeAt(b.length-p-1)==y.charCodeAt(y.length-p-1);)f--,p++;d[d.length-1]=b.slice(0,b.length-p).replace(/^\u200b+/,""),d[0]=d[0].slice(f).replace(/\u200b+$/,"");var x=et(t,f),O=et(l,h.length?K(h).length-p:0);return d.length>1||d[0]||tt(x,O)?(po(r.doc,d,x,O,"+input"),!0):void 0},Fs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Fs.prototype.reset=function(){this.forceCompositionEnd()},Fs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Fs.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Fs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Qr(this.cm,(function(){return dr(e.cm)}))},Fs.prototype.setUneditable=function(e){e.contentEditable="false"},Fs.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||ei(this.cm,Ps)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Fs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Fs.prototype.onContextMenu=function(){},Fs.prototype.resetPosition=function(){},Fs.prototype.needsContentAttribute=!0;var Us=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new V,this.hasSelection=!1,this.composing=null};Us.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!ge(r,e)){if(r.somethingSelected())Es({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Ds(r);Es({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,H):(n.prevInput="",i.value=t.text.join("\n"),L(i))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(i.style.width="0px"),de(i,"input",(function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),de(i,"paste",(function(e){ge(r,e)||As(e,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())})),de(i,"cut",o),de(i,"copy",o),de(e.scroller,"paste",(function(t){if(!On(e,t)&&!ge(r,t)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,i.dispatchEvent(o)}})),de(e.lineSpace,"selectstart",(function(t){On(e,t)||ye(t)})),de(i,"compositionstart",(function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),de(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Us.prototype.createField=function(e){this.wrapper=Ls(),this.textarea=this.wrapper.firstChild},Us.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Us.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=vr(e);if(e.options.moveInputWithCursor){var i=Gn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+s.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+s.left-o.left))}return r},Us.prototype.showSelection=function(e){var t=this.cm.display;T(t.cursorDiv,e.cursors),T(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Us.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&L(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Us.prototype.getField=function(){return this.textarea},Us.prototype.supportsTouch=function(){return!1},Us.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||M()!=this.textarea))try{this.textarea.focus()}catch(e){}},Us.prototype.blur=function(){this.textarea.blur()},Us.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Us.prototype.receivedFocus=function(){this.slowPoll()},Us.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Us.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))},Us.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Me(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===i||b&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Qr(t,(function(){Ps(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Us.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Us.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Us.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=cr(n,e),c=r.scroller.scrollTop;if(o&&!d){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&ei(n,Ji)(n.doc,Si(o),H);var u,h=i.style.cssText,f=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(u=window.scrollY),r.input.focus(),l&&window.scrollTo(null,u),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=v,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),s&&a>=9&&m(),C){Oe(e);var g=function(){fe(window,"mouseup",g),setTimeout(v,20)};de(window,"mouseup",g)}else setTimeout(v,50)}function m(){if(null!=i.selectionStart){var e=n.somethingSelected(),o="\u200b"+(e?i.value:"");i.value="\u21da",i.value=o,t.prevInput=e?"":"\u200b",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=f,i.style.cssText=h,s&&a<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart)){(!s||s&&a<9)&&m();var e=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"\u200b"==t.prevInput?ei(n,so)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Us.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Us.prototype.setUneditable=function(){},Us.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=ws&&i(e,t,n)}:i)}e.defineOption=n,e.Init=ws,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,Pi(e)}),!0),n("indentUnit",2,Pi,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){Ai(e),zn(e),dr(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter((function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(et(r,o))}r++}));for(var i=n.length-1;i>=0;i--)po(e.doc,t,n[i],et(n[i].line,n[i].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ws&&e.refresh()})),n("specialCharPlaceholder",Jt,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){ys(e),gi(e)}),!0),n("keyMap","default",(function(e,t,n){var r=Ko(t),i=n!=ws&&Ko(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,_s,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=fi(t,e.options.lineNumbers),gi(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?sr(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return Br(e)}),!0),n("scrollbarStyle","native",(function(e){$r(e),Br(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=fi(e.options.gutters,t),gi(e)}),!0),n("firstLineNumber",1,gi,!0),n("lineNumberFormatter",(function(e){return e}),gi,!0),n("showCursorWhenSelecting",!1,mr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Sr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){e.display.input.screenReaderLabelChanged(t=""===t?null:t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,Cs),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,mr,!0),n("singleCursorHeightPerLine",!0,mr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ai,!0),n("addModeClass",!1,Ai,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,Ai,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}(Ss),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&ei(this,t[e])(this,n,i),pe(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ko(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:ti((function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,dr(this)})),removeOverlay:ti((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void dr(this)}})),indentLine:ti((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Je(this.doc,e)&&ks(this,e,t,n)})),indentSelection:ti((function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(ks(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Ar(this));else{var o=i.from(),s=i.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)ks(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&Yi(this.doc,r,new Ci(o,c[r].to()),H)}}})),getTokenAt:function(e,t){return bt(this,e,t)},getLineTokens:function(e,t){return bt(this,et(e),t,!0)},getTokenTypeAt:function(e){e=at(this.doc,e);var t,n=ht(this,qe(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=r+i>>1;if((s?n[2*s-1]:0)>=o)i=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}r=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=i[o[t][s]];a&&r.push(a)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(o,this)&&-1==z(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return ft(this,(e=st(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Gn(this,null==e?n.head:"object"==typeof e?at(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return qn(this,at(this.doc,e),t||"page")},coordsChar:function(e,t){return Zn(this,(e=Wn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Wn(this,{top:e,left:0},t||"page").top,Xe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=qe(this.doc,e)}else r=e;return $n(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ut(r):0)},defaultTextHeight:function(){return rr(this.display)},defaultCharWidth:function(){return ir(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,s=this.display,a=(e=Gn(this,at(this.doc,e))).bottom,l=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var c=Math.max(s.wrapper.clientHeight,this.doc.height),u=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>c)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=c&&(a=e.bottom),l+t.offsetWidth>u&&(l=u-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(l=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?l=0:"middle"==i&&(l=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=l+"px"),n&&(null!=(o=Er(this,{left:l,top:a,right:l+t.offsetWidth,bottom:a+t.offsetHeight})).scrollTop&&Lr(this,o.scrollTop),null!=o.scrollLeft&&Rr(this,o.scrollLeft))},triggerOnKeyDown:ti(ls),triggerOnKeyPress:ti(us),triggerOnKeyUp:cs,triggerOnMouseDown:ti(ps),execCommand:function(e){if(Qo.hasOwnProperty(e))return Qo[e].call(null,this)},triggerElectric:ti((function(e){Ms(this,e)})),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=at(this.doc,e),s=0;s<t&&!(o=Ns(this.doc,o,i,n,r)).hitSide;++s);return o},moveH:ti((function(e,t){var n=this;this.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?Ns(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()}),$)})),deleteH:ti((function(e,t){var n=this.doc;this.doc.sel.somethingSelected()?n.replaceSelection("",null,"+delete"):Yo(this,(function(r){var i=Ns(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}}))})),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var s=at(this.doc,e),a=0;a<t;++a){var l=Gn(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Rs(this,l,i,n)).hitSide)break}return s},moveV:ti((function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(s){if(o)return e<0?s.from():s.to();var a=Gn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),i.push(a.left);var l=Rs(n,a,e,t);return"page"==t&&s==r.sel.primary()&&Pr(n,qn(n,l,"div").top-a.top),l}),$),i.length)for(var s=0;s<r.sel.ranges.length;s++)r.sel.ranges[s].goalColumn=i[s]})),findWordAt:function(e){var t=qe(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var o=t.charAt(n),s=ee(o,i)?function(e){return ee(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};n>0&&s(t.charAt(n-1));)--n;for(;r<t.length&&s(t.charAt(r));)++r}return new Ci(et(e.line,n),et(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?D(this.display.cursorDiv,"CodeMirror-overwrite"):j(this.display.cursorDiv,"CodeMirror-overwrite"),pe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==M()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ti((function(e,t){Mr(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-jn(this)-this.display.barHeight,width:e.scrollWidth-jn(this)-this.display.barWidth,clientHeight:Tn(this),clientWidth:kn(this)}},scrollIntoView:ti((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:et(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Dr(e),e.curOp.scrollToPos=t}(this,e):Ir(this,e.from,e.to,e.margin)})),setSize:ti((function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Vn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){hr(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,pe(this,"refresh",this)})),operation:function(e){return Qr(this,e)},startOperation:function(){return qr(this)},endOperation:function(){return Gr(this)},refresh:ti((function(){var e=this.display.cachedTextHeight;dr(this),this.curOp.forceUpdate=!0,zn(this),Mr(this,this.doc.scrollLeft,this.doc.scrollTop),ci(this.display),(null==e||Math.abs(e-rr(this.display))>.5||this.options.lineWrapping)&&lr(this),pe(this,"refresh",this)})),swapDoc:ti((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Li(this,e),zn(this),this.display.input.reset(),Mr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},be(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}(Ss);var $s="iter insert remove copy getEditor constructor".split(" ");for(var Ws in Po.prototype)Po.prototype.hasOwnProperty(Ws)&&z($s,Ws)<0&&(Ss.prototype[Ws]=function(e){return function(){return e.apply(this.doc,arguments)}}(Po.prototype[Ws]));return be(Po),Ss.inputStyles={textarea:Us,contenteditable:Fs},Ss.defineMode=function(e){Ss.defaults.mode||"null"==e||(Ss.defaults.mode=e),Re.apply(this,arguments)},Ss.defineMIME=function(e,t){Ne[e]=t},Ss.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Ss.defineMIME("text/plain","null"),Ss.defineExtension=function(e,t){Ss.prototype[e]=t},Ss.defineDocExtension=function(e,t){Po.prototype[e]=t},Ss.fromTextArea=function(e,t){if((t=t?R(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=M();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=a.getValue()}var i;if(e.form&&(de(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(e){}}t.finishInit=function(n){n.save=r,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,r(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(fe(e.form,"submit",r),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display="none";var a=Ss((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a},function(e){e.off=fe,e.on=de,e.wheelEventPixels=wi,e.Doc=Po,e.splitLines=Ae,e.countColumn=F,e.findColumn=W,e.isWordChar=Q,e.Pass=B,e.signal=pe,e.Line=qt,e.changeEnd=ji,e.scrollbarModel=Ur,e.Pos=et,e.cmpPos=tt,e.modes=Le,e.mimeModes=Ne,e.resolveMode=Fe,e.getMode=Ve,e.modeExtensions=ze,e.extendMode=Be,e.copyState=He,e.startState=$e,e.innerMode=Ue,e.commands=Qo,e.keyMap=Bo,e.keyName=Go,e.isModifierKey=Wo,e.lookupKey=$o,e.normalizeKeyMap=Uo,e.StringStream=We,e.SharedTextMarker=jo,e.TextMarker=_o,e.LineWidget=xo,e.e_preventDefault=ye,e.e_stopPropagation=we,e.e_stop=Oe,e.addClass=D,e.contains=A,e.rmClass=j,e.keyNames=Ro}(Ss),Ss.version="5.57.0",Ss}()},function(e,t,n){"use strict";n.r(t);var r=n(9),i=n.n(r),o=n(2),s=n.n(o),a=n(1),l=n.n(a),c=n(0),u=n(3),d=n(7),h=n(20);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=l.a.View.extend({events:function(){return this.model.get("events")||{mousedown:"handleClick"}},attributes:function(){return this.model.get("attributes")},initialize:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).config,t=void 0===e?{}:e;this.em=t.em,this.editor=t.editor},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.em,n=this.editor.Canvas.getFrameEl().getBoundingClientRect(),r=n.left,i=n.top,o=p(p({},e),{},{clientX:e.clientX-r,clientY:e.clientY-i});t.trigger("toolbar:run:before"),this.execCommand(o)},execCommand:function(e){var t={event:e},n=this.model.get("command"),r=this.editor;"function"==typeof n&&n(r,null,t),"string"==typeof n&&r.runCommand(n,t)},render:function(){var e=this.editor,t=this.$el,n=this.model,r=n.get("id"),i=n.get("label"),o=e.getConfig("stylePrefix");return t.addClass("".concat(o,"toolbar-item")),r&&t.addClass("".concat(o,"toolbar-item__").concat(r)),i&&t.append(i),this}}),m=h.a.extend({itemView:g,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config={editor:e.editor||"",em:e.em},this.listenTo(this.collection,"reset",this.render)}}),v=l.a.Model.extend({defaults:{command:"",attributes:{}}}),b=l.a.Collection.extend({model:v});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x,O=l.a.$;t.default={init:function(e){Object(c.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),x=1},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(e){var t=this,n=this.em,r=n.getConfig("listenToEl"),i=n.getContainer().parentNode,o=e?"on":"off",s={on:u.u,off:u.t};!r.length&&i&&r.push(i),s[o](window,"resize",this.onFrameUpdated),s[o](r,"scroll",this.onContainerChange),n[o]("component:toggled",this.onSelect,this),n[o]("change:componentHovered",this.onHovered,this),n[o]("component:resize component:styleUpdate component:input",this.updateGlobalPos,this),n[o]("change:canvasOffset",this.updateAttached,this),n[o]("frame:updated",this.onFrameUpdated,this),n[o]("canvas:updateTools",this.onFrameUpdated,this),n.get("Canvas").getFrames().forEach((function(e){var n,r,i=e.view;i&&(n=i.getWindow(),r=i.getBody(),s[o](r,"mouseover",t.onHover),s[o](r,"mouseleave",t.onOut),s[o](r,"click touchend",t.onClick),s[o](n,"scroll",t.onFrameScroll))}))},onHover:function(e){e.stopPropagation();var t=e.target,n=Object(u.j)(t),r=n&&n._getFrame(),i=O(t),o=i.data("model");if(!o)for(var s=i.parent();!o&&s.length&&!Object(d.g)(s[0]);)o=s.data("model"),s=s.parent();if(o&&!o.get("hoverable")){for(var a=o&&o.parent();a&&!a.get("hoverable");)a=a.parent();o=a}this.currentDoc=t.ownerDocument,this.em.setHovered(o),r&&this.em.set("currentFrame",r)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(e,t){var n=this,r={};t&&t.views.forEach((function(e){var i=e.el,o=n.getElementPos(i);r={el:i,pos:o,component:t,view:Object(u.j)(i)},n.updateToolsLocal(r),i.ownerDocument===n.currentDoc&&(n.elHovered=r)}))},onSelect:Object(c.debounce)((function(){var e=this.em,t=e.getSelected(),n=e.get("currentFrame")||{},r=t&&t.getView(n.model),i=r&&r.el,o={};i&&Object(d.h)(i)&&(o={el:i,pos:this.getElementPos(i),component:t,view:Object(u.j)(i)}),this.elSelected=o,this.updateToolsGlobal(),this.updateToolsLocal(o),this.initResize(t)})),updateGlobalPos:function(){var e=this.getElSelected();e.el&&(e.pos=this.getElementPos(e.el),this.updateToolsGlobal())},updateLocalPos:function(){var e=this.getElHovered();e.el&&(e.pos=this.getElementPos(e.el),this.updateToolsLocal())},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){var e=this;this.currentDoc=null,this.em.setHovered(0),this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach((function(t){var n=t.view,r=n&&n.getToolsEl();r&&e.toggleToolsEl(0,0,{el:r})}))},toggleToolsEl:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).el||this.canvas.getToolsEl(t);return n&&(n.style.opacity=e?1:0),n||{}},showElementOffset:function(e,t){x&&this.editor.runCommand("show-offset",{el:e,elPos:t,view:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).view,force:1,top:0,left:0})},hideElementOffset:function(e){this.editor.stopCommand("show-offset",{view:e})},showFixedElementOffset:function(e,t){this.editor.runCommand("show-offset",{el:e,elPos:t,state:"Fixed"})},hideFixedElementOffset:function(e,t){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(e){this.canvas.getHighlighter(e).style.opacity=0},onClick:function(e){e.stopPropagation(),e.preventDefault();var t=this.em;if(t.get("_cmpDrag"))return t.set("_cmpDrag");var n=O(e.target),r=n.data("model");if(!r)for(var i=n.parent();!r&&i.length&&!Object(d.g)(i[0]);)r=i.data("model"),i=i.parent();if(r)if(r.get("selectable"))this.select(r,e);else{for(var o=r.parent();o&&!o.get("selectable");)o=o.parent();this.select(o,e)}},select:function(e){e&&(this.editor.select(e,{scroll:{},event:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}),this.initResize(e))},updateBadge:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=O(e).data("model");if(r&&r.get("badgable")){var i=this.getBadge(n);if(!n.posOnly){var o=this.canvas.getConfig(),s=r.getIcon(),a="".concat(o.pStylePrefix||"","badge"),l=o.customBadgeLabel,c="".concat(s?'<div class="'.concat(a,'__icon">').concat(s,"</div>"):"",'\n        <div class="').concat(a,'__name">').concat(r.getName(),"</div>");i.innerHTML=l?l(r):c}var u="px",d=i.style;d.display="block";var h=i?i.offsetHeight:0,f=n.leftOff<0?-n.leftOff:0;d.top=(n.topOff-h<0?-n.topOff:0-h)+u,d.left=f+u}},showHighlighter:function(e){this.canvas.getHighlighter(e).style.opacity=""},initResize:function(e){var t,n=this.em,r=this.canvas,o=n?n.get("Editor"):"",s=(n?n.get("Config"):"").stylePrefix||"",a="".concat(s,"resizing"),l=!Object(c.isElement)(e)&&Object(u.p)(e)?e:n.getSelected(),d=l&&l.get("resizable"),h={},f=function(e,t,n){var r=n.docs;r&&r.forEach((function(t){var n=t.body,r=n.className||"";n.className=("add"==e?"".concat(r," ").concat(a):r.replace(a,"")).trim()}))};if(o&&d){var p=Object(c.isElement)(e)?e:l.getEl();h={onStart:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.el,s=i.config,a=i.resizer,c=s.keyHeight,d=s.keyWidth,h=s.currentUnit,p=s.keepAutoHeight,g=s.keepAutoWidth;f("add",0,i),t=n.get("StyleManager").getModelToStyle(l),r.toggleFramesEvents();var m=getComputedStyle(o),v=t.getStyle(),b=v[d];s.autoWidth=g&&"auto"===b,isNaN(parseFloat(b))&&(b=m[d]);var y=v[c];s.autoHeight=p&&"auto"===y,isNaN(parseFloat(y))&&(y=m[c]),a.startDim.w=parseFloat(b),a.startDim.h=parseFloat(y),x=0,h&&(s.unitHeight=Object(u.i)(y),s.unitWidth=Object(u.i)(b))},onMove:function(){o.trigger("component:resize")},onEnd:function(e,t){f("remove",0,t),o.trigger("component:resize"),r.toggleFramesEvents(1),x=1},updateTarget:function(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t){var s=o.store,a=o.selectedHandler,l=o.config,c=l.keyHeight,u=l.keyWidth,d=l.autoHeight,h=l.autoWidth,f=l.unitWidth,p=l.unitHeight,g=["tc","bc"].indexOf(a)>=0,m=["cl","cr"].indexOf(a)>=0,v={},b=s?"":1;if(!g){var y=r.getBody().offsetWidth;v[u]=h?"auto":"".concat(i.w<y?i.w:y).concat(f)}m||(v[c]=d?"auto":"".concat(i.h).concat(p)),t.addStyle(w(w({},v),{},{en:b}),{avoidStore:!s});var x="update:component:style",O="".concat(x,":").concat(c," ").concat(x,":").concat(u);n&&n.trigger(O,null,null,{noEmit:1})}}},"object"==i()(d)&&(h=w(w({},h),d)),this.resizer=o.runCommand("resize",{el:p,options:h,force:1})}else o.stopCommand("resize"),this.resizer=null},updateToolbar:function(e){var t=this.config.em,n=e==t?t.getSelected():e,r=this.canvas.getToolbarEl(),i=r.style;if(n){var o=n.get("toolbar");if(t.get("Config").showToolbar&&o&&o.length){if(i.opacity="",i.display="",!this.toolbar){r.innerHTML="",this.toolbar=new b(o);var s=new m({collection:this.toolbar,editor:this.editor,em:t});r.appendChild(s.render().el)}this.toolbar.reset(o),i.top="-100px",i.left=0}else i.display="none"}else i.opacity=0},updateToolbarPos:function(e){var t=this.canvas.getToolbarEl().style;t.top="".concat(e.top).concat("px"),t.left="".concat(e.left).concat("px"),t.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(){return this.canvas.getBadgeEl((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).view)},onFrameScroll:function(){this.updateTools()},updateTools:function(){this.updateToolsLocal(),this.updateGlobalPos()},isCompSelected:function(e){return e&&"selected"===e.get("status")},updateToolsLocal:function(e){var t=e||this.getElHovered(),n=t.el,r=t.pos,i=t.view,o=t.component;if(n){var s=o.get("hoverable"),a=this.lastHovered!==n,l=a?{}:{posOnly:1};a&&s&&(this.lastHovered=n,this.showHighlighter(i),this.showElementOffset(n,r,{view:i})),this.isCompSelected(o)&&(this.hideHighlighter(i),this.hideElementOffset(i));var c=this.toggleToolsEl(1,i).style,u=this.canvas.canvasRectOffset(n,r),d=u.top,h=u.left;this.updateBadge(n,r,w(w({},l),{},{view:i,topOff:d,leftOff:h})),c.top=d+"px",c.left=h+"px",c.width=r.width+"px",c.height=r.height+"px"}else this.lastHovered=0},updateToolsGlobal:function(){var e=this.getElSelected(),t=e.el,n=e.pos,r=e.component;if(!t)return this.toggleToolsEl(),void(this.lastSelected=0);var i=this.canvas;this.lastSelected!==t&&(this.lastSelected=t,this.updateToolbar(r));var o=this.toggleToolsEl(1).style,s=i.getTargetToElementFixed(t,i.getToolbarEl(),{pos:n}),a=s.canvasOffsetLeft;o.top=s.canvasOffsetTop+"px",o.left=a+"px",o.width=n.width+"px",o.height=n.height+"px",this.updateToolbarPos({top:s.top,left:s.left})},updateAttached:Object(c.debounce)((function(){this.updateGlobalPos()})),onContainerChange:Object(c.debounce)((function(){this.em.refreshCanvas()}),150),getElementPos:function(e){return this.canvas.getCanvasView().getElementPos(e)},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(e){e&&e.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(e){this.editor=e&&e.get("Editor"),this.enable()},stop:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.em,i=this.editor;this.stopSelectComponent(),!n.preserveSelected&&r.setSelected(null),this.onOut(),this.toggleToolsEl(),i&&i.stopCommand("resize")}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),i=n.n(r),o=n(15),s=n.n(o),a=n(16),l=n.n(a),c=n(0),u=n(3);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s()(this,e),this.opts={container:null,onStart:null,onDrag:null,onEnd:null,setPosition:null,getPosition:null,guidesStatic:null,guidesTarget:null,snapOffset:5,doc:0,scale:1},Object(c.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(t),this.delta={x:0,y:0},this}return l()(e,[{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=h(h({},this.opts),e)}},{key:"toggleDrag",value:function(e){var t=this.getDocumentEl(),n=this.getContainerEl(),r=this.getWindowEl(),i=e?"on":"off",o={on:u.u,off:u.t};o[i](n,"mousemove dragover",this.drag),o[i](t,"mouseup dragend touchend",this.stop),o[i](t,"keydown",this.keyHandle),o[i](r,"scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=this.lastScroll,t=this.delta,n=this.getScrollInfo(),r={x:n.x-e.x,y:n.y-e.y};this.move(t.x+r.x,t.y+r.y),this.lastScrollDiff=r}},{key:"start",value:function(e){var t=this.opts,n=t.onStart;this.toggleDrag(1),this.startPointer=this.getPointerPos(e),this.guidesStatic=Object(c.result)(t,"guidesStatic")||[],this.guidesTarget=Object(c.result)(t,"guidesTarget")||[],Object(c.isFunction)(n)&&n(e,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(e)}},{key:"drag",value:function(e){var t=this,n=this.opts,r=this.lastScrollDiff,i=this.globScrollDiff,o=n.onDrag,s=this.startPointer,a=this.getPointerPos(e),l={x:i.x+r.x,y:i.y+r.y};this.globScrollDiff=l;var u={x:a.x-s.x+l.x,y:a.y-s.y+l.y};this.lastScrollDiff={x:0,y:0};var d=this.lockedAxis;"x"===(d=e.shiftKey?!d&&this.detectAxisLock(u.x,u.y):null)?u.x=s.x:"y"===d&&(u.y=s.y);var f=function(r){["x","y"].forEach((function(e){return r[e]=r[e]*Object(c.result)(n,"scale")})),t.delta=r,t.move(r.x,r.y),Object(c.isFunction)(o)&&o(e,t)},p=h({},u);if(this.currentPointer=a,this.lockedAxis=d,this.lastScroll=this.getScrollInfo(),f(u),this.guidesTarget.length){var g=this.snapGuides(p);(g.trgX||g.trgY)&&f(g.newDelta)}0===e.which&&this.stop(e)}},{key:"snapGuides",value:function(e){var t=this,n=e,r=this.trgX,i=this.trgY;return this.guidesTarget.forEach((function(n){n.x&&t.trgX||n.y&&t.trgY||(n.active=0,t.guidesStatic.forEach((function(o){if(!(n.y&&o.x||n.x&&o.y)){var s=n.y&&o.y,a=s?"y":"x",l=n[a],u=o[a],d=e[a],h=s?i:r;t.isPointIn(l,u)&&Object(c.isUndefined)(h)&&t.setGuideLock(n,d-(l-u))}})))})),r=this.trgX,i=this.trgY,["x","y"].forEach((function(r){var i=r.toUpperCase(),o=t["trg".concat(i)];o&&!t.isPointIn(e[r],o.lock)&&(t.setGuideLock(o,null),o=null),o&&!Object(c.isUndefined)(o.lock)&&(n[r]=o.lock)})),{newDelta:n,trgX:this.trgX,trgY:this.trgY}}},{key:"isPointIn",value:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).offset||this.opts.snapOffset;return e>=t&&e<=t+n||e<=t&&e>=t-n}},{key:"setGuideLock",value:function(e,t){var n=Object(c.isUndefined)(e.x)?"Y":"X",r="trg".concat(n);return null!==t?(e.active=1,e.lock=t,this[r]=e):(delete e.active,delete e.lock,delete this[r]),e}},{key:"stop",value:function(e){var t=this.delta,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cancel,r=n?0:t.x,i=n?0:t.y;this.toggleDrag(),this.lockedAxis=null,this.move(r,i,1);var o=this.opts.onEnd;Object(c.isFunction)(o)&&o(e,this,{cancelled:n})}},{key:"keyHandle",value:function(e){Object(u.m)(e)&&this.stop(e,{cancel:1})}},{key:"move",value:function(e,t,n){var r=this.el,i=this.startPosition;if(i){var o=this.opts.setPosition,s=i.x+e,a=i.y+t;this.position={x:s,y:a,end:n},Object(c.isFunction)(o)&&o(this.position),r&&(r.style.left="".concat(s,"px"),r.style.top="".concat(a,"px"))}}},{key:"getContainerEl",value:function(){var e=this.opts.container;return e?[e]:this.getDocumentEl()}},{key:"getWindowEl",value:function(){return this.getContainerEl().map((function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow}))}},{key:"getDocumentEl",value:function(e){var t=this.opts.doc;if(e=e||this.el,!this.docs){var n=[document];e&&n.push(e.ownerDocument),t&&n.push(t),this.docs=n}return this.docs}},{key:"getPointerPos",value:function(e){var t=this.opts.getPointerPosition,n=Object(u.h)(e);return t?t(e):{x:n.clientX,y:n.clientY}}},{key:"getStartPosition",value:function(){var e=this.el,t=this.opts.getPosition,n={x:0,y:0};return Object(c.isFunction)(t)?n=t():e&&(n={x:parseFloat(e.style.left),y:parseFloat(e.style.top)}),n}},{key:"getScrollInfo",value:function(){var e=this.opts.doc,t=e&&e.body;return{y:t?t.scrollTop:0,x:t?t.scrollLeft:0}}},{key:"detectAxisLock",value:function(e,t){var n=e,r=t,i=Math.abs(n),o=Math.abs(r);return r>=i||r<=-i?"x":n>o||n<-o?"y":void 0}}]),e}()},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=i.a.$;t.a=i.a.View.extend({events:{change:"handleChange"},template:function(){return'<span class="'.concat(this.holderClass(),'"></span>')},inputClass:function(){return"".concat(this.ppfx,"field")},holderClass:function(){return"".concat(this.ppfx,"input-holder")},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ppfx||"";this.opts=e,this.ppfx=t,this.em=e.target||{},this.listenTo(this.model,"change:value",this.handleModelChange)},elementUpdated:function(){this.model.trigger("el:change")},setValue:function(e){var t=e||this.model.get("defaults"),n=this.getInputEl();n&&(n.value=t)},handleModelChange:function(e,t,n){this.setValue(t,n)},handleChange:function(e){e.stopPropagation();var t=this.getInputEl().value;this.model.set({value:t},{fromInput:1}),this.elementUpdated()},getInputEl:function(){if(!this.inputEl){var e=this.model,t=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=o('<input type="text" placeholder="'.concat(t,'">'))}return this.inputEl.get(0)},render:function(){this.inputEl=null;var e=this.$el;return e.addClass(this.inputClass()),e.html(this.template()),e.find(".".concat(this.holderClass())).append(this.getInputEl()),this}})},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(7);t.default=i.a.View.extend({initialize:function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix||"",this.target=e.target||{},this.propTarget=e.propTarget||{},this.onChange=e.onChange,this.onInputRender=e.onInputRender||{},this.customValue=e.customValue||{},this.properties=[];var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.render)},addTo:function(e,t,n){this.add(e,null,n)},add:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t||this.el,i=new e.typeView({model:e,name:e.get("name"),id:this.pfx+e.get("property"),target:this.target,propTarget:this.propTarget,onChange:this.onChange,onInputRender:this.onInputRender,config:this.config});"composite"!=e.get("type")&&(i.customValue=this.customValue),i.render();var s=i.el;this.properties.push(i),i.updateVisibility(),Object(o.b)(r,s,n.at)},render:function(){var e=this,t=this.$el;this.clearItems();var n=document.createDocumentFragment();return this.collection.each((function(t){return e.add(t,n)})),t.empty(),t.append(n),t.attr("class","".concat(this.pfx,"properties")),this},remove:function(){i.a.View.prototype.remove.apply(this,arguments),this.clearItems()},clearItems:function(){this.properties.forEach((function(e){return e.remove()})),this.properties=[]}})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n.n(i);t.a=o.a.View.extend({itemView:"",itemsView:"",itemType:"type",autoAdd:0,initialize:function(){this.config=(arguments.length>1?arguments[1]:void 0)||(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).config||{},this.autoAdd&&this.listenTo(this.collection,"add",this.addTo),this.items=[],this.init()},init:function(){},addTo:function(e){this.add(e)},itemViewNotFound:function(e){var t=this.ns,n=this.config.em,r="".concat(t?"[".concat(t,"]: "):"","'").concat(e,"' type not found");n&&n.logWarning(r)},add:function(e,t){var n,i=this.config,o=this.reuseView,s=this.items,a=this.itemsView,l=void 0===a?{}:a,c=t||null,u=this.itemView,d=e.get(this.itemType);l[d]?u=l[d]:!d||l[d]||Object(r.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],d)||this.itemViewNotFound(d),n=e.view&&o?e.view:new u({model:e,config:i},i),s&&s.push(n);var h=n.render().el;c?c.appendChild(h):this.$el.append(h)},render:function(){var e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each((function(t){this.add(t,e)}),this),this.$el.append(e),this.onRender(),this},onRender:function(){},remove:function(){this.clearItems(),o.a.View.prototype.remove.apply(this,arguments)},clearItems:function(){}})},function(e,t,n){"use strict";var r,i=n(9),o=n.n(i),s=n(2),a=n.n(s),l=n(1),c=n.n(l),u=n(0);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){return(e||[]).map((function(e){return e.getId()}))};t.a=c.a.Collection.extend({initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.opt=t,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren),this.config=t.config,this.em=t.em,this.domc=t.domc},resetChildren:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,i=n.previousModels||[],o=i.filter((function(t){return!e.get(t.cid)})),s=e.map((function(e){return e.getId()}));n.keepIds=f(i).filter((function(e){return s.indexOf(e)>=0})),o.forEach((function(e){return t.removeChildren(e,r,n)})),e.each((function(e){return t.onAdd(e)}))},removeChildren:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var i=this.domc,o=this.em,s=i?i.allById():{};if(!r.temporary){var a=e.getId(),l=o.get("SelectorManager").getAll(),c=o.get("CssComposer").getAll(),u=(r.keepIds||[]).indexOf(a)<0;delete s[a];var d=u?c.remove(c.filter((function(e){return e.getSelectors().getFullString()==="#".concat(a)}))):[];if(l.remove(d.map((function(e){return e.getSelectors().at(0)}))),!e.opt.temporary){var h=o.get("Commands");e.get("style-signature")&&h.run("core:component-style-clear",{target:e}),e.removed(),o.trigger("component:remove",e)}e.components().forEach((function(e){return n.removeChildren(e,t,r)}))}var f=e.components(),p=o.get("UndoManager");o.stopListening(f),o.stopListening(e),o.stopListening(e.get("classes")),p.remove(e),p.remove(f)}},model:function(e,t){var n,r=t.collection.opt,i=r.em,o=i.get("DomComponents").componentTypes;t.em=i,t.config=r.config,t.componentTypes=o,t.domc=r.domc;for(var s=0;s<o.length;s++)if(o[s].id==e.type){n=o[s].model;break}return n||(n=o[o.length-1].model,i&&e.type&&i.logWarning("Component type '".concat(e.type,"' not found"),{attrs:e,options:t})),new n(e,t)},parseString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.em,o=this.opt.domc,s=i.get("CssComposer"),a=i.get("Parser").parseHtml(e);return r||(r=n(5).default),r.checkId(a.html,a.css,o.componentsById,t),a.css&&s&&!t.temporary&&s.addCollection(a.css,h(h({},t),{},{extend:1})),a.html},add:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.keepIds=f(n.previousModels),Object(u.isString)(e)?e=this.parseString(e,n):Object(u.isArray)(e)&&e.forEach((function(r,i){if(Object(u.isString)(r)){var o=t.parseString(r,n);e[i]=Object(u.isArray)(o)&&!o.length?null:o}}));var r=Object(u.isArray)(e);return e=(r?e:[e]).filter((function(e){return e})).map((function(e){return t.processDef(e)})),e=r?Object(u.flatten)(e,1):e[0],c.a.Collection.prototype.add.apply(this,[e,n])},processDef:function(e){if(e.cid&&e.ccid)return e;var t=this.em,n=this.config,r=(void 0===n?{}:n).processor,i=e;if(r){var s=r(i=h({},i));s&&(Object(u.each)(i,(function(e,t){return delete i[t]})),Object(u.extend)(i,s))}if(i.$$typeof&&"object"==o()(i.props)){(i=h({},i)).props=h({},i.props);var a=t.get("DomComponents"),l=t.get("Parser").parserHtml;Object(u.each)(i,(function(e,t){Object(u.includes)(["props","type"],t)||delete i[t]}));var c=i.props,d=c.children;delete c.children,delete i.props;var f=l.splitPropsFromAttr(c);i.attributes=f.attrs,d&&(i.components=d),i.type?a.getType(i.type)||(i.tagName=i.type,delete i.type):i.type="textnode",Object(u.extend)(i,f.props)}return i},onAdd:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.domc,i=this.em,o=e.getStyle(),s=i&&i.getConfig("avoidInlineStyle");if(r&&r.Component.ensureInList(e),!Object(u.isEmpty)(o)&&!s&&i&&i.get&&i.getConfig("forceClass")&&!n.temporary){var a=e.cid;i.get("CssComposer").setClassRule(a,o),e.setStyle({}),e.addClass(a)}}})},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r);t.default=i.a.View.extend({initialize:function(e){this.config=e||{},this.editorModel=this.em=this.config.em||{},this.pfx=this.config.stylePrefix,this.ppfx=this.config.pStylePrefix,this.hoverClass=this.pfx+"hover",this.badgeClass=this.pfx+"badge",this.plhClass=this.pfx+"placeholder",this.freezClass=this.ppfx+"freezed",this.canvas=this.em.get&&this.em.get("Canvas"),this.em.get&&this.setElement(this.getCanvas()),this.canvas&&(this.$canvas=this.$el,this.canvasTool=this.getCanvasTools()),this.init(this.config)},onFrameScroll:function(e){},getCanvas:function(){return this.canvas.getElement()},getCanvasBody:function(){return this.canvas.getBody()},getCanvasWrapper:function(){return this.canvas.getWrapperEl()},getCanvasTools:function(){return this.canvas.getToolsEl()},offset:function(e){var t=e.getBoundingClientRect();return{top:t.top+e.ownerDocument.body.scrollTop,left:t.left+e.ownerDocument.body.scrollLeft}},init:function(e){},callRun:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.id;if(e.trigger("run:".concat(n,":before"),t),!t||!t.abort){var r=this.run(e,t.sender||e,t);return e.trigger("run:".concat(n),r,t),e.trigger("run",n,r,t),r}e.trigger("abort:".concat(n),t)},callStop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.id,r=t.sender||e;e.trigger("stop:".concat(n,":before"),t);var i=this.stop(e,r,t);return e.trigger("stop:".concat(n),i,t),e.trigger("stop",n,i,t),i},stopCommand:function(){this.em.get("Commands").stop(this.id)},run:function(e,t){},stop:function(e,t){}})},function(e,t,n){"use strict";var r=n(2),i=n.n(r),o=n(0),s=n(3),a=n(29);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(a.a)().parseStyle;t.a={parseStyle:u,extendStyle:function(e){return c(c({},this.getStyle()),e)},getStyle:function(){return c({},this.get("style")||{})},setStyle:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.isString)(t)&&(t=u(t));var r=this.getStyle(),i=c({},t);this.set("style",i,n);var a=Object(s.w)(r,i);return Object(o.keys)(a).forEach((function(t){var n=e.em;e.trigger("change:style:".concat(t)),n&&(n.trigger("styleable:change",e,t),n.trigger("styleable:change:".concat(t),e,t))})),i},addStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"string"==typeof e?e={prop:t}:n=t||{},e=this.extendStyle(e),this.setStyle(e,n)},removeStyle:function(e){var t=this.getStyle();delete t[e],this.setStyle(t)},styleToString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=this.getStyle();for(var r in n){var i=e.important,s=Object(o.isArray)(i)?i.indexOf(r)>=0:i,a="".concat(n[r]).concat(s?" !important":""),l="__"==r.substr(0,2);a&&!l&&t.push("".concat(r,":").concat(a,";"))}return t.join("")},getSelectors:function(){return this.get("selectors")||this.get("classes")},getSelectorsString:function(){return this.selectorsToString?this.selectorsToString():this.getSelectors().getFullString()}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(1),s=n.n(o),a=n(30),l=n(0),c=n(3);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=s.a.Model.extend({defaults:{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:0,important:0,toRequire:0,requires:null,requiresParent:null},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get("id")||"",r=this.get("name")||"";!this.get("property")&&this.set("property",(r||n).replace(/ /g,"-"));var i=this.get("property");!this.get("id")&&this.set("id",i),!r&&this.set("name",Object(c.c)(i).replace(/-/g," ")),h.callInit(this,e,t)},init:function(){},clearValue:function(){return this.set({value:void 0,status:""},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this},setValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.parseValue(e),i=!t;!i&&this.set({value:void 0},{avoidStore:i,silent:!0}),this.set(r,d({avoidStore:i},n))},setValueFromInput:function(e,t){this.setValue(e,t,d(d({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),{},{fromInput:1}))},parseValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={value:e},r="!important";if(Object(l.isString)(e)&&-1!==e.indexOf(r)&&(n.value=e.replace(r,"").trim(),n.important=1),!this.get("functionName")&&!t.complete)return n;var i=[],o="".concat(n.value),s=o.indexOf("(")+1,a=o.lastIndexOf(")"),c=o.substring(0,s-1);if(c&&(n.functionName=c),i.push(s),a>=0&&i.push(a),n.value=String.prototype.substring.apply(o,i),t.numeric){var u=parseFloat(n.value);n.unit=n.value.replace(u,""),n.value=u}return n},splitValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=[],r="(",i=")",o="",s=0;return(e||"").split("").forEach((function(e){e==r?(s++,o+=r):e==i&&s>0?(s--,o+=i):e===t&&0==s?(n.push(o),o=""):o+=e})),""!==o&&n.push(o),n.map((function(e){return e.trim()}))},getDefaultValue:function(){return this.get("defaults")},getFullValue:function(e){var t=this.get("functionName"),n=this.getDefaultValue(),r=Object(l.isUndefined)(e)?this.get("value"):e,i=!Object(l.isUndefined)(r)&&""!==r;if(r&&n&&r===n)return n;if(t&&i){var o="url"===t?"'".concat(r.replace(/'/g,""),"'"):r;r="".concat(t,"(").concat(o,")")}return i&&this.get("important")&&(r="".concat(r," !important")),r||""}},{callParentInit:function(e,t,n){e.prototype.initialize.apply(t,[n,d(d({},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),{},{skipInit:1})])},callInit:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.skipInit&&e.init(t,n)}}),f=h;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=f.extend({defaults:g(g({},f.prototype.defaults),{},{detached:0,properties:[],separator:" "}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f.callParentInit(f,this,e,t);var r=this.get("properties")||[],i=n(24).default;this.set("properties",new i(r)),this.listenTo(this,"change:value",this.updateValues),f.callInit(this,e,t)},clearValue:function(){return this.get("properties").each((function(e){return e.clearValue()})),f.prototype.clearValue.apply(this,arguments)},updateValues:function(){this.getFullValue().split(this.getSplitSeparator()),this.get("properties").each((function(e,t){}))},getSplitSeparator:function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},getDefaultValue:function(e){var t=this.get("defaults");return t&&!e?t:(t="",this.get("properties").each((function(e,n){return t+="".concat(e.getDefaultValue()," ")})),t.trim())},getFullValue:function(){return this.get("detached")?"":this.get("properties").getFullValue()},getPropertyAt:function(e){return this.get("properties").at(e)}}),v=s.a.Model.extend({defaults:{index:"",value:"",values:{},active:!1,preview:!1,properties:[]},initialize:function(){var e=this.get("properties"),t=this.get("value");this.set("properties",e instanceof ve?e:new ve(e));var n=this.get("properties");if(n.forEach(this.onPropAdd,this),this.listenTo(n,"add",this.onPropAdd),!t){var r="",i=this.get("values");for(var o in i)r+=" "+i[o];this.set("value",r.trim())}},onPropAdd:function(e){var t=this.collection;e.parent=t&&t.property},getPropertyAt:function(e){return this.get("properties").at(e)},getPropertyValue:function(e){var t="";return this.get("properties").each((function(n){n.get("property")==e&&(t=n.getFullValue())})),t},getFullValue:function(){var e=[];return this.get("properties").each((function(t){return e.push(t.getFullValue())})),e.join(" ").trim()}});function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=s.a.Collection.extend({model:v,initialize:function(){this.idx=1,this.on("add",this.onAdd),this.on("reset",this.onReset)},onAdd:function(e,t,n){n.noIncrement||e.set("index",this.idx++),n.active&&this.active(this.indexOf(e))},onReset:function(){this.idx=1},getSeparator:function(){var e=this.property;return e?e.get("layerSeparator"):", "},getLayersFromValue:function(e){var t=this,n=[];return e.replace(/\(([\w\s,.]*)\)/g,(function(t){var n=t.replace(/,\s*/g,",");e=e.replace(t,n)})),(e?e.split(this.getSeparator()):[]).forEach((function(e){n.push({properties:t.properties.parseValue(e)})})),n},getLayersFromStyle:function(e){var t=[],n=this.properties;return n.each((function(n){var r=e[n.get("property")];(r?r.split(", "):[]).forEach((function(e,r){e=n.parseValue(e.trim()).value;var i=t[r],o=y(y({},n.attributes),{value:e});i?i.properties.push(o):t[r]={properties:[o]}}))})),t.forEach((function(e){var t=e.properties.map((function(e){return e.property}));n.each((function(n){var r=n.get("property");t.indexOf(r)<0&&e.properties.push(y({},n.attributes))}))})),t},active:function(e){this.each((function(e){return e.set("active",0)}));var t=this.at(e);t&&t.set("active",1)},getFullValue:function(){var e=[];return this.each((function(t){return e.push(t.getFullValue())})),e.join(this.getSeparator())},getPropertyValues:function(e,t){var n=[];return this.each((function(r){var i=r.getPropertyValue(e);i?n.push(i):!Object(l.isUndefined)(t)&&n.push(t)})),n.join(", ")}});function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=m.extend({defaults:O(O({},m.prototype.defaults),{},{layers:[],layerSeparator:", ",prepend:0,preview:0}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m.callParentInit(m,this,e,t);var n=this.get("layers"),r=new w(n);r.property=this,r.properties=this.get("properties"),this.set("layers",r),m.callInit(this,e,t)},getLayers:function(){return this.get("layers")},getCurrentLayer:function(){return this.getLayers().filter((function(e){return e.get("active")}))[0]},getFullValue:function(){return this.get("detached")?"":this.get("layers").getFullValue()},getValueFromStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getLayers().getLayersFromStyle(e);return new w(t).getFullValue()},clearValue:function(){return this.getLayers().reset(),m.prototype.clearValue.apply(this,arguments)},getValueFromTarget:function(e){var t=this.attributes,n=t.detached,r=t.property,i=t.properties,o=e.getStyle(),s={};return i.forEach((function(e){var t=e.get("property"),n=o[t];n&&(s[t]=n)})),n?Object(l.keys)(s).length?s:"":o[r]},getLayersFromTarget:function(e){}}),_=n(25),S=n.n(_);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=s.a.View.extend({template:function(){var e=this.ppfx;return'\n      <div class="'.concat(this.pfx,'label" data-sm-label></div>\n      <div class="').concat(e,'fields" data-sm-fields></div>\n    ')},templateLabel:function(e){var t=this.pfx,n=this.em,r=e.parent,i=e.attributes,o=i.icon,s=void 0===o?"":o,a=i.info,l=void 0===a?"":a,c=i.name,u=n&&n.t("styleManager.properties.".concat(i.id))||c;return'\n      <span class="'.concat(t,"icon ").concat(s,'" title="').concat(l,'">\n        ').concat(u,"\n      </span>\n      ").concat(r?"":'<b class="'.concat(t,'clear" ').concat("data-clear-style",">&Cross;</b>"),"\n    ")},templateInput:function(e){return'\n      <div class="'.concat(this.ppfx,'field">\n        <input placeholder="').concat(e.getDefaultValue(),'"/>\n      </div>\n    ')},events:i()({change:"inputValueChanged"},"click [".concat("data-clear-style","]"),"clear"),initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.bindAll)(this,"targetUpdated","__change","__updateStyle"),this.config=t.config||{};var n=this.config.em;this.em=n,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.target=t.target||{},this.propTarget=t.propTarget||{},this.onChange=t.onChange,this.onInputRender=t.onInputRender||{},this.customValue=t.customValue||{};var r=this.model;this.property=r.get("property"),this.input=null,this.inputHolderId="#"+this.pfx+"input-holder",this.sector=r.collection&&r.collection.sector,this.__destroyFn=this.destroy?this.destroy.bind(this):function(){},r.view=this,r.get("value")||r.set("value",r.getDefaultValue()),n&&n.on("update:component:style:".concat(this.property),this.targetUpdated);var i=r.get("requires");i&&Object.keys(i).forEach((function(t){n&&n.on("component:styleUpdate:".concat(t),e.targetUpdated)})),this.listenTo(this.propTarget,"update",this.targetUpdated),this.listenTo(r,"destroy remove",this.remove),this.listenTo(r,"change:value",this.modelValueChanged),this.listenTo(r,"targetUpdated",this.targetUpdated),this.listenTo(r,"change:visible",this.updateVisibility),this.listenTo(r,"change:status",this.updateStatus),this.listenTo(r,"change:name change:className change:full",this.render);var o=this.init&&this.init.bind(this);o&&o()},remove:function(){s.a.View.prototype.remove.apply(this,arguments),this.__destroyFn(this._getClbOpts())},updateStatus:function(){var e=this.model,t=e.get("status"),n=e.parent,r=this.pfx,i=this.ppfx,o=this.config,s="".concat(i,"four-color"),a="".concat(i,"color-warn"),l=this.$el.children(".".concat(r,"label")),c=this.getClearEl(),u=c?c.style:{};switch(l.removeClass("".concat(s," ").concat(a)),u.display="none",t){case"updated":!n&&l.addClass(s),o.clearProperties&&(u.display="inline");break;case"computed":l.addClass(a)}},clear:function(e){var t=this;e&&e.stopPropagation(),this.model.clearValue(),setTimeout((function(){return t.targetUpdated()}))},getClearEl:function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat("data-clear-style","]"))),this.clearEl},getTarget:function(){return this.getTargetModel()},getTargets:function(){return this.propTarget.targets||[this.getTarget()]},getTargetModel:function(){return this.propTarget&&this.propTarget.model},getHelperModel:function(){return this.propTarget&&this.propTarget.helper},inputValueChanged:function(e){e&&e.stopPropagation(),this.emit||(this.model.setValueFromInput(this.getInputValue()),this.elementUpdated())},elementUpdated:function(){this.setStatus("updated")},setStatus:function(e){this.model.set("status",e);var t=this.model.parent;t&&"updated"==e&&t.set("status",e)},emitUpdateTarget:Object(l.debounce)((function(){var e=this.config.em;e&&e.trigger("styleManager:update:target",this.getTarget())})),_getTargetData:function(){var e=this.model,t=this.config,n=this.getTargetValue({ignoreDefault:1}),r=e.getDefaultValue(),i=this.getComputedValue(),o="",s="";return n?(o=n,t.highlightChanged&&(s="updated")):i&&t.showComputed&&i!=r?(o=i,t.highlightComputed&&(s="computed")):(o=r,s=""),{value:o,status:s,targetValue:n,defaultValue:r,computedValue:i}},targetUpdated:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.config.fromLayer&&(this.emitUpdateTarget(),this.checkVisibility())){var r=this.config.em,i=this.model,o=i.get("property"),s=this._getTargetData(),a=s.status,l=s.value,c=k({status:a,value:l},S()(s,["status","value"]));return this.setStatus(a),i.setValue(l,0,k({fromTarget:1},n)),r&&(r.trigger("styleManager:change",this,o,l,c),r.trigger("styleManager:change:".concat(o),this,l,c),this._emitUpdate(c)),c}},_emitUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.em;if(t){var n=this.model.get("property"),r=k(k({},this._getEventData()),e),i=r.id;t.trigger("style:update",r),t.trigger("style:update:".concat(n),r),n!==i&&t.trigger("style:update:".concat(i),r)}},_getEventData:function(){var e=this.model;return{propertyView:this,targets:this.getTargets(),value:e.getFullValue(),property:e,id:e.get("id"),name:e.get("property")}},checkVisibility:function(){var e=1;return this.config.hideNotStylable&&(this.isTargetStylable()&&this.isComponentStylable()?this.show():(this.hide(),e=0),this.sector&&this.sector.trigger("updateVisibility")),e},getTargetValue:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.model,r=this.getTargetModel(),i=this.customValue;if(!r)return e;if((e=r.getStyle()[n.get("property")])||t.ignoreDefault||(e=n.getDefaultValue()),"function"==typeof i&&!t.ignoreCustomValue){var o=i(this,n.collection.indexOf(n),e);o&&(e=o)}return e},getComputedValue:function(){var e=this.propTarget,t=e.computed||{},n=e.computedDefault||{},r=this.config.avoidComputed||[],i=this.model.get("property"),o=r.indexOf(i)<0,s=t[i],a=n[Object(c.b)(i)];return t&&o&&a!==s&&s||""},getInputValue:function(){var e=this.getInputEl();return e?e.value:""},modelValueChanged:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.model,s=o.getFullValue();if(r.fromInput||this.setValue(s),!r.fromTarget){this.getTargets().forEach((function(e){return n.__updateTarget(e,r)}));var a=this.config.em;if(!a)return;var l=o.get("property"),c=i()({},l,s);a.getSelectedAll().forEach((function(e){!r.noEmit&&a.trigger("component:update",e,c,r),a.trigger("component:styleUpdate",e,l,r),a.trigger("component:styleUpdate:".concat(l),e,s,r),e.trigger("change:style",e,c,r),e.trigger("change:style:".concat(l),e,s,r)}))}},__updateTarget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model.getFullValue(),r=this.onChange;e&&this.isComponentStylable()&&(t.fromTarget||(r&&!t.fromParent?r(e,this,t):this.updateTargetStyle(n,null,k(k({},t),{},{target:e}))),this._emitUpdate())},updateTargetStyle:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")||this.model.get("property"),r=t.target||this.getTarget(),i=r.getStyle();e?i[n]=e:delete i[n],t.avoidStore?i.__=1:delete i.__,r.setStyle(i,t);var o=this.getHelperModel();o&&o.setStyle(i,t)},isTargetStylable:function(e){var t=e||this.getTarget(),n=this.model,r=n.get("id"),i=n.get("property"),o=n.get("toRequire"),s=t.get("unstylable"),a=t.get("stylable-require"),c=n.get("requires"),u=n.get("requiresParent"),d=this.sector?this.sector.collection:null,h=this.em?this.em.getSelected():null,f=t.get("stylable");if(Object(l.isArray)(f)&&(f=f.indexOf(i)>=0),Object(l.isArray)(s)&&(f=s.indexOf(i)<0),o&&(f=!e||a&&(a.indexOf(r)>=0||a.indexOf(i)>=0)),d&&c){var p=Object.keys(c);d.each((function(e){e.get("properties").each((function(e){if(Object(l.includes)(p,e.id)){var t=c[e.id];f=f&&Object(l.includes)(t,e.get("value"))}}))}))}if(u){var g=h&&h.parent(),m=g&&g.getEl();if(m){var v=window.getComputedStyle(m);Object(l.each)(u,(function(e,t){f=f&&v[t]&&Object(l.includes)(e,v[t])}))}else f=!1}return f},isComponentStylable:function(){var e=this.em,t=e&&e.getSelected();return!t||this.isTargetStylable(t)},setRawValue:function(e){this.setValue(this.model.parseValue(e))},setValue:function(e){var t=this.model,n=Object(l.isUndefined)(e)?t.getDefaultValue():e;if(this.update)return this.__update(n);var r=this.getInputEl();r&&(r.value=n)},getInputEl:function(){return this.input||(this.input=this.el.querySelector("input")),this.input},updateVisibility:function(){this.el.style.display=this.model.get("visible")?"":"none"},show:function(){this.model.set("visible",1)},hide:function(){this.model.set("visible",0)},cleanValue:function(){this.setValue("")},clearCached:function(){this.clearEl=null,this.input=null,this.$input=null},__update:function(e){var t=this.update&&this.update.bind(this);t&&t(k(k({},this._getClbOpts()),{},{value:e}))},__change:function(){for(var e=this.emit&&this.emit.bind(this),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e&&e.apply(void 0,[this._getClbOpts()].concat(n))},__updateStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.complete,r=S()(t,["complete"]),i=!1!==n;Object(c.n)(e)?this.getTargets().forEach((function(t){return t.addStyle(e,{avoidStore:!i})})):this.model.setValueFromInput(e,n,r),i&&this.elementUpdated()},_getClbOpts:function(){var e=this.model;return{el:this.el,props:e.attributes,setProps:function(){return e.set.apply(e,arguments)},change:this.__change,updateStyle:this.__updateStyle,targets:this.getTargets()}},render:function(){this.clearCached();var e=this.pfx,t=this.model,n=this.el,r=this.$el,i=t.get("property"),o=t.get("full"),s=t.get("className")||"",a="".concat(e,"property");this.createdEl&&this.__destroyFn(this._getClbOpts()),r.empty().append(this.template(t)),r.find("[data-sm-label]").append(this.templateLabel(t));var l=this.create&&this.create.bind(this);this.createdEl=l&&l(this._getClbOpts()),r.find("[data-sm-fields]").append(this.createdEl||this.templateInput(t)),n.className="".concat(a," ").concat(e).concat(t.get("type")," ").concat(a,"__").concat(i," ").concat(s).trim(),n.className+=o?" ".concat(a,"--full"):"",this.updateStatus();var c=this.onRender&&this.onRender.bind(this);c&&c(),this.setValue(t.get("value"),{fromTarget:1})}});function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=s.a.$,M=T.extend({templateInput:function(){var e=this.pfx;return'\n      <div class="'.concat(e,"field ").concat(e,'composite">\n        <span id="').concat(e,'input-holder"></span>\n      </div>\n    ')},inputValueChanged:function(){if(!this.model.get("detached")){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];T.prototype.inputValueChanged.apply(this,t)}},clear:function(e){var t=this.properties;t&&t.forEach((function(e){return e.clear()})),T.prototype.clear.apply(this,arguments)},onRender:function(){var e=this.model,t=e.get("properties")||[];if(this.properties=[],t.length&&(this.$input||(this.$input=A('<input type="hidden" value="0">'),this.input=this.$input.get(0)),this.props||(this.props=e.get("properties")),!this.$props)){this.props.each((function(t,n){t&&"composite"==t.get("type")&&(this.props.remove(t),console.warn("Nested composite types not yet allowed.")),t.parent=e}),this);var r=new(0,n(19).default)(this.getPropsConfig());this.$props=r.render().$el,this.properties=r.properties,this.$el.find("#".concat(this.pfx,"input-holder")).append(this.$props)}},getPropsConfig:function(e){var t=this,n=this.model,r={config:P(P({},this.config),{},{highlightComputed:0}),collection:this.props,target:this.target,propTarget:this.propTarget,onChange:function(e,t,r){n.set("value",n.getFullValue(),r)},customValue:function(e,n){return t.valueOnIndex(n,e)}};return n.get("detached")&&delete r.onChange,r},valueOnIndex:function(e,t){var n=this.getTargetValue({ignoreDefault:1});return n?n.split(this.model.getSplitSeparator())[e]:t&&t.getTargetValue({ignoreCustomValue:1,ignoreDefault:1})},clearCached:function(){T.prototype.clearCached.apply(this,arguments),this.$input=null,this.props=null,this.$props=null}}),D=n(19);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=s.a.View.extend({events:{click:"active","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"},template:function(e){var t=this.pfx,n=this.ppfx,r=this.em,i="".concat(r&&r.t("styleManager.layer")," ").concat(e.get("index"));return'\n      <div id="'.concat(t,'move" class="').concat(n,'no-touch-actions" data-move-layer>\n        <i class="fa fa-arrows"></i>\n      </div>\n      <div id="').concat(t,'label">').concat(i,'</div>\n      <div id="').concat(t,'preview-box">\n      \t<div id="').concat(t,'preview" data-preview></div>\n      </div>\n      <div id="').concat(t,'close-layer" class="').concat(t,'btn-close" data-close-layer>\n        &Cross;\n      </div>\n      <div id="').concat(t,'inputs" data-properties></div>\n      <div style="clear:both"></div>\n    ')},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model;this.stackModel=e.stackModel,this.config=e.config||{},this.em=this.config.em,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.sorter=e.sorter||null,this.propsConfig=e.propsConfig||{},this.customPreview=e.onPreview,this.listenTo(t,"destroy remove",this.remove),this.listenTo(t,"change:active",this.updateVisibility),this.listenTo(t.get("properties"),"change",this.updatePreview),t.view=this,t.set({droppable:0,draggable:1}),this.$el.data("model",t)},initSorter:function(e){this.sorter&&this.sorter.startSort(this.el)},removeItem:function(e){e&&e.stopPropagation(),this.remove()},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.props,r=t.collection,i=this.stackModel;s.a.View.prototype.remove.apply(this,arguments),r&&r.contains(t)&&r.remove(t),i&&i.set&&(i.set({stackIndex:null},{silent:!0}),!e.fromTarget&&i.trigger("updateValue")),n&&n.remove()},onPreview:function(e){var t=this.stackModel,n=t&&t.get("detached"),r=e.split(" "),i=[],o={};return this.model.get("properties").each((function(e,t){var s=e.get("property"),a=n?e.getFullValue():r[t]||"";if(a&&"integer"==e.get("type")){var l=parseInt(a,10),c=a.replace(l,"");a=(l=(l=(l=isNaN(l)?0:l)>3?3:l)<-3?-3:l)+c}i.push(a),o[s]=a})),n?o:i.join(" ")},updatePreview:function(){var e=this.stackModel,t=this.customPreview,n=this.getPreviewEl(),r=this.model.getFullValue(),i=t?t(r):this.onPreview(r);if(i&&e&&n){var o=n.style;if(Object(l.isString)(i))o[e.get("property")]=i;else{var s=[];Object(l.each)(i,(function(e,t){return s.push("".concat(t,":").concat(e))})),n.setAttribute("style",s.join(";"))}}},getPropertiesWrapper:function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},getPreviewEl:function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},active:function(){var e=this.model,t=e.collection;t.active(t.indexOf(e))},updateVisibility:function(){var e=this.pfx,t=this.getPropertiesWrapper(),n=this.model.get("active");t.style.display=n?"":"none",this.$el[n?"addClass":"removeClass"]("".concat(e,"active"))},render:function(){var e=this.propsConfig,t=this.model,n=this.el,r=this.pfx,i=t.get("preview"),o=new D.default({collection:t.get("properties"),config:L(L({},this.config),{},{fromLayer:1}),target:e.target,customValue:e.customValue,propTarget:e.propTarget,onChange:e.onChange}),s=o.render().el;return n.innerHTML=this.template(t),n.className="".concat(r,"layer").concat(i?"":" ".concat(r,"no-preview")),this.props=o,this.getPropertiesWrapper().appendChild(s),this.updateVisibility(),this.updatePreview(),this}}),R=s.a.View.extend({initialize:function(e){this.config=e.config||{},this.stackModel=e.stackModel,this.preview=e.preview,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.propsConfig=e.propsConfig;var t=this.pfx,n=this.ppfx,r=this.collection;this.className="".concat(t,"layers ").concat(n,"field"),this.listenTo(r,"add",this.addTo),this.listenTo(r,"deselectAll",this.deselectAll),this.listenTo(r,"reset",this.reset),this.items=[];var i=this.config.em||"",o=i?i.get("Utils"):"";this.sorter=o?new o.Sorter({container:this.el,ignoreViewChildren:1,containerSel:".".concat(t,"layers"),itemSel:".".concat(t,"layer"),pfx:this.config.pStylePrefix}):"",r.view=this,this.$el.data("model",r),this.$el.data("collection",r)},addTo:function(e){var t=this.collection.indexOf(e);this.addToCollection(e,null,t)},addToCollection:function(e,t,n){var r=t||null,i=this.stackModel,o=this.config,s=this.sorter,a=this.propsConfig;void 0!==this.preview&&e.set("preview",this.preview);var l=new N({model:e,config:o,sorter:s,stackModel:i,propsConfig:a}),c=l.render().el;if(this.items.push(l),r)r.appendChild(c);else if(void 0!==n){var u="before";this.$el.children().length==n&&(n--,u="after"),n<0?this.$el.append(c):this.$el.children().eq(n)[u](c)}else this.$el.append(c);return c},deselectAll:function(){this.$el.find("."+this.pfx+"layer").removeClass(this.pfx+"active")},reset:function(e,t){this.clearItems(t),this.render()},render:function(){var e=document.createDocumentFragment();return this.$el.empty(),this.collection.each((function(t){this.addToCollection(t,e)}),this),this.$el.append(e),this.$el.attr("class",this.className),this.sorter&&(this.sorter.plh=null),this},remove:function(){this.clearItems(),s.a.View.prototype.remove.apply(this,arguments)},clearItems:function(e){this.items.forEach((function(t){return t.remove(e)})),this.items=[]}});function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var V=new(n(31).a),z=M.extend({templateInput:function(){var e=this.pfx;return'\n      <div class="'.concat(e,"field ").concat(e,'stack">\n        <button type="button" id="').concat(e,'add" data-add-layer>+</button>\n        <div data-layers-wrapper></div>\n      </div>\n    ')},init:function(){var e=this.model;e.set("stackIndex",null),this.events["click [data-add-layer]"]="addLayer",this.listenTo(e,"change:stackIndex",this.indexChanged),this.listenTo(e,"updateValue",this.inputValueChanged),this.delegateEvents();var t=this.getPropsConfig();this.layers=new R({collection:this.getLayers(),stackModel:e,preview:e.get("preview"),config:this.config,propsConfig:t});var r=n(19).default;this.propsView=new r({target:this.target,collection:e.get("properties"),stackModel:e,config:this.config,onChange:t.onChange,propTarget:t.propTarget})},targetUpdated:function(){var e,t=this;if(this.model.get("detached"))e=this._getTargetData(),this.setStatus(e.status),this.checkVisibility();else{for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e=M.prototype.targetUpdated.apply(this,r)}setTimeout((function(){return t.refreshLayers(e)}))},getLayers:function(){return this.model.get("layers")},indexChanged:function(e){var t=this.model;this.getLayers().active(t.get("stackIndex"))},addLayer:function(){var e=this.model,t=this.getLayers(),n=e.get("prepend"),r=e.get("properties").deepClone();r.each((function(e){return e.set("value","")}));var o=t.add({properties:r},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({active:1},n&&{at:0}));this.inputValueChanged({up:1}),e.set("stackIndex",t.indexOf(o))},inputValueChanged:function(){var e=this.model;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).up&&this.elementUpdated(),e.get("detached")?e.get("properties").each((function(e){return e.trigger("change:value")})):e.set("value",this.getLayerValues())},setValue:function(){},getLayerValues:function(){return this.getLayers().getFullValue()},_getClassRule:function(){var e=this.em,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).skipAdd,n=void 0===t?1:t,r=e.getSelected(),i=e.get("StyleManager").getModelToStyle(r,{skipAdd:n,useClasses:1});return i!==r&&i},_getParentTarget:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.em,i=this.model.get("property"),o=n.isValid||function(e){return e.getStyle()[i]},s=r.get("CssComposer").getAll().filter((function(t){return t.selectorsToString()===e.getSelectorsString()})).reduce((function(e,t){return e[t.getAtRule()]=t,e}),{}),a=V.sortMediaObject(s).map((function(e){return e.value})),l=a.indexOf(e),c=a.splice(0,l),u=c.length-1;u>-1;u--){var d=c[u];if(o(d)){t=d;break}}return t},refreshLayers:function(){var e,t,n,r,i,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=[],c=this.model,u=this.em,d=this.getLayers(),h=c.get("detached"),f=c.get("property"),p=this.getTarget(),g=this.getComputedValue(),m=u.getSelected(),v={fromTarget:1};if(h){t=s.targetValue||{};var b=function(e){var t=c.get("properties").at(0).get("property");return e&&!Object(l.isUndefined)(e.getStyle()[t])};if(!Object(l.keys)(t).length&&g&&m){var y={isValid:function(e){return b(e)}};(r=this._getParentTarget(p,y))?t=r.getStyle():(n=this._getClassRule(),r=!(i=b(n)&&n.getStyle())&&this._getParentTarget(this._getClassRule({skipAdd:0}),y),o=b(r)&&r.getStyle(),t=i||o||{})}e=t,a=d.getLayersFromStyle(t)}else{var w=this.getTargetValue({ignoreDefault:1});!w&&g&&((r=this._getParentTarget(p))?w=r.getStyle()[f]:(o=(r=!(i=(n=this._getClassRule())&&n.getStyle()[f])&&this._getParentTarget(this._getClassRule({skipAdd:0})))&&r.getStyle()[f],w=i||o||g)),e=w=w==c.getDefaultValue()?"":w,a=d.getLayersFromValue(w)}var x=c.getLayersFromTarget(p,{resultValue:e,layersObj:a})||a;d.reset(null,v),d.add(x,v),c.set({stackIndex:null},{silent:!0})},getTargetValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=t.attributes.detached,r=this.getTarget(),i=M.prototype.getTargetValue.call(this,e);return Object(l.isUndefined)(i)&&!n?i=t.getValueFromStyle(r.getStyle()):n&&(i=t.getValueFromTarget(r)),i},getPropsConfig:function(){var e=this,t=e.model;return{target:e.target,propTarget:e.propTarget,onChange:function(n,r,o){var s=r.model,a=t.get("status");if(t.get("detached")){var l=s.get("property"),c=s.getDefaultValue(),u=e.getLayers(),d=u.getPropertyValues(l,c);r.updateTargetStyle(d,null,o),"background-image"!=l||o.avoidStore||"computed"!=a||t.get("properties").filter((function(e){return"__"==e.get("property").substr(0,2)})).forEach((function(t){var n=t.get("property"),r=u.getPropertyValues(n,t.getDefaultValue());e.getTargets().forEach((function(e){return e.addStyle(i()({},n,r),o)}))}))}else if("updated"==a){var h=t.getFullValue();t.set("value",h,o),!h&&r.updateTargetStyle(h,null,o)}}}},onRender:function(){var e=this.layers,t=this.propsView,n=this.el.querySelector("[data-layers-wrapper]");t.render(),n.appendChild(e.render().el)}}),B=s.a.$,H=T.extend({templateInput:function(){var e=this.pfx,t=this.em;return'\n    <div class="'.concat(e,"field ").concat(e,"file\">\n      <div id='").concat(e,"input-holder'>\n        <div class=\"").concat(e,'btn-c">\n          <button class="').concat(e,'btn" id="').concat(e,'images" type="button">\n            ').concat(t.t("styleManager.fileButton"),'\n          </button>\n        </div>\n        <div style="clear:both;"></div>\n      </div>\n      <div id="').concat(e,'preview-box">\n        <div id="').concat(e,'preview-file"></div>\n        <div id="').concat(e,'close">&Cross;</div>\n      </div>\n    </div>\n    ')},init:function(){var e=this.em;this.modal=e.get("Modal"),this.am=e.get("AssetManager"),this.events["click #"+this.pfx+"close"]="removeFile",this.events["click #"+this.pfx+"images"]="openAssetManager",this.delegateEvents()},onRender:function(){if(!this.$input){var e=this.model.getDefaultValue();this.$input=B('<input placeholder="'.concat(e,'">'))}this.$preview||(this.$preview=this.$el.find("#"+this.pfx+"preview-file")),this.$previewBox||(this.$previewBox=this.$el.find("#"+this.pfx+"preview-box")),this.setValue(this.componentValue,0)},clearCached:function(){T.prototype.clearCached.apply(this,arguments),this.$preview=null,this.$previewBox=null},setValue:function(e,t){T.prototype.setValue.apply(this,arguments),this.setPreviewView(e&&e!=this.model.getDefaultValue()),this.setPreview(e)},setPreviewView:function(e){var t=this.$previewBox;t&&t[e?"addClass":"removeClass"]("".concat(this.pfx,"show")),t&&t.css({display:e?"block":"none"})},spreadUrl:function(e){this.model.set("value",e),this.setPreviewView(1)},setPreview:function(e){var t=this.$preview;e=e&&e.indexOf("url(")<0?"url(".concat(e,")"):e,t&&t.css("background-image",e)},cleanValue:function(){this.setPreviewView(0),this.model.set({value:""},{silent:!0})},removeFile:function(){this.model.set("value",this.model.getDefaultValue());for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];T.prototype.cleanValue.apply(this,t),this.setPreviewView(0)},openAssetManager:function(e){var t=this,n=this.em,r=this.modal,i=n?n.get("Editor"):"";i&&i.runCommand("open-assets",{types:["image"],accept:"image/*",target:this.getTargetModel(),onClick:function(){},onDblClick:function(){},onSelect:function(e){r.close();var n=Object(l.isString)(e)?e:e.get("src");t.spreadUrl(n)}})}}),U=s.a.$,$=T.extend({templateInput:function(){return""},init:function(){var e=this.model;this.listenTo(e,"change:unit",this.modelValueChanged),this.listenTo(e,"el:change",this.elementUpdated),this.listenTo(e,"change:units",this.render)},setValue:function(e){var t=this.model.parseValue(e);e="".concat(t.value).concat(t.unit),this.inputInst.setValue(e,{silent:1})},onRender:function(){var e=this.ppfx;if(!this.input){var t=this.model.input;t.ppfx=e,t.render(),this.el.querySelector(".".concat(e,"fields")).appendChild(t.el),this.$input=t.inputEl,this.unit=t.unitEl,this.$unit=U(this.unit),this.input=this.$input.get(0),this.inputInst=t}},clearCached:function(){T.prototype.clearCached.apply(this,arguments),this.unit=null,this.$unit=null}}),W=n(38);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=$.extend({setValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=G(G({},t),{},{silent:1}),this.inputInst.setValue(e,t)},onRender:function(){if(!this.input){var e=this.ppfx,t=new W.a({target:this.target,model:this.model,ppfx:e}).render();this.el.querySelector(".".concat(e,"fields")).appendChild(t.el),this.$input=t.inputEl,this.$color=t.colorEl,this.input=this.$input.get(0),this.inputInst=t}}}),Y=n(8),Z=n.n(Y);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=f.extend({defaults:function(){return J(J({},f.prototype.defaults),{},{options:[],full:1})},initialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];f.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.onOptionChange)},onOptionChange:function(){this.set("list",this.get("options"))},getOptions:function(){var e=this.attributes,t=e.options;return t&&t.length?t:e.list},setOptions:function(){return this.set("options",arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),this},addOption:function(e){if(e){var t=this.getOptions();this.setOptions([].concat(Z()(t),[e]))}return this}});function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=Q.extend({defaults:function(){return te(te({},Q.prototype.defaults()),{},{full:0})}}),re=T.extend({templateInput:function(){var e=this.pfx,t=this.ppfx;return'\n      <div class="'.concat(t,"field ").concat(t,'select">\n        <span id="').concat(e,'input-holder"></span>\n        <div class="').concat(t,'sel-arrow">\n          <div class="').concat(t,'d-s-arrow"></div>\n        </div>\n      </div>\n    ')},initialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];T.prototype.initialize.apply(this,t),this.listenTo(this.model,"change:options",this.updateOptions)},updateOptions:function(){this.input=null,this.onRender()},onRender:function(){var e=this.pfx,t=this.model.getOptions();if(!this.input){var n="";t.forEach((function(e){var t=e.name||e.value,r=e.style?e.style.replace(/"/g,"&quot;"):"",i=r?'style="'.concat(r,'"'):"",o=e.value.replace(/"/g,"&quot;");n+='<option value="'.concat(o,'" ').concat(i,">").concat(t,"</option>")}));var r=this.el.querySelector("#".concat(e,"input-holder"));r.innerHTML="<select>".concat(n,"</select>"),this.input=r.firstChild}}}),ie=T.extend({templateInput:function(){var e=this.ppfx;return'\n      <div class="'.concat(e,"field ").concat(e,'field-radio">\n      </div>\n    ')},onRender:function(){var e=this.pfx,t=this.ppfx,n="".concat(t,"radio-item-label"),r=this.model,i=r.get("property"),o=r.get("list")||r.get("options")||[],s=r.cid,a="".concat(e,"radio ").concat(e,"radio-").concat(i);if(!this.input&&o&&o.length){var l="";o.forEach((function(r){var o=r.className?"".concat(r.className," ").concat(e,"icon ").concat(n):"",c="".concat(i,"-").concat(r.value,"-").concat(s),u=r.name||r.value,d=r.title?'title="'.concat(r.title,'"'):"";l+='\n            <div class="'.concat(t,'radio-item">\n              <input type="radio" class="').concat(a,'" id="').concat(c,'" name="').concat(i,"-").concat(s,'" value="').concat(r.value,'"/>\n              <label class="').concat(o||n,'" ').concat(d,' for="').concat(c,'">').concat(o?"":u,"</label>\n            </div>\n          ")}));var c=this.el.querySelector(".".concat(t,"field"));c.innerHTML='<div class="'.concat(t,'radio-items">').concat(l,"</div>"),this.input=c.firstChild}},getInputValue:function(){var e=this.getCheckedEl();return e?e.value:""},getCheckedEl:function(){var e=this.getInputEl();return e?e.querySelector("input:checked"):""},setValue:function(e){var t=this.model,n=e||t.get("value")||t.getDefaultValue(),r=this.getInputEl(),i=r?r.querySelector('[value="'.concat(n,'"]')):"";if(i)i.checked=!0;else{var o=this.getCheckedEl();o&&(o.checked=!1)}}}),oe=n(32);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=f.extend({defaults:ae(ae({},f.prototype.defaults),{},{units:[],unit:"",step:1,min:"",max:""}),initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f.callParentInit(f,this,e,t);var n=this.get("unit"),r=this.get("units");this.input=new oe.a({model:this}),r.length&&!n&&this.set("unit",r[0]),f.callInit(this,e,t)},clearValue:function(){return this.set({value:void 0,unit:void 0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this},parseValue:function(e){var t=f.prototype.parseValue.apply(this,arguments),n=this.input.validateInputValue(t.value,{deepCheck:1}),r=n.unit;return t.value=n.value,t.unit=r,t},getFullValue:function(){var e=this.get("value"),t=this.get("unit");return e=Object(l.isUndefined)(e)?"":e,t=!Object(l.isUndefined)(t)&&e?t:"",e="".concat(e).concat(t),f.prototype.getFullValue.apply(this,[e])}});function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=le.extend({defaults:ue(ue({},le.prototype.defaults),{},{showInput:1})});function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=$.extend({events:function(){return fe(fe({},$.prototype.events),{},{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},templateInput:function(e){var t=this.ppfx;return'\n      <div class="'.concat(t,"field ").concat(t,'field-range">\n        <input type="range"\n          min="').concat(e.get("min"),'"\n          max="').concat(e.get("max"),'"\n          step="').concat(e.get("step"),'"/>\n      </div>\n    ')},getSliderEl:function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},inputValueChanged:function(){var e=this.model,t=e.get("step");this.getInputEl().value=this.getSliderEl().value;var n=this.getInputValue()-t;e.set("value",n,{avoidStore:1}).set("value",n+t),this.elementUpdated()},inputValueChangedSoft:function(){this.getInputEl().value=this.getSliderEl().value,this.model.set("value",this.getInputValue(),{avoidStore:1}),this.elementUpdated()},setValue:function(e){var t=this.model.parseValue(e);this.getSliderEl().value=parseFloat(t.value),$.prototype.setValue.apply(this,arguments)},onRender:function(){$.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},clearCached:function(){$.prototype.clearCached.apply(this,arguments),this.slider=null}});function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=t.default=s.a.Collection.extend(a.a).extend({extendViewApi:1,types:[{id:"stack",model:C,view:z,isType:function(e){if(e&&"stack"==e.type)return e}},{id:"composite",model:m,view:M,isType:function(e){if(e&&"composite"==e.type)return e}},{id:"file",model:f,view:H,isType:function(e){if(e&&"file"==e.type)return e}},{id:"color",model:f,view:K,isType:function(e){if(e&&"color"==e.type)return e}},{id:"select",model:ne,view:re,isType:function(e){if(e&&"select"==e.type)return e}},{id:"radio",model:Q,view:ie,isType:function(e){if(e&&"radio"==e.type)return e}},{id:"slider",model:de,view:pe,isType:function(e){if(e&&"slider"==e.type)return e}},{id:"integer",model:le,view:$,isType:function(e){if(e&&"integer"==e.type)return e}},{id:"base",model:f,view:T,isType:function(e){return e.type="base",e}}],deepClone:function(){var e=this.clone();return e.reset(e.map((function(e){var t=e.clone();return t.typeView=e.typeView,t}))),e},parseValue:function(e){var t=this,n=[];return e.split(" ").forEach((function(e,r){var i=t.at(r);i&&n.push(me(me({},i.attributes),{value:e}))})),n},getFullValue:function(){var e="";return this.each((function(t){return e+="".concat(t.getFullValue()," ")})),e.trim()}})},function(e,t,n){var r=n(81);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)t.indexOf(n=s[i])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r).a.$;t.default={startSelectPosition:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isPointed=!1;var i=this.editorModel.get("Utils"),o=e.ownerDocument.body;i&&!this.sorter&&(this.sorter=new i.Sorter({container:o,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:t,wmargin:1,nested:1,em:this.editorModel,canvasRelative:1,scale:function(){return n.em.getZoomDecimal()}})),r.onStart&&(this.sorter.onStart=r.onStart),e&&this.sorter.startSort(e,{container:o})},getOffsetDim:function(){var e=this.offset(this.canvas.getFrameEl()),t=this.offset(this.canvas.getElement());return{top:e.top-t.top,left:e.left-t.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex="after"==this.posMethod&&0!==this.cDim.length?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=0!==this.cDim.length&&"after"==this.posMethod&&this.posIndex==this.cDim.length,this.posTargetEl=0===this.cDim.length?i(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?i(this.cDim[this.posIndex][5]).parent():i(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(e,t,n){var r=e||0,i=n.length,o=0!==i&&"after"==(t||"before")&&r==i;return 0!==i&&(!o&&!n[r][4]||n[r-1]&&!n[r-1][4]||o&&!n[r-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},function(e,t,n){"use strict";var r=n(40);window.Promise=window.Promise||r.a,t.a="function"==typeof fetch?fetch.bind():function(e,t){return new r.a((function(n,i){var o=new XMLHttpRequest;for(var s in o.open(t.method||"get",e),o.withCredentials="include"==t.credentials,t.headers||{})o.setRequestHeader(s,t.headers[s]);o.onload=function(e){return n({status:o.status,statusText:o.statusText,text:function(){return r.a.resolve(o.responseText)}})},o.onerror=i,o.upload&&t.onProgress&&(o.upload.onprogress=t.onProgress),t.body?o.send(t.body):o.send()}))}},function(e,t,n){"use strict";var r=n(9),i=n.n(r),o=n(0);t.a=function(e){var t=e;return{compTypes:"",modelAttrStart:"data-gjs-",splitPropsFromAttr:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={};return Object(o.each)(t,(function(t,i){if(0===i.indexOf(e.modelAttrStart)){var s=i.replace("data-gjs-",""),a=t.length,l=t&&Object(o.isString)(t),c=l&&t.substr(0,1),u=l&&t.substr(a-1);t="false"!==(t="true"===t||t)&&t;try{t="{"==c&&"}"==u||"["==c&&"]"==u?JSON.parse(t):t}catch(e){}n[s]=t}else r[i]=t})),{props:n,attrs:r}},parseStyle:function(e){for(var t={},n=e.split(";"),r=0,i=n.length;r<i;r++){var o=n[r].trim();if(o){var s=o.split(":");t[s[0].trim()]=s.slice(1).join(":").trim()}}return t},parseClass:function(e){for(var t=[],n=e.split(" "),r=0,i=n.length;r<i;r++){var o=n[r].trim();o&&t.push(o)}return t},parseNode:function(n){for(var r=[],o=n.childNodes,s=0,a=o.length;s<a;s++){var l=o[s],c=l.attributes||[],u=c.length,d=r[r.length-1],h=l.childNodes.length,f=this.compTypes,p={};if(f){var g="",m=l.getAttribute&&l.getAttribute("".concat("data-gjs-","type"));if(m)p={type:m};else{for(var v=0;v<f.length;v++){var b=f[v];if(g=b.model.isComponent(l)){"object"!==i()(g)&&(g={type:b.id});break}}p=g}}p.tagName||(p.tagName=l.tagName?l.tagName.toLowerCase():""),u&&(p.attributes={});for(var y=0;y<u;y++){var w=c[y].nodeName,x=c[y].nodeValue;if("style"==w)p.style=this.parseStyle(x);else if("class"==w)p.classes=this.parseClass(x);else{if("contenteditable"==w)continue;if(0===w.indexOf("data-gjs-")){var O=w.replace("data-gjs-",""),C=x.length,_=x&&x.substr(0,1),S=x&&x.substr(C-1);x="false"!==(x="true"===x||x)&&x;try{x="{"==_&&"}"==S||"["==_&&"]"==S?JSON.parse(x):x}catch(e){}p[O]=x}else""===x&&!0===l[w]&&(x=!0),p.attributes[w]=x}}if(h&&!p.components){var j=l.childNodes[0];1===h&&3===j.nodeType?(!p.type&&(p.type="text"),p.content=j.nodeValue):p.components=this.parseNode(l)}if("textnode"==p.type){if(d&&"textnode"==d.type){d.content+=p.content;continue}if(!e.keepEmptyTextNodes){var k=l.nodeValue;if(" "!=k&&!k.trim())continue}}var T=p.components;if(!p.type&&T){for(var E=1,P=0,A=0;A<T.length;A++){var M=T[A],D=M.type;if(["text","textnode"].indexOf(D)<0&&t.textTags.indexOf(M.tagName)<0){E=0;break}"textnode"==D&&(P=1)}E&&P&&(p.type="text")}(p.tagName||"textnode"==p.type)&&r.push(p)}return r},parse:function(e,n){var r=t.em,i=r&&r.get("Config")||{},o={html:"",css:""},s=document.createElement("div");s.innerHTML=e;var a=s.querySelectorAll("script"),l=a.length;if(!i.allowScripts)for(;l--;)a[l].parentNode.removeChild(a[l]);if(n){for(var c=s.querySelectorAll("style"),u=c.length,d="";u--;)d=c[u].innerHTML+d,c[u].parentNode.removeChild(c[u]);d&&(o.css=n.parse(d))}var h=this.parseNode(s);return o.html=1!==h.length||t.returnArray?h:h[0],r&&r.trigger("parse:html",{input:e,output:o}),o}}}},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n.n(i),s=o.a.Model,a=o.a.View;t.a={types:[],initialize:function(e,t){var n=this;this.model=function(){var e,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&i.type){var s=n.getBaseType();e=(r=n.getType(i.type))?r.model:s.model,t=r?r.view:s.view}else{var a=n.recognizeType(i);e=(r=a.type).model,t=r.view,i=a.attributes}var l=new e(i,o);return l.typeView=t,l};var r=this.init&&this.init.bind(this);r&&r()},recognizeType:function(e){for(var t=this.getTypes(),n=0;n<t.length;n++){var r=t[n],i=r.isType(e);if(i="boolean"==typeof i&&i?{type:r.id}:i)return{type:r,attributes:i}}return{type:this.getBaseType(),attributes:e}},getBaseType:function(){var e=this.getTypes();return e[e.length-1]},getTypes:function(){return this.types},getType:function(e){for(var t=this.getTypes(),n=0;n<t.length;n++){var r=t[n];if(r.id===e)return r}},addType:function(e,t){var n=this.getType(e),i=this.getBaseType(),o=n?n.model:i.model,l=n?n.view:i.view,c=t.model,u=t.view,d=t.isType;c=c instanceof s||Object(r.isFunction)(c)?c:o.extend(c||{}),u=u instanceof a||Object(r.isFunction)(u)?u:l.extend(u||{}),!this.extendViewApi||t.model||t.view||(u=u.extend(t)),n?(n.model=c,n.view=u,n.isType=d||n.isType):(t.id=e,t.model=c,t.view=u,t.isType=d||function(t){if(t&&t.type==e)return!0},this.getTypes().unshift(t))}}},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(0),s=Number.MAX_VALUE;t.a=i.a.Model.extend({initialize:function(){this.compCls=[],this.ids=[]},buildFromModel:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="",i=this.em,o=i&&i.getConfig("avoidInlineStyle"),s=e.styleToString(),a=e.get("classes"),l=n.wrapperIsBody,c=e.get("wrapper");if(this.ids.push("#".concat(e.getId())),a.each((function(e){return t.compCls.push(e.getFullName())})),!o&&s){var u="#".concat(e.getId());r="".concat(u=l&&c?"body":u,"{").concat(s,"}")}return e.components().each((function(e){return r+=t.buildFromModel(e,n)})),r},build:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.cssc,i=n.em||"";this.em=i,this.compCls=[],this.ids=[];var s=this.buildFromModel(e,n),a=Object(o.isUndefined)(n.clearStyles)&&i?i.getConfig("clearStyles"):n.clearStyles;if(r){var l=r.getAll(),c={},u=[];l.each((function(e){var r=e.getAtRule();if(r){var i=c[r];i?i.push(e):c[r]=[e]}else s+=t.buildFromRule(e,u,n)})),this.sortMediaObject(c).forEach((function(e){var r="",i=e.key;e.value.forEach((function(e){var o=t.buildFromRule(e,u,n);e.get("singleAtRule")?s+="".concat(i,"{").concat(o,"}"):r+=o})),r&&(s+="".concat(i,"{").concat(r,"}"))})),i&&a&&l.remove(u)}return s},buildFromRule:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="",s=e.selectorsToString({skipAdd:1}),a=e.get("selectorsAdd"),l=e.get("singleAtRule");if(e.get("selectors").each((function(e){var t=e.getFullName();(r.compCls.indexOf(t)>=0||r.ids.indexOf(t)>=0||i.keepUnusedStyles)&&(n=1)})),s&&n||a||l){var c=e.getDeclaration();c&&(o+=c)}else t.push(e);return o},getQueryLength:function(e){var t=/(-?\d*\.?\d+)\w{0,}/.exec(e);return t?parseFloat(t[1]):s},sortMediaObject:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];return Object(o.each)(t,(function(e,t){return n.push({key:t,value:e})})),n.sort((function(t,n){var r=[t.key,n.key].every((function(e){return-1!==e.indexOf("min-width")})),i=r?n.key:t.key;return e.getQueryLength(r?t.key:n.key)-e.getQueryLength(i)}))}})},function(e,t,n){"use strict";var r=n(1),i=(n.n(r),n(0)),o=n(3),s=n(18);t.a=s.a.extend({events:{"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement"},template:function(){var e=this.ppfx;return'\n      <span class="'.concat(e,'input-holder"></span>\n      <span class="').concat(e,'field-units"></span>\n      <div class="').concat(e,'field-arrows" data-arrows>\n        <div class="').concat(e,'field-arrow-u" data-arrow-up></div>\n        <div class="').concat(e,'field-arrow-d" data-arrow-down></div>\n      </div>\n    ')},inputClass:function(){var e=this.ppfx;return this.opts.contClass||"".concat(e,"field ").concat(e,"field-integer")},initialize:function(){s.a.prototype.initialize.apply(this,arguments),Object(i.bindAll)(this,"moveIncrement","upIncrement"),this.doc=document,this.listenTo(this.model,"change:unit",this.handleModelChange)},setValue:function(e,t){var n=t||{},r=this.validateInputValue(e,{deepCheck:1}),i={value:r.value};(r.unit||r.force)&&(i.unit=r.unit),this.model.set(i,n),n.silent&&this.handleModelChange()},handleChange:function(e){e.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},handleUnitChange:function(e){e.stopPropagation();var t=this.getUnitEl().value;this.model.set("unit",t),this.elementUpdated()},elementUpdated:function(){this.model.trigger("el:change")},handleModelChange:function(){var e=this.model;this.getInputEl().value=e.get("value");var t=this.getUnitEl();t&&(t.value=e.get("unit")||"")},getUnitEl:function(){if(!this.unitEl){var e=this.model,t=e.get("units")||[];if(t.length){var n=[];t.forEach((function(t){var r=t==e.get("unit")?"selected":"";n.push("<option ".concat(r,">").concat(t,"</option>"))}));var r=document.createElement("div");r.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(n.join(""),"</select>"),this.unitEl=r.firstChild}}return this.unitEl},upArrowClick:function(){var e=this.model,t=e.get("step"),n=parseFloat(e.get("value"));n=this.normalizeValue(n+t);var r=this.validateInputValue(n);e.set("value",r.value),this.elementUpdated()},downArrowClick:function(){var e=this.model,t=e.get("step"),n=parseFloat(e.get("value")),r=this.normalizeValue(n-t),i=this.validateInputValue(r);e.set("value",i.value),this.elementUpdated()},downIncrement:function(e){e.preventDefault(),this.moved=0;var t=this.model.get("value");t=this.normalizeValue(t),this.current={y:e.pageY,val:t},Object(o.u)(this.doc,"mousemove",this.moveIncrement),Object(o.u)(this.doc,"mouseup",this.upIncrement)},moveIncrement:function(e){this.moved=1;var t=this.model,n=t.get("step"),r=this.current,i=this.normalizeValue(r.val+(r.y-e.pageY)*n);return this.prValue=this.validateInputValue(i).value,t.set("value",this.prValue,{avoidStore:1}),!1},upIncrement:function(){var e=this.model,t=e.get("step");if(Object(o.t)(this.doc,"mouseup",this.upIncrement),Object(o.t)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-t;e.set("value",n,{avoidStore:1}).set("value",n+t),this.elementUpdated()}},normalizeValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.model.get("step"),r=0;if(isNaN(e))return t;if(e=parseFloat(e),Math.floor(e)!==e){var i=n.toString().split(".")[1];r=i?i.length:0}return r?parseFloat(e.toFixed(r)):e},validateInputValue:function(e,t){var n=0,r=t||{},o=this.model,s=Object(i.isUndefined)(e)?"":e,a=o.get("units")||[],l=o.get("unit")||a.length&&a[0]||"",c=o.get("max"),u=o.get("min");if(r.deepCheck){var d=o.get("fixedValues")||[];if(s){var h=new RegExp("^"+d.join("|"),"g");if(d.length&&h.test(s))s=s.match(h)[0],l="",n=1;else{var f=s+"";s+="",s=parseFloat(s.replace(",",".")),s=isNaN(s)?"":s;var p=f.replace(s,"");Object(i.indexOf)(a,p)>=0&&(l=p)}}}return Object(i.isUndefined)(c)||""===c||(s=s>c?c:s),Object(i.isUndefined)(u)||""===u||(s=s<u?u:s),{force:n,value:s,unit:l}},render:function(){s.a.prototype.render.call(this),this.unitEl=null;var e=this.getUnitEl();return e&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(e),this}})},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(34);t.a=i.a.Collection.extend({model:o.a,initialize:function(e,t){var n=this;t&&t.em&&(this.editor=t.em),setTimeout((function(){n.on("remove",n.onRemove),n.on("add",n.onAdd)}))},onAdd:function(e){e.ensureSelectors()},onRemove:function(e){var t=this.editor;t.stopListening(e),t.get("UndoManager").remove(e)},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=this.editor.get("Parser").parseCss(e)),t.em=this.editor,i.a.Collection.prototype.add.apply(this,[e,t])}})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n.n(i),s=n(23),a=n(12),l=window.CSS;t.a=o.a.Model.extend(s.a).extend({defaults:{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:0,important:0},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=e||{},this.em=t.em,this.ensureSelectors()},ensureSelectors:function(){var e=this.em,t=[],n=e&&e.get("SelectorManager"),r=this.getSelectors(),i=Array.isArray(r);r.forEach((function(e){return t.push(n?n.add(e):e)})),i&&this.set("selectors",new a.a(t))},getAtRule:function(){var e=this.get("atRuleType"),t=this.get("mediaText"),n=e?"@".concat(e):t?"@media":"";return n+(t&&n?" ".concat(t):"")},selectorsToString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=this.em,r=this.get("state"),i=this.get("wrapper"),o=this.get("selectorsAdd"),s={escape:function(e){return l&&l.escape?l.escape(e):e}},a=i&&n&&n.getConfig("wrapperIsBody")?"body":this.get("selectors").getFullString(0,s),c=r&&!e.skipState?":".concat(r):"";return a&&t.push("".concat(a).concat(c)),o&&!e.skipAdd&&t.push(o),t.join(", ")},getDeclaration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=this.selectorsToString(),r=this.styleToString(e),i=this.get("singleAtRule");return(n||i)&&r&&(t=i?r:"".concat(n,"{").concat(r,"}")),t},toCSS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=this.getAtRule(),r=this.getDeclaration(e);return r&&(t=r),n&&t&&(t="".concat(n,"{").concat(t,"}")),t},toJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=o.a.Model.prototype.toJSON.apply(this,t);if(this.em.getConfig("avoidDefaults")){var s=this.defaults;Object(r.forEach)(s,(function(e,t){i[t]===e&&delete i[t]})),Object(r.isEmpty)(i.selectors)&&delete i.selectors,Object(r.isEmpty)(i.style)&&delete i.style}return i},compare:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t||"",s=n||"",a=i.selectorsAdd||"",l=i.atRuleType||"";e instanceof Array||e.models||(e=[e]);var c=Object(r.map)(e.models||e,(function(e){return e.get("name")})),u=Object(r.map)(this.get("selectors").models,(function(e){return e.get("name")})),d=!1;if(c.length!==u.length)return d;for(var h=0;h<c.length;h++){for(var f=0,p=0;p<u.length;p++)c[h]===u[p]&&(f=1);if(0===f)return d}return this.get("state")===o&&this.get("mediaText")===s&&this.get("selectorsAdd")===a&&this.get("atRuleType")===l||d}})},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(0);t.a=i.a.View.extend({initialize:function(e){this.opts=e||{},this.config=e.config||{},this.em=this.config.em;var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.resetChildren),this.listenTo(t,"remove",this.removeChildren)},removeChildren:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.views.forEach((function(e){if(e){var t=e.childrenView,n=e.scriptContainer;t&&t.stopListening(),n&&n.remove(),e.remove.apply(e)}})),e.components().forEach((function(e){return n.removeChildren(e,t,r)}))},addTo:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.config.em,r=this.collection.indexOf(e);this.addToCollection(e,null,r),n&&!t.temporary&&function e(t){n.trigger("component:add",t),t.components().forEach((function(t){return e(t)}))}(e)},addToCollection:function(e,t,r){this.compView||(this.compView=n(6).default);for(var i=this.config,s=this.opts,a=this.em,l=t||null,c=i.frameView,u=void 0===c?{}:c,d=u.model&&e.getView(u.model),h=s.componentTypes||a&&a.get("DomComponents").getTypes(),f=e.get("type"),p=this.compView,g=0;g<h.length;g++)if(h[g].id==f){p=h[g].view;break}var m,v=d||new p({model:e,config:i,componentTypes:h});try{m=v.render().el}catch(e){m=document.createTextNode(""),a.logError(e)}if(l)l.appendChild(m);else{var b=this.parentEl,y=b.childNodes;if(Object(o.isUndefined)(r))b.appendChild(m);else{var w=y.length==r;w&&r--,w||!y.length?b.appendChild(m):b.insertBefore(m,y[r])}}return m},resetChildren:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).previousModels,r=void 0===n?[]:n;this.parentEl.innerHTML="",r.forEach((function(e){return t.removeChildren(e,t.collection)})),e.each((function(e){return t.addToCollection(e)}))},render:function(e){var t=this,n=this.el,r=document.createDocumentFragment();return this.parentEl=e||this.el,this.collection.each((function(e){return t.addToCollection(e,r)})),n.innerHTML="",n.appendChild(r),this}})},function(e,t,n){"use strict";var r,i=n(0),o=n(3),s=n(1),a=n.n(s),l=n(6),c=n(5),u=a.a.$;t.a=a.a.View.extend({events:{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","click [data-toggle-open]":"toggleOpening","dblclick [data-name]":"handleEdit","focusout [data-name]":"handleEditEnd"},template:function(e){var t=this.pfx,n=this.ppfx,r=this.clsNoEdit,i=this.config.hidable,o=this.countChildren(e),s=o?"":this.clsNoChild,a="".concat(this.clsTitle," ").concat(s),l="".concat(this.clsTitleC," ").concat(n,"one-bg"),c="".concat(this.clsCaret," fa fa-chevron-right"),u="".concat(this.inputNameCls," ").concat(r," ").concat(n,"no-app"),d="".concat(30+10*(this.level+1),"px"),h=e.getName(),f=e.getIcon(),p="".concat(t,"layer");return"\n      ".concat(i?'<i class="'.concat(t,"layer-vis fa fa-eye ").concat(this.isVisible()?"":"fa-eye-slash",'" data-toggle-visible></i>'):"",'\n      <div class="').concat(l,'">\n        <div class="').concat(a,'" style="padding-left: ').concat(d,'" data-toggle-select>\n          <div class="').concat(t,'layer-title-inn">\n            <i class="').concat(c,'" data-toggle-open></i>\n            ').concat(f?'<span class="'.concat(p,'__icon">').concat(f,"</span>"):"",'\n            <span class="').concat(u,'" data-name>').concat(h,'</span>\n          </div>\n        </div>\n      </div>\n      <div class="').concat(this.clsCount,'" data-count>').concat(o||"",'</div>\n      <div class="').concat(this.clsMove,'" data-toggle-move>\n        <i class="fa fa-arrows"></i>\n      </div>\n      <div class="').concat(this.clsChildren,'"></div>')},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt=e,this.level=e.level,this.config=e.config,this.em=e.config.em,this.ppfx=this.em.get("Config").stylePrefix,this.sorter=e.sorter||"",this.pfx=this.config.stylePrefix,this.parentView=e.parentView;var t=this.pfx,n=this.ppfx,r=this.model,i=r.get("components"),o=r.get("type")||"default";r.set("open",!1),this.listenTo(i,"remove add reset",this.checkChildren),this.listenTo(r,"change:status",this.updateStatus),this.listenTo(r,"change:open",this.updateOpening),this.listenTo(r,"change:layerable",this.updateLayerable),this.listenTo(r,"change:style:display",this.updateVisibility),this.className="".concat(t,"layer ").concat(t,"layer__t-").concat(o," no-select ").concat(n,"two-color"),this.inputNameCls="".concat(n,"layer-name"),this.clsTitleC="".concat(t,"layer-title-c"),this.clsTitle="".concat(t,"layer-title"),this.clsCaret="".concat(t,"layer-caret"),this.clsCount="".concat(t,"layer-count"),this.clsMove="".concat(t,"layer-move"),this.clsChildren="".concat(t,"layer-children"),this.clsNoChild="".concat(t,"layer-no-chld"),this.clsEdit="".concat(this.inputNameCls,"--edit"),this.clsNoEdit="".concat(this.inputNameCls,"--no-edit"),this.$el.data("model",r),this.$el.data("collection",i),r.viewLayer=this},getVisibilityEl:function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},updateVisibility:function(){var e=this.model,t="".concat(this.pfx,"layer-hidden"),n="none"===e.getStyle().display?"addClass":"removeClass";this.$el[n](t),this.getVisibilityEl()[n]("fa-eye-slash")},toggleVisibility:function(e){e&&e.stopPropagation();var t=this.model,n=this.em,r=t.get("__prev-display"),i=t.getStyle(),o=i.display;"none"==o?(delete i.display,r&&(i.display=r,t.unset("__prev-display"))):(o&&t.set("__prev-display",o),i.display="none"),t.setStyle(i),n&&n.trigger("component:toggled")},handleEdit:function(e){e&&e.stopPropagation();var t=this.em,n=this.$el,r=this.clsNoEdit,i=this.clsEdit,o=this.getInputName();o.contentEditable=!0,o.focus(),t&&t.setEditing(1),n.find(".".concat(this.inputNameCls)).removeClass(r).addClass(i)},handleEditEnd:function(e){e&&e.stopPropagation();var t=this.em,n=this.$el,r=this.clsNoEdit,i=this.clsEdit,o=this.getInputName(),s=o.textContent;o.scrollLeft=0,o.contentEditable=!1,this.model.set({"custom-name":s}),t&&t.setEditing(0),n.find(".".concat(this.inputNameCls)).addClass(r).removeClass(i)},getInputName:function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},updateOpening:function(){var e=this.opt.opened||{},t=this.model;t.get("open")?(this.$el.addClass("open"),this.getCaret().addClass("fa-chevron-down"),e[t.cid]=t):(this.$el.removeClass("open"),this.getCaret().removeClass("fa-chevron-down"),delete e[t.cid])},toggleOpening:function(e){e.stopPropagation(),this.model.get("components").length&&this.model.set("open",!this.model.get("open"))},handleSelect:function(e){e.stopPropagation();var t=this.em,n=this.config;if(t){var r=this.model;t.setSelected(r,{fromLayers:1,event:e});var i=n.scrollCanvas;i&&r.views.forEach((function(e){return e.scrollIntoView(i)}))}},handleHover:function(e){e.stopPropagation();var t=this.em;t&&this.config.showHover&&t.setHovered(this.model,{fromLayers:1})},startSort:function(e){e.stopPropagation();var t=this.em,n=this.sorter;e.button&&0!==e.button||n&&(n.onStart=function(e){return t.trigger("".concat(c.eventDrag,":start"),e)},n.onMoveClb=function(e){return t.trigger(c.eventDrag,e)},n.startSort(e.target))},freeze:function(){this.$el.addClass(this.pfx+"opac50"),this.model.set("open",0)},unfreeze:function(){this.$el.removeClass(this.pfx+"opac50")},updateStatus:function(e){l.default.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover}])},isVisible:function(){var e=this.model.getStyle().display;return!(e&&"none"===e)},checkChildren:function(){var e=this.model,t=this.clsNoChild,n=this.countChildren(e),r=this.$el.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),i=this.cnt;i||(i=this.$el.children("[data-count]").get(0),this.cnt=i),r[n?"removeClass":"addClass"](t),i&&(i.innerHTML=n||""),!n&&e.set("open",0)},countChildren:function(e){var t=0;return e.get("components").each((function(e){var n=this.opt.isCountable;n&&!n(e,this.config.hideTextnode)||t++}),this),t},getCaret:function(){return this.caret&&this.caret.length||(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},setRoot:function(e){e=Object(i.isString)(e)?this.em.getWrapper().find(e)[0]:e;var t=Object(o.g)(e,u);t&&(this.stopListening(),this.model=t,this.initialize(this.opt),this.render())},updateLayerable:function(){(this.parentView||this).render()},render:function(){var e=this.model,t=this.pfx,o=this.ppfx,s=this.opt.isCountable,a=s&&!s(e,this.config.hideTextnode),l=this.isVisible(),c=this.$el.empty(),u=this.level+1;Object(i.isUndefined)(r)&&(r=n(89).default);var d=new r({collection:e.get("components"),config:this.config,sorter:this.sorter,opened:this.opt.opened,parentView:this,parent:e,level:u}).render().$el;return this.config.showWrapper||1!==u?(c.html(this.template(e)),c.find(".".concat(this.clsChildren)).append(d)):c.append(d),e.get("draggable")&&this.config.sortable||c.children(".".concat(this.clsMove)).remove(),!l&&(this.className+=" ".concat(t,"hide")),a&&(this.className+=" ".concat(o,"hidden")),c.attr("class",this.className),this.updateOpening(),this.updateStatus(),this.updateVisibility(),this}})},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=i.a.View.extend({tagName:"style",initialize:function(){this.config=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).config||{};var e=this.model;this.listenTo(e,"change:style change:state change:mediaText",this.render),this.listenTo(e,"destroy remove",this.remove),this.listenTo(e.get("selectors"),"change",this.render)},render:function(){var e=this.model.get("important");return this.el.innerHTML=this.model.toCSS({important:e}),this}}),s=o.extend({_createElement:function(e){return document.createTextNode("")},render:function(){var e=this.model,t=e.get("important");return this.el.textContent=e.getDeclaration({important:t}),this}}),a=i.a.$,l=function(e,t){return"".concat(e).concat(t?"-".concat(parseFloat(t)):"")};t.a=i.a.View.extend({initialize:function(e){var t=e.config||{};this.atRules={},this.config=t,this.em=t.em,this.pfx=t.stylePrefix||"",this.className=this.pfx+"rules";var n=this.collection;this.listenTo(n,"add",this.addTo),this.listenTo(n,"reset",this.render)},addTo:function(e){this.addToCollection(e)},addToCollection:function(e,t){if(this.renderStarted){var n,r,i=t||null,a={model:e,config:this.config};if("keyframes"===e.get("atRuleType")){var c=e.getAtRule(),u=this.atRules[c];if(!u){var d=document.createElement("style");u=document.createTextNode(""),d.appendChild(document.createTextNode("".concat(c,"{"))),d.appendChild(u),d.appendChild(document.createTextNode("}")),this.atRules[c]=u,n=d}r=new s(a),u.appendData(r.render().el.textContent)}else n=(r=new o(a)).render().el;var h=this.className,f=e.get("mediaText"),p=l(h),g=p;if(f&&(g=l(h,this.getMediaWidth(f))),n){var m,v=i||this.el;try{m=v.querySelector("#".concat(g))}catch(e){}m||(m=v.querySelector("#".concat(p))),m.appendChild(n)}return n}},getMediaWidth:function(e){return e&&e.replace("(".concat(this.em.getConfig("mediaCondition"),": "),"").replace(")","")},render:function(){var e=this;this.renderStarted=1,this.atRules={};var t=this.em,n=this.$el,r=this.className,i=this.collection,o=document.createDocumentFragment();n.empty();var s=t.get("DeviceManager").getAll().pluck("priority");return s.every((function(e){return e}))&&s.unshift(0),s.forEach((function(e){return a('<div id="'.concat(l(r,e),'"></div>')).appendTo(o)})),i.each((function(t){return e.addToCollection(t,o)})),n.append(o),n.attr("class",r),this}})},function(e,t,n){"use strict";var r=n(2),i=n.n(r),o=n(1),s=n.n(o),a=n(0),l=n(9),c=n.n(l),u=n(18);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=s.a.$;!function(e,t){var n={beforeShow:d,move:d,change:d,show:d,hide:d,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},r=[],i=!!/msie/i.exec(window.navigator.userAgent),o=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div").style;return t.cssText="background-color:rgba(0,0,0,.5)",e(t.backgroundColor,"rgba")||e(t.backgroundColor,"hsla")}(),s=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),a=function(){var e="";if(i)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function l(t,n,r,i){for(var s=[],a=0;a<t.length;a++){var l=t[a];if(l){var c=S(l),u=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=S.equals(n,l)?" sp-thumb-active":"";var d=c.toString(i.preferredFormat||"rgb"),h=o?"background-color:"+c.toRgbString():"filter:"+c.toFilter();s.push('<span title="'+d+'" data-color="'+c.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+h+';"></span></span>')}else s.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",i.noColorSelectedText)).html())}return"<div class='sp-cf "+r+"'>"+s.join("")+"</div>"}function u(c,u){var d,m,v=function(t,r){var i=e.extend({},n,t);return i.callbacks={move:f(i.move,r),change:f(i.change,r),show:f(i.show,r),hide:f(i.hide,r),beforeShow:f(i.beforeShow,r)},i}(u,c),b=v.flat,y=v.showSelectionPalette,w=v.localStorageKey,x=v.theme,O=v.callbacks,C=(d=Be,function(){var e=this,t=arguments,n=function(){m=null,d.apply(e,t)};m||(m=setTimeout(n,10))}),_=!1,j=!1,k=0,T=0,E=0,P=0,A=0,M=0,D=0,I=0,L=0,N=0,R=1,F=[],V=[],z={},B=v.selectionPalette.slice(0),H=v.maxSelectionSize,U=null,$=c.ownerDocument,W=e(c),q=!1,G=e(a,$).addClass(x),K=G.find(".sp-picker-container"),Y=G.find(".sp-color"),Z=G.find(".sp-dragger"),X=G.find(".sp-hue"),J=G.find(".sp-slider"),Q=G.find(".sp-alpha-inner"),ee=G.find(".sp-alpha"),te=G.find(".sp-alpha-handle"),ne=G.find(".sp-input"),re=G.find(".sp-palette"),ie=G.find(".sp-initial"),oe=G.find(".sp-cancel"),se=G.find(".sp-clear"),ae=G.find(".sp-choose"),le=G.find(".sp-palette-toggle"),ce=W.is("input"),ue=ce&&"color"===W.attr("type")&&g(),de=ce&&!b,he=de?e(s).addClass(x).addClass(v.className).addClass(v.replacerClassName):e([]),fe=de?he:W,pe=he.find(".sp-preview-inner"),ge=v.color||ce&&W.val(),me=!1,ve=v.preferredFormat,be=!v.showButtons||v.clickoutFiresChange,ye=!ge,we=v.allowEmpty&&!ue;function xe(){if(v.showPaletteOnly&&(v.showPalette=!0),le.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),v.palette){F=v.palette.slice(0),V=e.isArray(F[0])?F:[F],z={};for(var t=0;t<V.length;t++)for(var n=0;n<V[t].length;n++){var r=S(V[t][n]).toRgbString();z[r]=!0}}G.toggleClass("sp-flat",b),G.toggleClass("sp-input-disabled",!v.showInput),G.toggleClass("sp-alpha-enabled",v.showAlpha),G.toggleClass("sp-clear-enabled",we),G.toggleClass("sp-buttons-disabled",!v.showButtons),G.toggleClass("sp-palette-buttons-disabled",!v.togglePaletteOnly),G.toggleClass("sp-palette-disabled",!v.showPalette),G.toggleClass("sp-palette-only",v.showPaletteOnly),G.toggleClass("sp-initial-disabled",!v.showInitial),G.addClass(v.className).addClass(v.containerClassName),Be()}function Oe(){if(w&&window.localStorage){try{var t=window.localStorage[w].split(",#");t.length>1&&(delete window.localStorage[w],e.each(t,(function(e,t){Ce(t)})))}catch(e){}try{B=window.localStorage[w].split(";")}catch(e){}}}function Ce(t){if(y){var n=S(t).toRgbString();if(!z[n]&&-1===e.inArray(n,B))for(B.push(n);B.length>H;)B.shift();if(w&&window.localStorage)try{window.localStorage[w]=B.join(";")}catch(e){}}}function _e(){var t=Ne(),n=e.map(V,(function(e,n){return l(e,t,"sp-palette-row sp-palette-row-"+n,v)}));Oe(),B&&n.push(l(function(){var e=[];if(v.showPalette)for(var t=0;t<B.length;t++){var n=S(B[t]).toRgbString();z[n]||e.push(B[t])}return e.reverse().slice(0,v.maxSelectionSize)}(),t,"sp-palette-row sp-palette-row-selection",v)),re.html(n.join(""))}function Se(){if(v.showInitial){var e=me,t=Ne();ie.html(l([e,t],t,"sp-palette-row-initial",v))}}function je(){(T<=0||k<=0||P<=0)&&Be(),j=!0,G.addClass("sp-dragging"),U=null,W.trigger("dragstart.spectrum",[Ne()])}function ke(){j=!1,G.removeClass("sp-dragging"),W.trigger("dragstop.spectrum",[Ne()])}function Te(){var e=ne.val();if(null!==e&&""!==e||!we){var t=S(e);t.isValid()?(Le(t),ze(!0)):ne.addClass("sp-validation-error")}else Le(null),ze(!0)}function Ee(){_?De():Pe()}function Pe(){var t=e.Event("beforeShow.spectrum");if(_)Be();else if(W.trigger("beforeShow.spectrum",[Ne()]),!1!==O.beforeShow(Ne())&&!t.isDefaultPrevented()){!function(){for(var e=0;e<r.length;e++)r[e]&&r[e].hide()}(),_=!0;var n=e($);n.bind("keydown.spectrum",Ae),n.bind("click.spectrum",Me),e(window).bind("resize.spectrum",C),he.addClass("sp-active"),G.removeClass("sp-hidden"),Be(),Fe(),me=Ne(),Se(),O.show(me),W.trigger("show.spectrum",[me])}}function Ae(e){27===e.keyCode&&De()}function Me(e){2!=e.button&&(j||(be?ze(!0):Ie(),De()))}function De(){_&&!b&&(_=!1,e($).unbind("keydown.spectrum",Ae),e($).unbind("click.spectrum",Me),e(window).unbind("resize.spectrum",C),he.removeClass("sp-active"),G.addClass("sp-hidden"),O.hide(Ne()),W.trigger("hide.spectrum",[Ne()]))}function Ie(){Le(me,!0)}function Le(e,t){var n,r;S.equals(e,Ne())?Fe():(!e&&we?ye=!0:(ye=!1,r=(n=S(e)).toHsv(),I=r.h%360/360,L=r.s,N=r.v,R=r.a),Fe(),n&&n.isValid()&&!t&&(ve=v.preferredFormat||n.getFormat()))}function Ne(e){return e=e||{},we&&ye?null:S.fromRatio({h:I,s:L,v:N,a:Math.round(100*R)/100},{format:e.format||ve})}function Re(){Fe(),O.move(Ne()),W.trigger("move.spectrum",[Ne()])}function Fe(){ne.removeClass("sp-validation-error"),Ve();var e=S.fromRatio({h:I,s:1,v:1});Y.css("background-color",e.toHexString());var t=ve;R<1&&(0!==R||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var n=Ne({format:t}),r="";if(pe.removeClass("sp-clear-display"),pe.css("background-color","transparent"),!n&&we)pe.addClass("sp-clear-display");else{var s=n.toHexString(),a=n.toRgbString();if(o||1===n.alpha?pe.css("background-color",a):(pe.css("background-color","transparent"),pe.css("filter",n.toFilter())),v.showAlpha){var l=n.toRgb();l.a=0;var c=S(l).toRgbString(),u="linear-gradient(left, "+c+", "+s+")";i?Q.css("filter",S(c).toFilter({gradientType:1},s)):(Q.css("background","-webkit-"+u),Q.css("background","-moz-"+u),Q.css("background","-ms-"+u),Q.css("background","linear-gradient(to right, "+c+", "+s+")"))}r=n.toString(t)}v.showInput&&ne.val(r),v.showPalette&&_e(),Se()}function Ve(){var e=L,t=N;if(we&&ye)te.hide(),J.hide(),Z.hide();else{te.show(),J.show(),Z.show();var n=e*k,r=T-t*T;n=Math.max(-E,Math.min(k-E,n-E)),r=Math.max(-E,Math.min(T-E,r-E)),Z.css({top:r+"px",left:n+"px"}),te.css({left:R*A-M/2+"px"}),J.css({top:I*P-D+"px"})}}function ze(e){var t=Ne(),n="",r=!S.equals(t,me);t&&(n=t.toString(ve),Ce(t)),ce&&W.val(n),e&&r&&(O.change(t),W.trigger("change",[t]))}function Be(){_&&(k=Y.width(),T=Y.height(),E=Z.height(),X.width(),P=X.height(),D=J.height(),A=ee.width(),M=te.width(),b||(G.css("position","absolute"),G.offset(v.offset?v.offset:function(t,n){var r=t.outerWidth(),i=t.outerHeight(),o=n.outerHeight(),s=t[0].ownerDocument,a=s.documentElement,l=a.clientHeight,c=a.clientWidth+e(s).scrollLeft(),u=l+e(s).scrollTop(),d=n.offset();return d.top+=o,d.left-=Math.min(d.left,d.left+r>c&&c>r?Math.abs(d.left+r-c):0),d.top-=Math.min(d.top,d.top+i>u&&u>i?Math.abs(i+o-0):0),d}(G,fe))),Ve(),v.showPalette&&_e(),W.trigger("reflow.spectrum"))}function He(){De(),q=!0,W.attr("disabled",!0),fe.addClass("sp-disabled")}!function(){if(i&&G.find("*:not(input)").attr("unselectable","on"),xe(),de&&W.after(he).hide(),we||se.hide(),b)W.after(G).hide();else{var t="parent"===v.appendTo?W.parent():e(v.appendTo);1!==t.length&&(t=e("body")),t.append(G)}function n(t){return t.data&&t.data.ignore?(Le(e(t.target).closest(".sp-thumb-el").data("color")),Re()):(Le(e(t.target).closest(".sp-thumb-el").data("color")),Re(),ze(!0),v.hideAfterPaletteSelect&&De()),!1}Oe(),fe.bind("click.spectrum touchstart.spectrum",(function(t){q||Ee(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()})),(W.is(":disabled")||!0===v.disabled)&&He(),G.click(h),ne.change(Te),ne.bind("paste",(function(){setTimeout(Te,1)})),ne.keydown((function(e){13==e.keyCode&&Te()})),oe.text(v.cancelText),oe.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),Ie(),De()})),se.attr("title",v.clearText),se.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),ye=!0,Re(),b&&ze(!0)})),ae.text(v.chooseText),ae.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),i&&ne.is(":focus")&&ne.trigger("change"),ne.hasClass("sp-validation-error")||(ze(!0),De())})),le.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),le.bind("click.spectrum",(function(e){e.stopPropagation(),e.preventDefault(),v.showPaletteOnly=!v.showPaletteOnly,v.showPaletteOnly||b||G.css("left","-="+(K.outerWidth(!0)+5)),xe()})),p(ee,(function(e,t,n){R=e/A,ye=!1,n.shiftKey&&(R=Math.round(10*R)/10),Re()}),je,ke),p(X,(function(e,t){I=parseFloat(t/P),ye=!1,v.showAlpha||(R=1),Re()}),je,ke),p(Y,(function(e,t,n){if(n.shiftKey){if(!U){var r=T-N*T,i=Math.abs(e-L*k)>Math.abs(t-r);U=i?"x":"y"}}else U=null;var o=!U||"y"===U;(!U||"x"===U)&&(L=parseFloat(e/k)),o&&(N=parseFloat((T-t)/T)),ye=!1,v.showAlpha||(R=1),Re()}),je,ke),ge?(Le(ge),Fe(),ve=v.preferredFormat||S(ge).format,Ce(ge)):Fe(),b&&Pe();var r=i?"mousedown.spectrum":"click.spectrum touchstart.spectrum";re.delegate(".sp-thumb-el",r,n),ie.delegate(".sp-thumb-el:nth-child(1)",r,{ignore:!0},n)}();var Ue={show:Pe,hide:De,toggle:Ee,reflow:Be,option:function(n,r){return n===t?e.extend({},v):r===t?v[n]:(v[n]=r,"preferredFormat"===n&&(ve=v.preferredFormat),void xe())},enable:function(){q=!1,W.attr("disabled",!1),fe.removeClass("sp-disabled")},disable:He,offset:function(e){v.offset=e,Be()},set:function(e){Le(e),ze()},get:Ne,destroy:function(){W.show(),fe.unbind("click.spectrum touchstart.spectrum"),G.remove(),he.remove(),r[Ue.id]=null},container:G};return Ue.id=r.push(Ue)-1,Ue}function d(){}function h(e){e.stopPropagation()}function f(e,t){var n=Array.prototype.slice,r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}function p(t,n,r,o){n=n||function(){},r=r||function(){},o=o||function(){};var s=document,a=!1,l={},c=0,u=0,d="ontouchstart"in window,h={};function f(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function p(e){if(a){if(i&&s.documentMode<9&&!e.button)return g();var r=e&&e.touches&&e.touches[0],o=r&&r.pageY||e.pageY,h=Math.max(0,Math.min((r&&r.pageX||e.pageX)-l.left,u)),p=Math.max(0,Math.min(o-l.top,c));d&&f(e),n.apply(t,[h,p,e])}}function g(){a&&(e(s).unbind(h),e(s.body).removeClass("sp-dragging"),setTimeout((function(){o.apply(t,arguments)}),0)),a=!1}h.selectstart=f,h.dragstart=f,h["touchmove mousemove"]=p,h["touchend mouseup"]=g,e(t).bind("touchstart mousedown",(function(n){(n.which?3==n.which:2==n.button)||a||!1!==r.apply(t,arguments)&&(a=!0,c=e(t).height(),u=e(t).width(),l=e(t).offset(),e(s).bind(h),e(s.body).addClass("sp-dragging"),p(n),f(n))}))}function g(){return e.fn.spectrum.inputTypeColorSupport()}var m="spectrum.id";e.fn.spectrum=function(t,n){if("string"==typeof t){var i=this,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=r[e(this).data(m)];if(n){var s=n[t];if(!s)throw new Error("Spectrum: no such method: '"+t+"'");"get"==t?i=n.get():"container"==t?i=n.container:"option"==t?i=n.option.apply(n,o):"destroy"==t?(n.destroy(),e(this).removeData(m)):s.apply(n,o)}})),i}return this.spectrum("destroy").each((function(){var n=u(this,e.extend({},t,e(this).data()));e(this).data(m,n.id)}))},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=p,e.fn.spectrum.defaults=n,e.fn.spectrum.inputTypeColorSupport=function t(){if(void 0===t._cachedResult){var n=e("<input type='color'/>")[0];t._cachedResult="color"===n.type&&""!==n.value}return t._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!g()&&t.spectrum({preferredFormat:"hex6"})};var v=/^[\s,#]+/,b=/\s+$/,y=0,w=Math,x=w.round,O=w.min,C=w.max,_=w.random,S=function e(t,n){if(n=n||{},(t=t||"")instanceof e)return t;if(!(this instanceof e))return new e(t,n);var r=function(e){var t,n,r={r:0,g:0,b:0},i=1,o=!1,s=!1;return"string"==typeof e&&(e=function(e){e=e.replace(v,"").replace(b,"").toLowerCase();var t,n,r=!1;if(U[e])e=U[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=ee.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=ee.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=ee.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=ee.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=ee.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=ee.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=ee.hex8.exec(e))?{a:(n=t[1],K(n)/255),r:K(t[2]),g:K(t[3]),b:K(t[4]),format:r?"name":"hex8"}:(t=ee.hex6.exec(e))?{r:K(t[1]),g:K(t[2]),b:K(t[3]),format:r?"name":"hex"}:!!(t=ee.hex3.exec(e))&&{r:K(t[1]+""+t[1]),g:K(t[2]+""+t[2]),b:K(t[3]+""+t[3]),format:r?"name":"hex"}}(e)),"object"==c()(e)&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=e.g,n=e.b,r={r:255*q(e.r,255),g:255*q(t,255),b:255*q(n,255)},o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=Z(e.s),e.v=Z(e.v),r=function(e,t,n){e=6*q(e,360),t=q(t,100),n=q(n,100);var r=w.floor(e),i=e-r,o=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=r%6;return{r:255*[n,s,o,o,a,n][l],g:255*[a,n,n,s,o,o][l],b:255*[o,o,a,n,n,s][l]}}(e.h,e.s,e.v),o=!0,s="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=Z(e.s),e.l=Z(e.l),r=function(e,t,n){var r,i,o;function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=q(e,360),t=q(t,100),n=q(n,100),0===t)r=i=o=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=s(l,a,e+1/3),i=s(l,a,e),o=s(l,a,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,e.s,e.l),o=!0,s="hsl"),e.hasOwnProperty("a")&&(i=e.a)),i=W(i),{ok:o,format:e.format||s,r:O(255,C(r.r,0)),g:O(255,C(r.g,0)),b:O(255,C(r.b,0)),a:i}}(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=x(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=x(this._r)),this._g<1&&(this._g=x(this._g)),this._b<1&&(this._b=x(this._b)),this._ok=r.ok,this._tc_id=y++};function j(e,t,n){e=q(e,255),t=q(t,255),n=q(n,255);var r,i,o=C(e,t,n),s=O(e,t,n),a=(o+s)/2;if(o==s)r=i=0;else{var l=o-s;switch(i=a>.5?l/(2-o-s):l/(o+s),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:a}}function k(e,t,n){e=q(e,255),t=q(t,255),n=q(n,255);var r,i,o=C(e,t,n),s=O(e,t,n),a=o,l=o-s;if(i=0===o?0:l/o,o==s)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:a}}function T(e,t,n,r){var i=[Y(x(e).toString(16)),Y(x(t).toString(16)),Y(x(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function E(e,t,n,r){var i;return[Y((i=r,Math.round(255*parseFloat(i)).toString(16))),Y(x(e).toString(16)),Y(x(t).toString(16)),Y(x(n).toString(16))].join("")}function P(e,t){t=0===t?0:t||10;var n=S(e).toHsl();return n.s-=t/100,n.s=G(n.s),S(n)}function A(e,t){t=0===t?0:t||10;var n=S(e).toHsl();return n.s+=t/100,n.s=G(n.s),S(n)}function M(e){return S(e).desaturate(100)}function D(e,t){t=0===t?0:t||10;var n=S(e).toHsl();return n.l+=t/100,n.l=G(n.l),S(n)}function I(e,t){t=0===t?0:t||10;var n=S(e).toRgb();return n.r=C(0,O(255,n.r-x(-t/100*255))),n.g=C(0,O(255,n.g-x(-t/100*255))),n.b=C(0,O(255,n.b-x(-t/100*255))),S(n)}function L(e,t){t=0===t?0:t||10;var n=S(e).toHsl();return n.l-=t/100,n.l=G(n.l),S(n)}function N(e,t){var n=S(e).toHsl(),r=(x(n.h)+t)%360;return n.h=r<0?360+r:r,S(n)}function R(e){var t=S(e).toHsl();return t.h=(t.h+180)%360,S(t)}function F(e){var t=S(e).toHsl(),n=t.h;return[S(e),S({h:(n+120)%360,s:t.s,l:t.l}),S({h:(n+240)%360,s:t.s,l:t.l})]}function V(e){var t=S(e).toHsl(),n=t.h;return[S(e),S({h:(n+90)%360,s:t.s,l:t.l}),S({h:(n+180)%360,s:t.s,l:t.l}),S({h:(n+270)%360,s:t.s,l:t.l})]}function z(e){var t=S(e).toHsl(),n=t.h;return[S(e),S({h:(n+72)%360,s:t.s,l:t.l}),S({h:(n+216)%360,s:t.s,l:t.l})]}function B(e,t,n){t=t||6,n=n||30;var r=S(e).toHsl(),i=360/n,o=[S(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(S(r));return o}function H(e,t){t=t||6;for(var n=S(e).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/t;t--;)s.push(S({h:r,s:i,v:o})),o=(o+a)%1;return s}S.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=W(e),this._roundA=x(100*this._a)/100,this},toHsv:function(){var e=k(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=k(this._r,this._g,this._b),t=x(360*e.h),n=x(100*e.s),r=x(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=j(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=j(this._r,this._g,this._b),t=x(360*e.h),n=x(100*e.s),r=x(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return T(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return E(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:x(this._r),g:x(this._g),b:x(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+x(this._r)+", "+x(this._g)+", "+x(this._b)+")":"rgba("+x(this._r)+", "+x(this._g)+", "+x(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:x(100*q(this._r,255))+"%",g:x(100*q(this._g,255))+"%",b:x(100*q(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+x(100*q(this._r,255))+"%, "+x(100*q(this._g,255))+"%, "+x(100*q(this._b,255))+"%)":"rgba("+x(100*q(this._r,255))+"%, "+x(100*q(this._g,255))+"%, "+x(100*q(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&($[T(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+E(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";return e&&(n=S(e).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1;return t||!(this._a<1&&this._a>=0)||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(D,arguments)},brighten:function(){return this._applyModification(I,arguments)},darken:function(){return this._applyModification(L,arguments)},desaturate:function(){return this._applyModification(P,arguments)},saturate:function(){return this._applyModification(A,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(N,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(B,arguments)},complement:function(){return this._applyCombination(R,arguments)},monochromatic:function(){return this._applyCombination(H,arguments)},splitcomplement:function(){return this._applyCombination(z,arguments)},triad:function(){return this._applyCombination(F,arguments)},tetrad:function(){return this._applyCombination(V,arguments)}},S.fromRatio=function(e,t){if("object"==c()(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:Z(e[r]));e=n}return S(e,t)},S.equals=function(e,t){return!(!e||!t)&&S(e).toRgbString()==S(t).toRgbString()},S.random=function(){return S.fromRatio({r:_(),g:_(),b:_()})},S.mix=function(e,t,n){n=0===n?0:n||50;var r,i=S(e).toRgb(),o=S(t).toRgb(),s=n/100,a=2*s-1,l=o.a-i.a,c=1-(r=((r=a*l==-1?a:(a+l)/(1+a*l))+1)/2);return S({r:o.r*r+i.r*c,g:o.g*r+i.g*c,b:o.b*r+i.b*c,a:o.a*s+i.a*(1-s)})},S.readability=function(e,t){var n=S(e),r=S(t),i=n.toRgb(),o=r.toRgb(),s=n.getBrightness(),a=r.getBrightness(),l=Math.max(i.r,o.r)-Math.min(i.r,o.r)+Math.max(i.g,o.g)-Math.min(i.g,o.g)+Math.max(i.b,o.b)-Math.min(i.b,o.b);return{brightness:Math.abs(s-a),color:l}},S.isReadable=function(e,t){var n=S.readability(e,t);return n.brightness>125&&n.color>500},S.mostReadable=function(e,t){for(var n=null,r=0,i=!1,o=0;o<t.length;o++){var s=S.readability(e,t[o]),a=s.brightness>125&&s.color>500,l=s.brightness/125*3+s.color/500;(a&&!i||a&&i&&l>r||!a&&!i&&l>r)&&(i=a,r=l,n=S(t[o]))}return n};var U=S.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},$=S.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(U);function W(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function q(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=O(t,C(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),w.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function G(e){return O(1,C(0,e))}function K(e){return parseInt(e,16)}function Y(e){return 1==e.length?"0"+e:""+e}function Z(e){return e<=1&&(e=100*e+"%"),e}var X,J,Q,ee=(J="[\\s|\\(]+("+(X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",Q="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",{rgb:new RegExp("rgb"+J),rgba:new RegExp("rgba"+Q),hsl:new RegExp("hsl"+J),hsla:new RegExp("hsla"+Q),hsv:new RegExp("hsv"+J),hsva:new RegExp("hsva"+Q),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=S,e((function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()}))}(f),t.a=u.a.extend({template:function(){var e=this.ppfx;return'\n      <div class="'.concat(this.holderClass(),'"></div>\n      <div class="').concat(e,'field-colorp">\n        <div class="').concat(e,'field-colorp-c" data-colorp-c>\n          <div class="').concat(e,'checker-bg"></div>\n        </div>\n      </div>\n    ')},inputClass:function(){var e=this.ppfx;return"".concat(e,"field ").concat(e,"field-color")},holderClass:function(){return"".concat(this.ppfx,"input-holder")},setValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model.get("defaults"),r=Object(a.isUndefined)(e)?Object(a.isUndefined)(n)?"":n:e,i=this.getInputEl(),o=this.getColorEl(),s="none"!=r?r:"";i.value=r,o.get(0).style.backgroundColor=s,(t.fromTarget||t.fromInput&&!t.avoidStore)&&(o.spectrum("set",s),this.noneColor="none"==r)},getColorEl:function(){if(!this.colorEl){var e,t=this.em,n=this,r=this.ppfx,i=this.model,o=f('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),s=o.get(0).style,a=t&&t.config?t.config.el:"",l=t&&t.getConfig&&t.getConfig("colorPicker")||{},c=function(e){return(1==e.getAlpha()?e.toHexString():e.toRgbString()).replace(/ /g,"")},u=0;this.$el.find("[data-colorp-c]").append(o),o.spectrum(h(h(h({containerClassName:"".concat(r,"one-bg ").concat(r,"two-color"),appendTo:a||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"\u2a2f",palette:[]},l),i.get("colorPicker")||{}),{},{move:function(e){var t=c(e);s.backgroundColor=t,i.setValueFromInput(t,0)},change:function(e){u=1;var t=c(e);s.backgroundColor=t,i.setValueFromInput(0,0),i.setValueFromInput(t),n.noneColor=0},show:function(t){u=0,e=c(t)},hide:function(t){!u&&e&&(n.noneColor&&(e=""),s.backgroundColor=e,o.spectrum("set",e),i.setValueFromInput(e,0))}})),t&&t.on&&t.on("component:selected",(function(){u=1,o.spectrum("hide")})),this.colorEl=o}return this.colorEl},render:function(){return u.a.prototype.render.call(this),this.getColorEl(),this}})},function(e,t,n){!function(t){var n,r={},i={16:!1,18:!1,17:!1,91:!1},o="all",s={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(e){return a[e]||e.toUpperCase().charCodeAt(0)},c=[];for(n=1;n<20;n++)a["f"+n]=111+n;function u(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function d(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var h={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function f(e){for(n in i)i[n]=e[h[n]]}function p(e,t,n){var i,o;i=m(e),void 0===n&&(n=t,t="all");for(var s=0;s<i.length;s++)o=[],(e=i[s].split("+")).length>1&&(o=v(e),e=[e[e.length-1]]),(e=l(e=e[0]))in r||(r[e]=[]),r[e].push({shortcut:i[s],scope:t,method:n,key:i[s],mods:o})}for(n in s)p[n]=!1;function g(){return o||"all"}function m(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function v(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=s[t[n]];return t}function b(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}b(document,"keydown",(function(e){!function(e){var t,n,o,a,l,d;if(-1==u(c,t=e.keyCode)&&c.push(t),93!=t&&224!=t||(t=91),t in i)for(o in i[t]=!0,s)s[o]==t&&(p[o]=!0);else if(f(e),p.filter.call(this,e)&&t in r)for(d=g(),a=0;a<r[t].length;a++)if((n=r[t][a]).scope==d||"all"==n.scope){for(o in l=n.mods.length>0,i)(!i[o]&&u(n.mods,+o)>-1||i[o]&&-1==u(n.mods,+o))&&(l=!1);(0!=n.mods.length||i[16]||i[18]||i[17]||i[91])&&!l||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),b(document,"keyup",(function(e){var t,n=e.keyCode,r=u(c,n);if(r>=0&&c.splice(r,1),93!=n&&224!=n||(n=91),n in i)for(t in i[n]=!1,s)s[t]==n&&(p[t]=!1)})),b(window,"focus",(function(){for(n in i)i[n]=!1;for(n in s)p[n]=!1}));var y=t.key;t.key=p,t.key.setScope=function(e){o=e||"all"},t.key.getScope=g,t.key.deleteScope=function(e){var t,n,i;for(t in r)for(n=r[t],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=l(e)),-1!=u(c,e)},t.key.getPressedKeyCodes=function(){return c.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=y,e},t.key.unbind=function(e,t){var n,i,o,s,a,c=[];for(n=m(e),s=0;s<n.length;s++){if((i=n[s].split("+")).length>1&&(c=v(i),e=i[i.length-1]),e=l(e),void 0===t&&(t=g()),!r[e])return;for(o=0;o<r[e].length;o++)(a=r[e][o]).scope===t&&d(a.mods,c)&&(r[e][o]={})}},e.exports=p}(this)},function(e,t,n){"use strict";(function(e){var r=n(71),i=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function s(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function l(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}c(t.promise,r)}else(1===e._state?c:u)(t.promise,e._value)}))):e._deferreds.push(t)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void f((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(t){u(e,t)}var r,i}function u(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)l(e,e._deferreds[t]);e._deferreds=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,c(t,e))}),(function(e){n||(n=!0,u(t,e))}))}catch(e){if(n)return;n=!0,u(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(s);return l(this,new h(e,t,n)),n},a.prototype.finally=r.a,a.all=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function s(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(t){s(e,t)}),n)}r[e]=o,0==--i&&t(r)}catch(e){n(e)}}for(var a=0;a<r.length;a++)s(a,r[a])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)a.resolve(e[r]).then(t,n)}))},a._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){i(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=a}).call(this,n(78).setImmediate)},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=i.a.Model.extend({defaults:{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1},initialize:function(e){if(this.get("buttons").length){var t=n(41).default;this.set("buttons",new t(this.get("buttons")))}}});t.default=i.a.Collection.extend({model:o,deactivateAllExceptOne:function(e,t){this.forEach((function(n,r){n!==e&&(n.set("active",!1),t&&n.get("buttons").length&&n.get("buttons").deactivateAllExceptOne(e,t))}))},deactivateAll:function(e,t){var n=e||"";this.forEach((function(e){e.get("context")==n&&e!==t&&(e.set("active",!1,{silent:1}),e.trigger("updateActive",{fromCollection:1}))}))},disableAllButtons:function(e){var t=e||"";this.forEach((function(e,n){e.get("context")==t&&e.set("disable",!0)}))},disableAllButtonsExceptOne:function(e,t){this.forEach((function(n,r){n!==e&&(n.set("disable",!0),t&&n.get("buttons").length&&n.get("buttons").disableAllButtonsExceptOne(e,t))}))}})},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){var r=n(42);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t,n){!function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n].toLowerCase()]=!0;return t}e.defineMode("css",(function(t,n){var r=n.inline;n.propertyKeywords||(n=e.resolveMode("text/css"));var i,o,s=t.indentUnit,a=n.tokenHooks,l=n.documentTypes||{},c=n.mediaTypes||{},u=n.mediaFeatures||{},d=n.mediaValueKeywords||{},h=n.propertyKeywords||{},f=n.nonStandardPropertyKeywords||{},p=n.fontProperties||{},g=n.counterDescriptors||{},m=n.colorKeywords||{},v=n.valueKeywords||{},b=n.allowNested,y=!0===n.supportsAtComponent;function w(e,t){return i=t,e}function x(e,t){var n=e.next();if(a[n]){var r=a[n](e,t);if(!1!==r)return r}return"@"==n?(e.eatWhile(/[\w\\\-]/),w("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?w(null,"compare"):'"'==n||"'"==n?(t.tokenize=O(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),w("atom","hash")):"!"==n?(e.match(/^\s*\w*/),w("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),w("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?w(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?w("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?w(null,n):e.match(/[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/.test(e.current().toLowerCase())&&(t.tokenize=C),w("variable callee","variable")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),w("property","word")):w(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),w("number","unit")):e.match(/^-[\w\\\-]*/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?w("variable-2","variable-definition"):w("variable-2","variable")):e.match(/^\w+-/)?w("meta","meta"):void 0}function O(e){return function(t,n){for(var r,i=!1;null!=(r=t.next());){if(r==e&&!i){")"==e&&t.backUp(1);break}i=!i&&"\\"==r}return(r==e||!i&&")"!=e)&&(n.tokenize=null),w("string","string")}}function C(e,t){return e.next(),t.tokenize=e.match(/\s*[\"\')]/,!1)?null:O(")"),w(null,"(")}function _(e,t,n){this.type=e,this.indent=t,this.prev=n}function S(e,t,n,r){return e.context=new _(n,t.indentation()+(!1===r?0:s),e.context),n}function j(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function k(e,t,n){return P[n.context.type](e,t,n)}function T(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return k(e,t,n)}function E(e){var t=e.current().toLowerCase();o=v.hasOwnProperty(t)?"atom":m.hasOwnProperty(t)?"keyword":"variable"}var P={top:function(e,t,n){if("{"==e)return S(n,t,"block");if("}"==e&&n.context.prev)return j(n);if(y&&/@component/i.test(e))return S(n,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return S(n,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return S(n,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return n.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return S(n,t,"at");if("hash"==e)o="builtin";else if("word"==e)o="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return S(n,t,"interpolation");if(":"==e)return"pseudo";if(b&&"("==e)return S(n,t,"parens")}return n.context.type},block:function(e,t,n){if("word"==e){var r=t.current().toLowerCase();return h.hasOwnProperty(r)?(o="property","maybeprop"):f.hasOwnProperty(r)?(o="string-2","maybeprop"):b?(o=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")}return"meta"==e?"block":b||"hash"!=e&&"qualifier"!=e?P.top(e,t,n):(o="error","block")},maybeprop:function(e,t,n){return":"==e?S(n,t,"prop"):k(e,t,n)},prop:function(e,t,n){if(";"==e)return j(n);if("{"==e&&b)return S(n,t,"propBlock");if("}"==e||"{"==e)return T(e,t,n);if("("==e)return S(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)E(t);else if("interpolation"==e)return S(n,t,"interpolation")}else o+=" error";return"prop"},propBlock:function(e,t,n){return"}"==e?j(n):"word"==e?(o="property","maybeprop"):n.context.type},parens:function(e,t,n){return"{"==e||"}"==e?T(e,t,n):")"==e?j(n):"("==e?S(n,t,"parens"):"interpolation"==e?S(n,t,"interpolation"):("word"==e&&E(t),"parens")},pseudo:function(e,t,n){return"meta"==e?"pseudo":"word"==e?(o="variable-3",n.context.type):k(e,t,n)},documentTypes:function(e,t,n){return"word"==e&&l.hasOwnProperty(t.current())?(o="tag",n.context.type):P.atBlock(e,t,n)},atBlock:function(e,t,n){if("("==e)return S(n,t,"atBlock_parens");if("}"==e||";"==e)return T(e,t,n);if("{"==e)return j(n)&&S(n,t,b?"block":"top");if("interpolation"==e)return S(n,t,"interpolation");if("word"==e){var r=t.current().toLowerCase();o="only"==r||"not"==r||"and"==r||"or"==r?"keyword":c.hasOwnProperty(r)?"attribute":u.hasOwnProperty(r)?"property":d.hasOwnProperty(r)?"keyword":h.hasOwnProperty(r)?"property":f.hasOwnProperty(r)?"string-2":v.hasOwnProperty(r)?"atom":m.hasOwnProperty(r)?"keyword":"error"}return n.context.type},atComponentBlock:function(e,t,n){return"}"==e?T(e,t,n):"{"==e?j(n)&&S(n,t,b?"block":"top",!1):("word"==e&&(o="error"),n.context.type)},atBlock_parens:function(e,t,n){return")"==e?j(n):"{"==e||"}"==e?T(e,t,n,2):P.atBlock(e,t,n)},restricted_atBlock_before:function(e,t,n){return"{"==e?S(n,t,"restricted_atBlock"):"word"==e&&"@counter-style"==n.stateArg?(o="variable","restricted_atBlock_before"):k(e,t,n)},restricted_atBlock:function(e,t,n){return"}"==e?(n.stateArg=null,j(n)):"word"==e?(o="@font-face"==n.stateArg&&!p.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==n.stateArg&&!g.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,n){return"word"==e?(o="variable","keyframes"):"{"==e?S(n,t,"top"):k(e,t,n)},at:function(e,t,n){return";"==e?j(n):"{"==e||"}"==e?T(e,t,n):("word"==e?o="tag":"hash"==e&&(o="builtin"),"at")},interpolation:function(e,t,n){return"}"==e?j(n):"{"==e||";"==e?T(e,t,n):("word"==e?o="variable":"variable"!=e&&"("!=e&&")"!=e&&(o="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:r?"block":"top",stateArg:null,context:new _(r?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||x)(e,t);return n&&"object"==typeof n&&(i=n[1],n=n[0]),o=n,"comment"!=i&&(t.state=P[t.state](i,e,t)),o},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),n.prev&&("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type?(")"!=r||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"atBlock"!=n.type)||(i=Math.max(0,n.indent-s)):i=(n=n.prev).indent),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:n.lineComment,fold:"brace"}}));var n=["domain","regexp","url","url-prefix"],r=t(n),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(i),s=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],a=t(s),l=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],c=t(l),u=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=t(u),h=["border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],f=t(h),p=t(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),g=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),m=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],v=t(m),b=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],y=t(b),w=n.concat(i).concat(s).concat(l).concat(u).concat(h).concat(m).concat(b);function x(e,t){for(var n,r=!1;null!=(n=e.next());){if(r&&"/"==n){t.tokenize=null;break}r="*"==n}return["comment","comment"]}e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{documentTypes:r,mediaTypes:o,mediaFeatures:a,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:f,fontProperties:p,counterDescriptors:g,colorKeywords:v,valueKeywords:y,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:a,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:f,colorKeywords:v,valueKeywords:y,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:a,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:f,colorKeywords:v,valueKeywords:y,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:o,mediaFeatures:a,propertyKeywords:d,nonStandardPropertyKeywords:f,fontProperties:p,counterDescriptors:g,colorKeywords:v,valueKeywords:y,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css",helperType:"gss"})}(n(13))},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){e.DomComponents.clear(),e.CssComposer.clear()}}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(3),o=n(17);t.default={run:function(e){Object(r.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=e,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(e){this.toggleMove(),this.disableDragger()},onKeyUp:function(e){" "===Object(i.f)(e)&&this.editor.stopCommand(this.id)},enableDragger:function(e){this.toggleDragger(1,e)},disableDragger:function(e){this.toggleDragger(0,e)},toggleDragger:function(e,t){var n=this.canvasModel,r=this.em,i=this.dragger,s=e?"add":"remove";this.getCanvas().classList[s]("".concat(this.ppfx,"is__grabbing")),i||(i=new o.a({getPosition:function(){return{x:n.get("x"),y:n.get("y")}},setPosition:function(e){n.set({x:e.x,y:e.y})},onStart:function(e,t){r.trigger("canvas:move:start",t)},onDrag:function(e,t){r.trigger("canvas:move",t)},onEnd:function(e,t){r.trigger("canvas:move:end",t)}}),this.dragger=i),e?i.start(t):i.stop()},toggleMove:function(e){var t=this.ppfx,n=e?"add":"remove",r=e?"on":"off",o={on:i.u,off:i.t},s=this.getCanvas(),a=["".concat(t,"is__grab")];!e&&a.push("".concat(t,"is__grabbing")),a.forEach((function(e){return s.classList[n](e)})),o[r](document,"keyup",this.onKeyUp),o[r](s,"mousedown",this.enableDragger),o[r](document,"mouseup",this.disableDragger)}}},function(e,t,n){"use strict";n.r(t);var r=n(8),i=n.n(r),o=n(0);t.default={run:function(e,t){var n=this,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).component||e.getSelectedAll();return r=Object(o.isArray)(r)?i()(r):[r],e.select(null),r.forEach((function(e){if(!e||!e.get("removable"))return n.em.logWarning("The element is not removable",{component:e});e.remove()})),r}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(0),s=n(17);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default={run:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var i=r.target,a=r.event,c=r.mode,u=r.dragger,d=void 0===u?{}:u,h=l({doc:i.getEl().ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return n.guidesStatic},guidesTarget:function(){return n.guidesTarget}},d);this.setupGuides(),this.opts=r,this.editor=e,this.em=e.getModel(),this.target=i,this.isTran="translate"==c,this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var f=this.dragger;return f?f.setOptions(h):(f=new s.a(h),this.dragger=f),a&&f.start(a),this.toggleDrag(1),this.em.trigger("".concat("dmode",":start"),this.getEventOpts()),f},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach((function(e){var t=e.guide;t&&t.parentNode.removeChild(t)})),this.guides=[]},getGuidesContainer:function(){var e=this,t=this.guidesEl;if(!t){var n=this.editor,r=this.em,i=this.opts,s=n.getConfig("stylePrefix"),a=document.createElement("div"),l=document.createElement("div"),c='<div class="'.concat(s,"guide-info__line ").concat(s,'danger-bg">\n        <div class="').concat(s,"guide-info__content ").concat(s,'danger-color"></div>\n      </div>');(t=document.createElement("div")).className="".concat(s,"guides"),a.className="".concat(s,"guide-info ").concat(s,"guide-info__x"),l.className="".concat(s,"guide-info ").concat(s,"guide-info__y"),a.innerHTML=c,l.innerHTML=c,t.appendChild(a),t.appendChild(l),n.Canvas.getGlobalToolsEl().appendChild(t),this.guidesEl=t,this.elGuideInfoX=a,this.elGuideInfoY=l,this.elGuideInfoContentX=a.querySelector(".".concat(s,"guide-info__content")),this.elGuideInfoContentY=l.querySelector(".".concat(s,"guide-info__content")),r.on("canvas:update frame:scroll",Object(o.debounce)((function(){e.updateGuides(),i.debug&&e.guides.forEach((function(t){return e.renderGuide(t)}))}),200))}return t},getGuidesStatic:function(){var e=this,t=[],n=this.target.getEl(),r=n.parentNode,i=void 0===r?{}:r;return Object(o.each)(i.children,(function(r){return t=t.concat(n!==r?e.getElementGuides(r):[])})),t.concat(this.getElementGuides(i))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(e){var t,n,r=this;(e||this.guides).forEach((function(e){var i=e.origin,s=t===i?n:r.getElementPos(i);t=i,n=s,Object(o.each)(r.getGuidePosUpdate(e,s),(function(t,n){return e[n]=t})),e.originRect=s}))},getGuidePosUpdate:function(e,t){var n={},r=t.top,i=t.height,o=t.left,s=t.width;switch(e.type){case"t":n.y=r;break;case"b":n.y=r+i;break;case"l":n.x=o;break;case"r":n.x=o+s;break;case"x":n.x=o+s/2;break;case"y":n.y=r+i/2}return n},renderGuide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.guide||document.createElement("div"),n="px",r=e.active?2:1,i=t.children[0];return t.style="position: absolute; background-color: ".concat(e.active?"green":"red",";"),t.children.length||((i=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",t.appendChild(i)),e.y?(t.style.width="100%",t.style.height="".concat(r).concat(n),t.style.top="".concat(e.y).concat(n),t.style.left=0):(t.style.width="".concat(r).concat(n),t.style.height="100%",t.style.left="".concat(e.x).concat(n),t.style.top="0".concat(n)),!e.guide&&this.guidesContainer.appendChild(t),t},getElementPos:function(e){return this.editor.Canvas.getElementPos(e,{noScroll:1})},getElementGuides:function(e){var t=this,n=this.opts,r=this.getElementPos(e),i=r.top,o=r.height,s=r.left,a=r.width,c=[{type:"t",y:i},{type:"b",y:i+o},{type:"l",x:s},{type:"r",x:s+a},{type:"x",x:s+a/2},{type:"y",y:i+o/2}].map((function(i){return l(l({},i),{},{origin:e,originRect:r,guide:n.debug&&t.renderGuide(i)})}));return c.forEach((function(e){return t.guides.push(e)})),c},getTranslate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=0;return(e||"").split(" ").forEach((function(e){var r=e.trim(),i="translate".concat(t.toUpperCase(),"(");0===r.indexOf(i)&&(n=parseFloat(r.replace(i,"")))})),n},setTranslate:function(e,t,n){var r="translate".concat(t.toUpperCase(),"("),i="".concat(r).concat(n,")"),o=(e||"").split(" ").map((function(e){return 0===e.trim().indexOf(r)&&(e=i),e})).join(" ");return o.indexOf(r)<0&&(o+=" ".concat(i)),o},getPosition:function(){var e=this.isTran,t=this.target.getStyle(),n=t.left,r=t.top,i=t.transform,o=0,s=0;return e?(o=this.getTranslate(i),s=this.getTranslate(i,"y")):(o=parseFloat(n),s=parseFloat(r)),{x:o,y:s}},setPosition:function(e){var t=e.y,n=e.end,r=e.position,i=e.width,s=e.height,a=this.target,l=this.isTran,c=n?"":1,u="".concat(e.x).concat("px"),d="".concat(t).concat("px");if(l){var h=a.getStyle().transform||"";return h=this.setTranslate(h,"x",u),h=this.setTranslate(h,"y",d),a.addStyle({transform:h,en:c},{avoidStore:!n})}var f={position:r,width:i,height:s},p={left:u,top:d,en:c};Object(o.keys)(f).forEach((function(e){var t=f[e];t&&(p[e]=t)})),a.addStyle(p,{avoidStore:!n})},_getDragData:function(){var e=this.target;return{target:e,parent:e.parent(),index:e.index()}},onStart:function(){var e=this.target,t=this.isTran,n=this.opts,r=n.center,i=n.onStart,o=this.editor.Canvas,s=e.getStyle();if(i&&i(this._getDragData()),!t&&"absolute"!==s.position){var a=o.offset(e.getEl()),l=a.left,c=a.top,u=a.width,d=a.height;if(r){var h=o.getMouseRelativeCanvas(event);l=h.x,c=h.y}this.setPosition({x:l,y:c,width:"".concat(u,"px"),height:"".concat(d,"px"),position:"absolute"})}},onDrag:function(){var e=this,t=this.guidesTarget,n=this.opts,r=n.onDrag;this.updateGuides(t),n.debug&&t.forEach((function(t){return e.renderGuide(t)})),n.guidesInfo&&this.renderGuideInfo(t.filter((function(e){return e.active}))),r&&r(this._getDragData())},onEnd:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.editor,i=this.id,o=this.opts.onEnd;o&&o(e,n,l(l({event:e},n),this._getDragData())),r.stopCommand(i),this.hideGuidesInfo(),this.em.trigger("".concat("dmode",":end"),this.getEventOpts())},hideGuidesInfo:function(){var e=this;["X","Y"].forEach((function(t){var n=e["elGuideInfo".concat(t)];n&&(n.style.display="none")}))},renderGuideInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.guidesStatic;this.hideGuidesInfo(),t.forEach((function(t){var r=t.x,i=e.getElementPos(t.origin),s=Object(o.isUndefined)(r)?"y":"x",a="y"===s,c=i[a?"left":"top"],u=i.rect[a?"left":"top"],d=a?c+i.width:c+i.height,h=a?u+i.rect.width:u+i.rect.height,f=e["elGuideInfo".concat(s.toUpperCase())],p=e["elGuideInfoContent".concat(s.toUpperCase())],g=f.style,m=n.filter((function(e){return e.type===t.type})).map((function(e){var t=e.originRect,n=t.left,r=t.top,i=a?n+t.width:r+t.height;return{gap:i<c?c-i:(a?n:r)-d,guide:e}})).filter((function(e){return e.gap>0})).sort((function(e,t){return e.gap-t.gap})).map((function(e){return e.guide}))[0];if(m){var v=m.originRect,b=v.left,y=v.top,w=v.rect,x=a?b<i.left:y<i.top,O=a?b:y,C=a?w.left:w.top,_=a?b+v.width:y+v.height,S=a?w.left+w.width:w.top+w.height,j=a?t.y:t.x,k=x?_:d,T="".concat(j,"px"),E=x?c-_:O-d,P=x?u-S:C-h;g.display="",g[a?"top":"left"]=T,g[a?"left":"top"]="".concat(k,"px"),g[a?"width":"height"]="".concat(E,"px"),p.innerHTML="".concat(Math.round(P),"px"),e.em.trigger("".concat("dmode",":active"),l(l({},e.getEventOpts()),{},{guide:t,guidesStatic:n,matched:m,posFirst:j,posSecond:k,size:E,sizeRaw:P,elGuideInfo:f,elGuideInfoCnt:p}))}}))},toggleDrag:function(e){var t=this.editor,n=e?"add":"remove",r=["".concat(this.ppfx,"is__grabbing")],i=t.Canvas,o=i.getBody();r.forEach((function(e){return o.classList[n](e)})),i[e?"startAutoscroll":"stopAutoscroll"]()}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){if(e.Canvas.hasFocus()){var t=[];e.getSelectedAll().forEach((function(e){var n=e.components(),r=n&&n.at(0);r&&t.push(r)})),t.length&&e.select(t)}}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.Canvas.hasFocus()||n.force){var r=[];e.getSelectedAll().forEach((function(e){for(var t=e.parent();t&&!t.get("selectable");)t=t.parent();t&&r.push(t)})),r.length&&e.select(r)}}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){if(e.Canvas.hasFocus()){var t=[];e.getSelectedAll().forEach((function(e){var n=e.collection,r=n.indexOf(e),i=n.at(r+1);t.push(i||e)})),t.length&&e.select(t)}}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){if(e.Canvas.hasFocus()){var t=[];e.getSelectedAll().forEach((function(e){var n=e.collection,r=n.indexOf(e),i=n.at(r-1);t.push(i&&r-1>=0?i:e)})),t.length&&e.select(t)}}}},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default={run:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).target,i=e.DomComponents,o=n.get("type"),s=i.getWrapper().findType(o).length,a=[];if(!s){var l=e.CssComposer.getAll(),c=n.get("style-signature");c=Object(r.isArray)(c)?c:[c],l.forEach((function(e){var t=e.selectorsToString();c.forEach((function(n){n&&t.indexOf(n)>=0&&a.push(e)}))})),l.remove(a)}return a}}},function(e,t,n){"use strict";n.r(t);var r=n(8),i=n.n(r);t.default={run:function(e){var t=e.getModel(),n=i()(e.getSelectedAll());n.length&&t.set("clipboard",n)}}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),o=n.n(i),s=n(14),a=o.a.$;t.default=Object(r.extend)({},s.default,{init:function(e){Object(r.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(e){e.stopPropagation();var t=a(e.target);t.data("model").get("removable")&&(t.addClass(this.hoverClass),this.attachBadge(t.get(0)))},stopDelete:function(e){e.stopPropagation(),a(e.target).removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(e){e.stopPropagation();var t=a(e.target);t.data("model").get("removable")&&(t.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(e){this.badge.html("Remove "+e.getName())}})},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r).a.$;t.default={run:function(e,t){var n=this;t&&t.set&&t.set("active",0);var r=e.getConfig(),o=e.Modal,s=r.stylePrefix;if(this.cm=e.CodeManager||null,!this.$editors){var a=this.buildEditor("htmlmixed","hopscotch","HTML"),l=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=a.el,this.cssEditor=l.el;var c=i('<div class="'.concat(s,'export-dl"></div>'));c.append(a.$el).append(l.$el),this.$editors=c}o.open({title:r.textViewCode,content:this.$editors}).getModel().once("change:open",(function(){return e.stopCommand(n.id)})),this.htmlEditor.setContent(e.getHtml()),this.cssEditor.setContent(e.getCss())},stop:function(e){var t=e.Modal;t&&t.close()},buildEditor:function(e,t,n){var r=document.createElement("textarea");!this.codeMirror&&(this.codeMirror=this.cm.getViewer("CodeMirror"));var i=this.codeMirror.clone().set({label:n,codeName:e,theme:t,input:r}),o=new this.cm.EditorView({model:i,config:this.cm.getConfig()}).render().$el;return i.init(r),{el:i,$el:o}}}},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default={isEnabled:function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement?1:0},enable:function(e){var t="";return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?(t="webkit",e.webkitRequestFullscreen()):e.mozRequestFullScreen?(t="moz",e.mozRequestFullScreen()):e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Fullscreen not supported"),t},disable:function(){var e=document;this.isEnabled()&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},fsChanged:function(e,t){document;var n=(e||"")+"fullscreenchange";this.isEnabled()||(this.stop(null,this.sender),document.removeEventListener(n,this.fsChanged))},run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.sender=t;var i=n.target,o=Object(r.isElement)(i)?i:document.querySelector(i),s=this.enable(o||e.getContainer());this.fsChanged=this.fsChanged.bind(this,s),document.addEventListener(s+"fullscreenchange",this.fsChanged),e.trigger("change:canvasOffset")},stop:function(e,t){t&&t.set&&t.set("active",!1),this.disable(),e&&e.trigger("change:canvasOffset")}}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),o=n.n(i),s=n(3),a=n(14),l=n(27),c=o.a.$;t.default=Object(r.extend)({},l.default,a.default,{init:function(e){a.default.init.apply(this,arguments),Object(r.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=e,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.enable.apply(this,t),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var r=this.$wrapper;r.css("cursor","move"),r.on("mousedown",this.initSorter),r.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(e){var t=c(e.target).data("model").get("draggable");t&&(this.cacheEl=null,this.startSelectPosition(e.target,this.frameEl.contentDocument),this.sorter.draggable=t,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),Object(s.u)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(e){var t=e.get("draggable");t&&(this.cacheEl=null,this.startSelectPosition(e.view.el,this.frameEl.contentDocument),this.sorter.draggable=t,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),Object(s.u)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModels:function(e){this.cacheEl=null;var t=e[e.length-1],n=(this.em.get("currentFrame")||{}).model,r=t.getEl(n);this.startSelectPosition(r,r.ownerDocument,{onStart:this.onStart}),this.sorter.draggable=t.get("draggable"),this.sorter.toMove=e,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),Object(s.u)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){Object(s.t)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),Object(s.t)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(e,t){},rollback:function(e,t){(27==(e.which||e.keyCode)||t)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=c(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=c(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.stop.apply(this,t),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass),this.$wrapper.css("cursor","").unbind().removeClass(this.noSelClass)}})},function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.Modal,o=e.AssetManager,s=o.getConfig(),a=o.getContainer(),l=r.modalTitle||e.t("assetManager.modalTitle")||"",c=r.types,u=r.accept;if(o.setTarget(r.target),o.onClick(r.onClick),o.onDblClick(r.onDblClick),o.onSelect(r.onSelect),!this.rendered||c){var d=o.getAll().filter((function(e){return 1}));c&&c.length&&(d=d.filter((function(e){return-1!==c.indexOf(e.get("type"))}))),o.render(d),this.rendered=1}if(u){var h=a.querySelector("input#".concat(s.stylePrefix,"uploadFile"));h&&h.setAttribute("accept",u)}return i.open({title:l,content:a}).getModel().once("change:open",(function(){return e.stopCommand(n.id)})),this},stop:function(e){return e.Modal.close(),this}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t){var n=e.BlockManager,r=e.Panels;if(!this.blocks){n.render();var i="views-container",o=document.createElement("div"),s=r.getPanel(i)||r.addPanel({id:i});o.appendChild(n.getContainer()),s.set("appendContent",o).trigger("change:appendContent"),this.blocks=o}this.blocks.style.display="block"},stop:function(){var e=this.blocks;e&&(e.style.display="none")}}},function(e,t,n){"use strict";n.r(t);var r=n(1);n.n(r),t.default={run:function(e){var t=e.LayerManager,n=e.Panels;if(!this.layers){var r="views-container",i=document.createElement("div"),o=n.getPanel(r)||n.addPanel({id:r});i.appendChild(t.render()),o.set("appendContent",i).trigger("change:appendContent"),this.layers=i}this.layers.style.display="block"},stop:function(){var e=this.layers;e&&(e.style.display="none")}}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r).a.$;t.default={run:function(e,t){if(this.sender=t,!this.$cn){var n=e.getConfig(),r=e.Panels;this.$cn=i("<div></div>"),this.$cn2=i("<div></div>"),this.$cn.append(this.$cn2);var o=e.DeviceManager;o&&n.showDevices&&r.addPanel({id:"devices-c"}).set("appendContent",o.render()).trigger("change:appendContent");var s=e.SelectorManager;s&&this.$cn2.append(s.render([])),this.$cn2.append(e.StyleManager.render());var a=e.StyleManager.getConfig().stylePrefix;this.$header=i('<div class="'.concat(a,'header">').concat(e.t("styleManager.empty"),"</div>")),this.$cn.append(this.$header),this.panel=r.getPanel("views-container")?r.getPanel("views-container"):r.addPanel({id:"views-container"}),this.panel.set("appendContent",this.$cn).trigger("change:appendContent"),this.target=e.editor,this.listenTo(this.target,"component:toggled",this.toggleSm)}this.toggleSm()},toggleSm:function(){var e=this.target,t=this.sender;if(!t||!t.get||t.get("active")){var n=e.get("SelectorManager").getConfig().componentFirst,r=e.getSelectedAll().length;1===r||r>1&&n?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show())}},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r).a.$;t.default={run:function(e,t){this.sender=t;var n=e.getModel(),r=e.Config.stylePrefix,o=e.TraitManager;if(!this.$cn){var s=o.getTraitsViewer(),a=o.getConfig();this.$cn=i("<div></div>"),this.$cn2=i("<div></div>"),this.$cn.append(this.$cn2),this.$header=i("<div>").append('<div class="'.concat(a.stylePrefix,'header">').concat(n.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),this.$cn2.append('<div class="'.concat(r,'traits-label">').concat(n.t("traitManager.label"),"</div>")),this.$cn2.append(s.render().el);var l=e.Panels;(l.getPanel("views-container")?l.getPanel("views-container"):l.addPanel({id:"views-container"})).set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=e.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()},toggleTm:function(){var e=this.sender;e&&e.get&&!e.get("active")||(1===this.target.getSelectedAll().length?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default={run:function(e){var t=e.getModel().get("clipboard"),n=e.getSelected();t&&n&&(e.getSelectedAll().forEach((function(n){if(n){var i,o=n.collection,s=o.indexOf(n)+1,a=t.filter((function(e){return e.get("copyable")}));i=Object(r.contains)(t,n)&&n.get("copyable")?o.add(n.clone(),{at:s}):o.add(a.map((function(e){return e.clone()})),{at:s}),(i=Object(r.isArray)(i)?i:[i]).forEach((function(t){return e.trigger("component:paste",t)}))}})),n.emitUpdate())}}},function(e,t,n){"use strict";n.r(t);var r=n(0),i="sw-visibility";t.default={getPanels:function(e){return this.panels||(this.panels=e.Panels.getPanels()),this.panels},preventDrag:function(e){e.abort=1},tglPointers:function(e,t){var n=e.Canvas.getBody().querySelectorAll(".".concat(this.ppfx,"no-pointer"));Object(r.each)(n,(function(e){return e.style.pointerEvents=t?"":"all"}))},tglEffects:function(e){var t=this.em;t&&t[e?"on":"off"]("run:tlb-move:before",this.preventDrag)},run:function(e,t){var n=this;this.sender=t,this.shouldRunSwVisibility||(this.shouldRunSwVisibility=e.Commands.isActive(i)),this.shouldRunSwVisibility&&e.stopCommand(i),e.getModel().stopDefault();var r=this.getPanels(e),o=e.Canvas.getElement(),s=e.getEl(),a=e.Config.stylePrefix;if(!this.helper){var l=document.createElement("span");l.className="".concat(a,"off-prv fa fa-eye-slash"),s.appendChild(l),l.onclick=function(){return n.stopCommand()},this.helper=l}this.helper.style.display="inline-block",this.tglPointers(e),r.forEach((function(e){return e.set("visible",!1)}));var c=o.style;c.width="100%",c.height="100%",c.top="0",c.left="0",c.padding="0",c.margin="0",e.refresh(),this.tglEffects(1)},stop:function(e){var t=this.sender,n=void 0===t?{}:t;n.set&&n.set("active",0);var r=this.getPanels(e);this.shouldRunSwVisibility&&(e.runCommand(i),this.shouldRunSwVisibility=!1),e.getModel().runDefault(),r.forEach((function(e){return e.set("visible",!0)})),e.Canvas.getElement().setAttribute("style",""),this.helper&&(this.helper.style.display="none"),e.refresh(),this.tglPointers(e,1),this.tglEffects()}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e,t,n){var r=n||{},i=r.el||"",o=e.Canvas,s=this.canvasResizer,a=r.options||{},l=o.getCanvasView();return a.appendTo=o.getResizerEl(),a.prefix=e.getConfig().stylePrefix,a.posFetcher=l.getElementPos.bind(l),a.mousePosFetcher=o.getMouseRelativePos,s&&!r.forceNew||(this.canvasResizer=e.Utils.Resizer.init(a),s=this.canvasResizer),s.setOptions(a),s.blur(),s.focus(i),s},stop:function(){var e=this.canvasResizer;e&&e.blur()}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(1),s=n.n(o),a=n(0),l=n(3);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=s.a.$;t.default={getOffsetMethod:function(e){return"get"+(e||"")+"OffsetViewerEl"},run:function(e,t,n){var r=n||{},o=r.state||"",s=e.getConfig(),d=this.em.getZoomDecimal(),h=r.el||"";if(!s.showOffsets||Object(l.q)(h)||!s.showOffsetsSelected&&"Fixed"==o)e.stopCommand(this.id,n);else{var f=e.Canvas,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.elPos||f.getElementPos(h));Object(a.isUndefined)(r.top)||(p.top=r.top),Object(a.isUndefined)(r.left)||(p.left=r.left);var g=window.getComputedStyle(h),m=this.ppfx,v=o+"State",b=f[this.getOffsetMethod(o)](n.view);b.style.opacity="";var y=this["marginT"+o],w=this["marginB"+o],x=this["marginL"+o],O=this["marginR"+o],C=this["padT"+o],_=this["padB"+o],S=this["padL"+o],j=this["padR"+o];if(b.childNodes.length&&(this[v]="1",y=b.querySelector("[data-offset-m-t]"),w=b.querySelector("[data-offset-m-b]"),x=b.querySelector("[data-offset-m-l]"),O=b.querySelector("[data-offset-m-r]"),C=b.querySelector("[data-offset-p-t]"),_=b.querySelector("[data-offset-p-b]"),S=b.querySelector("[data-offset-p-l]"),j=b.querySelector("[data-offset-p-r]")),!this[v]){var k=o.toLowerCase(),T=k+"margin-v",E=k+"padding-v",P=u('<div class="'.concat(m,'marginName">')).get(0),A=u('<div class="'.concat(m,'paddingName">')).get(0),M=m+E+"-el",D="".concat(m+T+"-el"," ").concat(m+T),I="".concat(M," ").concat(m+E);y=u('<div class="'.concat(D,'-top"></div>')).get(0),w=u('<div class="'.concat(D,'-bottom"></div>')).get(0),x=u('<div class="'.concat(D,'-left"></div>')).get(0),O=u('<div class="'.concat(D,'-right"></div>')).get(0),C=u('<div class="'.concat(I,'-top"></div>')).get(0),_=u('<div class="'.concat(I,'-bottom"></div>')).get(0),S=u('<div class="'.concat(I,'-left"></div>')).get(0),j=u('<div class="'.concat(I,'-right"></div>')).get(0),this["marginT"+o]=y,this["marginB"+o]=w,this["marginL"+o]=x,this["marginR"+o]=O,this["padT"+o]=C,this["padB"+o]=_,this["padL"+o]=S,this["padR"+o]=j,P.appendChild(y),P.appendChild(w),P.appendChild(x),P.appendChild(O),A.appendChild(C),A.appendChild(_),A.appendChild(S),A.appendChild(j),b.appendChild(P),b.appendChild(A),this[v]="1"}var L=parseFloat(g.marginLeft.replace("px",""))*d,N=parseFloat(g.marginRight.replace("px",""))*d,R=parseFloat(g.marginTop.replace("px",""))*d,F=parseFloat(g.marginBottom.replace("px",""))*d,V=y.style,z=w.style,B=x.style,H=O.style,U=C.style,$=_.style,W=S.style,q=j.style,G=parseFloat(p.left),K=parseFloat(g.width)*d+"px";V.height=R+"px",V.width=K,V.top=p.top-R+"px",V.left=G+"px",z.height=F+"px",z.width=K,z.top=p.top+p.height+"px",z.left=G+"px";var Y=p.height+R+F+"px",Z=p.top-R+"px";B.height=Y,B.width=L+"px",B.top=Z,B.left=G-L+"px",H.height=Y,H.width=N+"px",H.top=Z,H.left=G+p.width+"px";var X=parseFloat(g.paddingTop)*d;U.height=X+"px";var J=parseFloat(g.paddingBottom)*d;$.height=J+"px";var Q=p.height-J-X+"px",ee=p.top+X+"px";W.height=Q,W.width=parseFloat(g.paddingLeft)*d+"px",W.top=ee;var te=parseFloat(g.paddingRight)*d;q.height=Q,q.width=te+"px",q.top=ee}},stop:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getOffsetMethod((n||{}).state||"");e.Canvas[r](n.view).style.opacity=0}}},function(e,t,n){"use strict";n.r(t),t.default={run:function(e){this.toggleVis(e)},stop:function(e){this.toggleVis(e,0)},toggleVis:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e.Commands.isActive("preview")){var r=n?"add":"remove";e.Canvas.getFrames().forEach((function(e){e.view.getBody().classList[r]("".concat(t.ppfx,"dashed"))}))}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o={stylePrefix:"",appendTo:"",sortable:1,hidable:1,hideTextnode:1,root:"",showWrapper:1,showHover:1,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:1},s=n(36),a=n(0);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={};return{name:"LayerManager",init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(n=c(c({},o),t)).stylePrefix=t.pStylePrefix,e=n.em,this},getConfig:function(){return n},onLoad:function(){t=new s.a({level:0,config:n,opened:n.opened||{},model:e.get("DomComponents").getWrapper()}),e&&e.on("component:selected",this.componentChanged),this.componentChanged()},postRender:function(){var e=n.appendTo,t=n.root;t&&this.setRoot(t),e&&(Object(a.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},setRoot:function(e){return t.setRoot(e),this},getRoot:function(){return t.model},getAll:function(){return t},componentChanged:function(t){if(!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fromLayers){var r=e.get("opened"),i=e.getSelected(),o=n.scrollLayers,s=i&&i.collection?i.collection.parent:null;for(var a in r)r[a].set("open",0);for(;s;)s.set("open",1),r[s.cid]=s,s=s.collection?s.collection.parent:null;if(i&&o){var l=i.viewLayer&&i.viewLayer.el;l&&l.scrollIntoView(o)}}},render:function(){return t.render().el},destroy:function(){return t&&t.remove()}}}},function(e,t,n){var r,i,o;i=[n(0),n(1)],void 0===(o="function"==typeof(r=function(e,t){var n=Array.prototype.slice;function r(e,t,n){return n.length<=4?e.call(t,n[0],n[1],n[2],n[3]):e.apply(t,n)}function i(e,t){return n.call(e,t)}function o(t,n){return null!=t&&(e.isArray(n)||(n=i(arguments,1)),e.all(n,(function(e){return e in t})))}var s,a,l=(s=!1,a=-1,function(){return s||(a++,s=!0,e.defer((function(){s=!1}))),a});function c(){this.registeredObjects=[],this.cidIndexes=[]}function u(t,n,r,i){for(var o,s=0,a=n.length;s<a;s++)if(o=n[s]){if("on"===t){if(!i.objectRegistry.register(o))continue}else if(!i.objectRegistry.unregister(o))continue;e.isFunction(o[t])&&o[t]("all",r,i)}}function d(t,n){var r=n.type,i=n.undoTypes,o=!i[r]||i[r][t];e.isFunction(o)&&o(n.object,n.before,n.after,n.options)}function h(t,r,i,o,s){if(!(i.isCurrentlyUndoRedoing||"undo"===t&&-1===i.pointer||"redo"===t&&i.pointer===i.length-1)){i.isCurrentlyUndoRedoing=!0;var a,l,c="undo"===t;for(s?l=c&&i.pointer===i.length-1||!c&&-1===i.pointer?e.clone(i.models):n.apply(i.models,c?[0,i.pointer]:[i.pointer,i.length-1]):(a=i.at(c?i.pointer:i.pointer+1),l=o?i.where({magicFusionIndex:a.get("magicFusionIndex")}):[a]),i.pointer+=(c?-1:1)*l.length;a=c?l.pop():l.shift();)a[t]();i.isCurrentlyUndoRedoing=!1,r.trigger(t,r)}}function f(e,t,n,i){if(e.track&&!e.isCurrentlyUndoRedoing&&t in i&&function(e,t){var n=e.condition,i=typeof n;return"function"===i?!!r(n,e,t):"boolean"!==i||n}(i[t],n)){var s=r(i[t].on,i[t],n);if(o(s,"object","before","after")){if(s.type=t,s.magicFusionIndex=l(),s.undoTypes=i,e.pointer<e.length-1)for(var a=e.length-e.pointer-1;a--;)e.pop();e.pointer=e.length,e.add(s),e.length>e.maximumStackLength&&(e.shift(),e.pointer--)}}}c.prototype={isRegistered:function(t){return t&&t.cid?this.registeredObjects[t.cid]:e.contains(this.registeredObjects,t)},register:function(e){return!this.isRegistered(e)&&(e&&e.cid?(this.registeredObjects[e.cid]=e,this.cidIndexes.push(e.cid)):this.registeredObjects.push(e),!0)},unregister:function(t){if(this.isRegistered(t)){if(t&&t.cid)delete this.registeredObjects[t.cid],this.cidIndexes.splice(e.indexOf(this.cidIndexes,t.cid),1);else{var n=e.indexOf(this.registeredObjects,t);this.registeredObjects.splice(n,1)}return!0}return!1},get:function(){return e.map(this.cidIndexes,(function(e){return this.registeredObjects[e]}),this).concat(this.registeredObjects)}};var p={add:{undo:function(e,t,n,r){e.remove(n,r)},redo:function(e,t,n,r){r.index&&(r.at=r.index),e.add(n,r)},on:function(t,n,r){return{object:n,before:void 0,after:t,options:e.clone(r)}}},remove:{undo:function(e,t,n,r){"index"in r&&(r.at=r.index),e.add(t,r)},redo:function(e,t,n,r){e.remove(t,r)},on:function(t,n,r){return{object:n,before:t,after:void 0,options:e.clone(r)}}},change:{undo:function(t,n,r,i){e.isEmpty(n)?e.each(e.keys(r),t.unset,t):(t.set(n),i&&i.unsetData&&i.unsetData.before&&i.unsetData.before.length&&e.each(i.unsetData.before,t.unset,t))},redo:function(t,n,r,i){e.isEmpty(r)?e.each(e.keys(n),t.unset,t):(t.set(r),i&&i.unsetData&&i.unsetData.after&&i.unsetData.after.length&&e.each(i.unsetData.after,t.unset,t))},on:function(t,n){var r=t.changedAttributes(),i=e.keys(r),o=e.pick(t.previousAttributes(),i),s=e.keys(o),a=(n||(n={})).unsetData={after:[],before:[]};return i.length!=s.length&&(i.length>s.length?e.each(i,(function(e){e in o||a.before.push(e)}),this):e.each(s,(function(e){e in r||a.after.push(e)}))),{object:t,before:o,after:r,options:e.clone(n)}}},reset:{undo:function(e,t,n){e.reset(t)},redo:function(e,t,n){e.reset(n)},on:function(t,n){return{object:t,before:n.previousModels,after:e.clone(t.models)}}}};function g(){}function m(t,n,r,i){if("object"==typeof n)return e.each(n,(function(e,n){2===t?m(t,e,r,i):m(t,n,e,r)}));switch(t){case 0:o(r,"undo","redo","on")&&e.all(e.pick(r,"undo","redo","on"),e.isFunction)&&(i[n]=r);break;case 1:i[n]&&e.isObject(r)&&(i[n]=e.extend({},i[n],r));break;case 2:delete i[n]}return this}g.prototype=p;var v=t.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(e){d("undo",this.attributes)},redo:function(e){d("redo",this.attributes)}}),b=t.Collection.extend({model:v,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(e){this.maximumStackLength=e}}),y=t.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(t){this.stack=new b,this.objectRegistry=new c,this.undoTypes=new g,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",(function(e,t){this.stack.setMaxLength(t)}),this),t&&t.track&&this.startTracking(),t&&t.register&&(e.isArray(t.register)||e.isArguments(t.register)?r(this.register,this,t.register):this.register(t.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(e){f(this.stack,e,i(arguments,1),this.undoTypes)},register:function(){u("on",arguments,this._addToStack,this)},unregister:function(){u("off",arguments,this._addToStack,this)},unregisterAll:function(){r(this.unregister,this,this.objectRegistry.get())},undo:function(e){h("undo",this,this.stack,e)},undoAll:function(){h("undo",this,this.stack,!1,!0)},redo:function(e){h("redo",this,this.stack,e)},redoAll:function(){h("redo",this,this.stack,!1,!0)},isAvailable:function(e){var t=this.stack,n=t.length;switch(e){case"undo":return n>0&&t.pointer>-1;case"redo":return n>0&&t.pointer<n-1;default:return!1}},merge:function(t){for(var n,r=e.isArray(t)?t:i(arguments);n=r.pop();)n instanceof y&&n.stack instanceof b&&(n.stack=this.stack)},addUndoType:function(e,t){m(0,e,t,this.undoTypes)},changeUndoType:function(e,t){m(1,e,t,this.undoTypes)},removeUndoType:function(e){m(2,e,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return e.extend(y,{defaults:function(t){e.extend(y.prototype.defaults,t)},addUndoType:function(e,t){m(0,e,t,p)},changeUndoType:function(e,t){m(1,e,t,p)},removeUndoType:function(e){m(2,e,void 0,p)}}),t.UndoManager=y})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(e,t,n){var r=n(86),i=n(87),o=n(43),s=n(88);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||s()}},function(e,t,n){var r=n(42);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t);var r=n(9),i=n.n(r),o=n(2),s=n.n(o),a=n(0),l=n(39),c=n.n(l);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t={},n={defaults:{"core:undo":{keys:"\u2318+z, ctrl+z",handler:"core:undo"},"core:redo":{keys:"\u2318+shift+z, ctrl+shift+z",handler:"core:redo"},"core:copy":{keys:"\u2318+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"\u2318+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:1}}}};return{keymaster:c.a,name:"Keymaps",getConfig:function(){return e},init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=d(d({},n),t),this.em=e.em,this},onLoad:function(){var t=e.defaults;for(var n in t){var r=t[n];this.add(n,r.keys,r.handler,r.opts||{})}},add:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=this.em,l=s.get("Commands"),u=s.getEditor(),d=s.get("Canvas"),h={id:e,keys:n,handler:r};return t[e]&&this.remove(e),t[e]=h,c()(n,(function(t,n){var c={event:t,h:n};if(r=Object(a.isString)(r)?l.get(r):r,!s.isEditing()&&!u.Canvas.isInputFocused()||o.force){o.prevent&&d.getCanvasView().preventDefault(t),"object"==i()(r)?l.runCommand(r,c):r(u,0,c);var h=[e,n.shortcut,t];s.trigger.apply(s,["keymap:emit"].concat(h)),s.trigger.apply(s,["keymap:emit:".concat(e)].concat(h))}})),s.trigger("keymap:add",h),h},get:function(e){return t[e]},getAll:function(){return t},remove:function(e){var n=this.em,r=this.get(e);if(r)return delete t[e],c.a.unbind(r.keys),n&&n.trigger("keymap:remove",r),r},removeAll:function(){var e=this;return Object.keys(t).forEach((function(t){return e.remove(t)})),this}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(70),s=n.n(o);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r,i={maximumStackLength:500};return{name:"UndoManager",init:function(){n=l(l({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),i),this.em=e=n.em,(t=new s.a(l({track:!0,register:[]},n))).changeUndoType("change",{condition:!1}),t.changeUndoType("add",{on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n.avoidStore)return{object:t,before:void 0,after:e,options:l({},n)}}}),t.changeUndoType("remove",{on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n.avoidStore)return{object:t,before:e,after:void 0,options:l({},n)}}});var o={on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!r&&(r=e.previousAttributes()),!n.avoidStore){var i={object:e,before:r,after:e.toJSON()};return r=null,i}},undo:function(e,t,n,r){e.set(t)},redo:function(e,t,n,r){e.set(n)}};return["style","attributes","content","src"].forEach((function(e){return t.addUndoType("change:".concat(e),o)})),t.on("undo redo",(function(){return e.trigger("component:toggled change:canvasOffset")})),["undo","redo"].forEach((function(n){return t.on(n,(function(){return e.trigger(n)}))})),this},getConfig:function(){return n},add:function(e){return t.register(e),this},remove:function(e){return t.unregister(e),this},removeAll:function(){return t.unregisterAll(),this},start:function(){return t.startTracking(),this},stop:function(){return t.stopTracking(),this},undo:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!e.isEditing()&&t.undo(n),this},undoAll:function(){return t.undoAll(),this},redo:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!e.isEditing()&&t.redo(n),this},redoAll:function(){return t.redoAll(),this},hasUndo:function(){return t.isAvailable("undo")},hasRedo:function(){return t.isAvailable("redo")},getStack:function(){return t.stack},getStackGroup:function(){var e=[],t=[];return this.getStack().forEach((function(n){var r=n.get("magicFusionIndex");t.indexOf(r)<0&&(t.push(r),e.push(n))})),e},getPointer:function(){return this.getStack().pointer},clear:function(){return t.clear(),this},getInstance:function(){return t}}}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(79),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(26))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,s,a,l=1,c={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return c[l]={callback:e,args:t},r(l),l++},h.clearImmediate=f}function f(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(26),n(80))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=a(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}},function(e,t,n){!function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},n={};function r(e,t){var r=e.match(function(e){return n[e]||(n[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(t));return r?/^\s*(.*?)\s*$/.exec(r[2])[1]:""}function i(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function o(e,t){for(var n in e)for(var r=t[n]||(t[n]=[]),i=e[n],o=i.length-1;o>=0;o--)r.unshift(i[o])}e.defineMode("htmlmixed",(function(n,s){var a=e.getMode(n,{name:"xml",htmlMode:!0,multilineTagIndentFactor:s.multilineTagIndentFactor,multilineTagIndentPastTag:s.multilineTagIndentPastTag}),l={},c=s&&s.tags,u=s&&s.scriptTypes;if(o(t,l),c&&o(c,l),u)for(var d=u.length-1;d>=0;d--)l.script.unshift(["type",u[d].matches,u[d].mode]);function h(t,o){var s,c=a.token(t,o.htmlState),u=/\btag\b/.test(c);if(u&&!/[<>\s\/]/.test(t.current())&&(s=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&l.hasOwnProperty(s))o.inTag=s+" ";else if(o.inTag&&u&&/>$/.test(t.current())){var d=/^([\S]+) (.*)/.exec(o.inTag);o.inTag=null;var f=">"==t.current()&&function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(!i[0]||i[1].test(r(t,i[0])))return i[2]}}(l[d[1]],d[2]),p=e.getMode(n,f),g=i(d[1],!0),m=i(d[1],!1);o.token=function(e,t){return e.match(g,!1)?(t.token=h,t.localState=t.localMode=null,null):function(e,t,n){var r=e.current(),i=r.search(t);return i>-1?e.backUp(r.length-i):r.match(/<\/?$/)&&(e.backUp(r.length),e.match(t,!1)||e.match(r)),n}(e,m,t.localMode.token(e,t.localState))},o.localMode=p,o.localState=e.startState(p,a.indent(o.htmlState,"",""))}else o.inTag&&(o.inTag+=t.current(),t.eol()&&(o.inTag+=" "));return c}return{startState:function(){return{token:h,inTag:null,localMode:null,localState:null,htmlState:e.startState(a)}},copyState:function(t){var n;return t.localState&&(n=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:n,htmlState:e.copyState(a,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n,r){return!t.localMode||/^\s*<\//.test(n)?a.indent(t.htmlState,n,r):t.localMode.indent?t.localMode.indent(t.localState,n,r):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||a}}}}),"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}(n(13),n(83),n(84),n(44))},function(e,t,n){!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(r,i){var o,s,a=r.indentUnit,l={},c=i.htmlMode?t:n;for(var u in c)l[u]=c[u];for(var u in i)l[u]=i[u];function d(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();return"<"==r?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(f("atom","]]>")):null:e.match("--")?n(f("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(function e(t){return function(n,r){for(var i;null!=(i=n.next());){if("<"==i)return r.tokenize=e(t+1),r.tokenize(n,r);if(">"==i){if(1==t){r.tokenize=d;break}return r.tokenize=e(t-1),r.tokenize(n,r)}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=f("meta","?>"),"meta"):(o=e.eat("/")?"closeTag":"openTag",t.tokenize=h,"tag bracket"):"&"==r?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function h(e,t){var n,r,i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=d,o=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return o="equals",null;if("<"==i){t.tokenize=d,t.state=v,t.tagName=t.tagStart=null;var s=t.tokenize(e,t);return s?s+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=(n=i,(r=function(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=h;break}return"string"}).isInAttribute=!0,r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function f(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=d;break}n.next()}return e}}function p(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function g(e){e.context&&(e.context=e.context.prev)}function m(e,t){for(var n;;){if(!e.context)return;if(!l.contextGrabbers.hasOwnProperty(n=e.context.tagName)||!l.contextGrabbers[n].hasOwnProperty(t))return;g(e)}}function v(e,t,n){return"openTag"==e?(n.tagStart=t.column(),b):"closeTag"==e?y:v}function b(e,t,n){return"word"==e?(n.tagName=t.current(),s="tag",O):l.allowMissingTagName&&"endTag"==e?(s="tag bracket",O(e,0,n)):(s="error",b)}function y(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&l.implicitlyClosed.hasOwnProperty(n.context.tagName)&&g(n),n.context&&n.context.tagName==r||!1===l.matchClosing?(s="tag",w):(s="tag error",x)}return l.allowMissingTagName&&"endTag"==e?(s="tag bracket",w(e,0,n)):(s="error",x)}function w(e,t,n){return"endTag"!=e?(s="error",w):(g(n),v)}function x(e,t,n){return s="error",w(e,0,n)}function O(e,t,n){if("word"==e)return s="attribute",C;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(r)?m(n,r):(m(n,r),n.context=new p(n,r,i==n.indented)),v}return s="error",O}function C(e,t,n){return"equals"==e?_:(l.allowMissing||(s="error"),O(e,0,n))}function _(e,t,n){return"string"==e?S:"word"==e&&l.allowUnquoted?(s="string",O):(s="error",O(e,0,n))}function S(e,t,n){return"string"==e?S:O(e,0,n)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:v,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var n=t.tokenize(e,t);return(n||o)&&"comment"!=n&&(s=null,t.state=t.state(o||n,e,t),s&&(n="error"==s?n+" error":s)),n},indent:function(t,n,r){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+a;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=h&&t.tokenize!=d)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==l.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+a*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var o=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(o&&o[1])for(;i;){if(i.tagName==o[2]){i=i.prev;break}if(!l.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(o)for(;i;){var s=l.contextGrabbers[i.tagName];if(!s||!s.hasOwnProperty(o[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+a:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(e){e.state==_&&(e.state=O)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)n.tagName&&t.push(n.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineMode("javascript",(function(t,n){var r,i,o=t.indentUnit,s=n.statementIndent,a=n.jsonld,l=n.json||a,c=n.typescript,u=n.wordCharacters||/[\w$\xa1-\uffff]/,d=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("keyword d"),o=e("operator"),s={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:e("new"),delete:r,void:r,throw:r,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r}}(),h=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function p(e,t,n){return r=e,i=n,t}function g(e,t){var n,r=e.next();if('"'==r||"'"==r)return t.tokenize=(n=r,function(e,t){var r,i=!1;if(a&&"@"==e.peek()&&e.match(f))return t.tokenize=g,p("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(t.tokenize=g),p("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return p("number","number");if("."==r&&e.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return p(r);if("="==r&&e.eat(">"))return p("=>","operator");if("0"==r&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return p("number","number");if(/\d/.test(r))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),p("number","number");if("/"==r)return e.eat("*")?(t.tokenize=m,m(e,t)):e.eat("/")?(e.skipToEnd(),p("comment","comment")):Ge(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),p("regexp","string-2")):(e.eat("="),p("operator","operator",e.current()));if("`"==r)return t.tokenize=v,v(e,t);if("#"==r&&"!"==e.peek())return e.skipToEnd(),p("meta","meta");if("#"==r&&e.eatWhile(u))return p("variable","property");if("<"==r&&e.match("!--")||"-"==r&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),p("comment","comment");if(h.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),"?"==r&&e.eat(".")?p("."):p("operator","operator",e.current());if(u.test(r)){e.eatWhile(u);var i=e.current();if("."!=t.lastType){if(d.propertyIsEnumerable(i)){var o=d[i];return p(o.type,o.style,i)}if("async"==i&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return p("async","keyword",i)}return p("variable","variable",i)}}function m(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=g;break}r="*"==n}return p("comment","comment")}function v(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=g;break}r=!r&&"\\"==n}return p("quasi","string-2",e.current())}function b(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(c){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var i=0,o=!1,s=n-1;s>=0;--s){var a=e.string.charAt(s),l="([{}])".indexOf(a);if(l>=0&&l<3){if(!i){++s;break}if(0==--i){"("==a&&(o=!0);break}}else if(l>=3&&l<6)++i;else if(u.test(a))o=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(e.string.charAt(s-1)==a&&"\\"!=e.string.charAt(s-2)){s--;break}}else if(o&&!i){++s;break}}o&&!i&&(t.fatArrowAt=s)}}var y={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function x(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}var O={state:null,column:null,marked:null,cc:null};function C(){for(var e=arguments.length-1;e>=0;e--)O.cc.push(arguments[e])}function _(){return C.apply(null,arguments),!0}function S(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function j(e){var t=O.state;if(O.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var r=function e(t,n){if(n){if(n.block){var r=e(t,n.prev);return r?r==n.prev?n:new T(r,n.vars,!0):null}return S(t,n.vars)?n:new T(n.prev,new E(t,n.vars),!1)}return null}(e,t.context);if(null!=r)return void(t.context=r)}else if(!S(e,t.localVars))return void(t.localVars=new E(e,t.localVars));n.globalVars&&!S(e,t.globalVars)&&(t.globalVars=new E(e,t.globalVars))}function k(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function T(e,t,n){this.prev=e,this.vars=t,this.block=n}function E(e,t){this.name=e,this.next=t}var P=new E("this",new E("arguments",null));function A(){O.state.context=new T(O.state.context,O.state.localVars,!1),O.state.localVars=P}function M(){O.state.context=new T(O.state.context,O.state.localVars,!0),O.state.localVars=null}function D(){O.state.localVars=O.state.context.vars,O.state.context=O.state.context.prev}function I(e,t){var n=function(){var n=O.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new w(r,O.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function L(){var e=O.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function N(e){return function t(n){return n==e?_():";"==e||"}"==n||")"==n||"]"==n?C():_(t)}}function R(e,t){return"var"==e?_(I("vardef",t),be,N(";"),L):"keyword a"==e?_(I("form"),B,R,L):"keyword b"==e?_(I("form"),R,L):"keyword d"==e?O.stream.match(/^\s*$/,!1)?_():_(I("stat"),U,N(";"),L):"debugger"==e?_(N(";")):"{"==e?_(I("}"),M,oe,L,D):";"==e?_():"if"==e?("else"==O.state.lexical.info&&O.state.cc[O.state.cc.length-1]==L&&O.state.cc.pop()(),_(I("form"),B,R,L,_e)):"function"==e?_(Te):"for"==e?_(I("form"),Se,R,L):"class"==e||c&&"interface"==t?(O.marked="keyword",_(I("form","class"==e?e:t),De,L)):"variable"==e?c&&"declare"==t?(O.marked="keyword",_(R)):c&&("module"==t||"enum"==t||"type"==t)&&O.stream.match(/^\s*\w/,!1)?(O.marked="keyword","enum"==t?_(We):"type"==t?_(Pe,N("operator"),ue,N(";")):_(I("form"),ye,N("{"),I("}"),oe,L,L)):c&&"namespace"==t?(O.marked="keyword",_(I("form"),V,R,L)):c&&"abstract"==t?(O.marked="keyword",_(R)):_(I("stat"),J):"switch"==e?_(I("form"),B,N("{"),I("}","switch"),M,oe,L,L,D):"case"==e?_(V,N(":")):"default"==e?_(N(":")):"catch"==e?_(I("form"),A,F,R,L,D):"export"==e?_(I("stat"),Re,L):"import"==e?_(I("stat"),Ve,L):"async"==e?_(R):"@"==t?_(V,R):C(I("stat"),V,N(";"),L)}function F(e){if("("==e)return _(Ae,N(")"))}function V(e,t){return H(e,t,!1)}function z(e,t){return H(e,t,!0)}function B(e){return"("!=e?C():_(I(")"),U,N(")"),L)}function H(e,t,n){if(O.state.fatArrowAt==O.stream.start){var r=n?Y:K;if("("==e)return _(A,I(")"),re(Ae,")"),L,N("=>"),r,D);if("variable"==e)return C(A,ye,N("=>"),r,D)}var i=n?W:$;return y.hasOwnProperty(e)?_(i):"function"==e?_(Te,i):"class"==e||c&&"interface"==t?(O.marked="keyword",_(I("form"),Me,L)):"keyword c"==e||"async"==e?_(n?z:V):"("==e?_(I(")"),U,N(")"),L,i):"operator"==e||"spread"==e?_(n?z:V):"["==e?_(I("]"),$e,L,i):"{"==e?ie(ee,"}",null,i):"quasi"==e?C(q,i):"new"==e?_(function(e){return function(t){return"."==t?_(e?X:Z):"variable"==t&&c?_(ge,e?W:$):C(e?z:V)}}(n)):"import"==e?_(V):_()}function U(e){return e.match(/[;\}\)\],]/)?C():C(V)}function $(e,t){return","==e?_(U):W(e,t,!1)}function W(e,t,n){var r=0==n?$:W,i=0==n?V:z;return"=>"==e?_(A,n?Y:K,D):"operator"==e?/\+\+|--/.test(t)||c&&"!"==t?_(r):c&&"<"==t&&O.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?_(I(">"),re(ue,">"),L,r):"?"==t?_(V,N(":"),i):_(i):"quasi"==e?C(q,r):";"!=e?"("==e?ie(z,")","call",r):"."==e?_(Q,r):"["==e?_(I("]"),U,N("]"),L,r):c&&"as"==t?(O.marked="keyword",_(ue,r)):"regexp"==e?(O.state.lastType=O.marked="operator",O.stream.backUp(O.stream.pos-O.stream.start-1),_(i)):void 0:void 0}function q(e,t){return"quasi"!=e?C():"${"!=t.slice(t.length-2)?_(q):_(V,G)}function G(e){if("}"==e)return O.marked="string-2",O.state.tokenize=v,_(q)}function K(e){return b(O.stream,O.state),C("{"==e?R:V)}function Y(e){return b(O.stream,O.state),C("{"==e?R:z)}function Z(e,t){if("target"==t)return O.marked="keyword",_($)}function X(e,t){if("target"==t)return O.marked="keyword",_(W)}function J(e){return":"==e?_(L,R):C($,N(";"),L)}function Q(e){if("variable"==e)return O.marked="property",_()}function ee(e,t){return"async"==e?(O.marked="property",_(ee)):"variable"==e||"keyword"==O.style?(O.marked="property","get"==t||"set"==t?_(te):(c&&O.state.fatArrowAt==O.stream.start&&(n=O.stream.match(/^\s*:\s*/,!1))&&(O.state.fatArrowAt=O.stream.pos+n[0].length),_(ne))):"number"==e||"string"==e?(O.marked=a?"property":O.style+" property",_(ne)):"jsonld-keyword"==e?_(ne):c&&k(t)?(O.marked="keyword",_(ee)):"["==e?_(V,se,N("]"),ne):"spread"==e?_(z,ne):"*"==t?(O.marked="keyword",_(ee)):":"==e?C(ne):void 0;var n}function te(e){return"variable"!=e?C(ne):(O.marked="property",_(Te))}function ne(e){return":"==e?_(z):"("==e?C(Te):void 0}function re(e,t,n){function r(i,o){if(n?n.indexOf(i)>-1:","==i){var s=O.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),_((function(n,r){return n==t||r==t?C():C(e)}),r)}return i==t||o==t?_():n&&n.indexOf(";")>-1?C(e):_(N(t))}return function(n,i){return n==t||i==t?_():C(e,r)}}function ie(e,t,n){for(var r=3;r<arguments.length;r++)O.cc.push(arguments[r]);return _(I(t,n),re(e,t),L)}function oe(e){return"}"==e?_():C(R,oe)}function se(e,t){if(c){if(":"==e)return _(ue);if("?"==t)return _(se)}}function ae(e,t){if(c&&(":"==e||"in"==t))return _(ue)}function le(e){if(c&&":"==e)return O.stream.match(/^\s*\w+\s+is\b/,!1)?_(V,ce,ue):_(ue)}function ce(e,t){if("is"==t)return O.marked="keyword",_()}function ue(e,t){return"keyof"==t||"typeof"==t||"infer"==t?(O.marked="keyword",_("typeof"==t?z:ue)):"variable"==e||"void"==t?(O.marked="type",_(pe)):"|"==t||"&"==t?_(ue):"string"==e||"number"==e||"atom"==e?_(pe):"["==e?_(I("]"),re(ue,"]",","),L,pe):"{"==e?_(I("}"),re(he,"}",",;"),L,pe):"("==e?_(re(fe,")"),de,pe):"<"==e?_(re(ue,">"),ue):void 0}function de(e){if("=>"==e)return _(ue)}function he(e,t){return"variable"==e||"keyword"==O.style?(O.marked="property",_(he)):"?"==t||"number"==e||"string"==e?_(he):":"==e?_(ue):"["==e?_(N("variable"),ae,N("]"),he):"("==e?C(Ee,he):void 0}function fe(e,t){return"variable"==e&&O.stream.match(/^\s*[?:]/,!1)||"?"==t?_(fe):":"==e?_(ue):"spread"==e?_(fe):C(ue)}function pe(e,t){return"<"==t?_(I(">"),re(ue,">"),L,pe):"|"==t||"."==e||"&"==t?_(ue):"["==e?_(ue,N("]"),pe):"extends"==t||"implements"==t?(O.marked="keyword",_(ue)):"?"==t?_(ue,N(":"),ue):void 0}function ge(e,t){if("<"==t)return _(I(">"),re(ue,">"),L,pe)}function me(){return C(ue,ve)}function ve(e,t){if("="==t)return _(ue)}function be(e,t){return"enum"==t?(O.marked="keyword",_(We)):C(ye,se,Oe,Ce)}function ye(e,t){return c&&k(t)?(O.marked="keyword",_(ye)):"variable"==e?(j(t),_()):"spread"==e?_(ye):"["==e?ie(xe,"]"):"{"==e?ie(we,"}"):void 0}function we(e,t){return"variable"!=e||O.stream.match(/^\s*:/,!1)?("variable"==e&&(O.marked="property"),"spread"==e?_(ye):"}"==e?C():"["==e?_(V,N("]"),N(":"),we):_(N(":"),ye,Oe)):(j(t),_(Oe))}function xe(){return C(ye,Oe)}function Oe(e,t){if("="==t)return _(z)}function Ce(e){if(","==e)return _(be)}function _e(e,t){if("keyword b"==e&&"else"==t)return _(I("form","else"),R,L)}function Se(e,t){return"await"==t?_(Se):"("==e?_(I(")"),je,L):void 0}function je(e){return"var"==e?_(be,ke):"variable"==e?_(ke):C(ke)}function ke(e,t){return")"==e?_():";"==e?_(ke):"in"==t||"of"==t?(O.marked="keyword",_(V,ke)):C(V,ke)}function Te(e,t){return"*"==t?(O.marked="keyword",_(Te)):"variable"==e?(j(t),_(Te)):"("==e?_(A,I(")"),re(Ae,")"),L,le,R,D):c&&"<"==t?_(I(">"),re(me,">"),L,Te):void 0}function Ee(e,t){return"*"==t?(O.marked="keyword",_(Ee)):"variable"==e?(j(t),_(Ee)):"("==e?_(A,I(")"),re(Ae,")"),L,le,D):c&&"<"==t?_(I(">"),re(me,">"),L,Ee):void 0}function Pe(e,t){return"keyword"==e||"variable"==e?(O.marked="type",_(Pe)):"<"==t?_(I(">"),re(me,">"),L):void 0}function Ae(e,t){return"@"==t&&_(V,Ae),"spread"==e?_(Ae):c&&k(t)?(O.marked="keyword",_(Ae)):c&&"this"==e?_(se,Oe):C(ye,se,Oe)}function Me(e,t){return"variable"==e?De(e,t):Ie(e,t)}function De(e,t){if("variable"==e)return j(t),_(Ie)}function Ie(e,t){return"<"==t?_(I(">"),re(me,">"),L,Ie):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(O.marked="keyword"),_(c?ue:V,Ie)):"{"==e?_(I("}"),Le,L):void 0}function Le(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&k(t))&&O.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(O.marked="keyword",_(Le)):"variable"==e||"keyword"==O.style?(O.marked="property",_(Ne,Le)):"number"==e||"string"==e?_(Ne,Le):"["==e?_(V,se,N("]"),Ne,Le):"*"==t?(O.marked="keyword",_(Le)):c&&"("==e?C(Ee,Le):";"==e||","==e?_(Le):"}"==e?_():"@"==t?_(V,Le):void 0}function Ne(e,t){if("?"==t)return _(Ne);if(":"==e)return _(ue,Oe);if("="==t)return _(z);var n=O.state.lexical.prev;return C(n&&"interface"==n.info?Ee:Te)}function Re(e,t){return"*"==t?(O.marked="keyword",_(Ue,N(";"))):"default"==t?(O.marked="keyword",_(V,N(";"))):"{"==e?_(re(Fe,"}"),Ue,N(";")):C(R)}function Fe(e,t){return"as"==t?(O.marked="keyword",_(N("variable"))):"variable"==e?C(z,Fe):void 0}function Ve(e){return"string"==e?_():"("==e?C(V):C(ze,Be,Ue)}function ze(e,t){return"{"==e?ie(ze,"}"):("variable"==e&&j(t),"*"==t&&(O.marked="keyword"),_(He))}function Be(e){if(","==e)return _(ze,Be)}function He(e,t){if("as"==t)return O.marked="keyword",_(ze)}function Ue(e,t){if("from"==t)return O.marked="keyword",_(V)}function $e(e){return"]"==e?_():C(re(z,"]"))}function We(){return C(I("form"),ye,N("{"),I("}"),re(qe,"}"),L,L)}function qe(){return C(ye,Oe)}function Ge(e,t,n){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return D.lex=!0,L.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new w((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new T(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),b(e,t)),t.tokenize!=m&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==r?n:(t.lastType="operator"!=r||"++"!=i&&"--"!=i?r:"incdec",function(e,t,n,r,i){var o=e.cc;for(O.state=e,O.stream=i,O.marked=null,O.cc=o,O.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():l?V:R)(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return O.marked?O.marked:"variable"==n&&x(e,r)?"variable-2":t}}(t,n,r,i,e))},indent:function(t,r){if(t.tokenize==m)return e.Pass;if(t.tokenize!=g)return 0;var i,a=r&&r.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(r))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==L)l=l.prev;else if(u!=_e)break}for(;("stat"==l.type||"form"==l.type)&&("}"==a||(i=t.cc[t.cc.length-1])&&(i==$||i==W)&&!/^[,\.=+\-*:?[\(]/.test(r));)l=l.prev;s&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var d=l.type,f=a==d;return"vardef"==d?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==d&&"{"==a?l.indented:"form"==d?l.indented+o:"stat"==d?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||h.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,r)?s||o:0):"switch"!=l.info||f||0==n.doubleIndentSwitch?l.align?l.column+(f?0:1):l.indented+(f?0:o):l.indented+(/^(?:case|default)\b/.test(r)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l,expressionAllowed:Ge,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=V&&t!=z||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(13))},function(e,t,n){!function(e){e.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),e.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,r){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):(";"!=t||!r.lexical||")"!=r.lexical.type)&&/^[;{}]$/.test(t)&&!/^;/.test(n)}});var t=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;e.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(e,n,r,i){var o=!1;return"html"==this.configuration&&(o=!!i.context&&t.test(i.context.tagName)),!o&&("tag"==e&&/>$/.test(n)&&i.context||/^</.test(r))}}),e.defineExtension("commentRange",(function(t,n,r){var i=this,o=e.innerMode(i.getMode(),i.getTokenAt(n).state).mode;i.operation((function(){if(t)i.replaceRange(o.commentEnd,r),i.replaceRange(o.commentStart,n),n.line==r.line&&n.ch==r.ch&&i.setCursor(n.line,n.ch+o.commentStart.length);else{var e=i.getRange(n,r),s=e.indexOf(o.commentStart),a=e.lastIndexOf(o.commentEnd);s>-1&&a>-1&&a>s&&(e=e.substr(0,s)+e.substring(s+o.commentStart.length,a)+e.substr(a+o.commentEnd.length)),i.replaceRange(e,n,r)}}))})),e.defineExtension("autoIndentRange",(function(e,t){var n=this;this.operation((function(){for(var r=e.line;r<=t.line;r++)n.indentLine(r,"smart")}))})),e.defineExtension("autoFormatRange",(function(t,n){var r=this,i=r.getMode(),o=r.getRange(t,n).split("\n"),s=e.copyState(i,r.getTokenAt(t).state),a=r.getOption("tabSize"),l="",c=0,u=0===t.ch;function d(){l+="\n",u=!0,++c}for(var h=0;h<o.length;++h){for(var f=new e.StringStream(o[h],a);!f.eol();){var p=e.innerMode(i,s),g=i.token(f,s),m=f.current();f.start=f.pos,u&&!/\S/.test(m)||(l+=m,u=!1),!u&&p.mode.newlineAfterToken&&p.mode.newlineAfterToken(g,m,f.string.slice(f.pos)||o[h+1]||"",p.state)&&d()}!f.pos&&i.blankLine&&i.blankLine(s),!u&&h<o.length-1&&d()}r.operation((function(){r.replaceRange(l,t,n);for(var e=t.line+1,i=t.line+c;e<=i;++e)r.indentLine(e,"smart");r.setSelection(t,r.getCursor(!1))}))}))}(n(13))},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(36),s=n(5);t.default=i.a.View.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt=e;var t=e.config||{};this.level=e.level,this.config=t,this.preview=e.preview,this.ppfx=t.pStylePrefix||"",this.pfx=t.stylePrefix||"",this.parent=e.parent,this.parentView=e.parentView;var n=this.pfx,r=this.ppfx,i=this.parent,o=this.collection;this.listenTo(o,"add",this.addTo),this.listenTo(o,"reset resetNavigator",this.render),this.listenTo(o,"remove",this.removeChildren),this.className="".concat(n,"layers");var a=t.em;if(t.sortable&&!this.opt.sorter){var l=a.get("Utils");this.opt.sorter=new l.Sorter({container:t.sortContainer||this.el,containerSel:".".concat(this.className),itemSel:".".concat(n,"layer"),ignoreViewChildren:1,onEndMove:function(e,t,n){var r=t.getSourceModel();a.setSelected(r,{forceChange:1}),a.trigger("".concat(s.eventDrag,":end"),n)},avoidSelectOnEnd:1,nested:1,ppfx:r,pfx:n})}this.sorter=this.opt.sorter||"",this.$el.data("collection",o),i&&this.$el.data("model",i)},removeChildren:function(e){var t=e.viewLayer;t&&(t.remove(),e.viewLayer=0)},addTo:function(e){var t=this.collection.indexOf(e);this.addToCollection(e,null,t)},addToCollection:function(e,t,n){var r=t||null,i=new(0,o.a)({level:this.level,model:e,parentView:this.parentView,config:this.config,sorter:this.sorter,isCountable:this.isCountable,opened:this.opt.opened}).render().el;if(r)r.appendChild(i);else if(void 0!==n){var s="before";this.$el.children().length==n&&(n--,s="after"),n<0?this.$el.append(i):this.$el.children().eq(n)[s](i)}else this.$el.append(i);return i},isCountable:function(e,t){var n=e.get("type"),r=e.get("tagName");return!(("textnode"==n||"br"==r)&&t||!e.get("layerable"))},render:function(){var e=this,t=document.createDocumentFragment(),n=this.el;return n.innerHTML="",this.collection.each((function(n){return e.addToCollection(n,t)})),n.appendChild(t),n.className=this.className,this}})},function(e,t,n){var r={"./CanvasClear":45,"./CanvasClear.js":45,"./CanvasMove":46,"./CanvasMove.js":46,"./CommandAbstract":22,"./CommandAbstract.js":22,"./ComponentDelete":47,"./ComponentDelete.js":47,"./ComponentDrag":48,"./ComponentDrag.js":48,"./ComponentEnter":49,"./ComponentEnter.js":49,"./ComponentExit":50,"./ComponentExit.js":50,"./ComponentNext":51,"./ComponentNext.js":51,"./ComponentPrev":52,"./ComponentPrev.js":52,"./ComponentStyleClear":53,"./ComponentStyleClear.js":53,"./CopyComponent":54,"./CopyComponent.js":54,"./DeleteComponent":55,"./DeleteComponent.js":55,"./ExportTemplate":56,"./ExportTemplate.js":56,"./Fullscreen":57,"./Fullscreen.js":57,"./MoveComponent":58,"./MoveComponent.js":58,"./OpenAssets":59,"./OpenAssets.js":59,"./OpenBlocks":60,"./OpenBlocks.js":60,"./OpenLayers":61,"./OpenLayers.js":61,"./OpenStyleManager":62,"./OpenStyleManager.js":62,"./OpenTraitManager":63,"./OpenTraitManager.js":63,"./PasteComponent":64,"./PasteComponent.js":64,"./Preview":65,"./Preview.js":65,"./Resize":66,"./Resize.js":66,"./SelectComponent":14,"./SelectComponent.js":14,"./SelectPosition":27,"./SelectPosition.js":27,"./ShowOffset":67,"./ShowOffset.js":67,"./SwitchVisibility":68,"./SwitchVisibility.js":68};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=90},function(e,t,n){"use strict";n.r(t);var r=n(9),i=n.n(r),o=n(2),s=n.n(o),a=n(1),l=n.n(a),c=n(0),u={stylePrefix:"comp-",wrapperId:"wrapper",wrapperName:"Body",wrapper:{removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]},components:[],draggableComponents:1,storeWrapper:0,processor:0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]},d=n(5),h=n(21),f=n(6),p=n(35);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=d.default.extend({defaults:m(m({},d.default.prototype.defaults),{},{type:"cell",tagName:"td",draggable:["tr"]})},{isComponent:function(e){var t="",n=e.tagName;return"TD"!=n&&"TH"!=n||(t={type:"cell",tagName:n.toLowerCase()}),t}}),b=f.default.extend({});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=d.default.extend({defaults:w(w({},d.default.prototype.defaults),{},{tagName:"tr",draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},{isComponent:function(e){return"TR"==e.tagName&&!0}}),O=f.default.extend({});function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=d.default.extend({defaults:_(_({},d.default.prototype.defaults),{},{type:"table",tagName:"table",droppable:["tbody","thead","tfoot"]}),initialize:function(e,t){d.default.prototype.initialize.apply(this,arguments);var n=this.get("components");!n.length&&n.add({type:"tbody"})}},{isComponent:function(e){var t="";return"TABLE"==e.tagName&&(t={type:"table"}),t}}),j=f.default.extend({events:{}});function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=d.default.extend({defaults:T(T({},d.default.prototype.defaults),{},{type:"tbody",tagName:"tbody",draggable:["table"],droppable:["tr"],columns:1,rows:1}),initialize:function(e,t){d.default.prototype.initialize.apply(this,arguments);var n=this.get("components"),r=this.get("columns"),i=this.get("rows");if(!n.length){for(var o=[];i--;){for(var s=[],a=r;a--;)s.push({type:"cell",classes:["cell"]});o.push({type:"row",classes:["row"],components:s})}n.add(o)}}},{isComponent:function(e){var t="";return"TBODY"==e.tagName&&(t={type:"tbody"}),t}});function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=E.extend({defaults:A(A({},E.prototype.defaults),{},{type:"thead",tagName:"thead"})},{isComponent:function(e){var t="";return"THEAD"==e.tagName&&(t={type:"thead"}),t}}),D=f.default.extend({}),I=f.default.extend({});function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=E.extend({defaults:N(N({},E.prototype.defaults),{},{type:"tfoot",tagName:"tfoot"})},{isComponent:function(e){var t="";return"TFOOT"==e.tagName&&(t={type:"tfoot"}),t}}),F=f.default.extend({});function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',H=d.default.extend({defaults:z(z({},d.default.prototype.defaults),{},{type:"image",tagName:"img",void:1,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(B,'>\n        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>\n      </svg>'),fallback:"<svg ".concat(B,'>\n        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>\n      </svg>'),file:""}),initialize:function(e,t){d.default.prototype.initialize.apply(this,arguments);var n=this.get("attributes");n.src&&this.set("src",n.src)},initToolbar:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d.default.prototype.initToolbar.apply(this,t);var r=this.em;if(r){var i="image-editor";if(r.get("Commands").has(i)){for(var o=!1,s=this.get("toolbar"),a=0;a<s.length;a++)if("image-editor"===s[a].command){o=!0;break}o||(s.push({attributes:{class:"fa fa-pencil"},command:i}),this.set("toolbar",s))}}},getAttrToHTML:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=d.default.prototype.getAttrToHTML.apply(this,t),i=this.getSrcResult();return i&&(r.src=i),r},getSrcResult:function(){var e=this.get((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fallback?"fallback":"src")||"",t=e;return e&&"<svg"===e.substr(0,4)&&(t="data:image/svg+xml;base64,".concat(window.btoa(e))),t},isDefaultSrc:function(){return this.get("src")===Object(c.result)(this,"defaults").src},parseUri:function(e){var t=document.createElement("a");t.href=e;for(var n={},r=t.search.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].split("="),s=decodeURIComponent(o[0]);s&&(n[s]=decodeURIComponent(o[1]))}return{hostname:t.hostname,pathname:t.pathname,protocol:t.protocol,search:t.search,hash:t.hash,port:t.port,query:n}}},{isComponent:function(e){var t="";return"IMG"==e.tagName&&(t={type:"image"}),t}});function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=H.extend({defaults:$($({},H.prototype.defaults),{},{type:"map",src:"",void:0,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:d.default.prototype.defaults.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]}),initialize:function(e,t){this.get("src")?this.parseFromSrc():this.updateSrc(),H.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},updateSrc:function(){this.set("src",this.getMapUrl())},getMapUrl:function(){var e=this.get("address"),t=this.get("zoom"),n=this.get("mapType");return e=e?"&q="+e:"",t=t?"&z="+t:"",n=n?"&t="+n:"",this.get("mapUrl")+"?"+e+t+n+"&output=embed"},parseFromSrc:function(){var e=this.parseUri(this.get("src")).query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)}},{isComponent:function(e){var t="";return"IFRAME"==e.tagName&&/maps\.google\.com/.test(e.src)&&(t={type:"map",src:e.src}),t}}),q=f.default.extend({tagName:"img",events:{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"},initialize:function(e){var t=this.model;f.default.prototype.initialize.apply(this,arguments),this.listenTo(t,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image");var n=this.config;n.modal&&(this.modal=n.modal),n.am&&(this.am=n.am),this.fetchFile()},fetchFile:function(){if(!this.modelOpt.temporary){var e=this.model,t=e.get("file");t&&(this.em.get("AssetManager").FileUploader().uploadFile({dataTransfer:{files:[t]}},(function(t){var n=t&&t.data&&t.data[0],r=n&&(Object(c.isString)(n)?n:n.src);r&&e.set({src:r})})),e.set("file",""))}},updateSrc:function(){var e=this.model,t=this.classEmpty,n=this.$el,r=e.getSrcResult(),i=r&&!e.isDefaultSrc();e.addAttributes({src:r}),n[i?"removeClass":"addClass"](t)},onActive:function(e){e&&e.stopPropagation();var t=this.opts.config.em,n=t?t.get("Editor"):"";n&&this.model.get("editable")&&n.runCommand("open-assets",{target:this.model,types:["image"],accept:"image/*",onSelect:function(){n.Modal.close(),n.AssetManager.setTarget(null)}})},onError:function(){var e=this.model.getSrcResult({fallback:1});e&&(this.el.src=e)},onLoad:function(){this.em.trigger("change:canvasOffset")},noDrag:function(e){return e.preventDefault(),!1},render:function(){this.renderAttributes(),this.updateSrc();var e=this.$el,t=this.model,n=e.attr("class")||"";return!t.get("src")&&e.attr("class","".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this}}),G=q.extend({tagName:"div",events:{},initialize:function(e){q.prototype.initialize.apply(this,arguments),this.classEmpty=this.ppfx+"plh-map"},updateSrc:function(){this.getIframe().src=this.model.get("src")},getIframe:function(){if(!this.iframe){var e=document.createElement("iframe");e.src=this.model.get("src"),e.frameBorder=0,e.style.height="100%",e.style.width="100%",e.className=this.ppfx+"no-pointer",this.iframe=e}return this.iframe},render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return q.prototype.render.apply(this,t),this.updateClasses(),this.el.appendChild(this.getIframe()),this}});function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=d.default.extend({defaults:Y(Y({},d.default.prototype.defaults),{},{type:"text",droppable:!1,editable:!0}),toHTML:function(){return this.trigger("sync:content",{silent:1}),d.default.prototype.toHTML.apply(this,arguments)}});function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=Z.extend({defaults:J(J({},Z.prototype.defaults),{},{type:"link",tagName:"a",traits:["title","href","target"]}),getAttrToHTML:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Z.prototype.getAttrToHTML.apply(this,t);return delete r.onmousedown,r}},{isComponent:function(e){var t;if("A"==e.tagName){t={type:"link",editable:0};var n=e.childNodes,r=n.length;r||delete t.editable;for(var i=0;i<r;i++){var o=n[i];if(3==o.nodeType&&""!=o.textContent.trim()){delete t.editable;break}}}return t}}),ee=n(3);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=f.default.prototype,ie=f.default.extend({events:{dblclick:"onActive",input:"onInput"},initialize:function(e){re.initialize.apply(this,arguments),this.disableEditing=this.disableEditing.bind(this);var t=this.model,n=this.em;this.listenTo(t,"focus",this.onActive),this.listenTo(t,"change:content",this.updateContentText),this.listenTo(t,"sync:content",this.syncContent),this.rte=n&&n.get("RichTextEditor")},updateContentText:function(e,t){!(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fromDisable&&this.disableEditing()},onActive:function(e){var t=this.rte,n=this.em;if(!(this.rteEnabled||!this.model.get("editable")||n&&n.isEditing())){if(e&&e.stopPropagation&&e.stopPropagation(),t)try{this.activeRte=t.enable(this,this.activeRte)}catch(e){n.logError(e)}this.toggleEvents(1)}},onDisable:function(){this.disableEditing()},disableEditing:function(){var e,t=this.rte,n=this.activeRte,r=this.em,i=this.model.get("editable");if(t&&i){try{t.disable(this,n)}catch(e){r.logError(e)}this.syncContent()}this.toggleEvents()},getContent:function(){var e=this.activeRte;return e&&"function"==typeof e.getContent?e.getContent():this.getChildrenContainer().innerHTML},syncContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.model,n=this.rte;if(this.rteEnabled||e.force){var r=this.getContent(),i=t.components(),o=ne({fromDisable:1},e);if(t.set("content","",o),n.customRte)i.length&&i.reset(null,e),t.set("content",r,o);else{var s=function t(n){var r=!!n.get("textable"),i=!["text","default",""].some((function(e){return n.is(e)}))||r;n.set(ne({_innertext:!i,editable:i&&n.get("editable"),selectable:i,hoverable:i,removable:r,draggable:r,highlightable:0,copyable:r},!r&&{toolbar:""}),e),n.get("components").each((function(e){return t(e)}))};!e.silent&&t.trigger("change:content",t,"",o),i.reset(r,e),i.each((function(e){return s(e)})),i.trigger("resetNavigator")}}},onInput:function(){var e=this.em,t=["".concat("component",":update"),"".concat("component",":input")].join(" ");e&&e.trigger(t,this.model)},disablePropagation:function(e){e.stopPropagation()},toggleEvents:function(e){var t=this.em,n={on:ee.u,off:ee.t},r=e?"on":"off";t.setEditing(e),this.rteEnabled=!!e;var i=[this.el.ownerDocument,document];if(n.off(i,"mousedown",this.disableEditing),n[r](i,"mousedown",this.disableEditing),t[r]("toolbar:run:before",this.disableEditing),this.$el.off("mousedown",this.disablePropagation),this.$el[r]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var o=this.el;o;)o.draggable=!e,(o=o.parentNode)&&"BODY"==o.tagName&&(o=0)}}),oe=ie.extend({render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ie.prototype.render.apply(this,t),this.el.addEventListener("click",this.prevDef,!0),this}});function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=Z.extend({defaults:ae(ae({},Z.prototype.defaults),{},{tagName:"label",traits:["id","title","for"]})},{isComponent:function(e){if("LABEL"==e.tagName)return{type:"label"}}}),ce=oe.extend({tagName:"span"});function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he="yt",fe="vi",pe="ytnc",ge=H.extend({defaults:de(de({},H.prototype.defaults),{},{type:"video",tagName:"video",videoId:"",void:0,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:0,poster:"",muted:0,autoplay:0,controls:1,color:"",list:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}}),initialize:function(e,t){this.em=t.em,this.get("src")&&this.parseFromSrc(),this.updateTraits(),this.listenTo(this,"change:provider",this.updateTraits),this.listenTo(this,"change:videoId change:provider",this.updateSrc),H.prototype.initialize.apply(this,arguments)},updateTraits:function(){var e,t="iframe";switch(this.get("provider")){case he:case pe:e=this.getYoutubeTraits();break;case fe:e=this.getVimeoTraits();break;default:t="video",e=this.getSourceTraits()}this.set({tagName:t},{silent:1}),this.set({traits:e}),this.em.trigger("component:toggled")},parseFromSrc:function(){var e=this.get("provider"),t=this.parseUri(this.get("src")),n=t.query;switch(e){case he:case pe:case fe:var r=t.pathname.split("/").pop();this.set("videoId",r),n.list&&this.set("list",n.list),n.autoplay&&this.set("autoplay",1),n.loop&&this.set("loop",1),0===parseInt(n.controls)&&this.set("controls",0),n.color&&this.set("color",n.color),"0"===n.rel&&this.set("rel",0),"1"===n.modestbranding&&this.set("modestbranding",1)}},updateSrc:function(){var e="";switch(this.get("provider")){case he:e=this.getYoutubeSrc();break;case pe:e=this.getYoutubeNoCookieSrc();break;case fe:e=this.getVimeoSrc()}this.set({src:e})},getAttrToHTML:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=H.prototype.getAttrToHTML.apply(this,t);switch(this.get("provider")){case he:case pe:case fe:break;default:this.get("loop")&&(r.loop="loop"),this.get("autoplay")&&(r.autoplay="autoplay"),this.get("controls")&&(r.controls="controls")}return r},getProviderTrait:function(){return{type:"select",label:"Provider",name:"provider",changeProp:1,options:[{value:"so",name:"HTML5 Source"},{value:he,name:"Youtube"},{value:pe,name:"Youtube (no cookie)"},{value:fe,name:"Vimeo"}]}},getSourceTraits:function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:1},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},getYoutubeTraits:function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:1},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:1},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:1}]},getVimeoTraits:function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:1},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:1},this.getAutoplayTrait(),this.getLoopTrait()]},getAutoplayTrait:function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:1}},getLoopTrait:function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:1}},getControlsTrait:function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:1}},getYoutubeSrc:function(){var e=this.get("videoId"),t=this.get("ytUrl"),n=this.get("list");return t+=e+(e.indexOf("?")<0?"?":""),t+=n?"&list=".concat(n):"",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("controls")?"":"&controls=0&showinfo=0",t+=this.get("loop")?"&loop=1&playlist=".concat(e):"",(t+=this.get("rel")?"":"&rel=0")+(this.get("modestbranding")?"&modestbranding=1":"")},getYoutubeNoCookieSrc:function(){return this.getYoutubeSrc().replace(this.get("ytUrl"),this.get("ytncUrl"))},getVimeoSrc:function(){var e=this.get("viUrl");return e+=this.get("videoId")+"?",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("loop")?"&loop=1":"",(e+=this.get("controls")?"":"&title=0&portrait=0&badge=0")+(this.get("color")?"&color="+this.get("color"):"")}},{isComponent:function(e){var t="",n=/youtube\.com\/embed/.test(e.src),r=/youtube-nocookie\.com\/embed/.test(e.src),i=/player\.vimeo\.com\/video/.test(e.src),o=n||r||i;return("VIDEO"==e.tagName||"IFRAME"==e.tagName&&o)&&(t={type:"video"},e.src&&(t.src=e.src),o&&(n?t.provider=he:r?t.provider=pe:i&&(t.provider=fe))),t}}),me=q.extend({tagName:"div",events:{},initialize:function(e){f.default.prototype.initialize.apply(this,arguments);var t=this.model,n=["loop","autoplay","controls","color","rel","modestbranding","poster"].map((function(e){return"change:".concat(e)})).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,n,this.updateVideo)},updateProvider:function(){var e=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(e))},updateSrc:function(){var e=this.model,t=this.videoEl;if(t){var n=e.get("provider"),r=e.get("src");switch(n){case"yt":r=e.getYoutubeSrc();break;case"ytnc":r=e.getYoutubeNoCookieSrc();break;case"vi":r=e.getVimeoSrc()}t.src=r}},updateVideo:function(){var e=this.model.get("provider"),t=this.videoEl,n=this.model;switch(e){case"yt":case"ytnc":case"vi":this.model.trigger("change:videoId");break;default:t.loop=n.get("loop"),t.autoplay=n.get("autoplay"),t.controls=n.get("controls"),t.poster=n.get("poster")}},renderByProvider:function(e){var t;switch(e){case"yt":t=this.renderYoutube();break;case"ytnc":t=this.renderYoutubeNoCookie();break;case"vi":t=this.renderVimeo();break;default:t=this.renderSource()}return this.videoEl=t,t},renderSource:function(){var e=document.createElement("video");return e.src=this.model.get("src"),this.initVideoEl(e),e},renderYoutube:function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeSrc(),e.frameBorder=0,e.setAttribute("allowfullscreen",!0),this.initVideoEl(e),e},renderYoutubeNoCookie:function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeNoCookieSrc(),e.frameBorder=0,e.setAttribute("allowfullscreen",!0),this.initVideoEl(e),e},renderVimeo:function(){var e=document.createElement("iframe");return e.src=this.model.getVimeoSrc(),e.frameBorder=0,e.setAttribute("allowfullscreen",!0),this.initVideoEl(e),e},initVideoEl:function(e){e.className=this.ppfx+"no-pointer",e.style.height="100%",e.style.width="100%"},render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];q.prototype.render.apply(this,t),this.updateClasses();var r=this.model.get("provider");return this.el.appendChild(this.renderByProvider(r)),this.updateVideo(),this}});function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=d.default.extend({defaults:be(be({},d.default.prototype.defaults),{},{type:"script",droppable:!1,draggable:!1,layerable:!1})},{isComponent:function(e){if("SCRIPT"==e.tagName){var t={type:"script"};return e.src&&(t.src=e.src,t.onload=e.onload),t}}}),we=q.extend({tagName:"script",events:{},render:function(){var e=this.model,t=e.get("src"),n=this.em,r=n&&n.get("scriptCount")?n.get("scriptCount"):0,i="";if(t){var o=e.get("onload"),s="script"+r,a="script"+(r+1);i="var "+s+" = document.createElement('script');\n"+s+".onload = function(){\n"+(o?o+"();\n":"")+"typeof "+a+"Start == 'function' && "+a+"Start();\n};\n"+s+".src = '"+t+"';\nfunction "+s+"Start() { document.body.appendChild("+s+"); };\n"+(r?"":s+"Start();"),n&&n.set("scriptCount",r+1)}else i=e.get("content");return this.el.innerHTML=i,this.postRender(),this}});function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=d.default.extend({defaults:Oe(Oe({},d.default.prototype.defaults),{},{resizable:{ratioDefault:1},highlightable:0}),getName:function(){var e=this.get("tagName"),t=this.get("custom-name");return e=e.charAt(0).toUpperCase()+e.slice(1),t||e}},{isComponent:function(e){if(SVGElement&&e instanceof SVGElement)return{tagName:e.tagName,type:"svg"}}});function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=Ce.extend({defaults:Se(Se({},Ce.prototype.defaults),{},{selectable:!1,hoverable:!1,layerable:!1})},{isComponent:function(e){if(Ce.isComponent(e)&&"svg"!==e.tagName.toLowerCase())return{tagName:e.tagName,type:"svg-in"}}}),ke=f.default.extend({_createElement:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}});function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=d.default.extend({defaults:Ee(Ee({},d.default.prototype.defaults),{},{droppable:!1,layerable:!1,editable:!0}),toHTML:function(){return this.get("content").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{isComponent:function(e){var t="";return 3===e.nodeType&&(t={type:"textnode",content:e.textContent}),t}});function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Me=Pe.extend({defaults:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Pe.prototype.defaults),toHTML:function(){return"\x3c!--".concat(this.get("content"),"--\x3e")}},{isComponent:function(e){if(8==e.nodeType)return{tagName:"NULL",type:"comment",content:e.textContent}}}),De=f.default.extend({initialize:function(){f.default.prototype.initialize.apply(this,arguments)},_setAttributes:function(){},renderAttributes:function(){},setAttribute:function(){},updateAttributes:function(){},initClasses:function(){},initComponents:function(){},delegateEvents:function(){},_createElement:function(){return document.createTextNode("")},render:function(){var e=this.model;return e.opt.temporary||(this.el.textContent=e.get("content")),this}}),Ie=De.extend({_createElement:function(){return document.createComment(this.model.get("content"))}}),Le=d.default.extend({},{isComponent:function(){return!1}});function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={},o={},s=[{id:"cell",model:v,view:b},{id:"row",model:x,view:O},{id:"table",model:S,view:j},{id:"thead",model:M,view:D},{id:"tbody",model:E,view:I},{id:"tfoot",model:R,view:F},{id:"map",model:W,view:G},{id:"link",model:Q,view:oe},{id:"label",model:le,view:ce},{id:"video",model:ge,view:me},{id:"image",model:H,view:q},{id:"script",model:ye,view:we},{id:"svg-in",model:je,view:ke},{id:"svg",model:Ce,view:ke},{id:"comment",model:Me,view:Ie},{id:"textnode",model:Pe,view:De},{id:"text",model:Z,view:ie},{id:"wrapper",model:Le,view:f.default},{id:"default",model:d.default,view:f.default}];return{Component:d.default,Components:h.a,ComponentsView:p.a,componentTypes:s,componentsById:o,name:"DomComponents",getConfig:function(){return r},storageKey:function(){var e=[],t=r.stm&&r.stm.getConfig()||{};return t.storeHtml&&e.push("html"),t.storeComponents&&e.push("components"),e},init:function(i){var o=this;for(var a in e=(r=i||{}).em,this.em=e,e&&(r.components=e.config.components||r.components),u)a in r||(r[a]=u[a]);var l=r.pStylePrefix;if(l&&(r.stylePrefix=l+r.stylePrefix),e){r.modal=e.get("Modal")||"",r.am=e.get("AssetManager")||"",e.get("Parser").compTypes=s,e.on("change:componentHovered",this.componentHovered,this);var c=e.get("selected");e.listenTo(c,"add",(function(e,t,n){return o.selectAdd(e,n)})),e.listenTo(c,"remove",(function(e,t,n){return o.selectRemove(e,n)}))}var h=r.components,p=Re({},r.wrapper);return p["custom-name"]=r.wrapperName,p.wrapper=1,p.type="wrapper",h&&h.constructor===Object&&h.wrapper&&(p=Re({},h),h=h.components||[],p.components=[],e&&(e.config.components=h,r.components=h)),(t=new d.default(p,{em:e,config:r,componentTypes:s,domc:this})).set({attributes:{id:"wrapper"}}),n=new f.default({model:t,config:r,componentTypes:s}),this},onLoad:function(){this.setComponents(r.components)},postLoad:function(e){this.handleChanges(this.getWrapper(),null,{avoidStore:1})},handleChanges:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.components(),s=e.get("UndoManager"),a=e.handleUpdates.bind(e),l=this.handleChanges.bind(this),c=this.handleChangesColl.bind(this),u=this.handleRemoves.bind(this);s&&s.add(t),s&&o&&s.add(o),[[t,"change:style change:content change:attributes change:src",a],[t,"change:components",c],[o,"add",l],[o,"remove",u],[t.get("classes"),"add remove",a]].forEach((function(t){e.stopListening(t[0],t[1],t[2]),e.listenTo(t[0],t[1],t[2])})),!i.avoidStore&&a("","",i),o.each((function(e){return r.handleChanges(e,n,i)}))},handleChangesColl:function(t,n){var r=e.get("UndoManager");if(r&&n instanceof l.a.Collection){var i=this.handleChanges.bind(this),o=this.handleRemoves.bind(this);r.add(n),[[n,"add",i],[n,"remove",o]].forEach((function(t){e.stopListening(t[0],t[1],t[2]),e.listenTo(t[0],t[1],t[2])}))}},handleRemoves:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!r.avoidStore&&e.handleUpdates(t,n,r)},load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.em,n="";!e&&r.stm&&(e=r.em.getCacheLoad());var i=e.components,o=e.html;if(i)if(Object(c.isObject)(i)||Object(c.isArray)(i))n=i;else try{n=JSON.parse(i)}catch(e){t&&t.logError(e)}else o&&(n=o);var s=n&&n.constructor===Object;return(n&&n.length||s)&&(this.clear(),s?this.getWrapper().set(n):this.getComponents().add(n)),n},store:function(e){if(r.stm){var t={},n=this.storageKey();if(n.indexOf("html")>=0&&(t.html=r.em.getHtml()),n.indexOf("components")>=0){var i=r.storeWrapper?this.getWrapper():this.getComponents();t.components=JSON.stringify(i)}return e||r.stm.store(t),t}},getComponent:function(){return t},getWrapper:function(){return this.getComponent()},getComponents:function(){return this.getWrapper().get("components")},addComponent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getComponents().add(e,t)},render:function(){return n.render().el},clear:function(){return this.getComponents().map((function(e){return e})).forEach((function(e){return e.remove()})),this},setComponents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.clear().addComponent(e,t)},addType:function(e,t){var n=this.em,r=t.model,o=void 0===r?{}:r,a=t.view,l=void 0===a?{}:a,u=t.isComponent,d=t.extend,h=t.extendView,f=t.extendFn,p=void 0===f?[]:f,g=t.extendFnView,m=void 0===g?[]:g,v=this.getType(e),b=this.getType(d),y=this.getType(h),w=b||v||this.getType("default"),x=w.model,O=y?y.view:w.view,C=function(e,t,n){return e.reduce((function(e,r){var i=t[r],o=n.prototype[r];return i&&o&&(e[r]=function(){o.bind(this).apply(void 0,arguments),i.bind(this).apply(void 0,arguments)}),e}),{})};"object"===i()(o)&&(t.model=x.extend(Re(Re(Re({},o),C(p,o,x)),{},{defaults:Re(Re({},x.prototype.defaults),Object(c.result)(o,"defaults")||{})}),{isComponent:!v||b||u?u||function(){return 0}:x.isComponent})),"object"===i()(l)&&(t.view=O.extend(Re(Re({},l),C(m,l,O)))),v?(v.model=t.model,v.view=t.view):(t.id=e,s.unshift(t));var _="component:type:".concat(v?"update":"add");return n&&n.trigger(_,v||t),this},getType:function(e){for(var t=s,n=0;n<t.length;n++)if(t[n].id==e)return t[n]},removeType:function(e){var t=s,n=this.getType(e);if(n){var r=t.indexOf(n);return t.splice(r,1),n}},getTypes:function(){return s},selectAdd:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(e.set({status:"selected"}),["component:selected","component:toggled"].forEach((function(r){return t.em.trigger(r,e,n)})))},selectRemove:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(e.set({status:"",state:""}),["component:deselected","component:toggled"].forEach((function(r){return t.em.trigger(r,e,n)})))},componentHovered:function(){var e=r.em,t=e.get("componentHovered"),n=e.previous("componentHovered");n&&"hovered"==n.get("status")&&n.set({status:"",state:""}),t&&Object(c.isEmpty)(t.get("status"))&&t.set("status","hovered")},allById:function(){return o}}}},function(e,t,n){"use strict";n.r(t);var r=n(8),i=n.n(r),o=n(2),s=n.n(o),a=n(3),l=n(0),c=n(15),u=n.n(c),d=n(16),h=n.n(d),f=function(){function e(t,n){var r=this;u()(this,e),this.em=t;var i=n||t.get("Canvas").getFrames().map((function(e){return e.get("root").getEl()})),o=Array.isArray(i)?i:[i];return this.el=i,this.counter=0,Object(l.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),o.forEach((function(e){return r.toggleEffects(e,1)})),this}return h()(e,[{key:"toggleEffects",value:function(e,t){var n={on:a.u,off:a.t},r=t?"on":"off";n[r](e,"dragenter",this.handleDragEnter),n[r](e,"dragover",this.handleDragOver),n[r](e,"drop",this.handleDrop),n[r](e,"dragleave",this.handleDragLeave)}},{key:"endDrop",value:function(e,t){var n=this.em,r=this.dragStop;this.counter=0,this.over=0,r&&r(e),n.runDefault({preserveSelected:1}),n.trigger("canvas:dragend",t)}},{key:"handleDragLeave",value:function(e){this.updateCounter(-1,e)}},{key:"updateCounter",value:function(e,t){this.counter+=e,0===this.counter&&this.endDrop(1,t)}},{key:"handleDragEnter",value:function(e){var t=this,n=this.em,r=e.dataTransfer;if(this.updateCounter(1,e),!this.over){this.over=1;var i,o,s=n.get("Utils"),a=n.get("Canvas"),l=a.getBody(),c=n.get("dragContent")||"<br>";if(n.stopDefault(),n.inAbsoluteMode()){var u=n.get("DomComponents").getWrapper(),d=u.append({})[0],h=n.get("Commands").run("core:component-drag",{event:e,guidesInfo:1,center:1,target:d,onEnd:function(e,n,i){if(!i.cancelled){var o=u.append(c)[0],s=d.getStyle();o.addStyle({left:s.left,top:s.top,position:s.position}),t.handleDragEnd(o,r)}d.remove()}});i=function(t){return h.stop(e,{cancel:t})},o=function(e){return c=e}}else{var f=new s.Sorter({em:n,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:l,placer:a.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(e){return t.handleDragEnd(e,r)},document:a.getFrameEl().contentDocument});f.setDropContent(c),f.startSort(),this.sorter=f,i=function(e){e&&(f.moved=0),f.endMove()},o=function(e){return f.setDropContent(e)}}this.dragStop=i,this.dragContent=o,n.trigger("canvas:dragenter",r,c)}}},{key:"handleDragEnd",value:function(e,t){if(e){var n=this.em;n.set("dragResult",e),n.trigger("canvas:drop",t,e)}}},{key:"handleDragOver",value:function(e){e.preventDefault(),this.em.trigger("canvas:dragover",e)}},{key:"handleDrop",value:function(e){e.preventDefault();var t=this.dragContent,n=this.getContentByData(e.dataTransfer).content;e.target.style.border="",n&&t&&t(n),this.endDrop(!n,e)}},{key:"getContentByData",value:function(e){var t=this.em,n=e.types,r=e.files||[],i=t.get("dragContent"),o=e.getData("text");if(r.length){o=[];for(var s=0;s<r.length;s++){var a=r[s],c=a.type.split("/")[0];"image"==c&&o.push({type:c,file:a,attributes:{alt:a.name}})}}else if(i)o=i;else if(Object(l.indexOf)(n,"text/html")>=0)o=e.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if(Object(l.indexOf)(n,"text/uri-list")>=0)o={type:"link",attributes:{href:o},content:o};else if(Object(l.indexOf)(n,"text/json")>=0){var u=e.getData("text/json");u&&(o=JSON.parse(u))}var d={content:o};return t.trigger("canvas:dragdata",e,d),d}}]),e}(),p={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:"",autoscrollLimit:50,notTextable:["button","a","input[type=checkbox]","input[type=radio]"]},g=n(1),m=n.n(g),v=n(5),b=n(33);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=m.a.Model.extend({defaults:{wrapper:"",width:null,height:null,head:"",x:0,y:0,root:0,components:0,styles:0,attributes:{}},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.attributes,r=n.root,i=n.styles,o=n.components;this.set("head",[]),this.em=t.em;var s={em:t.em,config:t.em.get("DomComponents").getConfig(),frame:this};!r&&this.set("root",new v.default({type:"wrapper",components:o||[]},s)),(!i||Object(l.isString)(i))&&this.set("styles",new b.a(i,s))},remove:function(){this.view=0;var e=this.collection;return e&&e.remove(this)},getHead:function(){return i()(this.get("head"))},setHead:function(e){return this.set("head",i()(e))},addHeadItem:function(e){var t=this.getHead();t.push(e),this.setHead(t)},getHeadByAttr:function(e,t,n){return this.getHead().filter((function(r){return r.attributes&&r.attributes[e]==t&&(!n||n===r.tag)}))[0]},removeHeadByAttr:function(e,t,n){var r=this.getHead(),i=this.getHeadByAttr(e,t,n),o=r.indexOf(i);o>=0&&(r.splice(o,1),this.setHead(r))},addLink:function(e){!this.getHeadByAttr("href",e,"link")&&this.addHeadItem({tag:"link",attributes:{href:e,rel:"stylesheet"}})},removeLink:function(e){this.removeHeadByAttr("href",e,"link")},addScript:function(e){!this.getHeadByAttr("src",e,"script")&&this.addHeadItem({tag:"script",attributes:{src:e}})},removeScript:function(e){this.removeHeadByAttr("src",e,"script")},_emitUpdated:function(){this.em.trigger("frame:updated",w({frame:this},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}))}}),O=m.a.Collection.extend({model:x,initialize:function(){Object(l.bindAll)(this,"itemLoaded")},itemLoaded:function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(0))},listenToLoad:function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(1)},listenToLoadItems:function(e){var t=this;this.forEach((function(n){return n[e?"on":"off"]("loaded",t.itemLoaded)}))}}),C=m.a.Model.extend({defaults:{frame:"",frames:"",wrapper:"",rulers:!1,zoom:100,x:0,y:0},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.em,n=e.styles,r=void 0===n?[]:n,i=e.scripts,o=void 0===i?[]:i,s=t&&t.getWrapper(),a=t&&t.getStyle(),l=new x({root:s,styles:a},e);r.forEach((function(e){return l.addLink(e)})),o.forEach((function(e){return l.addScript(e)})),this.em=t,this.set("frame",l),this.set("frames",new O([l],e)),this.listenTo(this,"change:zoom",this.onZoomChange),this.listenTo(t,"change:device",this.updateDevice)},updateDevice:function(){var e=this.em,t=e.getDeviceModel(),n=e.getCurrentFrameModel();if(n&&t){var r=t.attributes;n.set({width:r.width,height:r.height})}},onZoomChange:function(){this.get("zoom")<1&&this.set("zoom",1)}}),_=n(20),S=n(37),j=n(6),k=n(7);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=m.a.View.extend({tagName:"iframe",attributes:{allowfullscreen:"allowfullscreen","data-frame-el":!0},initialize:function(e){Object(l.bindAll)(this,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var t=this.model,n=this.el;this.config=E(E({},e.config||{}),{},{frameView:this}),this.ppfx=this.config.pStylePrefix||"",this.em=this.config.em,this.listenTo(t,"change:head",this.updateHead),t.view=this,Object(a.v)(n,this)},updateHead:function(){var e=this.getHead();Object(k.f)(e),Object(k.c)(e,this.model.getHead())},getEl:function(){return this.el},getWindow:function(){return this.getEl().contentWindow},getDoc:function(){return this.getEl().contentDocument},getHead:function(){return this.getDoc().querySelector("head")},getBody:function(){return this.getDoc().querySelector("body")},getWrapper:function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},getJsContainer:function(){return this.jsContainer||(this.jsContainer=Object(k.e)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},getToolsEl:function(){var e=this.config.frameWrapView;return e&&e.elTools},getGlobalToolsEl:function(){return this.em.get("Canvas").getGlobalToolsEl()},getHighlighter:function(){return this._getTool("[data-hl]")},getBadgeEl:function(){return this._getTool("[data-badge]")},getOffsetViewerEl:function(){return this._getTool("[data-offset]")},getRect:function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},getOffsetRect:function(){var e=this.el,t=this.getBody(),n=t.scrollTop,r=t.scrollLeft,i=e.offsetHeight,o=e.offsetWidth;return{top:e.offsetTop,left:e.offsetLeft,height:i,width:o,scrollTop:n,scrollLeft:r,scrollBottom:n+i,scrollRight:r+o}},_getTool:function(e){var t=this.getToolsEl();return this[e]||(this[e]=t.querySelector(e)),this[e]},remove:function(){var e=this.root,t=this.model;this._toggleEffects(),m.a.View.prototype.remove.apply(this,arguments),e.remove(),t.remove()},startAutoscroll:function(){var e=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout((function(){e._toggleAutoscrollFx(1),requestAnimationFrame(e.autoscroll)}),0)},autoscroll:function(){if(this.dragging){var e=this.em.get("Canvas"),t=this.getWindow(),n=this.getBody().scrollTop,r=this.lastClientY||0,i=e.getConfig().autoscrollLimit,o=this.getRect().height-i,s=n;r<i&&(s-=i-r),r>o&&(s+=r-o),s!==n&&s>0&&s<this.lastMaxHeight&&(this.getGlobalToolsEl().style.opacity=0,this.showGlobalTools(),t.scrollTo(0,s)),requestAnimationFrame(this.autoscroll)}},updateClientY:function(e){e.preventDefault(),this.lastClientY=Object(a.h)(e).clientY*this.em.getZoomDecimal()},showGlobalTools:Object(l.debounce)((function(){this.getGlobalToolsEl().style.opacity=""}),50),stopAutoscroll:function(){this.dragging&&this._toggleAutoscrollFx()},_toggleAutoscrollFx:function(e){this.dragging=e;var t=this.getWindow(),n=e?"on":"off",r={on:a.u,off:a.t};r[n](t,"mousemove dragover",this.updateClientY),r[n](t,"mouseup",this.stopAutoscroll)},render:function(){var e=this.el,t=this.config;return this.$el.attr({class:this.ppfx+"frame"}),t.scripts.length?this.renderScripts():t.renderContent&&(e.onload=this.renderBody.bind(this)),this},renderScripts:function(){var e=this,t=this.el,n=this.config;t.onload=function(){return function n(r){if(r.length>0){var i=r.shift(),o=Object(k.e)("script",E({type:"text/javascript"},Object(l.isString)(i)?{src:i}:i));o.onerror=o.onload=n.bind(null,r),t.contentDocument.head.appendChild(o)}else e.renderBody()}(i()(n.scripts))}},renderBody:function(){var e=this,t=this.config,n=this.model,r=this.ppfx,i=n.get("root"),o=n.get("styles"),s=t.em,c=this.getDoc(),u=this.getHead(),d=this.getBody(),h=this.getWindow(),f=s.get("Config"),p=[];h._isEditor=!0,t.styles.forEach((function(e){return p.push(Object(l.isString)(e)?{tag:"link",attributes:{href:e,rel:"stylesheet"}}:{tag:"link",attributes:E({rel:"stylesheet"},e)})})),p.length&&Object(k.c)(u,p),Object(k.a)(d,"<style>\n      ".concat(f.baseCss||"","\n\n      .").concat(r,"dashed *[data-highlightable] {\n        outline: 1px dashed rgba(170,170,170,0.7);\n        outline-offset: -2px;\n      }\n\n      .").concat(r,"selected {\n        outline: 3px solid #3b97e3 !important;\n        outline-offset: -3px;\n      }\n\n      .").concat(r,"selected-parent {\n        outline: 2px solid ").concat("#ffca6f"," !important\n      }\n\n      .").concat(r,"no-select {\n        user-select: none;\n        -webkit-user-select:none;\n        -moz-user-select: none;\n      }\n\n      .").concat(r,"freezed {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n\n      .").concat(r,"no-pointer {\n        pointer-events: none;\n      }\n\n      .").concat(r,"plh-image {\n        background: #f5f5f5;\n        border: none;\n        height: 100px;\n        width: 100px;\n        display: block;\n        outline: 3px solid #ffca6f;\n        cursor: pointer;\n        outline-offset: -2px\n      }\n\n      .").concat(r,"grabbing {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n      }\n\n      .").concat(r,"is__grabbing {\n        overflow-x: hidden;\n      }\n\n      .").concat(r,"is__grabbing,\n      .").concat(r,"is__grabbing * {\n        cursor: grabbing !important;\n      }\n\n      ").concat(f.canvasCss||"","\n      ").concat(f.protectedCss||"","\n    </style>")),this.root=new j.default({model:i,config:E(E({},i.config),{},{frameView:this})}).render(),Object(k.a)(d,this.root.el),Object(k.a)(d,new S.a({collection:o,config:E(E({},s.get("CssComposer").getConfig()),{},{frameView:this})}).render().el),Object(k.a)(d,this.getJsContainer()),Object(a.u)(d,"click",(function(e){return e&&"A"==e.target.tagName&&e.preventDefault()})),Object(a.u)(d,"submit",(function(e){return e&&e.preventDefault()})),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousemove",class:"MouseEvent"},{event:"wheel",class:"WheelEvent"}].forEach((function(t){return t.event.split(" ").forEach((function(n){c.addEventListener(n,(function(n){return e.el.dispatchEvent(Object(k.d)(n,t.class))}))}))})),this._toggleEffects(1),n.trigger("loaded")},_toggleEffects:function(e){(e?a.u:a.t)(this.getWindow(),"".concat(k.i," resize"),this._emitUpdate)},_emitUpdate:function(){this.model._emitUpdated()}}),A=n(17);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=m.a.View.extend({events:{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l.bindAll)(this,"onScroll","frameLoaded","updateOffset","remove","startDrag");var n=this.model,r=D(D({},e.config||t),{},{frameWrapView:this}),i=r.em;this.cv=r.canvasView,this.config=r,this.em=i,this.canvas=i&&i.get("Canvas"),this.ppfx=r.pStylePrefix||"",this.frame=new P({model:n,config:r}),this.classAnim="".concat(this.ppfx,"frame-wrapper--anim"),this.listenTo(n,"loaded",this.frameLoaded),this.listenTo(n,"change:x change:y",this.updatePos),this.listenTo(n,"change:width change:height",this.updateSize),this.updatePos(),this.setupDragger()},setupDragger:function(){var e,t,n,r=this,i=this.canvas,o=this.model,s=function(e){i.toggleFramesEvents(e)};this.dragger=new A.a({onStart:function(){var i=o.attributes,a=i.x,l=i.y;n=r.em.getZoomMultiplier(),e=a,t=l,s()},onEnd:function(){return s(1)},setPosition:function(r){o.set({x:e+r.x*n,y:t+r.y*n})}})},startDrag:function(e){e&&this.dragger.start(e)},remove:function(){return m.a.View.prototype.remove.apply(this,arguments),this.frame.remove(),this},updateOffset:Object(l.debounce)((function(){var e=this.$el,t=this.frame;this.em.runDefault({preserveSelected:1}),e.removeClass(this.classAnim),t.model._emitUpdated()})),updatePos:function(e){var t=this.model.attributes,n=t.x,r=t.y,i=this.el.style;this.frame.rect=0,i.left=isNaN(n)?n:"".concat(n,"px"),i.top=isNaN(r)?r:"".concat(r,"px"),e&&this.updateOffset()},updateSize:Object(l.debounce)((function(){this.updateDim()})),updateDim:function(){var e=this.em,t=this.el,n=this.$el,r=this.model,i=this.classAnim,o=r.attributes,s=o.width,a=o.height,c=t.style,u=s||"",d=a||"",h=(c.width||"")==u&&(c.height||"")==d;if(this.frame.rect=0,n.addClass(i),c.width=Object(l.isNumber)(u)?"".concat(u).concat("px"):u,c.height=Object(l.isNumber)(d)?"".concat(d).concat("px"):d,Object(l.isNull)(s)||Object(l.isNull)(a)){var f=D(D({},s?{}:{width:t.offsetWidth}),a?{}:{height:t.offsetHeight});r.set(f,{silent:1})}e.stopDefault({preserveSelected:1}),h?this.updateOffset():n.one(k.i,this.updateOffset)},onScroll:function(){var e=this.frame;this.em.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},frameLoaded:function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},render:function(){var e=this.frame,t=this.$el,n=this.ppfx,r=this.cv,i=this.model,o=this.el,s=i.attributes.onRender;e.render(),t.empty().attr({class:"".concat(n,"frame-wrapper")}).append('\n      <div class="'.concat(n,'frame-wrapper__top gjs-two-color" data-frame-top>\n        <div class="').concat(n,'frame-wrapper__name" data-action-move>\n          ').concat(i.get("name")||"",'\n        </div>\n        <div class="').concat(n,'frame-wrapper__top-r">\n          <div class="').concat(n,'frame-wrapper__icon" data-action-remove style="display: none">\n            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>\n          </div>\n        </div>\n      </div>\n      <div class="').concat(n,'frame-wrapper__right" data-frame-right></div>\n      <div class="').concat(n,'frame-wrapper__left" data-frame-left></div>\n      <div class="').concat(n,'frame-wrapper__bottom" data-frame-bottom></div>\n      ')).append(e.el);var a=Object(k.e)("div",{class:"".concat(n,"tools"),style:"pointer-events:none; opacity: 0"},'\n      <div class="'.concat(n,'highlighter" data-hl></div>\n      <div class="').concat(n,'badge" data-badge></div>\n      <div class="').concat(n,'placeholder">\n        <div class="').concat(n,'placeholder-int"></div>\n      </div>\n      <div class="').concat(n,'ghost"></div>\n      <div class="').concat(n,'toolbar" style="pointer-events:all"></div>\n      <div class="').concat(n,'resizer"></div>\n      <div class="').concat(n,'offset-v" data-offset>\n        <div class="gjs-marginName" data-offset-m>\n          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>\n          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>\n          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>\n          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>\n        </div>\n        <div class="gjs-paddingName" data-offset-m>\n          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>\n          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>\n          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>\n          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>\n        </div>\n      </div>\n      <div class="').concat(n,'offset-fixed-v"></div>\n    '));return this.elTools=a,r.toolsWrapper.appendChild(a),s&&s({el:o,elTop:o.querySelector("[data-frame-top]"),elRight:o.querySelector("[data-frame-right]"),elBottom:o.querySelector("[data-frame-bottom]"),elLeft:o.querySelector("[data-frame-left]"),frame:i,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this}}),L=_.a.extend({itemView:I,autoAdd:1,init:function(){this.listenTo(this.collection,"reset",this.render)},onRender:function(){var e=this.config.em;e&&this.$el.attr({class:"".concat(e.getConfig("stylePrefix"),"frames")})}});function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F,V=m.a.$,z=m.a.View.extend({events:{wheel:"onWheel"},template:function(){var e=this.pfx;return'\n      <div class="'.concat(e,'canvas__frames" data-frames></div>\n      <div id="').concat(e,'tools" class="').concat(e,'canvas__tools" data-tools></div>\n    ')},initialize:function(e){Object(l.bindAll)(this,"clearOff","onKeyPress","onCanvasMove"),Object(a.u)(window,"scroll resize",this.clearOff);var t=this.model,n=t.get("frames");this.config=e.config||{},this.em=this.config.em||{},this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.className=this.config.stylePrefix+"canvas";var r=this.em;this.frames=new L({collection:n,config:R(R({},this.config),{},{canvasView:this,renderContent:1})}),this.listenTo(r,"change:canvasOffset",this.clearOff),this.listenTo(r,"component:selected",this.checkSelected),this.listenTo(t,"change:zoom change:x change:y",this.updateFrames),this.listenTo(n,"loaded:all",(function(){return r.trigger("loaded")})),this.toggleListeners(1)},checkSelected:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).scroll,n=this.em.get("currentFrame");t&&e.views.forEach((function(e){e._getFrame()!==n&&e.scrollIntoView(t)}))},remove:function(){m.a.View.prototype.remove.apply(this,arguments),this.toggleListeners()},preventDefault:function(e){e&&(e.preventDefault(),e._parentEvent&&e._parentEvent.preventDefault())},onCanvasMove:function(e){},toggleListeners:function(e){(e?a.u:a.t)(document,"keypress",this.onKeyPress)},onKeyPress:function(e){var t=this.em;" "!==Object(a.f)(e)||1===t.getZoomDecimal()||t.get("Canvas").isInputFocused()||(this.preventDefault(e),t.get("Editor").runCommand("core:canvas-move"))},onWheel:function(e){if((e.ctrlKey||e.metaKey)&&this.em.getConfig("multiFrames")){this.preventDefault(e);var t=this.model,n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),r=t.get("zoom");t.set("zoom",r+2*n)}},updateFrames:function(e){var t=this.em,n=this.model.attributes,r=n.x,i=n.y,o=this.getZoom(),s={preserveSelected:1},a=o?1/o:1;this.framesArea.style.transform="scale(".concat(o,") translate(").concat(r*a,"px, ").concat(i*a,"px)"),this.clearOff(),t.stopDefault(s),t.trigger("canvas:update",e),F&&clearTimeout(F),F=setTimeout((function(){return t.runDefault(s)}),300)},getZoom:function(){return this.em.getZoomDecimal()},isElInViewport:function(e){var t=Object(a.e)(e),n=Object(a.d)(t),r=this.getFrameOffset(t),i=n.top,o=n.left;return i>=0&&o>=0&&i<=r.height&&o<=r.width},offset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.d)(e),r=e.ownerDocument.body,i=t.noScroll;return{top:n.top+(i?0:r.scrollTop),left:n.left+(i?0:r.scrollLeft),width:n.width,height:n.height}},clearOff:function(){this.frmOff=null,this.cvsOff=null},getFrameOffset:function(e){if(!this.frmOff||e){var t=this.frame.el;this.frmOff=this.offset((e?e.ownerDocument.defaultView.frameElement:t)||t)}return this.frmOff},getCanvasOffset:function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},getElementPos:function(e,t){var n=this.getZoom(),r=t||{},i=this.getFrameOffset(e),o=this.getCanvasOffset(),s=this.offset(e,t);return{top:s.top*n+(r.avoidFrameOffset?0:i.top)-o.top,left:s.left*n+(r.avoidFrameOffset?0:i.left)-o.left,height:s.height*n,width:s.width*n,zoom:n,rect:s}},getElementOffsets:function(e){var t=this;if(!e||Object(a.q)(e))return{};var n={},r=window.getComputedStyle(e);return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"].forEach((function(e){n[e]=parseFloat(r[e])*t.getZoom()})),n},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.frame.el.contentDocument;if(t){var n=t.body,r=this.getZoom(),i=this.getFrameOffset(),o=this.getCanvasOffset(),s=e.noScroll;return{top:i.top+(s?0:n.scrollTop)*r-o.top,left:i.left+(s?0:n.scrollLeft)*r-o.left,width:o.width,height:o.height}}},updateScript:function(e){var t=e.model,n=t.getId();e.scriptContainer||(e.scriptContainer=V('<div data-id="'.concat(n,'">')),this.getJsContainer().appendChild(e.scriptContainer.get(0))),e.el.id=n,e.scriptContainer.html("");var r=document.createElement("script");r.innerHTML="\n        setTimeout(function() {\n          var item = document.getElementById('".concat(n,"');\n          if (!item) return;\n          (function(){\n            ").concat(t.getScriptString(),";\n          }.bind(item))()\n        }, 1);"),setTimeout((function(){return e.scriptContainer.get(0).appendChild(r)}),0)},getJsContainer:function(e){var t=this.getFrameView(e);return t&&t.getJsContainer()},getFrameView:function(e){return e&&e._getFrame()||this.em.get("currentFrame")},render:function(){var e=this.el,t=this.$el,n=this.ppfx,r=this.model,i=this.em,o=this.frames,s=i.get("CssComposer"),a=r.get("wrapper");t.html(this.template());var l=t.find("[data-frames]");this.framesArea=l.get(0),this.wrapper=a,a&&"function"==typeof a.render&&r.get("frame").set({wrapper:a,root:a.getWrapper(),styles:s.getAll()});var c=t.find("[data-tools]");this.toolsWrapper=c.get(0),c.append('\n      <div class="'.concat(n,"tools ").concat(n,'tools-gl" style="pointer-events:none">\n        <div class="').concat(n,'placeholder">\n          <div class="').concat(n,'placeholder-int"></div>\n        </div>\n      </div>\n      <div id="').concat(n,'tools" style="pointer-events:none">\n        <div class="').concat(n,'badge"></div>\n        <div class="').concat(n,'ghost"></div>\n        <div class="').concat(n,'toolbar" style="pointer-events:all"></div>\n        <div class="').concat(n,'resizer"></div>\n        <div class="').concat(n,'offset-v"></div>\n        <div class="').concat(n,'offset-fixed-v"></div>\n      </div>\n    '));var u=e.querySelector("#".concat(n,"tools"));this.hlEl=e.querySelector(".".concat(n,"highlighter")),this.badgeEl=e.querySelector(".".concat(n,"badge")),this.placerEl=e.querySelector(".".concat(n,"placeholder")),this.ghostEl=e.querySelector(".".concat(n,"ghost")),this.toolbarEl=e.querySelector(".".concat(n,"toolbar")),this.resizerEl=e.querySelector(".".concat(n,"resizer")),this.offsetEl=e.querySelector(".".concat(n,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(n,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(n,"tools-gl")),this.toolsEl=u,this.el.className=this.className;var d=r.get("frames");return d.listenToLoad(),o.render(),i.setCurrentFrame(d.at(0).view),l.append(o.el),this.frame=d.at(0).view,this}});function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window,t.default=function(){var e,t,n={};return{getCanvasView:function(){return t},name:"Canvas",init:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=H(H(H({},p),r),{},{module:this}),this.em=n.em;var i=n.pStylePrefix;i&&(n.stylePrefix=i+n.stylePrefix),e=new C(r),t=new z({model:e,config:n});var o=n.em.get("DomComponents");return o&&this.setWrapper(o),this.model=e,this.startAutoscroll=this.startAutoscroll.bind(this),this.stopAutoscroll=this.stopAutoscroll.bind(this),this},getConfig:function(){return n},setWrapper:function(t){e.set("wrapper",t)},getElement:function(){return t.el},getFrame:function(t){return t?this.getFrames()[t]:e.get("frame")},getFrameEl:function(){var e=t.frame;return e&&e.el},getFramesEl:function(){return t.framesArea},getWindow:function(){return this.getFrameEl().contentWindow},getDocument:function(){var e=this.getFrameEl();return e&&e.contentDocument},getBody:function(){var e=this.getDocument();return e&&e.body},getWrapperEl:function(){var e=this.getBody();return e&&e.querySelector("#wrapper")},_getCompFrame:function(e){return e&&e._getFrame()},_getLocalEl:function(e,t,n){var r=e,i=this._getCompFrame(t);return i?i[n]():r},getGlobalToolsEl:function(){return t.toolsGlobEl},getToolsEl:function(e){return this._getLocalEl(t.toolsEl,e,"getToolsEl")},getHighlighter:function(e){return this._getLocalEl(t.hlEl,e,"getHighlighter")},getBadgeEl:function(e){return this._getLocalEl(t.badgeEl,e,"getBadgeEl")},getPlacerEl:function(){return t.placerEl},getGhostEl:function(){return t.ghostEl},getToolbarEl:function(){return t.toolbarEl},getResizerEl:function(){return t.resizerEl},getOffsetViewerEl:function(e){return this._getLocalEl(t.offsetEl,e,"getOffsetViewerEl")},getFixedOffsetViewerEl:function(){return t.fixedOffsetEl},render:function(){return t.render().el},getOffset:function(){var e=this.offset(this.getFrameEl()),t=this.offset(this.getElement());return{top:e.top-t.top,left:e.left-t.left}},offset:function(e){return t.offset(e)},setCustomBadgeLabel:function(e){n.customBadgeLabel=e},getElementPos:function(e,n){return t.getElementPos(e,n)},getElementOffsets:function(e){return t.getElementOffsets(e)},getRect:function(){var e=t.getPosition(),n=e.top,r=e.left;return H(H({},t.getCanvasOffset()),{},{topScroll:n,leftScroll:r})},getTargetToElementDim:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i||{},s=t.getPosition();if(s){var a=o.elPos||t.getElementPos(r),l=i.toRight||0,c=o.event||null,u=a.top-(o.targetHeight||e.offsetHeight),d=a.left;d+=l?a.width:0;var h=(d=l?d-(o.targetWidth||e.offsetWidth):d)<s.left?s.left:d,f=u<s.top?s.top:u,p={top:f=f>a.top+a.height?a.top+a.height:f,left:h,elementTop:a.top,elementLeft:a.left,elementWidth:a.width,elementHeight:a.height,targetWidth:e.offsetWidth,targetHeight:e.offsetHeight,canvasTop:s.top,canvasLeft:s.left,canvasWidth:s.width,canvasHeight:s.height};return c&&n.em&&n.em.trigger(c,p),p}},canvasRectOffset:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e){var t=e.defaultView;return t&&t.frameElement},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,s=n.em.getZoomDecimal(),a=t?"top":"left",l=e.ownerDocument,c=r.offset?i(l):{},u=c.offsetTop,d=c.offsetLeft,h=l.body||{},f=h.scrollTop,p=h.scrollLeft;return o[a]-((t?void 0===f?0:f:void 0===p?0:p)-(t?void 0===u?0:u:void 0===d?0:d))*s};return{top:o(e,1,t),left:o(e,0,t)}},getTargetToElementFixed:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.pos||this.getElementPos(e),i=n.canvasOff||this.canvasRectOffset(e,r),o=t.offsetHeight||0,s=t.offsetWidth||0,a=r.left+r.width,l=this.getCanvasView(),c=l.getPosition(),u=l.getFrameOffset(e),d=n.event,h=-o,f=r.width-s;f=r.left<-f?-r.left:f;var p=r.height+o;i.top<o&&(p<u.height?h+=p:h=-i.top<r.height?-i.top:r.height);var g={top:h,left:f=a>c.width?f-(a-c.width):f,canvasOffsetTop:i.top,canvasOffsetLeft:i.left};return d&&this.em.trigger(d,g),g},getMouseRelativePos:function(e,t){var n=0,r=0,i=(t||{}).subWinOffset,o=e.target.ownerDocument,s=o.defaultView||o.parentWindow,a=s.frameElement,l=i?s.pageYOffset:0,c=i?s.pageXOffset:0;if(a){var u=a.getBoundingClientRect();n=u.top||0,r=u.left||0}return{y:e.clientY+n-l,x:e.clientX+r-c}},getMouseRelativeCanvas:function(e,n){var r=this.getZoomDecimal(),i=t.getPosition(n);return{y:e.clientY*r+i.top,x:e.clientX*r+i.left}},hasFocus:function(){return this.getDocument().hasFocus()},isInputFocused:function(){var e=this.getDocument(),t=this.getFrameEl(),n=["body"].concat(i()(this.getConfig().notTextable)),r=t&&document.activeElement===t?e&&e.activeElement:document.activeElement;return r&&!n.some((function(e){return r.matches(e)}))},scrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.e)(e),r=n&&Object(a.j)(n);r&&r.scrollIntoView(t)},startAutoscroll:function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.startAutoscroll()},stopAutoscroll:function(e){var t=e&&e.view||this.em.getCurrentFrame();t&&t.stopAutoscroll()},postRender:function(){Object(a.k)(n.em)&&(this.droppable=new f(n.em))},setZoom:function(t){return e.set("zoom",parseFloat(t)),this},getZoom:function(){return parseFloat(e.get("zoom"))},getZoomDecimal:function(){return this.getZoom()/100},getZoomMultiplier:function(){var e=this.getZoomDecimal();return e?1/e:1},toggleFramesEvents:function(e){this.getFramesEl().style.pointerEvents=e?"":"none"},getFrameWrapperEl:function(){return t.frame.getWrapper()},getFrames:function(){return e.get("frames").map((function(e){return e}))},addFrame:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.get("frames").add(H({},t),H(H({},n),{},{em:this.em}))}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(0),s={appendTo:"",appendOnClick:0,blocks:[]},a=n(1),l=n.n(a),c=l.a.Model.extend({defaults:{id:"",label:"",open:!0,attributes:{}}}),u=l.a.Model.extend({defaults:{activate:0,select:0,resetId:0,label:"",disable:0,media:"",content:"",category:"",attributes:{}},initialize:function(){var e=this.get("category");e&&"string"==typeof e&&new c({id:e,label:e})}}),d=l.a.Collection.extend({model:u}),h=l.a.Collection.extend({model:c}),f=n(3),p=l.a.View.extend({events:{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.model;this.em=t.em,this.config=t,this.endDrag=this.endDrag.bind(this),this.ppfx=t.pStylePrefix||"",this.listenTo(n,"destroy remove",this.remove),this.listenTo(n,"change",this.render)},handleClick:function(){var e=this.config,t=this.model,n=this.em;if(e.appendOnClick){var r,i=e.getSorter(),o=t.get("content"),s=n.getSelected();if(i.setDropContent(o),s)if(i.validTarget(s.getEl(),o).valid)r=s;else{var a=s.parent();i.validTarget(a.getEl(),o).valid&&(r=a)}if(!r){var l=n.getWrapper();i.validTarget(l.getEl(),o).valid&&(r=l)}var c=r&&r.append(o)[0];c&&n.setSelected(c,{scroll:1})}},startDrag:function(e){var t=this.config,n=this.em,r=this.model.get("disable");if(0===e.button&&t.getSorter&&!this.el.draggable&&!r){n.refreshCanvas();var i=t.getSorter();i.setDragHelper(this.el,e),i.setDropContent(this.model.get("content")),i.startSort(this.el),Object(f.u)(document,"mouseup",this.endDrag)}},handleDragStart:function(e){var t=this.em,n=this.model,r=n.get("content"),i=Object(o.isObject)(r)?JSON.stringify(r):r;t.set("dragResult"),e.dataTransfer.setData("text",i),t.set("dragContent",r),t.trigger("block:drag:start",n,e)},handleDrag:function(e){this.em.trigger("block:drag",this.model,e)},handleDragEnd:function(){var e=this.em,t=this.model,n=e.get("dragResult");if(n){var r=n.get&&n.get("activeOnRender");(t.get("activate")||r)&&(n.trigger("active"),n.set("activeOnRender",0)),t.get("select")&&e.setSelected(n),t.get("resetId")&&n.onAll((function(e){return e.resetId()}))}e.set({dragResult:null,dragContent:null}),e.trigger("block:drag:stop",n,t)},endDrag:function(e){Object(f.t)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},render:function(){var e=this.em,t=this.el,n=this.$el,r=this.ppfx,i=this.model,o=i.get("disable"),s=i.get("attributes")||{},a=s.class||"",l="".concat(r,"block"),c=e&&e.t("blockManager.labels.".concat(i.id))||i.get("label"),u=i.get("render"),d=i.get("media"),h=o?"".concat(l,"--disable"):"".concat(r,"four-color-h");n.attr(s),t.className="".concat(a," ").concat(l," ").concat(r,"one-bg ").concat(h).trim(),t.innerHTML="\n      ".concat(d?'<div class="'.concat(l,'__media">').concat(d,"</div>"):"",'\n      <div class="').concat(l,'-label">').concat(c,"</div>\n    "),t.title=t.textContent.trim(),t.setAttribute("draggable",!(!Object(f.k)(e)||o));var p=u&&u({el:t,model:i,className:l,prefix:r});return p&&(t.innerHTML=p),this}}),g=l.a.View.extend({template:Object(o.template)('\n  <div class="<%= pfx %>title">\n    <i class="<%= pfx %>caret-icon"></i>\n    <%= label %>\n  </div>\n  <div class="<%= pfx %>blocks-c"></div>\n  '),events:{},initialize:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.config=e;var t=e.pStylePrefix||"";this.em=e.em,this.pfx=t,this.caretR="fa fa-caret-right",this.caretD="fa fa-caret-down",this.iconClass="".concat(t,"caret-icon"),this.activeClass="".concat(t,"open"),this.className="".concat(t,"block-category"),this.events["click .".concat(t,"title")]="toggle",this.listenTo(this.model,"change:open",this.updateVisibility),this.delegateEvents()},updateVisibility:function(){this.model.get("open")?this.open():this.close()},open:function(){this.el.className="".concat(this.className," ").concat(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},close:function(){this.el.className=this.className,this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},toggle:function(){var e=this.model;e.set("open",!e.get("open"))},getIconEl:function(){return this.iconEl||(this.iconEl=this.el.querySelector("."+this.iconClass)),this.iconEl},getBlocksEl:function(){return this.blocksEl||(this.blocksEl=this.el.querySelector("."+this.pfx+"blocks-c")),this.blocksEl},append:function(e){this.getBlocksEl().appendChild(e)},render:function(){var e=this.el,t=this.$el,n=this.model,r=this.em.t("blockManager.categories.".concat(n.id))||n.get("label");return e.innerHTML=this.template({pfx:this.pfx,label:r}),e.className=this.className,t.css({order:n.get("order")}),this.updateVisibility(),this}});function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=l.a.View.extend({initialize:function(e,t){Object(o.bindAll)(this,"getSorter","onDrag","onDrop"),this.config=t||{},this.categories=e.categories||"",this.renderedCategories=[];var n=this.config.pStylePrefix||"";this.ppfx=n,this.noCatClass="".concat(n,"blocks-no-cat"),this.blockContClass="".concat(n,"blocks-c"),this.catsClass="".concat(n,"block-categories");var r=this.collection;this.listenTo(r,"add",this.addTo),this.listenTo(r,"reset",this.render),this.em=this.config.em,this.tac="test-tac",this.grabbingCls=this.ppfx+"grabbing",this.em&&(this.config.getSorter=this.getSorter,this.canvas=this.em.get("Canvas"))},updateConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=v(v({},this.config),e)},getSorter:function(){if(this.em){if(!this.sorter){var e=this.em.get("Utils"),t=this.canvas;this.sorter=new e.Sorter({container:t.getBody(),placer:t.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:t.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:this.em,canvasRelative:1})}return this.sorter}},onDrag:function(e){this.em.stopDefault(),this.em.trigger("block:drag:start",e)},onMove:function(e){this.em.trigger("block:drag:move",e)},onDrop:function(e){var t=this.em;t.runDefault(),e&&e.get&&(e.get("activeOnRender")&&(e.trigger("active"),e.set("activeOnRender",0)),t.trigger("block:drag:stop",e))},addTo:function(e){this.add(e)},add:function(e,t){var n=this.config,r=t||null,i=new p({model:e,attributes:e.get("attributes")},n).render().el,s=e.get("category");if(s&&this.categories&&!n.ignoreCategories){Object(o.isString)(s)?s={id:s,label:s}:Object(o.isObject)(s)&&!s.id&&(s.id=s.label);var a=this.categories.add(s),l=a.get("id"),c=this.renderedCategories[l],u=this.getCategoriesEl();return e.set("category",a),!c&&u&&(c=new g({model:a},this.config).render(),this.renderedCategories[l]=c,u.appendChild(c.el)),void(c&&c.append(i))}r?r.appendChild(i):this.append(i)},getCategoriesEl:function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},getBlocksEl:function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},append:function(e){var t=this.getBlocksEl();t&&t.appendChild(e)},render:function(){var e=this,t=this.ppfx,n=document.createDocumentFragment();this.catsEl=null,this.blocksEl=null,this.renderedCategories=[],this.el.innerHTML='\n      <div class="'.concat(this.catsClass,'"></div>\n      <div class="').concat(this.noCatClass,'">\n        <div class="').concat(this.blockContClass,'"></div>\n      </div>\n    '),this.collection.each((function(t){return e.add(t,n)})),this.append(n);var r="".concat(this.blockContClass,"s ").concat(t,"one-bg ").concat(t,"two-color");return this.$el.addClass(r),this}});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={},i=[];return{name:"BlockManager",init:function(n){var o=(r=n||{}).em;for(var a in s)a in r||(r[a]=s[a]);return e=new d([]),t=new d([]),i=new h,e.listenTo(e,"add",(function(e){t.add(e),o&&o.trigger("block:add",e)})),e.listenTo(e,"remove",(function(e){t.remove(e),o&&o.trigger("block:remove",e)})),e.listenTo(e,"reset",(function(e){t.reset(e.models)})),this},getConfig:function(){return r},onLoad:function(){var e=this.getAll();!e.length&&e.reset(r.blocks)},postRender:function(){n=new b({collection:t,categories:i},r);var e=this.getConfig().appendTo;e&&(Object(o.isElement)(e)?e:document.querySelector(e)).appendChild(this.render(t.models))},add:function(t,n){var r=n||{};return r.id=t,e.add(r)},get:function(t){return e.get(t)},getAll:function(){return e},getAllVisible:function(){return t},remove:function(t){return e.remove(t)},getCategories:function(){return i},getContainer:function(){return n.el},render:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e||this.getAll().models;if(t.external){var s=new d(o);return new b({collection:s,categories:i},w(w({},r),t)).render().el}return n&&(n.updateConfig(t),n.collection.reset(o),n.rendered||(n.render(),n.rendered=1)),this.getContainer()}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(11),s={stylePrefix:"gjs-",components:"",style:"",fromElement:0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"\n    * {\n      box-sizing: border-box;\n    }\n    html, body, [data-gjs-type=wrapper] {\n      min-height: 100%;\n    }\n    body {\n      margin: 0;\n      height: 100%;\n      background-color: #fff\n    }\n    [data-gjs-type=wrapper] {\n      overflow: auto;\n      overflow-x: hidden;\n    }\n\n    * ::-webkit-scrollbar-track {\n      background: rgba(0, 0, 0, 0.1)\n    }\n\n    * ::-webkit-scrollbar-thumb {\n      background: rgba(255, 255, 255, 0.2)\n    }\n\n    * ::-webkit-scrollbar {\n      width: 10px\n    }\n  ",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:1,allowScripts:0,showDevices:1,devicePreviewMode:0,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:0,jsInHtml:!0,nativeDnD:1,multipleSelection:1,exportWrapper:0,wrapperIsBody:1,avoidInlineStyle:1,avoidDefaults:1,clearStyles:0,dragMode:0,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",el:"",i18n:{},undoManager:{},assetManager:{},canvas:{},layers:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"768px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]},styleManager:{sectors:[{name:"General",open:!1,buildProps:["float","display","position","top","right","left","bottom"]},{name:"Flex",open:!1,buildProps:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,buildProps:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,buildProps:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"],properties:[{property:"text-align",list:[{value:"left",className:"fa fa-align-left"},{value:"center",className:"fa fa-align-center"},{value:"right",className:"fa fa-align-right"},{value:"justify",className:"fa fa-align-justify"}]}]},{name:"Decorations",open:!1,buildProps:["border-radius-c","background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,buildProps:["transition","perspective","transform"]}]},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:0,multiFrames:0},a=n(0),l=n(1),c=n.n(l),u=n(3);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c.a.$=o.default;var f,p,g=[n(107),n(106),n(76),n(77),n(101),n(100),n(104),n(98),n(103),n(102),n(99),n(97),n(105),n(96),n(108),n(95),n(91),n(69),n(92),n(109),n(93)],m=c.a.Collection;!function(e){var t=e.$;if(t&&"jQuery"!==t.prototype.constructor.name){var n=t.fn;n.hide=function(){return this.css("display","none")},n.show=function(){return this.css("display","block")},n.focus=function(){var e=this.get(0);return e&&e.focus(),this},n.bind=function(e,t){return this.on(e,t)},n.unbind=function(e,t){if(Object(a.isObject)(e)){for(var n in e)e.hasOwnProperty(n)&&this.off(n,e[n]);return this}return this.off(e,t)},n.click=function(e){return e?this.on("click",e):this.trigger("click")},n.change=function(e){return e?this.on("change",e):this.trigger("change")},n.keydown=function(e){return e?this.on("keydown",e):this.trigger("keydown")},n.delegate=function(e,t,n,r){return r||(r=n),this.on(t,e,(function(e){e.data=n,r(e)}))},n.scrollLeft=function(){var e=this.get(0),t=(e=9==e.nodeType?e.defaultView:e)instanceof Window?e:null;return t?t.pageXOffset:e.scrollLeft||0},n.scrollTop=function(){var e=this.get(0),t=(e=9==e.nodeType?e.defaultView:e)instanceof Window?e:null;return t?t.pageYOffset:e.scrollTop||0};var r=t.prototype.offset;n.offset=function(e){var t,n;return e&&(t=e.top,n=e.left),void 0!==t&&this.css("top","".concat(t,"px")),void 0!==n&&this.css("left","".concat(n,"px")),r.call(this)},t.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n};var i=Array.prototype.indexOf;t.inArray=function(e,t,n){return null==t?-1:i.call(t,e,n)},t.Event=function(e,n){if(!(this instanceof t.Event))return new t.Event(e,n);this.type=e,this.isDefaultPrevented=function(){return!1}}}}({Backbone:c.a,$:c.a.$});var v={debug:console.log,info:console.info,warning:console.warn,error:console.error},b=c.a.Model.extend({defaults:function(){return{editing:0,selected:new m,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=t,this.set("Config",t),this.set("modules",[]),this.set("toLoad",[]),this.set("storables",[]),this.set("selected",new m),this.set("dmode",t.dragMode);var n=t.el,r=t.log,i=!0===r?Object(a.keys)(v):Object(a.isArray)(r)?r:[];Object(a.bindAll)(this,"initBaseColorPicker"),n&&t.fromElement&&(this.config.components=n.innerHTML),this.attrsOrig=n?Object(a.toArray)(n.attributes).reduce((function(e,t){return e[t.nodeName]=t.nodeValue,e}),{}):"",g.forEach((function(t){return e.loadModule(t)})),this.on("change:componentHovered",this.componentHovered,this),this.on("change:changesCount",this.updateChanges,this),i.forEach((function(t){return e.listenLog(t)})),[{from:"change:selectedComponent",to:"component:toggled"}].forEach((function(t){var n=t.from,r=t.to;e.listenTo(e,n,(function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];e.trigger.apply(e,[r].concat(i)),e.logWarning("The event '".concat(n,"' is deprecated, replace it with '").concat(r,"'"))}))}))},getContainer:function(){return this.config.el},listenLog:function(e){this.listenTo(this,"log:".concat(e),v[e])},getConfig:function(e){var t=this.config;return Object(a.isUndefined)(e)?t:t[e]},loadOnStart:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.get("StorageManager");this.get("toLoad").forEach((function(e){e.onLoad()}));var r=function(){e.get("modules").forEach((function(t){return t.postLoad&&t.postLoad(e)})),t&&t()};n&&n.canAutoload()?this.load(r):r()},updateChanges:function(){var e=this,t=this.get("StorageManager"),n=this.get("changesCount");p&&clearTimeout(p),p=setTimeout((function(){return e.trigger("update")})),this.config.noticeOnUnload&&(window.onbeforeunload=n?function(e){return 1}:null),t.isAutosave()&&n>=t.getStepsBeforeSave()&&this.store()},loadModule:function(e){var t=this.config,n=new(e.default||e),r=n.name.charAt(0).toLowerCase()+n.name.slice(1),i=Object(a.isUndefined)(t[r])?t[n.name]:t[r],o=i||{},s=this.get("StorageManager");if(o.pStylePrefix=t.pStylePrefix||"",Object(a.isUndefined)(i)||i||(o._disable=1),n.storageKey&&n.store&&n.load&&s){o.stm=s;var l="domComponents"==r?"unshift":"push";this.get("storables")[l](n)}return o.em=this,n.init(h({},o)),!n.private&&this.set(n.name,n),n.onLoad&&this.get("toLoad").push(n),this.get("modules").push(n),this},init:function(e){this.destroyed&&(this.initialize(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.destroyed=0),this.set("Editor",e)},getEditor:function(){return this.get("Editor")},handleUpdates:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.temporary||(f&&clearInterval(f),f=setTimeout((function(){r.avoidStore||n.set("changesCount",n.get("changesCount")+1,r)}),0))},componentHovered:function(e,t,n){var r=this.previous("componentHovered");r&&this.trigger("component:unhovered",r,n),t&&this.trigger("component:hovered",t,n)},getSelected:function(){return this.get("selected").last()},getSelectedAll:function(){var e=this.get("selected");return e&&e.models||[]},setSelected:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.event,i=r&&(r.ctrlKey||r.metaKey),s=(r||{}).shiftKey,l=Object(a.isArray)(e),c=l?e:[e],d=this.get("selected"),h=this.getConfig("multipleSelection");l&&this.removeSelected(d.filter((function(e){return!Object(a.contains)(c,e)}))),c.forEach((function(e){var r=Object(u.g)(e,o.default);if(!r||r.get("selectable")){if(i&&h)return t.toggleSelected(r);if(s&&h){t.clearSelection(t.get("Canvas").getWindow());var c,f,p=r.collection,g=r.index();if(t.getSelectedAll().forEach((function(e){var t=e.collection,n=e.index();t===p&&(n<g?c=Object(a.isUndefined)(c)?n:Math.max(c,n):n>g&&(f=Object(a.isUndefined)(f)?n:Math.min(f,n)))})),!Object(a.isUndefined)(c))for(;c!==g;)t.addSelected(p.at(c)),c++;if(!Object(a.isUndefined)(f))for(;f!==g;)t.addSelected(p.at(f)),f--;return t.addSelected(r)}!l&&t.removeSelected(d.filter((function(e){return e!==r}))),t.addSelected(r,n)}}))},addSelected:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(u.g)(e,o.default);(Object(a.isArray)(r)?r:[r]).forEach((function(e){if(!e||e.get("selectable")){var r=t.get("selected");n.forceChange&&r.remove(e,n),r.push(e,n)}}))},removeSelected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.get("selected").remove(Object(u.g)(e,o.default),t)},toggleSelected:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(u.g)(e,o.default);(Object(a.isArray)(r)?r:[r]).forEach((function(e){t.get("selected").contains(e)?t.removeSelected(e,n):t.addSelected(e,n)}))},setHovered:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(u.g)(e,o.default);n&&!n.get("hoverable")||(t.forceChange&&this.set("componentHovered",""),this.set("componentHovered",n,t))},getHovered:function(){return this.get("componentHovered")},setComponents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.get("DomComponents").setComponents(e,t)},getComponents:function(){var e=this.get("DomComponents"),t=this.get("CodeManager");if(e&&t){var n=e.getComponents();return t.getCode(n,"json")}},setStyle:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get("CssComposer").getAll(),r=0,i=n.length;r<i;r++)n.pop();return n.add(e,t),this},getStyle:function(){return this.get("CssComposer").getAll()},setState:function(e){return this.set("state",e),this},getState:function(){return this.get("state")},getHtml:function(){var e=this.config,t=e.exportWrapper,n=e.wrapperIsBody,r=e.jsInHtml?this.getJs():"",i=this.get("DomComponents").getComponent();return this.get("CodeManager").getCode(i,"html",{exportWrapper:t,wrapperIsBody:n})+(r?"<script>".concat(r,"<\/script>"):"")},getCss:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.config,n=t.wrapperIsBody,r=e.avoidProtected,i=Object(a.isUndefined)(e.keepUnusedStyles)?t.keepUnusedStyles:e.keepUnusedStyles,o=this.get("CssComposer"),s=this.get("DomComponents").getComponent();return(r?"":t.protectedCss)+this.get("CodeManager").getCode(s,"css",{cssc:o,wrapperIsBody:n,keepUnusedStyles:i})},getJs:function(){var e=this.get("DomComponents").getWrapper();return this.get("CodeManager").getCode(e,"js").trim()},store:function(e){var t=this,n=this.get("StorageManager"),r={};if(n)return this.get("storables").forEach((function(e){var t=e.store(1);for(var n in t)r[n]=t[n]})),n.store(r,(function(n){e&&e(n),t.set("changesCount",0),t.trigger("storage:store",r)})),r},load:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getCacheLoad(1,(function(n){e.get("storables").forEach((function(t){t.load(n),t.postLoad&&t.postLoad(e)})),t&&t(n)}))},getCacheLoad:function(e,t){var n=this;if(this.cacheLoad&&!e)return this.cacheLoad;var r=this.get("StorageManager"),i=[];if(!r)return{};this.get("storables").forEach((function(e){var t=e.storageKey;t=Object(a.isFunction)(t)?t():t,(Object(a.isArray)(t)?t:[t]).forEach((function(e){return i.push(e)}))})),r.load(i,(function(e){n.cacheLoad=e,t&&t(e),setTimeout((function(){return n.trigger("storage:load",e)}))}))},getDeviceModel:function(){var e=this.get("device");return this.get("DeviceManager").get(e)},runDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get("Commands").get(this.config.defaultCommand);t&&!this.defaultRunning&&(t.stop(this,this,e),t.run(this,this,e),this.defaultRunning=1)},stopDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.get("Commands").get(this.config.defaultCommand);t&&(t.stop(this,this,e),this.defaultRunning=0)},refreshCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.set("canvasOffset",null),this.set("canvasOffset",this.get("Canvas").getOffset()),e.tools&&this.trigger("canvas:updateTools")},clearSelection:function(e){(e||window).getSelection().removeAllRanges()},getCurrentMedia:function(){var e=this.config,t=this.getDeviceModel(),n=e.mediaCondition,r=e.devicePreviewMode,i=t&&t.get("widthMedia");return t&&i&&!r?"(".concat(n,": ").concat(i,")"):""},getWrapper:function(){return this.get("DomComponents").getWrapper()},setCurrentFrame:function(e){return this.set("currentFrame",e)},getCurrentFrame:function(){return this.get("currentFrame")},getCurrentFrameModel:function(){return(this.getCurrentFrame()||{}).model},getDirtyCount:function(){return this.get("changesCount")},getZoomDecimal:function(){return this.get("Canvas").getZoomDecimal()},getZoomMultiplier:function(){return this.get("Canvas").getZoomMultiplier()},setDragMode:function(e){return this.set("dmode",e)},t:function(){var e;return(e=this.get("I18n")).t.apply(e,arguments)},inAbsoluteMode:function(){return"absolute"===this.get("dmode")},destroyAll:function(){var e=this.config,t=this.getEditor(),n=(e.grapesjs||{}).editors,r=void 0===n?[]:n,i=this.attributes,s=i.DomComponents,a=i.CssComposer,l=i.UndoManager,c=i.Panels,u=i.Canvas,d=i.Keymaps,h=i.RichTextEditor,f=i.LayerManager;this.stopDefault(),s.clear(),a.clear(),l.clear().removeAll(),c.getPanels().reset(),u.getCanvasView().remove(),d.removeAll(),h.destroy(),f.destroy(),this.view.remove(),this.stopListening(),this.clear({silent:!0}),this.destroyed=1,r.splice(r.indexOf(t),1),Object(o.default)(e.el).empty().attr(this.attrsOrig)},setEditing:function(e){return this.set("editing",e),this},isEditing:function(){return!!this.get("editing")},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ns,r=t.level,i=void 0===r?"debug":r;if(this.trigger("log",e,t),i&&this.trigger("log:".concat(i),e,t),n){var o="log-".concat(n);this.trigger(o,e,t),i&&this.trigger("".concat(o,":").concat(i),e,t)}},logInfo:function(e,t){this.log(e,h(h({},t),{},{level:"info"}))},logWarning:function(e,t){this.log(e,h(h({},t),{},{level:"warning"}))},logError:function(e,t){this.log(e,h(h({},t),{},{level:"error"}))},initBaseColorPicker:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getConfig(),r=n.colorPicker,i=void 0===r?{}:r,s=n.el,a=n.stylePrefix;return Object(o.default)(e).spectrum(h(h({containerClassName:"".concat(a,"one-bg ").concat(a,"two-color"),appendTo:s||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"\u2a2f"},t),i))},data:function(e,t,n){if(e["_gjs-data"]||(e["_gjs-data"]={}),Object(a.isUndefined)(n))return e["_gjs-data"][t];e["_gjs-data"][t]=n}}),y=c.a.$,w=c.a.View.extend({initialize:function(){var e=this,t=this.model;t.view=this,this.conf=t.config,this.pn=t.get("Panels"),this.cv=t.get("Canvas"),t.on("loaded",(function(){e.pn.active(),e.pn.disableButtons(),setTimeout((function(){t.runDefault(),t.trigger("load",t.get("Editor"))}))}))},render:function(){var e=this.$el,t=this.conf,n=t.stylePrefix,r=y(t.el||"body ".concat(t.container));return Object(u.a)(t.cssIcons,{unique:1,prepand:1}),e.empty(),t.width&&r.css("width",t.width),t.height&&r.css("height",t.height),e.append(this.cv.render()),e.append(this.pn.render()),e.attr("class","".concat(n,"editor ").concat(n,"one-bg ").concat(n,"two-color")),r.addClass("".concat(n,"editor-cont")).empty().append(e),this}});function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=O(O({},s),e);t.pStylePrefix=t.stylePrefix;var n=new b(t),r=new w({model:n,config:t});return{$:o.default,editor:n,init:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.init(this,O(O({},t),i)),["I18n","Utils","Config","Commands","Keymaps","Modal","Panels","Canvas","Parser","CodeManager","UndoManager","RichTextEditor","DomComponents",["Components","DomComponents"],"LayerManager",["Layers","LayerManager"],"CssComposer",["Css","CssComposer"],"StorageManager",["Storage","StorageManager"],"AssetManager",["Assets","AssetManager"],"BlockManager",["Blocks","BlockManager"],"TraitManager",["Traits","TraitManager"],"SelectorManager",["Selectors","SelectorManager"],"StyleManager",["Styles","StyleManager"],"DeviceManager",["Devices","DeviceManager"]].forEach((function(t){Array.isArray(t)?e[t[0]]=n.get(t[1]):e[t]=n.get(t)})),n.on("loaded",(function(){e.UndoManager.clear(),n.get("modules").forEach((function(e){e.postRender&&e.postRender(r)}))})),this},getConfig:function(e){return n.getConfig(e)},getHtml:function(e){return n.getHtml(e)},getCss:function(e){return n.getCss(e)},getJs:function(){return n.getJs()},getComponents:function(){return n.get("DomComponents").getComponents()},getWrapper:function(){return n.get("DomComponents").getWrapper()},setComponents:function(e){return n.setComponents(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this},addComponents:function(e,t){return this.getWrapper().append(e,t)},getStyle:function(){return n.get("CssComposer").getAll()},setStyle:function(e){return n.setStyle(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this},getSelected:function(){return n.getSelected()},getSelectedAll:function(){return n.getSelectedAll()},getSelectedToStyle:function(){var e=n.getSelected();if(e)return this.StyleManager.getModelToStyle(e)},select:function(e,t){return n.setSelected(e,t),this},selectAdd:function(e){return n.addSelected(e),this},selectRemove:function(e){return n.removeSelected(e),this},selectToggle:function(e){return n.toggleSelected(e),this},setDevice:function(e){return n.set("device",e),this},getDevice:function(){return n.get("device")},runCommand:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.get("Commands").run(e,t)},stopCommand:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.get("Commands").stop(e,t)},store:function(e){return n.store(e)},load:function(e){return n.load(e)},getContainer:function(){return t.el},getDirtyCount:function(){return n.getDirtyCount()},refresh:function(e){n.refreshCanvas(e)},setCustomRte:function(e){this.RichTextEditor.customRte=e},setCustomParserCss:function(e){return this.Parser.getConfig().parserCss=e,this},setDragMode:function(e){return n.setDragMode(e),this},log:function(e){return n.log(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this},t:function(){return n.t.apply(n,arguments)},on:function(e,t){return n.on(e,t),this},once:function(e,t){return n.once(e,t),this},off:function(e,t){return n.off(e,t),this},trigger:function(e){return n.trigger.apply(n,arguments),this},destroy:function(){return n.destroyAll()},getEl:function(){return r.el},getModel:function(){return n},render:function(){return r.render(),r.el}}},_={plugins:[]};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(){if(function(){for(var e,t=window.navigator.userAgent,n=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],r=0;r<n.length&&!(e=n[r][1].exec(t));r++);return!!e}()){var e=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),e.apply(document.implementation,[t])}}}();var k=new function(e){var t={};for(var n in _)n in t||(t[n]=_[n]);var r={};return{add:function(e,t){return r[e]?r[e]:(r[e]=t,t)},get:function(e){return r[e]},getAll:function(){return r}}},T=[],E={autorender:1,plugins:[],pluginsOpts:{}};t.default={$:o.default,editors:T,plugins:k,version:"0.16.27",init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container;if(!t)throw new Error("'container' is required");(e=j(j(j({},E),e),{},{grapesjs:this})).el=Object(a.isElement)(t)?t:document.querySelector(t);var n=new C(e).init();return e.plugins.forEach((function(t){var r=k.get(t),i=e.pluginsOpts[t]||{};if(!r){var o=window[t];r=o&&o.default?o.default:o}r?r(n,i):Object(a.isFunction)(t)?t(n,i):console.warn("Plugin ".concat(t," not found"))})),n.getModel().loadOnStart(),e.autorender&&n.render(),T.push(n),n}}},function(e,t,n){"use strict";n.r(t);var r=n(0),i={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}]},o=n(20),s=n(2),a=n.n(s),l=n(72),c=n.n(l),u=n(1),d=n.n(u),h=n(3);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=d.a.$,m=d.a.View.extend({events:{},eventCapture:["change"],appendInput:1,attributes:function(){return this.model.get("attributes")},templateLabel:function(){var e=this.ppfx,t=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(t,'">').concat(t,"</div>")},templateInput:function(){return'<div class="'.concat(this.clsField,'" data-input></div>')},initialize:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).config,n=void 0===t?{}:t,r=this.model,i=this.eventCapture,o=r.target,s=r.attributes.type;this.config=n,this.em=n.em,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.target=o;var a=this.ppfx;this.clsField="".concat(a,"field ").concat(a,"field-").concat(s),[["change:value",this.onValueChange],["remove",this.removeView]].forEach((function(t){var n=c()(t,2),i=n[0],o=n[1];r.off(i,o),e.listenTo(r,i,o)})),r.view=this,this.listenTo(r,"change:label",this.render),this.listenTo(r,"change:placeholder",this.rerender),i.forEach((function(t){return e.events[t]="onChange"})),this.delegateEvents(),this.init()},getClbOpts:function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},removeView:function(){this.remove(),this.removed()},init:function(){},removed:function(){},onRender:function(){},onUpdate:function(){},onEvent:function(){},onChange:function(e){var t=this.getInputElem();t&&!Object(r.isUndefined)(t.value)&&this.model.set("value",t.value),this.onEvent(p(p({},this.getClbOpts()),{},{event:e}))},getValueForTarget:function(){return this.model.get("value")},setInputValue:function(e){var t=this.getInputElem();t&&(t.value=e)},onValueChange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.fromTarget)this.setInputValue(e.get("value")),this.postUpdate();else{var r=this.getValueForTarget();e.setTargetValue(r,n)}},renderLabel:function(){var e=this.$el,t=this.target,n=this.getLabel(),r=this.templateLabel(t);this.createLabel&&(r=this.createLabel({label:n,component:t,trait:this})||""),e.find("[data-label]").append(r)},getLabel:function(){var e=this.model.attributes,t=e.label,n=e.name;return this.em.t("traitManager.traits.labels.".concat(n))||Object(h.c)(t||n).replace(/-/g," ")},getComponent:function(){return this.target},getInputEl:function(){if(!this.$input){var e=this.em,t=this.model,n=t,i=t.attributes.name,o=n.get("placeholder")||n.get("default")||"",s=n.get("type")||"text",a=n.get("min"),l=n.get("max"),c=this.getModelValue(),u=g('<input type="'.concat(s,'" placeholder="').concat(o,'">')),d=e.t("traitManager.traits.attributes.".concat(i))||{};u.attr(d),Object(r.isUndefined)(c)||(n.set({value:c},{silent:!0}),u.prop("value",c)),a&&u.prop("min",a),l&&u.prop("max",l),this.$input=u}return this.$input.get(0)},getInputElem:function(){var e=this.$input;return this.input||e&&e.get&&e.get(0)||this.getElInput()},getModelValue:function(){var e,t=this.model,n=this.target,i=t.get("name");if(t.get("changeProp"))e=n.get(i);else{var o=n.get("attributes");e=t.get("value")||o[i]}return Object(r.isUndefined)(e)?"":e},getElInput:function(){return this.elInput},renderField:function(){var e=this.appendInput,t=this.model,n=this.$el.find("[data-input]"),i=n[n.length-1],o=t.el;o||(o=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),Object(r.isString)(o)?(i.innerHTML=o,this.elInput=i.firstChild):(e?i.appendChild(o):i.insertBefore(o,i.firstChild),this.elInput=o),t.el=this.elInput},hasLabel:function(){return!this.noLabel&&!1!==this.model.attributes.label},rerender:function(){this.model.el=null,this.render()},postUpdate:function(){this.onUpdate(this.getClbOpts())},render:function(){var e=this.$el,t=this.pfx,n=this.ppfx,i=this.model.attributes,o=i.type,s=i.id,a=this.hasLabel&&this.hasLabel(),l="".concat(t,"trait");this.$input=null;var c='<div class="'.concat(l," ").concat(l,"--").concat(o,'">\n      ').concat(a?'<div class="'.concat(n,'label-wrp" data-label></div>'):"",'\n      <div class="').concat(n,"field-wrp ").concat(n,"field-wrp--").concat(o,'" data-input>\n        ').concat(this.templateInput?Object(r.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"","\n      </div>\n    </div>");return e.empty().append(c),a&&this.renderLabel(),this.renderField(),this.el.className="".concat(l,"__wrp ").concat(l,"__wrp-").concat(s),this.postUpdate(),this.onRender(this.getClbOpts()),this}}),v=d.a.$,b=m.extend({init:function(){this.listenTo(this.model,"change:options",this.rerender)},templateInput:function(){var e=this.ppfx;return'<div class="'.concat(this.clsField,'">\n      <div data-input></div>\n      <div class="').concat(e,'sel-arrow">\n        <div class="').concat(e,'d-s-arrow"></div>\n      </div>\n    </div>')},getInputEl:function(){if(!this.$input){var e=this.model,t=this.em,n=e.get("name"),i=e.get("options")||[],o=[],s="<select>";i.forEach((function(e){var i,a,l,c="";Object(r.isString)(e)?(i=e,a=e):(i=e.name||e.label||e.value,a="".concat(Object(r.isUndefined)(e.value)?e.id:e.value).replace(/"/g,"&quot;"),c+=(l=e.style?e.style.replace(/"/g,"&quot;"):"")?' style="'.concat(l,'"'):"");var u=t.t("traitManager.traits.options.".concat(n,".").concat(a))||i;s+='<option value="'.concat(a,'"').concat(c,">").concat(u,"</option>"),o.push(a)})),this.$input=v(s+="</select>");var a=e.getTargetValue(),l=o.indexOf(a)>=0?a:e.get("default");!Object(r.isUndefined)(l)&&this.$input.val(l)}return this.$input.get(0)}}),y=m.extend({appendInput:0,templateInput:function(){var e=this.ppfx;return'<label class="'.concat(this.clsField,'" data-input>\n    <i class="').concat(e,'chk-icon"></i>\n  </label>')},onChange:function(){var e=this.getInputElem().checked;this.model.set("value",this.getCheckedValue(e))},getCheckedValue:function(e){var t=e,n=this.model.attributes,i=n.valueTrue,o=n.valueFalse;return t&&!Object(r.isUndefined)(i)&&(t=i),t||Object(r.isUndefined)(o)||(t=o),t},getInputEl:function(){for(var e=!this.$input,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=m.prototype.getInputEl.apply(this,n);if(e){var s,a,l=this.model,c=this.target,u=l.attributes,d=u.valueFalse,h=l.get("name");l.get("changeProp")?a=s=c.get(h):s=!(!(a=c.get("attributes")[h])&&""!==a),Object(r.isUndefined)(d)||a!==d||(s=!1),o.checked=s}return o}}),w=n(32),x=m.extend({getValueForTarget:function(){var e=this.model,t=e.attributes,n=t.value,i=t.unit;return Object(r.isUndefined)(n)||""===n?e.get("default"):n+i},getInputEl:function(){if(!this.input){var e=this.getModelValue(),t=new w.a({contClass:this.ppfx+"field-int",model:this.model,ppfx:this.ppfx});this.input=t.render(),this.$input=this.input.inputEl,this.$unit=this.input.unitEl,this.model.set("value",e,{fromTarget:1}),this.$input.val(e),this.input=t.el}return this.input}}),O=n(38),C=m.extend({templateInput:"",getInputEl:function(){if(!this.input){var e=this.model,t=this.getModelValue(),n=new O.a({model:e,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();n.setValue(t,{fromTarget:1}),this.input=n.el}return this.input}}),_=m.extend({events:{"click button":"handleClick"},templateInput:"",handleClick:function(){var e=this.model,t=this.em,n=e.get("command");n&&(Object(r.isString)(n)?t.get("Commands").run(n):n(t.get("Editor"),e))},renderLabel:function(){this.model.get("label")&&m.prototype.renderLabel.apply(this,arguments)},getInputEl:function(){var e=this.ppfx,t=this.model.props(),n=t.full,r=t.labelButton||t.text,i="".concat(e,"btn");return'<button type="button" class="'.concat(i,"-prim").concat(n?" ".concat(i,"--full"):"",'">').concat(r,"</button>")}}),S=o.a.extend({ns:"Traits",itemView:m,reuseView:1,itemsView:{text:m,number:x,select:b,checkbox:y,color:C,button:_},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.config||{};this.config=t,this.em=e.editor,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.className=this.pfx+"traits",this.listenTo(this.em,"component:toggled",this.updatedCollection),this.updatedCollection()},updatedCollection:function(){var e=this.ppfx,t=this.em.getSelected();this.el.className="".concat(this.className," ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=t?t.get("traits"):[],this.render()}});t.default=function(){var e,t={};return{TraitsView:S,name:"TraitManager",getConfig:function(){return t},init:function(){t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Object(r.defaults)(t,i);var n=t.pStylePrefix;return n&&(t.stylePrefix="".concat(n).concat(t.stylePrefix)),e=new S({collection:[],editor:t.em,config:t}),this},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(r.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},getTraitsViewer:function(){return e},addType:function(t,n){e.itemsView[t]=e.itemView.extend(n)},getType:function(t){return e.itemsView[t]},render:function(){return e.render().el}}}},function(e,t,n){"use strict";n.r(t);var r={assets:[],noAssets:"",stylePrefix:"am-",upload:0,uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:1,customFetch:"",uploadFile:"",embedAsBase64:1,handleAdd:"",dropzone:0,openAssetsOnDrop:1,dropzoneContent:"",beforeUpload:null,showUrlInput:!0},i=n(1),o=n.n(i),s=n(2),a=n.n(s),l=o.a.Model.extend({idAttribute:"src",defaults:{type:"",src:""},getFilename:function(){return this.get("src").split("/").pop()},getExtension:function(){return this.getFilename().split(".").pop()}});function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=l.extend({defaults:u(u({},l.prototype.defaults),{},{type:"image",unitDim:"px",height:0,width:0})}),h=n(0),f=o.a.View.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.collection=e.collection;var t=e.config||{};this.config=t,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.em=t.em,this.className=this.pfx+"asset",this.listenTo(this.model,"destroy remove",this.remove),this.model.view=this;var n=this.init&&this.init.bind(this);n&&n(e)},template:function(){var e=this.pfx;return'\n      <div class="'.concat(e,'preview-cont">\n        ').concat(this.getPreview(),'\n      </div>\n      <div class="').concat(e,'meta">\n        ').concat(this.getInfo(),'\n      </div>\n      <div class="').concat(e,'close" data-toggle="asset-remove">\n        &Cross;\n      </div>\n    ')},updateTarget:function(e){e&&e.set&&(e.set("attributes",Object(h.clone)(e.get("attributes"))),e.set("src",this.model.get("src")))},getPreview:function(){return""},getInfo:function(){return""},render:function(){var e=this.el;return e.innerHTML=this.template(this,this.model),e.className=this.className,this}}).extend({events:{"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"},getPreview:function(){var e=this.pfx,t=this.model.get("src");return'\n      <div class="'.concat(e,'preview" style="background-image: url(\'').concat(t,'\');"></div>\n      <div class="').concat(e,"preview-bg ").concat(this.ppfx,'checker-bg"></div>\n    ')},getInfo:function(){var e=this.pfx,t=this.model,n=t.get("name"),r=t.get("width"),i=t.get("height"),o=t.get("unitDim"),s=r&&i?"".concat(r,"x").concat(i).concat(o):"";return n=n||t.getFilename(),'\n      <div class="'.concat(e,'name">').concat(n,'</div>\n      <div class="').concat(e,'dimensions">').concat(s,"</div>\n    ")},init:function(e){this.className+=" ".concat(this.pfx,"asset-image")},onClick:function(){var e=this.config.onClick,t=this.model;this.collection.trigger("deselectAll"),this.$el.addClass(this.pfx+"highlight"),Object(h.isFunction)(e)?e(t):this.updateTarget(this.collection.target)},onDblClick:function(){var e=this.em,t=this.model,n=this.config.onDblClick;Object(h.isFunction)(n)?n(t):(this.updateTarget(this.collection.target),e&&e.get("Modal").close());var r=this.collection.onSelect;Object(h.isFunction)(r)&&r(t)},onRemove:function(e){e.stopImmediatePropagation(),this.model.collection.remove(this.model)}}),p=n(30),g=o.a.Collection.extend(p.a).extend({types:[{id:"image",model:d,view:f,isType:function(e){return"string"==typeof e?{type:"image",src:e}:e}}]}),m=n(25),v=n.n(m),b=o.a.View.extend({events:{submit:"handleSubmit"},template:function(e){var t=e.pfx,n=e.ppfx,r=e.em,i=(v()(e,["pfx","ppfx","em"]),"");return this.config.showUrlInput&&(i='\n          <form class="'.concat(t,'add-asset">\n            <div class="').concat(n,"field ").concat(t,'add-field">\n              <input placeholder="').concat(r&&r.t("assetManager.inputPlh"),'"/>\n            </div>\n            <button class="').concat(n,'btn-prim">').concat(r&&r.t("assetManager.addButton"),'</button>\n            <div style="clear:both"></div>\n          </form>\n      ')),'\n    <div class="'.concat(t,'assets-cont">\n      <div class="').concat(t,'assets-header">\n        ').concat(i,'\n      </div>\n      <div class="').concat(t,'assets" data-el="assets"></div>\n      <div style="clear:both"></div>\n    </div>\n    ')},initialize:function(e){this.options=e,this.config=e.config,this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.em=this.config.em;var t=this.collection;this.listenTo(t,"reset",this.renderAssets),this.listenTo(t,"add",this.addToAsset),this.listenTo(t,"remove",this.removedAsset),this.listenTo(t,"deselectAll",this.deselectAll)},handleSubmit:function(e){e.preventDefault();var t=this.getAddInput(),n=t&&t.value.trim(),r=this.config.handleAdd;n&&(t.value="",this.getAssetsEl().scrollTop=0,r?r.bind(this)(n):this.options.globalCollection.add(n,{at:0}))},getAssetsEl:function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},getAddInput:function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},removedAsset:function(e){this.collection.length||this.toggleNoAssets()},addToAsset:function(e){1==this.collection.length&&this.toggleNoAssets(1),this.addAsset(e)},addAsset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new e.typeView({model:e,collection:this.collection,config:this.config}).render().el;if(t)t.appendChild(n);else{var r=this.getAssetsEl();r&&r.insertBefore(n,r.firstChild)}return n},toggleNoAssets:function(e){var t=this.$el.find(".".concat(this.pfx,"assets"));if(e)t.empty();else{var n=this.config.noAssets;n&&t.append(n)}},deselectAll:function(){var e=this.pfx;this.$el.find(".".concat(e,"highlight")).removeClass("".concat(e,"highlight"))},renderAssets:function(){var e=this,t=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(this.collection.length),this.collection.each((function(n){return e.addAsset(n,t)})),n.append(t)},render:function(){var e=this.options.fu.render().el;return this.$el.empty(),this.$el.append(e).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this.rendered=1,this}}),y=n(28);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=o.a.View.extend({template:Object(h.template)('\n  <form>\n    <div id="<%= pfx %>title"><%= title %></div>\n    <input type="file" id="<%= uploadId %>" name="file" accept="*/*" <%= disabled ? \'disabled\' : \'\' %> <%= multiUpload ? \'multiple\' : \'\' %>/>\n    <div style="clear:both;"></div>\n  </form>\n  '),events:{},initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e;var t=e.config||{};this.config=t,this.em=this.config.em,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.target=this.options.globalCollection||{},this.uploadId=this.pfx+"uploadFile",this.disabled=void 0!==t.disableUpload?t.disableUpload:!t.upload&&!t.embedAsBase64,this.multiUpload=void 0===t.multiUpload||t.multiUpload,this.events["change #"+this.uploadId]="uploadFile";var n=t.uploadFile;n?this.uploadFile=n.bind(this):!t.upload&&t.embedAsBase64&&(this.uploadFile=this.constructor.embedAsBase64),this.delegateEvents()},onUploadStart:function(){var e=this.config.em;e&&e.trigger("asset:upload:start")},onUploadEnd:function(e){var t=this.$el,n=this.config.em;n&&n.trigger("asset:upload:end",e);var r=t.find("input");r&&r.val("")},onUploadError:function(e){var t=this.config.em;console.error(e),this.onUploadEnd(e),t&&t.trigger("asset:upload:error",e)},onUploadResponse:function(e,t){var n,r=this.config.em,i=this.config,o=this.target;try{n="string"==typeof e?JSON.parse(e):e}catch(t){n=e}r&&r.trigger("asset:upload:response",n),i.autoAdd&&o&&o.add(n.data,{at:0}),this.onUploadEnd(e),t&&t(n)},uploadFile:function(e,t){var n=this,r=e.dataTransfer?e.dataTransfer.files:e.target.files,i=this.config,o=i.beforeUpload;if(!1!==(o&&o(r))){var s=new FormData,a=i.params,l=i.customFetch;for(var c in a)s.append(c,a[c]);if(this.multiUpload)for(var u=0;u<r.length;u++)s.append("".concat(i.uploadName,"[]"),r[u]);else r.length&&s.append(i.uploadName,r[0]);var d=i.upload,h=i.headers;if(void 0===h["X-Requested-With"]&&(h["X-Requested-With"]="XMLHttpRequest"),d){this.onUploadStart();var f={method:"post",credentials:i.credentials||"include",headers:h,body:s};return(l?l(d,f):Object(y.a)(d,f).then((function(e){return 1==(e.status/200|0)?e.text():e.text().then((function(e){return Promise.reject(e)}))}))).then((function(e){return n.onUploadResponse(e,t)})).catch((function(e){return n.onUploadError(e)}))}}},initDrop:function(){var e=this;!this.uploadForm&&(this.uploadForm=this.$el.find("form").get(0),"draggable"in this.uploadForm)&&(this.uploadForm.ondragover=function(){return this.className=e.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return this.className="",!1},this.uploadForm.ondrop=function(t){this.className="",t.preventDefault(),e.uploadFile(t)})},initDropzone:function(e){var t=this,n=0,r=this.config,i=e.model,o=e.el,s=i.get("Editor"),a=(i.get("Config"),i.get("Canvas").getBody()),l=this.ppfx,c="".concat(l,"dropzone-active"),u="".concat(l,"dropzone"),d=function(){o.className=o.className.replace(c,"").trim(),n=0},h=function(){return n||(o.className+=" ".concat(c),n=1),!1},f=function(){return d(),!1},p=function(e){if(d(),e.preventDefault(),e.stopPropagation(),t.uploadFile(e),r.openAssetsOnDrop&&s){var n=s.getSelected();s.runCommand("open-assets",{target:n,onSelect:function(){s.Modal.close(),s.AssetManager.setTarget(null)}})}return!1};e.$el.append('<div class="'.concat(u,'">').concat(r.dropzoneContent,"</div>")),d(),"draggable"in o&&[o,a].forEach((function(e){e.ondragover=h,e.ondragleave=f,e.ondrop=p}))},render:function(){var e=this.$el,t=this.pfx,n=this.em;return e.html(this.template({title:n&&n.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:t})),this.initDrop(),e.attr("class",t+"file-uploader"),this}},{embedAsBase64:function(e,t){var n=this,r={data:[]};if(FileReader){var i,o=[],s=/^(.+)\/(.+)$/,a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(e.dataTransfer?e.dataTransfer.files:e.target.files);try{var l=function(){var e=i.value,t=new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(i){var o,a=e.name,l=s.exec(e.type);if("image"===(o=l?l[1]:e.type)){var c={src:r.result,name:a,type:o,height:0,width:0},u=new Image;u.addEventListener("error",(function(e){n(e)})),u.addEventListener("load",(function(){c.height=u.height,c.width=u.width,t(c)})),u.src=c.src}else t(o?{src:r.result,name:a,type:o}:r.result)})),r.addEventListener("error",(function(e){n(e)})),r.addEventListener("abort",(function(e){n("Aborted")})),r.readAsDataURL(e)}));o.push(t)};for(a.s();!(i=a.n()).done;)l()}catch(e){a.e(e)}finally{a.f()}Promise.all(o).then((function(e){r.data=e,n.onUploadResponse(r,t)}),(function(e){n.onUploadError(e)}))}else this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))}});t.default=function(){var e,t,n,i={};return{name:"AssetManager",storageKey:"assets",getConfig:function(){return i},init:function(o){var s=this;for(var a in i=o||{},r)a in i||(i[a]=r[a]);var l=i.pStylePrefix,c=i.em;l&&(i.stylePrefix=l+i.stylePrefix),e=new g([]);var u={collection:new g([]),globalCollection:e,config:i};return n=new x(u),u.fu=n,t=new b(u),e.listenTo(e,"add",(function(e){s.getAllVisible().add(e),c&&c.trigger("asset:add",e)})),e.listenTo(e,"remove",(function(e){s.getAllVisible().remove(e),c&&c.trigger("asset:remove",e)})),this},add:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===n.at&&(n.at=0),e.add(t,n)},get:function(t){return e.where({src:t})[0]},getAll:function(){return e},getAllVisible:function(){return t.collection},remove:function(e){var t=this.get(e);return this.getAll().remove(t),this},store:function(e){var t={},n=JSON.stringify(this.getAll().toJSON());return t[this.storageKey]=n,!e&&i.stm&&i.stm.store(t),t},load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.storageKey,n=e[t]||[];if("string"==typeof n)try{n=JSON.parse(e[t])}catch(e){}return n&&n.length&&this.getAll().reset(n),n},getContainer:function(){return t.el},getAssetsEl:function(){return t.el.querySelector("[data-el=assets]")},render:function(e){var n=e||this.getAll().models;return t.rendered||t.render(),t.collection.reset(n),this.getContainer()},addType:function(e,t){this.getAll().addType(e,t)},getType:function(e){return this.getAll().getType(e)},getTypes:function(){return this.getAll().getTypes()},AssetsView:function(){return t},FileUploader:function(){return n},onLoad:function(){this.getAll().reset(i.assets)},postRender:function(e){i.dropzone&&n.initDropzone(e)},setTarget:function(e){t.collection.target=e},onSelect:function(e){t.collection.onSelect=e},onClick:function(e){i.onClick=e},onDblClick:function(e){i.onDblClick=e}}}},function(e,t,n){"use strict";n.r(t);var r="sw-visibility",i="export-template",o="open-layers",s="open-blocks",a="fullscreen",l="preview",c={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:r,className:"fa fa-square-o",command:r,context:r,attributes:{title:"View components"}},{id:l,className:"fa fa-eye",command:l,context:l,attributes:{title:"Preview"}},{id:a,className:"fa fa-arrows-alt",command:a,context:a,attributes:{title:"Fullscreen"}},{id:i,className:"fa fa-code",command:i,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:"open-sm",className:"fa fa-paint-brush",command:"open-sm",active:!0,togglable:0,attributes:{title:"Open Style Manager"}},{id:"open-tm",className:"fa fa-cog",command:"open-tm",togglable:0,attributes:{title:"Settings"}},{id:o,className:"fa fa-bars",command:o,togglable:0,attributes:{title:"Open Layer Manager"}},{id:s,className:"fa fa-th-large",command:s,togglable:0,attributes:{title:"Open Blocks"}}]}],em:null,delayBtnsShow:300},u=n(1),d=n.n(u),h=n(41),f=d.a.Model.extend({defaults:{id:"",content:"",visible:!0,buttons:[],attributes:{}},initialize:function(e){this.btn=this.get("buttons")||[],this.buttons=new h.default(this.btn),this.set("buttons",this.buttons)}}),p=d.a.Collection.extend({model:f}),g=n(2),m=n.n(g),v=n(0);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=d.a.View.extend({tagName:function(){return this.model.get("tagName")},events:{click:"clicked"},initialize:function(e){var t=this.model.get("className");this.config=e.config||{},this.em=this.config.em||{};var n=this.config.stylePrefix||"",r=this.config.pStylePrefix||"";this.pfx=n,this.ppfx=this.config.pStylePrefix||"",this.id=n+this.model.get("id"),this.activeCls="".concat(n,"active ").concat(r,"four-color"),this.disableCls="".concat(r,"disabled"),this.btnsVisCls="".concat(n,"visible"),this.className=n+"btn"+(t?" "+t:""),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:active updateActive",this.updateActive),this.listenTo(this.model,"checkActive",this.checkActive),this.listenTo(this.model,"change:bntsVis",this.updateBtnsVis),this.listenTo(this.model,"change:attributes",this.updateAttributes),this.listenTo(this.model,"change:className",this.updateClassName),this.listenTo(this.model,"change:disable",this.updateDisable),this.em&&this.em.get&&(this.commands=this.em.get("Commands"))},updateClassName:function(){var e=this.model,t=this.pfx,n=e.get("className"),r=e.get("attributes").class,i="".concat(r||""," ").concat(t,"btn ").concat(n||"");this.$el.attr("class",i.trim())},updateAttributes:function(){var e=this.em,t=this.model,n=this.$el,r=t.get("attributes")||{},i=e&&e.t&&e.t("panels.buttons.titles.".concat(t.id));n.attr(r),i&&n.attr({title:i}),this.updateClassName()},updateBtnsVis:function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},updateActive:function(){var e=this.model,t=this.commands,n=this.$el,r=this.activeCls,i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fromCollection,o=e.get("context"),s=e.get("options"),a=e.get("command"),l={};t&&Object(v.isString)(a)?l=t.get(a)||{}:Object(v.isFunction)(a)?l=t.create({run:a}):null!==a&&Object(v.isObject)(a)&&(l=t.create(a)),e.get("active")?(!i&&e.collection.deactivateAll(o,e),e.set("active",!0,{silent:!0}).trigger("checkActive"),t.runCommand(l,y(y({},s),{},{sender:e})),l.noStop&&e.set("active",!1)):(n.removeClass(r),t.stopCommand(l,y(y({},s),{},{sender:e,force:1})))},updateDisable:function(){var e=this.disableCls,t=this.model.get("disable");this.$el[t?"addClass":"removeClass"](e)},checkActive:function(){var e=this.$el,t=this.activeCls;this.model.get("active")?e.addClass(t):e.removeClass(t)},clicked:function(e){this.model.get("bntsVis")||this.model.get("disable")||this.toggleActive()},toggleActive:function(){var e=this.model,t=e.attributes,n=t.active;n&&!t.togglable||(e.set("active",!n),this.em.get("Commands").get("select-comp"),n?e.get("runDefaultCommand")&&this.em.runDefault():e.get("stopDefaultCommand")&&this.em.stopDefault())},render:function(){var e=this.model.get("label"),t=this.$el;return t.empty(),this.updateAttributes(),e&&t.append(e),this.checkActive(),this.updateDisable(),this}}),x=d.a.View.extend({initialize:function(e){this.opt=e||{},this.config=this.opt.config||{},this.pfx=this.config.stylePrefix||"",this.parentM=this.opt.parentM||null,this.listenTo(this.collection,"add",this.addTo),this.listenTo(this.collection,"reset remove",this.render),this.className=this.pfx+"buttons"},addTo:function(e){this.addToCollection(e)},addToCollection:function(e,t){var n=t||null,r=new w({model:e,config:this.config,parentM:this.parentM}).render().el;return n?n.appendChild(r):this.$el.append(r),r},render:function(){var e=document.createDocumentFragment();return this.$el.empty(),this.collection.each((function(t){this.addToCollection(t,e)}),this),this.$el.append(e),this.$el.attr("class",Object(v.result)(this,"className")),this}});function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var C=d.a.View.extend({initialize:function(e){var t=e.config||{},n=this.model;this.config=t,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.buttons=n.get("buttons"),this.className=this.pfx+"panel",this.id=this.pfx+n.get("id"),this.listenTo(n,"change:appendContent",this.appendContent),this.listenTo(n,"change:content",this.updateContent),this.listenTo(n,"change:visible",this.toggleVisible),n.view=this},appendContent:function(){this.$el.append(this.model.get("appendContent"))},updateContent:function(){this.$el.html(this.model.get("content"))},toggleVisible:function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},attributes:function(){return this.model.get("attributes")},initResize:function(){var e=this.config.em,t=e?e.get("Editor"):"",n=this.model.get("resizable");if(t&&n){var r,i,o,s=!0===n?[1,1,1,1]:n,a=s.length,l=0;2==a?(r=s[0],o=s[0],i=s[1],l=s[1]):4==a&&(r=s[0],i=s[1],o=s[2],l=s[3]);var c=t.Utils.Resizer.init(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tc:r,cr:i,bc:o,cl:l,tl:0,tr:0,bl:0,br:0,appendTo:this.el,silentFrames:1,avoidContainerUpdate:1,prefix:t.getConfig().stylePrefix,onEnd:function(){e&&e.trigger("change:canvasOffset")},posFetcher:function(e,t){var n=t.target,r=e.style,i=c.getConfig(),o=i.keyWidth,s=i.keyHeight,a=e.getBoundingClientRect(),l="container"==n,u=r[o],d=r[s];return{left:0,top:0,width:u&&!l?parseFloat(u):a.width,height:d&&!l?parseFloat(d):a.height}}},n));c.blur=function(){},c.focus(this.el)}},render:function(){var e=this.$el,t=this.ppfx,n="".concat(this.className," ").concat(this.id," ").concat(t,"one-bg ").concat(t,"two-color");if(e.addClass(n),this.buttons.length){var r=new x({collection:this.buttons,config:this.config});e.append(r.render().el)}return e.append(this.model.get("content")),this}}),_=d.a.View.extend({initialize:function(e){this.opt=e||{},this.config=this.opt.config||{},this.pfx=this.config.stylePrefix||"";var t=this.collection;this.listenTo(t,"add",this.addTo),this.listenTo(t,"reset",this.render),this.listenTo(t,"remove",this.onRemove),this.className=this.pfx+"panels"},onRemove:function(e){var t=e.view;t&&t.remove()},addTo:function(e){this.addToCollection(e)},addToCollection:function(e,t){var n=t||null,r=this.config,i=e.get("el"),o=new C({el:i,model:e,config:r}),s=o.render().el,a=e.get("appendTo");return i||(a?document.querySelector(a).appendChild(s):n?n.appendChild(s):this.$el.append(s)),o.initResize(),s},render:function(){var e=this,t=this.$el,n=document.createDocumentFragment();return t.empty(),this.collection.each((function(t){return e.addToCollection(t,n)})),t.append(n),t.attr("class",this.className),this}});t.default=function(){var e,t,n={};return{name:"Panels",init:function(r){for(var i in n=r||{},c)i in n||(n[i]=c[i]);var o=n.pStylePrefix;return o&&(n.stylePrefix=o+n.stylePrefix),e=new p(n.defaults),t=new _({collection:e,config:n}),this},getPanels:function(){return e},getPanelsEl:function(){return t.el},addPanel:function(t){return e.add(t)},removePanel:function(t){return e.remove(t)},getPanel:function(t){var n=e.where({id:t});return n.length?n[0]:null},addButton:function(e,t){var n=this.getPanel(e);return n?n.get("buttons").add(t):null},removeButton:function(e,t){var n=this.getPanel(e);return n&&n.get("buttons").remove(t)},getButton:function(e,t){var n=this.getPanel(e);if(n){var r=n.get("buttons").where({id:t});return r.length?r[0]:null}return null},render:function(){return t.render().el},active:function(){this.getPanels().each((function(e){e.get("buttons").each((function(e){e.get("active")&&e.trigger("updateActive")}))}))},disableButtons:function(){this.getPanels().each((function(e){e.get("buttons").each((function(e){e.get("disable")&&e.trigger("change:disable")}))}))},Panel:f}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(0),s={stylePrefix:"sm-",sectors:[],appendTo:"",hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:0,avoidComputed:["width","height"]},a=n(1),l=n.n(a),c=n(24),u=function(){return{build:function(e){var t=[];"string"==typeof e&&(e=[e]);for(var n=0,r=e.length;n<r;n++){var i={},o=e[n];switch(i.property=o,o){case"border-radius-c":i.property="border-radius"}switch(o){case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"width":case"max-width":case"min-width":case"height":case"max-height":case"min-height":case"flex-basis":i.fixedValues=["initial","inherit","auto"];break;case"font-size":i.fixedValues=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"];break;case"letter-spacing":case"line-height":i.fixedValues=["normal","initial","inherit"]}switch(o){case"float":case"position":case"text-align":i.type="radio";break;case"display":case"flex-direction":case"flex-wrap":case"justify-content":case"align-items":case"align-content":case"align-self":case"font-family":case"font-weight":case"border-style":case"box-shadow-type":case"background-repeat":case"background-position":case"background-attachment":case"background-size":case"transition-property":case"transition-timing-function":case"cursor":case"overflow":case"overflow-x":case"overflow-y":i.type="select";break;case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"letter-spacing":case"line-height":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-h":case"box-shadow-v":case"box-shadow-blur":case"box-shadow-spread":case"transition-duration":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":case"order":case"flex-grow":case"flex-shrink":case"flex-basis":i.type="integer";break;case"margin":case"padding":case"border-radius":case"border":case"transform":i.type="composite";break;case"color":case"text-shadow-color":case"background-color":case"border-color":case"box-shadow-color":i.type="color";break;case"text-shadow":case"box-shadow":case"background":case"transition":i.type="stack";break;case"background-image":i.type="file"}switch(o){case"float":case"background-color":case"text-shadow":i.defaults="none";break;case"display":i.defaults="block";break;case"flex-direction":i.defaults="row";break;case"flex-wrap":i.defaults="nowrap";break;case"justify-content":i.defaults="flex-start";break;case"align-items":case"align-content":i.defaults="stretch";break;case"align-self":i.defaults="auto";break;case"position":i.defaults="static";break;case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"box-shadow-h":case"box-shadow-v":case"box-shadow-spread":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":case"order":case"flex-grow":i.defaults=0;break;case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":i.defaults="0px";break;case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":case"flex-shrink":i.defaults=1;break;case"box-shadow-blur":i.defaults="5px";break;case"top":case"right":case"bottom":case"left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"background-size":case"cursor":case"flex-basis":i.defaults="auto";break;case"font-family":i.defaults="Arial, Helvetica, sans-serif";break;case"font-size":case"border-width":i.defaults="medium";break;case"font-weight":i.defaults="400";break;case"letter-spacing":case"line-height":i.defaults="normal";break;case"color":case"text-shadow-color":case"border-color":case"box-shadow-color":i.defaults="black";break;case"text-align":i.defaults="left";break;case"border-style":i.defaults="solid";break;case"box-shadow-type":i.defaults="";break;case"background-repeat":i.defaults="repeat";break;case"background-position":i.defaults="left top";break;case"background-attachment":i.defaults="scroll";break;case"transition-property":i.defaults="width";break;case"transition-duration":i.defaults="2";break;case"transition-timing-function":i.defaults="ease";break;case"overflow":case"overflow-x":case"overflow-y":i.defaults="visible"}switch(o){case"flex-direction":case"flex-wrap":case"justify-content":case"align-items":case"align-content":i.requires={display:["flex"]};break;case"order":case"flex-basis":case"flex-grow":case"flex-shrink":case"align-self":i.requiresParent={display:["flex"]}}switch(o){case"top":case"bottom":case"margin-top":case"margin-bottom":case"padding-top":case"padding-bottom":case"min-height":case"max-height":case"height":i.units=["px","%","vh"];break;case"right":case"left":case"margin-right":case"margin-left":case"padding-right":case"padding-left":case"min-width":case"max-width":case"width":i.units=["px","%","vw"];break;case"flex-basis":i.units=["px","%","vw","vh"];break;case"text-shadow-v":case"text-shadow-h":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"box-shadow-h":case"box-shadow-v":i.units=["px","%"];break;case"font-size":case"letter-spacing":case"line-height":i.units=["px","em","rem","%"];break;case"border-width":i.units=["px","em"];break;case"box-shadow-blur":case"box-shadow-spread":case"perspective":i.units=["px"];break;case"transition-duration":i.units=["s"];break;case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":i.units=["deg"]}switch(o){case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-blur":case"transition-duration":case"perspective":case"flex-basis":i.min=0}switch(o){case"text-shadow":case"box-shadow":case"background":i.preview=!0}switch(o){case"background":i.detached=!0}switch(o){case"transform-rotate-x":i.functionName="rotateX";break;case"transform-rotate-y":i.functionName="rotateY";break;case"transform-rotate-z":i.functionName="rotateZ";break;case"transform-scale-x":i.functionName="scaleX";break;case"transform-scale-y":i.functionName="scaleY";break;case"transform-scale-z":i.functionName="scaleZ";break;case"background-image":i.functionName="url"}switch(o){case"float":i.list=[{value:"none"},{value:"left"},{value:"right"}];break;case"display":i.list=[{value:"block"},{value:"inline"},{value:"inline-block"},{value:"flex"},{value:"none"}];break;case"flex-direction":i.list=[{value:"row"},{value:"row-reverse"},{value:"column"},{value:"column-reverse"}];break;case"flex-wrap":i.list=[{value:"nowrap"},{value:"wrap"},{value:"wrap-reverse"}];break;case"justify-content":i.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"space-between"},{value:"space-around"},{value:"space-evenly"}];break;case"align-items":i.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"baseline"},{value:"stretch"}];break;case"align-content":i.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"space-between"},{value:"space-around"},{value:"stretch"}];break;case"align-self":i.list=[{value:"auto"},{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"baseline"},{value:"stretch"}];break;case"position":i.list=[{value:"static"},{value:"relative"},{value:"absolute"},{value:"fixed"}];break;case"font-family":var s=", sans-serif",a=["Arial, Helvetica"+s,"Arial Black, Gadget"+s,"Brush Script MT"+s,"Comic Sans MS, cursive"+s,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+s,"Impact, Charcoal"+s,"Lucida Sans Unicode, Lucida Grande"+s,"Tahoma, Geneva"+s,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+s,"Verdana, Geneva"+s];i.list=[];for(var l=0,c=a.length;l<c;l++){var u={};u.value=a[l],u.name=a[l].split(",")[0],i.list.push(u)}break;case"font-weight":i.list=[{value:"100",name:"Thin"},{value:"200",name:"Extra-Light"},{value:"300",name:"Light"},{value:"400",name:"Normal"},{value:"500",name:"Medium"},{value:"600",name:"Semi-Bold"},{value:"700",name:"Bold"},{value:"800",name:"Extra-Bold"},{value:"900",name:"Ultra-Bold"}];break;case"text-align":i.list=[{value:"left"},{value:"center"},{value:"right"},{value:"justify"}];break;case"border-style":i.list=[{value:"none"},{value:"solid"},{value:"dotted"},{value:"dashed"},{value:"double"},{value:"groove"},{value:"ridge"},{value:"inset"},{value:"outset"}];break;case"box-shadow-type":i.list=[{value:"",name:"Outside"},{value:"inset",name:"Inside"}];break;case"background-repeat":i.list=[{value:"repeat"},{value:"repeat-x"},{value:"repeat-y"},{value:"no-repeat"}];break;case"background-position":i.list=[{value:"left top"},{value:"left center"},{value:"left bottom"},{value:"right top"},{value:"right center"},{value:"right bottom"},{value:"center top"},{value:"center center"},{value:"center bottom"}];break;case"background-attachment":i.list=[{value:"scroll"},{value:"fixed"},{value:"local"}];break;case"background-size":i.list=[{value:"auto"},{value:"cover"},{value:"contain"}];break;case"transition-property":i.list=[{value:"all"},{value:"width"},{value:"height"},{value:"background-color"},{value:"transform"},{value:"box-shadow"},{value:"opacity"}];break;case"transition-timing-function":i.list=[{value:"linear"},{value:"ease"},{value:"ease-in"},{value:"ease-out"},{value:"ease-in-out"}];break;case"cursor":i.list=[{value:"auto"},{value:"pointer"},{value:"copy"},{value:"crosshair"},{value:"grab"},{value:"grabbing"},{value:"help"},{value:"move"},{value:"text"}];break;case"overflow":case"overflow-x":case"overflow-y":i.list=[{value:"visible"},{value:"hidden"},{value:"scroll"},{value:"auto"}]}switch(o){case"margin":i.properties=this.build(["margin-top","margin-right","margin-bottom","margin-left"]);break;case"padding":i.properties=this.build(["padding-top","padding-right","padding-bottom","padding-left"]);break;case"text-shadow":i.properties=this.build(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"]);break;case"border":i.properties=this.build(["border-width","border-style","border-color"]);break;case"border-radius":i.properties=this.build(["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"]);break;case"box-shadow":i.properties=this.build(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"]);break;case"background":i.properties=this.build(["background-image","background-repeat","background-position","background-attachment","background-size"]);break;case"transition":i.properties=this.build(["transition-property","transition-duration","transition-timing-function"]);break;case"transform":i.properties=this.build(["transform-rotate-x","transform-rotate-y","transform-rotate-z","transform-scale-x","transform-scale-y","transform-scale-z"])}t.push(i)}return t}}},d=l.a.Model.extend({defaults:{id:"",name:"",open:!0,buildProps:"",extendBuilded:1,properties:[]},initialize:function(e){var t,n=this.buildProperties((e||{}).buildProps),r=this.get("name")||"";!this.get("id")&&this.set("id",r.replace(/ /g,"_").toLowerCase()),t=n?this.extendProperties(n):this.get("properties");var i=new c.default(t);i.sector=this,this.set("properties",i)},extendProperties:function(e,t,n){for(var r=e.length,i=t||this.get("properties"),s=this.get("extendBuilded"),a=[],l=0,c=i.length;l<c;l++){for(var u=i[l],d=0,h=0;h<r;h++){var f=e[h];if(u.property!=f.property&&u.id!=f.property);else{var p=u.properties;p&&p.length&&(u.properties=this.extendProperties(f.properties||[],p,1)),e[h]=s?Object(o.extend)(f,u):u,a[h]=e[h],d=1}}d||(e.push(u),a.push(u))}return n?a.filter((function(e){return e})):e},buildProperties:function(e){var t=e||[];if(t.length)return this.propFactory||(this.propFactory=new u),this.propFactory.build(t)}}),h=l.a.Collection.extend({model:d}),f=n(3),p=n(7),g=n(19),m=l.a.View.extend({template:Object(o.template)('\n  <div class="<%= pfx %>title" data-sector-title>\n    <i id="<%= pfx %>caret" class="fa"></i>\n    <%= label %>\n  </div>'),events:{"click [data-sector-title]":"toggle"},initialize:function(e){this.config=e.config||{},this.em=this.config.em,this.pfx=this.config.stylePrefix||"",this.target=e.target||{},this.propTarget=e.propTarget||{},this.caretR="fa-caret-right",this.caretD="fa-caret-down";var t=this.model;this.listenTo(t,"change:open",this.updateOpen),this.listenTo(t,"updateVisibility",this.updateVisibility),this.listenTo(t,"destroy remove",this.remove)},updateVisibility:function(){var e;this.model.get("properties").each((function(t){t.get("visible")&&(e=1)})),this.el.style.display=e?"":"none"},updateOpen:function(){this.model.get("open")?this.show():this.hide()},show:function(){this.$el.addClass(this.pfx+"open"),this.getPropertiesEl().style.display="",this.$caret.removeClass(this.caretR).addClass(this.caretD)},hide:function(){this.$el.removeClass(this.pfx+"open"),this.getPropertiesEl().style.display="none",this.$caret.removeClass(this.caretD).addClass(this.caretR)},getPropertiesEl:function(){return this.$el.find(".".concat(this.pfx,"properties")).get(0)},toggle:function(e){var t=this.model.get("open")?0:1;this.model.set("open",t)},render:function(){var e=this.pfx,t=this.em,n=this.$el,r=this.model.attributes,i=r.id,o=r.name,s=t&&t.t("styleManager.sectors.".concat(i))||o;return n.html(this.template({pfx:e,label:s})),this.$caret=n.find("#".concat(e,"caret")),this.renderProperties(),n.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(i," no-select")),this.updateOpen(),this},renderProperties:function(){var e=this.model.get("properties");if(e){var t=new g.default({collection:e,target:this.target,propTarget:this.propTarget,config:this.config});this.$el.append(t.render().el)}}});function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=l.a.View.extend({initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.config||{};this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.target=e.target||{},this.config=t;var n={};Object(o.extend)(n,l.a.Events);var r=document.body,i=document.createElement("el-".concat((new Date).getTime()));r.appendChild(i),n.computedDefault=b({},window.getComputedStyle(i)),r.removeChild(i),this.propTarget=n;var s=this.collection,a="component:toggled component:update:classes change:state change:device frame:resized";this.listenTo(s,"add",this.addTo),this.listenTo(s,"reset",this.render),this.listenTo(this.target,a,this.targetUpdated)},addTo:function(e,t){this.addToCollection(e,null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},toggleStateCls:function(){var e=arguments.length>1?arguments[1]:void 0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){var n=t.getEl();n&&n.classList&&n.classList[e?"add":"remove"]("hc-state")}))},targetUpdated:function(e){var t=this.target,n=this.propTarget,r=t.getSelectedAll(),i=t.getSelected(),o=e&&e.toHTML?e:i;if(o&&this.toggleStateCls([o]),i){var s=t.get("Config").devicePreviewMode?"":t.get("state"),a=t.get("SelectorManager").getConfig().componentFirst,l=i.getEl();if(n.helper=null,n.targets=null,l&&Object(f.p)(l)){var c=s?":".concat(s):null;n.computed=window.getComputedStyle(l,c)}i=t.get("StyleManager").getModelToStyle(i),s&&(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.get("CssComposer"),i=r.getAll(),o=r.getClassRule("hc-state");o?(i.remove(o),i.add(o)):o=r.setClassRule("hc-state"),o.set("important",1),o.setStyle(e),n.helper=o}(i.getStyle()),this.toggleStateCls(r,1)),n.model=i,a&&(n.targets=r),n.trigger("update")}},setTarget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.target,r=Object(o.isArray)(e)?e:[e],i=t.targetIsClass,s=t.stylable,a=[];r.forEach((function(e){var t=e;if(Object(o.isString)(e)){var r,l=n.get("CssComposer").getAll();i&&(r=l.filter((function(t){return t.get("selectors").getFullString()===e}))[0]),r||(r=l.filter((function(t){return t.get("selectorsAdd")===e}))[0]),r||(r=l.add({selectors:[],selectorsAdd:e})),s&&r.set({stylable:s}),t=r}a.push(t)}));var l=this.propTarget;return l.targets=a,l.trigger("update",{targets:a}),a},addToCollection:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.target,i=this.propTarget,o=this.config,s=t||this.el,a=new m({model:e,id:"".concat(this.pfx).concat(e.get("id")),name:e.get("name"),properties:e.get("properties"),target:r,propTarget:i,config:o}).render().el;return Object(p.b)(s,a,n.at),a},render:function(){var e=this,t=document.createDocumentFragment(),n=this.$el,r=this.pfx,i=this.ppfx;return n.empty(),this.collection.each((function(n){return e.addToCollection(n,t)})),n.append(t),n.addClass("".concat(r,"sectors ").concat(i,"one-bg ").concat(i,"two-color")),this}});function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={};return{PropertyFactory:{build:function(e){var t=[];"string"==typeof e&&(e=[e]);for(var n=0,r=e.length;n<r;n++){var i={},o=e[n];switch(i.property=o,o){case"border-radius-c":i.property="border-radius"}switch(o){case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"width":case"max-width":case"min-width":case"height":case"max-height":case"min-height":case"flex-basis":i.fixedValues=["initial","inherit","auto"];break;case"font-size":i.fixedValues=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"];break;case"letter-spacing":case"line-height":i.fixedValues=["normal","initial","inherit"]}switch(o){case"float":case"position":case"text-align":i.type="radio";break;case"display":case"flex-direction":case"flex-wrap":case"justify-content":case"align-items":case"align-content":case"align-self":case"font-family":case"font-weight":case"border-style":case"box-shadow-type":case"background-repeat":case"background-position":case"background-attachment":case"background-size":case"transition-property":case"transition-timing-function":case"cursor":case"overflow":case"overflow-x":case"overflow-y":i.type="select";break;case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"letter-spacing":case"line-height":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-h":case"box-shadow-v":case"box-shadow-blur":case"box-shadow-spread":case"transition-duration":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":case"order":case"flex-grow":case"flex-shrink":case"flex-basis":i.type="integer";break;case"margin":case"padding":case"border-radius":case"border":case"transform":i.type="composite";break;case"color":case"text-shadow-color":case"background-color":case"border-color":case"box-shadow-color":i.type="color";break;case"text-shadow":case"box-shadow":case"background":case"transition":i.type="stack";break;case"background-image":i.type="file"}switch(o){case"float":case"background-color":case"text-shadow":i.defaults="none";break;case"display":i.defaults="block";break;case"flex-direction":i.defaults="row";break;case"flex-wrap":i.defaults="nowrap";break;case"justify-content":i.defaults="flex-start";break;case"align-items":case"align-content":i.defaults="stretch";break;case"align-self":i.defaults="auto";break;case"position":i.defaults="static";break;case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"box-shadow-h":case"box-shadow-v":case"box-shadow-spread":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":case"order":case"flex-grow":i.defaults=0;break;case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":i.defaults="0px";break;case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":case"flex-shrink":i.defaults=1;break;case"box-shadow-blur":i.defaults="5px";break;case"top":case"right":case"bottom":case"left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"background-size":case"cursor":case"flex-basis":i.defaults="auto";break;case"font-family":i.defaults="Arial, Helvetica, sans-serif";break;case"font-size":case"border-width":i.defaults="medium";break;case"font-weight":i.defaults="400";break;case"letter-spacing":case"line-height":i.defaults="normal";break;case"color":case"text-shadow-color":case"border-color":case"box-shadow-color":i.defaults="black";break;case"text-align":i.defaults="left";break;case"border-style":i.defaults="solid";break;case"box-shadow-type":i.defaults="";break;case"background-repeat":i.defaults="repeat";break;case"background-position":i.defaults="left top";break;case"background-attachment":i.defaults="scroll";break;case"transition-property":i.defaults="width";break;case"transition-duration":i.defaults="2";break;case"transition-timing-function":i.defaults="ease";break;case"overflow":case"overflow-x":case"overflow-y":i.defaults="visible"}switch(o){case"flex-direction":case"flex-wrap":case"justify-content":case"align-items":case"align-content":i.requires={display:["flex"]};break;case"order":case"flex-basis":case"flex-grow":case"flex-shrink":case"align-self":i.requiresParent={display:["flex"]}}switch(o){case"top":case"bottom":case"margin-top":case"margin-bottom":case"padding-top":case"padding-bottom":case"min-height":case"max-height":case"height":i.units=["px","%","vh"];break;case"right":case"left":case"margin-right":case"margin-left":case"padding-right":case"padding-left":case"min-width":case"max-width":case"width":i.units=["px","%","vw"];break;case"flex-basis":i.units=["px","%","vw","vh"];break;case"text-shadow-v":case"text-shadow-h":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"box-shadow-h":case"box-shadow-v":i.units=["px","%"];break;case"font-size":case"letter-spacing":case"line-height":i.units=["px","em","rem","%"];break;case"border-width":i.units=["px","em"];break;case"box-shadow-blur":case"box-shadow-spread":case"perspective":i.units=["px"];break;case"transition-duration":i.units=["s"];break;case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":i.units=["deg"]}switch(o){case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-blur":case"transition-duration":case"perspective":case"flex-basis":i.min=0}switch(o){case"text-shadow":case"box-shadow":case"background":i.preview=!0}switch(o){case"background":i.detached=!0}switch(o){case"transform-rotate-x":i.functionName="rotateX";break;case"transform-rotate-y":i.functionName="rotateY";break;case"transform-rotate-z":i.functionName="rotateZ";break;case"transform-scale-x":i.functionName="scaleX";break;case"transform-scale-y":i.functionName="scaleY";break;case"transform-scale-z":i.functionName="scaleZ";break;case"background-image":i.functionName="url"}switch(o){case"float":i.list=[{value:"none"},{value:"left"},{value:"right"}];break;case"display":i.list=[{value:"block"},{value:"inline"},{value:"inline-block"},{value:"flex"},{value:"none"}];break;case"flex-direction":i.list=[{value:"row"},{value:"row-reverse"},{value:"column"},{value:"column-reverse"}];break;case"flex-wrap":i.list=[{value:"nowrap"},{value:"wrap"},{value:"wrap-reverse"}];break;case"justify-content":i.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"space-between"},{value:"space-around"},{value:"space-evenly"}];break;case"align-items":i.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"baseline"},{value:"stretch"}];break;case"align-content":i.list=[{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"space-between"},{value:"space-around"},{value:"stretch"}];break;case"align-self":i.list=[{value:"auto"},{value:"flex-start"},{value:"flex-end"},{value:"center"},{value:"baseline"},{value:"stretch"}];break;case"position":i.list=[{value:"static"},{value:"relative"},{value:"absolute"},{value:"fixed"}];break;case"font-family":var s=", sans-serif",a=["Arial, Helvetica"+s,"Arial Black, Gadget"+s,"Brush Script MT"+s,"Comic Sans MS, cursive"+s,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+s,"Impact, Charcoal"+s,"Lucida Sans Unicode, Lucida Grande"+s,"Tahoma, Geneva"+s,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+s,"Verdana, Geneva"+s];i.list=[];for(var l=0,c=a.length;l<c;l++){var u={};u.value=a[l],u.name=a[l].split(",")[0],i.list.push(u)}break;case"font-weight":i.list=[{value:"100",name:"Thin"},{value:"200",name:"Extra-Light"},{value:"300",name:"Light"},{value:"400",name:"Normal"},{value:"500",name:"Medium"},{value:"600",name:"Semi-Bold"},{value:"700",name:"Bold"},{value:"800",name:"Extra-Bold"},{value:"900",name:"Ultra-Bold"}];break;case"text-align":i.list=[{value:"left"},{value:"center"},{value:"right"},{value:"justify"}];break;case"border-style":i.list=[{value:"none"},{value:"solid"},{value:"dotted"},{value:"dashed"},{value:"double"},{value:"groove"},{value:"ridge"},{value:"inset"},{value:"outset"}];break;case"box-shadow-type":i.list=[{value:"",name:"Outside"},{value:"inset",name:"Inside"}];break;case"background-repeat":i.list=[{value:"repeat"},{value:"repeat-x"},{value:"repeat-y"},{value:"no-repeat"}];break;case"background-position":i.list=[{value:"left top"},{value:"left center"},{value:"left bottom"},{value:"right top"},{value:"right center"},{value:"right bottom"},{value:"center top"},{value:"center center"},{value:"center bottom"}];break;case"background-attachment":i.list=[{value:"scroll"},{value:"fixed"},{value:"local"}];break;case"background-size":i.list=[{value:"auto"},{value:"cover"},{value:"contain"}];break;case"transition-property":i.list=[{value:"all"},{value:"width"},{value:"height"},{value:"background-color"},{value:"transform"},{value:"box-shadow"},{value:"opacity"}];break;case"transition-timing-function":i.list=[{value:"linear"},{value:"ease"},{value:"ease-in"},{value:"ease-out"},{value:"ease-in-out"}];break;case"cursor":i.list=[{value:"auto"},{value:"pointer"},{value:"copy"},{value:"crosshair"},{value:"grab"},{value:"grabbing"},{value:"help"},{value:"move"},{value:"text"}];break;case"overflow":case"overflow-x":case"overflow-y":i.list=[{value:"visible"},{value:"hidden"},{value:"scroll"},{value:"auto"}]}switch(o){case"margin":i.properties=this.build(["margin-top","margin-right","margin-bottom","margin-left"]);break;case"padding":i.properties=this.build(["padding-top","padding-right","padding-bottom","padding-left"]);break;case"text-shadow":i.properties=this.build(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"]);break;case"border":i.properties=this.build(["border-width","border-style","border-color"]);break;case"border-radius":i.properties=this.build(["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"]);break;case"box-shadow":i.properties=this.build(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"]);break;case"background":i.properties=this.build(["background-image","background-repeat","background-position","background-attachment","background-size"]);break;case"transition":i.properties=this.build(["transition-property","transition-duration","transition-timing-function"]);break;case"transform":i.properties=this.build(["transform-rotate-x","transform-rotate-y","transform-rotate-z","transform-scale-x","transform-scale-y","transform-scale-z"])}t.push(i)}return t}},name:"StyleManager",getConfig:function(){return r},init:function(i){var o=(r=x(x({},s),i)).pStylePrefix;return this.em=r.em,o&&(r.stylePrefix=o+r.stylePrefix),e=new c.default,t=new h([],r),n=new y({collection:t,target:r.em,config:r}),this},onLoad:function(){t.add(r.sectors,{silent:!0})},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(o.isElement)(e)?e:document.querySelector(e)).appendChild(this.render())},addSector:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getSector(e);return i||(n.id=e,i=t.add(n,r)),i},getSector:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.where({id:e})[0];return!r&&n.warn&&this._logNoSector(e),r},removeSector:function(e){return this.getSectors().remove(this.getSector(e,{warn:1}))},getSectors:function(){return t},addProperty:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getSector(e,{warn:1}),i=null;return r&&(i=r.get("properties").add(t,n)),i},getProperty:function(e,t){var n,r=this.getSector(e,{warn:1});return r&&(n=r.get("properties").filter((function(e){return e.get("property")===t||e.get("id")===t}))[0]),n||null},removeProperty:function(e,t){var n=this.getProperties(e);return n&&n.remove(this.getProperty(e,t))},getProperties:function(e){var t=null,n=this.getSector(e,{warn:1});return n&&(t=n.get("properties")),t},getModelToStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.em,i=t.skipAdd,o=e.get("classes"),s=e.getId();if(n){var a,l=n.getConfig(),c=n.get("UndoManager"),u=n.get("CssComposer"),d=n.get("SelectorManager"),h=d?d.getConfig():{},f=l.devicePreviewMode?"":n.get("state"),p=o.getStyleable(),g=p.length,m=!h.componentFirst||t.useClasses,v={state:f};if(c.stop(),g&&m){var b=n.getCurrentMedia();(a=u.get(p,f,b))||i||(a=u.add(p,f,b))}else l.avoidInlineStyle&&(!(a=u.getIdRule(s,v))&&!i&&(a=u.setIdRule(s,{},v)),e.is("wrapper")&&a.set("wrapper",1));a&&(e=a),c.start()}return e},addType:function(t,n){e.addType(t,n)},getType:function(t){return e.getType(t)},getTypes:function(){return e.getTypes()},createType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.model,i=void 0===n?{}:n,o=t.view,s=void 0===o?{}:o,a=this.getType(e);if(a)return new a.view(x({model:new a.model(i),config:r},s))},setTarget:function(e,t){return n.setTarget(e,t)},getEmitter:function(){return n.propTarget},render:function(){return n.render().el},_logNoSector:function(e){var t=this.em;t&&t.logWarning("'".concat(e,"' sector not found"))}}}},function(e,t,n){"use strict";n.r(t);var r=n(0),i={stylePrefix:"cm-",inlineCss:!1},o=n(2),s=n.n(o),a=n(1),l=n.n(a);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=l.a.Model.extend({build:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.get("components");return t.exportWrapper?e.toHTML(u({},t.wrapperIsBody&&{tag:"body"})):this.buildModels(n)},buildModels:function(e){var t="";return e.each((function(e){t+=e.toHTML()})),t}}),h=n(31),f=l.a.Model.extend({build:function(e){var t=e.toJSON();return this.beforeEach(t),Object(r.each)(t,(function(e,n){var r=t[n];if(r instanceof l.a.Model)t[n]=this.build(r);else if(r instanceof l.a.Collection){var i=r;t[n]=[],i.length&&i.each((function(e,r){t[n][r]=this.build(e)}),this)}}),this),t},beforeEach:function(e){delete e.status}}),p=l.a.Model.extend({mapModel:function(e){var t="",n=e.get("script-export")||e.get("script"),i=e.get("type"),o=e.get("components"),s=e.getId();if(n){var a=e.get("attributes");a=Object(r.extend)({},a,{id:s}),e.set("attributes",a,{silent:1});var l=e.getScriptString(n);if(e.get("scriptUpdated"))this.mapJs[i+"-"+s]={ids:[s],code:l};else{var c=this.mapJs[i];c?c.ids.push(s):this.mapJs[i]={ids:[s],code:l}}}return o.each((function(e){t+=this.mapModel(e)}),this),t},build:function(e){this.mapJs={},this.mapModel(e);var t="";for(var n in this.mapJs){var r=this.mapJs[n],i="#"+r.ids.join(", #");t+="\n        var items = document.querySelectorAll('".concat(i,"');\n        for (var i = 0, len = items.length; i < len; i++) {\n          (function(){").concat(r.code,"}.bind(items[i]))();\n        }")}return t}}),g=n(13),m=n.n(g);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n(82),n(44),n(85);var b=l.a.Model.extend({defaults:{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0},init:function(e){return Object(r.bindAll)(this,"onChange"),this.editor=m.a.fromTextArea(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=e,this.editor.on("change",this.onChange),this},onChange:function(){this.trigger("update",this)},getEditor:function(){return this.editor},getElement:function(){return this.element},setElement:function(e){return this.element=e,this},refresh:function(){return this.getEditor().refresh(),this},focus:function(){return this.getEditor().focus(),this},getContent:function(){var e=this.getEditor();return e&&e.getValue()},setContent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.editor;r&&(r.setValue(e),r.autoFormatRange&&(m.a.commands.selectAll(r),r.autoFormatRange(r.getCursor(!0),r.getCursor(!1)),m.a.commands.goDocStart(r)),!n.noRefresh&&setTimeout((function(){return t.refresh()})))}}),y=l.a.View.extend({template:Object(r.template)('\n  <div class="<%= pfx %>editor" id="<%= pfx %><%= codeName %>">\n  \t<div id="<%= pfx %>title"><%= label %></div>\n  \t<div id="<%= pfx %>code"></div>\n  </div>'),initialize:function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix},render:function(){var e=this.model.toJSON();return e.pfx=this.pfx,this.$el.html(this.template(e)),this.$el.attr("class",this.pfx+"editor-c"),this.$el.find("#"+this.pfx+"code").append(this.model.get("input")),this}});t.default=function(){var e={},t={},n={},o={},s={};return{getConfig:function(){return e},config:e,EditorView:y,name:"CodeManager",init:function(t){for(var r in e=t||{},i)r in e||(e[r]=i[r]);var o=e.pStylePrefix;return o&&(e.stylePrefix=o+e.stylePrefix),n.html=new d,n.css=new h.a,n.json=new f,n.js=new p,s.CodeMirror=new b,this.loadDefaultGenerators().loadDefaultViewers(),this},addGenerator:function(e,n){return t[e]=n,this},getGenerator:function(e){return t[e]||null},getGenerators:function(){return t},addViewer:function(e,t){return o[e]=t,this},getViewer:function(e){return o[e]||null},getViewers:function(){return o},createViewer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.isUndefined)(e.type)?"CodeMirror":e.type,n=this.getViewer(t)&&this.getViewer(t).clone(),i=document.createElement("div"),o=document.createElement("textarea");return i.appendChild(o),n.set(e),n.init(o),n.setElement(i),n},updateViewer:function(e,t){e.setContent(t)},getCode:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.em=e.em;var i=this.getGenerator(n);return i?i.build(t,r):""},loadDefaultGenerators:function(){for(var e in n)this.addGenerator(e,n[e]);return this},loadDefaultViewers:function(){for(var e in s)this.addViewer(e,s[e]);return this}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o={devices:[]},s=n(1),a=n.n(s),l=a.a.Model.extend({idAttribute:"name",defaults:{name:"",width:null,height:"",widthMedia:null,priority:null},initialize:function(){var e=this;null===this.get("widthMedia")&&this.set("widthMedia",this.get("width")),null===this.get("width")&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach((function(t){return e.checkUnit(t)}))},checkUnit:function(e){var t=this.get(e)||"";(parseFloat(t)||0).toString()===t.toString()&&this.set(e,"".concat(t,"px"))}}),c=a.a.Collection.extend({model:l,comparator:function(e,t){var n=Number.MAX_VALUE;return(t.get("priority")||n)-(e.get("priority")||n)},getSorted:function(){return this.sort()}}),u=n(0),d=a.a.View.extend({template:Object(u.template)('\n    <div class="<%= ppfx %>device-label"><%= deviceLabel %></div>\n    <div class="<%= ppfx %>field <%= ppfx %>select">\n      <span id="<%= ppfx %>input-holder">\n        <select class="<%= ppfx %>devices"></select>\n      </span>\n      <div class="<%= ppfx %>sel-arrow">\n        <div class="<%= ppfx %>d-s-arrow"></div>\n      </div>\n    </div>\n    <button style="display:none" class="<%= ppfx %>add-trasp">+</button>'),events:{change:"updateDevice"},initialize:function(e){this.config=e.config||{},this.em=this.config.em,this.ppfx=this.config.pStylePrefix||"",this.events["click ."+this.ppfx+"add-trasp"]=this.startAdd,this.listenTo(this.em,"change:device",this.updateSelect),this.delegateEvents()},startAdd:function(){},updateDevice:function(){var e=this.em;if(e){var t=this.devicesEl,n=t?t.val():"";e.set("device",n)}},updateSelect:function(){var e=this.em,t=this.devicesEl;if(e&&e.getDeviceModel&&t){var n=e.getDeviceModel(),r=n?n.get("name"):"";t.val(r)}},getOptions:function(){var e=this.em,t="";return this.collection.each((function(n){var r=n.attributes,i=r.name,o=e&&e.t&&e.t("deviceManager.devices.".concat(r.id))||i;t+='<option value="'.concat(i,'">').concat(o,"</option>")})),t},render:function(){var e=this.em,t=this.ppfx,n=this.$el,r=this.el;return n.html(this.template({ppfx:t,deviceLabel:e&&e.t&&e.t("deviceManager.device")})),this.devicesEl=n.find(".".concat(t,"devices")),this.devicesEl.append(this.getOptions()),r.className="".concat(t,"devices-c"),this}});function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={};return{name:"DeviceManager",init:function(r){var i=this;for(var s in n=r||{},o)s in n||(n[s]=o[s]);return e=new c,(n.devices||[]).forEach((function(e){return i.add(e.id||e.name,e.width,e)})),t=new d({collection:e,config:n}),this},add:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=f(f({},r),{},{id:t,name:r.name||t,width:n});return e.add(i)},get:function(t){return e.get(t)},getAll:function(){return e},render:function(){return t.render().el}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o={id:"gjs-",autosave:1,autoload:1,type:"local",stepsBeforeSave:1,storeComponents:1,storeStyles:1,storeHtml:1,storeCss:1,checkLocal:1,params:{},headers:{},urlStore:"",urlLoad:"",beforeSend:function(e,t){},onComplete:function(e,t){},contentTypeJson:!0,credentials:"include",fetchOptions:""},s=n(1),a=n.n(s),l=a.a.Model.extend({defaults:{checkLocal:!0},store:function(e,t){for(var n in this.checkStorageEnvironment(),e)localStorage.setItem(n,e[n]);"function"==typeof t&&t()},load:function(e,t){this.checkStorageEnvironment();for(var n={},r=0,i=e.length;r<i;r++){var o=localStorage.getItem(e[r]);o&&(n[e[r]]=o)}return"function"==typeof t&&t(n),n},remove:function(e){this.checkStorageEnvironment();for(var t=0,n=e.length;t<n;t++)localStorage.removeItem(e[t])},checkStorageEnvironment:function(){this.get("checkLocal")&&!localStorage&&console.warn("Your browser doesn't support localStorage")}}),c=n(28),u=n(0);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=a.a.Model.extend({fetch:c.a,defaults:{urlStore:"",urlLoad:"",params:{},beforeSend:function(){},onComplete:function(){},contentTypeJson:!1,credentials:"include",fetchOptions:""},onStart:function(){this.get("em");var e=this.get("beforeSend");e&&e()},onError:function(e,t){if(t)t(e);else{var n=this.get("em");console.error(e),n&&n.trigger("storage:error",e)}},onResponse:function(e,t){var n=this.get("em"),r=this.get("onComplete"),i=this.get("contentTypeJson")&&e&&"string"==typeof e?JSON.parse(e):e;r&&r(i),t&&t(i),n&&n.trigger("storage:response",i)},store:function(e,t,n){var r={};for(var i in e)r[i]=e[i];this.request(this.get("urlStore"),{body:r},t,n)},load:function(e,t,n){this.request(this.get("urlLoad"),{method:"get"},t,n)},request:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.get("contentTypeJson"),l=this.get("headers")||{},c=this.get("params"),d="X-Requested-With",f="Content-Type",p=i.body||{};for(var g in c)p[g]=c[g];if(Object(u.isUndefined)(l[d])&&(l[d]="XMLHttpRequest"),Object(u.isUndefined)(l[f])&&a&&(l[f]="application/json; charset=utf-8"),a)n=JSON.stringify(p);else for(var m in n=new FormData,p)n.append(m,p[m]);"post"===(t={method:i.method||"post",credentials:this.get("credentials"),headers:l}).method&&(t.body=n);var v=this.get("fetchOptions")||{},b=Object(u.isFunction)(v)?v(t):t;this.onStart(),this.fetch(e,h(h({},t),b||{})).then((function(e){return 1==(e.status/200|0)?e.text():e.text().then((function(e){return Promise.reject(e)}))})).then((function(e){return r.onResponse(e,o)})).catch((function(e){return r.onError(e,s)}))}});function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t={},n={},r={};return{name:"StorageManager",init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=g(g({},o),n),e=t.em,t._disable&&(t.type=0),r.remote=new f(t),r.local=new l(t),t.currentStorage=t.type,this.loadDefaultProviders().setCurrent(t.type),this},getConfig:function(){return t},isAutosave:function(){return!!t.autosave},setAutosave:function(e){return t.autosave=!!e,this},getStepsBeforeSave:function(){return t.stepsBeforeSave},setStepsBeforeSave:function(e){return t.stepsBeforeSave=e,this},add:function(e,t){return n[e]=t,this},get:function(e){return n[e]||null},getStorages:function(){return n},getCurrent:function(){return t.currentStorage},setCurrent:function(e){return t.currentStorage=e,this},store:function(e,n){var r=this,i=this.get(this.getCurrent()),o={};for(var s in this.onStart("store",e),e)o[t.id+s]=e[s];return i?i.store(o,(function(e){n&&n(e),r.onEnd("store",e)}),(function(e){r.onError("store",e)})):null},load:function(e,n){var r=this,i=this.get(this.getCurrent()),o=[],s={};"string"==typeof e&&(e=[e]),this.onStart("load",e);for(var a=0,l=e.length;a<l;a++)o.push(t.id+e[a]);i?i.load(o,(function(e){var i=new RegExp("^"+t.id);for(var o in e){var a=o.replace(i,"");s[a]=e[o]}n&&n(s),r.onEnd("load",s)}),(function(e){n&&n(s),r.onError("load",e)})):n&&n(s)},loadDefaultProviders:function(){for(var e in r)this.add(e,r[e]);return this},getCurrentStorage:function(){return this.get(this.getCurrent())},onStart:function(t,n){e&&(e.trigger("storage:start"),t&&e.trigger("".concat("storage:start",":").concat(t),n))},onEnd:function(t,n){e&&(e.trigger("storage:end"),t&&e.trigger("".concat("storage:end",":").concat(t),n))},onError:function(t,n){e&&(e.trigger("storage:error",n),t&&e.trigger("".concat("storage:error",":").concat(t),n),this.onEnd(t,n))},canAutoload:function(){return this.getCurrentStorage()&&this.getConfig().autoload}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o={stylePrefix:"mdl-",title:"",content:"",backdrop:!0},s=n(1),a=n.n(s),l=a.a.Model.extend({defaults:{title:"",content:"",open:!1}});function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=a.a.View.extend({template:function(e){var t=e.pfx,n=e.ppfx,r=e.content,i=e.title;return'<div class="'.concat(t,"dialog ").concat(n,"one-bg ").concat(n,'two-color">\n      <div class="').concat(t,'header">\n        <div class="').concat(t,'title">').concat(i,'</div>\n        <div class="').concat(t,'btn-close" data-close-modal>&Cross;</div>\n      </div>\n      <div class="').concat(t,'content">\n        <div id="').concat(t,'c">').concat(r,'</div>\n        <div style="clear:both"></div>\n      </div>\n    </div>\n    <div class="').concat(t,'collector" style="display: none"></div>')},events:{click:"onClick","click [data-close-modal]":"hide"},initialize:function(e){var t=this.model,n=e.config||{},r=n.stylePrefix||"";this.config=n,this.pfx=r,this.ppfx=n.pStylePrefix||"",this.listenTo(t,"change:open",this.updateOpen),this.listenTo(t,"change:title",this.updateTitle),this.listenTo(t,"change:content",this.updateContent)},onClick:function(e){this.config.backdrop&&e.target===this.el&&this.hide()},getCollector:function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},getContent:function(){var e=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(e,"content #").concat(e,"c"))),this.$content},getTitle:function(){return this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),this.$title.get(0)},updateContent:function(){var e=this.getContent(),t=e.children(),n=this.getCollector(),r=this.model.get("content");t.length&&n.append(t),e.empty().append(r)},updateTitle:function(){var e=this.getTitle();e&&(e.innerHTML=this.model.get("title"))},updateOpen:function(){this.el.style.display=this.model.get("open")?"":"none"},hide:function(){this.model.set("open",0)},show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.model.set("open",1),this.updateAttr(e.attributes)},updateAttr:function(e){var t=this.pfx,n=this.$el,r=[].slice.call(this.el.attributes).map((function(e){return e.name}));n.removeAttr(r.join(" ")),n.attr(u(u({},e||{}),{},{class:"".concat(t,"container ").concat(e&&e.class||"").trim()}))},render:function(){var e=this.$el,t=this.model.toJSON();return t.pfx=this.pfx,t.ppfx=this.ppfx,e.html(this.template(t)),this.updateAttr(),this.updateOpen(),this}});function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={},r=function(e,t){t&&t.trigger("modal:".concat(e?"open":"close"))};return{name:"Modal",getConfig:function(){return n},init:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(n=f(f({},o),i)).em;this.em=s;var a=n.pStylePrefix;return a&&(n.stylePrefix=a+n.stylePrefix),(e=new l(n)).on("change:open",(function(e,t){return r(t,s)})),t=new d({model:e,config:n}),this},postRender:function(e){var t=e.model.getConfig().el||e.el;this.render().appendTo(t)},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.title&&this.setTitle(e.title),e.content&&this.setContent(e.content),t.show(e),this},close:function(){return t.hide(),this},onceClose:function(e){return this.em.once("modal:close",e),this},onceOpen:function(e){return this.em.once("modal:open",e),this},isOpen:function(){return!!e.get("open")},setTitle:function(t){return e.set("title",t),this},getTitle:function(){return e.get("title")},setContent:function(t){return e.set("content"," "),e.set("content",t),this},getContent:function(){return e.get("content")},getContentEl:function(){return t.getContent().get(0)},getModel:function(){return e},render:function(){return t.render().$el}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(0),s=n(3),a={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],escapeName:0,selectedName:0,iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',render:0,componentFirst:0},l=n(10),c=n(12),u=n(8),d=n.n(u),h=n(1),f=n.n(h),p=f.a.View.extend({template:function(){var e=this.pfx,t=this.config,n=this.model.get("label")||"";return'\n      <span id="'.concat(e,'checkbox" class="').concat(e,'tag-status" data-tag-status></span>\n      <span id="').concat(e,'tag-label" data-tag-name>').concat(n,'</span>\n      <span id="').concat(e,'close" class="').concat(e,'tag-close" data-tag-remove>\n        ').concat(t.iconTagRemove,"\n      </span>\n    ")},events:{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"},initialize:function(e){var t=e.config||{};this.config=t,this.coll=e.coll||null,this.pfx=t.stylePrefix||"",this.ppfx=t.pStylePrefix||"",this.em=t.em,this.listenTo(this.model,"change:active",this.updateStatus)},getInputEl:function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},startEditTag:function(){var e=this.em,t=this.getInputEl();t.contentEditable=!0,t.focus(),e&&e.setEditing(1)},endEditTag:function(){var e=this.model,t=this.getInputEl(),n=t.textContent,r=this.em,i=r&&r.get("SelectorManager");if(t.contentEditable=!1,r&&r.setEditing(0),i){var o=i.escapeName(n);i.get(o)?t.innerText=e.get("label"):e.set({name:o,label:n})}},changeStatus:function(){var e=this.model;e.set("active",!e.get("active"))},removeTag:function(){var e=this.em,t=this.model;(e&&e.getSelectedAll()).forEach((function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)}))},updateStatus:function(){var e=this.model,t=this.$el,n=this.config,r=n.iconTagOn,i=n.iconTagOff,o=t.find("[data-tag-status]");e.get("active")?(o.html(r),t.removeClass("opac50")):(o.html(i),t.addClass("opac50"))},render:function(){var e=this.pfx,t=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(e,"tag ").concat(t,"three-bg")),this.updateStatus(),this}}),g=f.a.View.extend({template:function(e){var t=e.labelInfo,n=e.labelStates,r=e.labelHead,i=e.iconSync,o=e.iconAdd,s=e.pfx,a=e.ppfx;return'\n    <div id="'.concat(s,'up" class="').concat(s,'header">\n      <div id="').concat(s,'label" class="').concat(s,'header-label">').concat(r,'</div>\n      <div id="').concat(s,'status-c" class="').concat(s,'header-status">\n        <span id="').concat(s,'input-c" data-states-c>\n          <div class="').concat(a,"field ").concat(a,'select">\n            <span id="').concat(a,'input-holder">\n              <select id="').concat(s,'states" data-states>\n                <option value="">').concat(n,'</option>\n              </select>\n            </span>\n            <div class="').concat(a,'sel-arrow">\n              <div class="').concat(a,'d-s-arrow"></div>\n            </div>\n          </div>\n        </span>\n      </div>\n    </div>\n    <div id="').concat(s,'tags-field" class="').concat(a,'field">\n      <div id="').concat(s,'tags-c" data-selectors></div>\n      <input id="').concat(s,'new" data-input/>\n      <span id="').concat(s,'add-tag" class="').concat(s,"tags-btn ").concat(s,'tags-btn__add" data-add>\n        ').concat(o,'\n      </span>\n      <span class="').concat(s,"tags-btn ").concat(s,'tags-btn__sync" style="display: none" data-sync-style>\n        ').concat(i,'\n      </span>\n    </div>\n    <div class="').concat(s,'sels-info">\n      <div class="').concat(s,'label-sel">').concat(t,':</div>\n      <div class="').concat(s,'sels" data-selected></div>\n      <div style="clear:both"></div>\n    </div>')},events:{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"},initialize:function(){this.config=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).config||{},this.pfx=this.config.stylePrefix||"",this.ppfx=this.config.pStylePrefix||"",this.className=this.pfx+"tags",this.stateInputId=this.pfx+"states",this.stateInputC=this.pfx+"input-c",this.states=this.config.states||[];var e=this.config.em,t=this.collection;this.target=this.config.em,this.em=e;var n=this.getStyleEmitter(),r="component:update:classes change:state";this.listenTo(e,"component:toggled component:update:classes",this.componentChanged),this.listenTo(n,"update",this.componentChanged),this.listenTo(e,r,this.__handleStateChange),this.listenTo(e,"styleable:change change:device",this.checkSync),this.listenTo(t,"add",this.addNew),this.listenTo(t,"reset",this.renderClasses),this.listenTo(t,"remove",this.tagRemoved),this.delegateEvents()},syncStyle:function(){var e,t=this.em,n=this.getTarget(),r=t.get("CssComposer"),i=this.getCommonSelectors({opts:{noDisabled:1}}),o=t.get("state"),s=t.getCurrentMedia(),a=[],l=r.get(i,o,s)||r.add(i,o,s);this.getTargets().forEach((function(t){var n=r.getIdRule(t.getId(),{state:o,mediaText:s});e=n.getStyle(),n.setStyle({}),a.push(n)})),e&&l.addStyle(e),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:n,selectors:i,mediaText:s,rule:l,ruleComponents:a,state:o})},getStyleEmitter:function(){var e=this.em,t=e&&e.get("StyleManager");return t&&t.getEmitter()||{}},tagRemoved:function(e){this.updateStateVis()},getStateOptions:function(){var e=this.em,t=[];return this.states.forEach((function(n){return t.push('<option value="'.concat(n.name,'">').concat(e.t("selectorManager.states.".concat(n.name))||n.label||n.name,"</option>"))})),t.join("")},addNew:function(e){this.addToClasses(e)},startNewTag:function(){this.$addBtn.css({display:"none"}),this.$input.show().focus()},endNewTag:function(){this.$addBtn.css({display:""}),this.$input.hide().val("")},onInputKeyUp:function(e){13===e.keyCode?this.addNewTag(this.$input.val()):27===e.keyCode&&this.endNewTag()},checkStates:function(){var e=this.em.getState(),t=this.getStates();t&&t.val(e)},componentChanged:Object(o.debounce)((function(){this.updateSelection((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).targets)})),updateSelection:function(e){var t=e||this.getTargets(),n=[];return(t=Object(o.isArray)(t)?t:[t])&&t.length&&(n=this.getCommonSelectors({targets:t}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(t),n},getCommonSelectors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.opts,n=void 0===t?{}:t,r=(e.targets||this.getTargets()).map((function(e){return e.getSelectors&&e.getSelectors().getValid(n)})).filter((function(e){return e}));return this._commonSelectors.apply(this,d()(r))},_commonSelectors:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.length?1===n.length?n[0]:2===n.length?n[0].filter((function(e){return n[1].indexOf(e)>=0})):n.slice(1).reduce((function(t,n){return e._commonSelectors(t,n)}),n[0]):[]},checkSync:Object(o.debounce)((function(){var e,t=this.$btnSyncEl,n=this.config,r=this.collection,i=this.getTarget();if(i&&n.componentFirst&&r.length){var s=i.getStyle();e=!Object(o.isEmpty)(s)}t&&t[e?"show":"hide"]()})),getTarget:function(){return this.target.getSelected()},getTargets:function(){return this.target.getSelectedAll()},updateStateVis:function(e){var t=this.em,n=t&&t.getConfig("avoidInlineStyle"),r=this.collection.length||n?"":"none";this.getStatesC().css("display",r),this.updateSelector(e)},__handleStateChange:function(){this.updateSelector(this.getTargets())},updateSelector:function(e){var t=this,n=this.el.querySelector("[data-selected]"),r=[],i=e||this.getTargets();(i=Object(o.isArray)(i)?i:[i]).forEach((function(e){return r.push(t.__getName(e))})),n&&(n.innerHTML=r.join(", ")),this.checkStates()},__getName:function(e){var t,n=this.pfx,r=this.config,i=this.em,s=r.selectedName,a=r.componentFirst;if(Object(o.isString)(e))t='<span class="'.concat(n,'sel-gen">').concat(e,"</span>");else{if(!e||!e.get)return;var l=e.getSelectors().getStyleable(),c=i.get("state"),u=e.getId?'<span class="'.concat(n,'sel-cmp">').concat(e.getName(),'</span><span class="').concat(n,'sel-id">#').concat(e.getId(),"</span>"):"";t=(t=this.collection.getFullString(l))?'<span class="'.concat(n,'sel-rule">').concat(t,"</span>"):e.get("selectorsAdd")||u,t=a&&u?u:t,t+=c?'<span class="'.concat(n,'sel-state">:').concat(c,"</span>"):"",t=s?s({result:t,state:c,target:e}):t}return t&&'<span class="'.concat(n,'sel">').concat(t,"</span>")},stateChanged:function(e){this.em.set("state",e.target.value)},addNewTag:function(e){var t=this,n=this.em;if(e.trim()){if(n){var r=n.get("SelectorManager").add({label:e});this.getTargets().forEach((function(e){e.getSelectors().add(r),t.collection.add(r),t.updateStateVis()}))}this.endNewTag()}},addToClasses:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getClasses(),r=new p({model:e,config:this.config,coll:this.collection}).render().el;return t?t.appendChild(r):n.append(r),r},renderClasses:function(){var e=this,t=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each((function(n){return e.addToClasses(n,t)})),n.append(t)},getClasses:function(){return this.$el.find("[data-selectors]")},getStates:function(){if(!this.$states){var e=this.$el.find("[data-states]");this.$states=e[0]&&e}return this.$states},getStatesC:function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},render:function(){var e=this.em,t=this.pfx,n=this.ppfx,r=this.config,i=this.$el,o=this.el,s=r.render,a={iconSync:r.iconSync,iconAdd:r.iconAdd,labelHead:e.t("selectorManager.label"),labelStates:e.t("selectorManager.emptyState"),labelInfo:e.t("selectorManager.selected"),ppfx:n,pfx:t,el:o};i.html(this.template(a));var l=s&&s(a);l&&l!==o&&i.empty().append(l),this.$input=i.find("[data-input]"),this.$addBtn=i.find("[data-add]"),this.$classes=i.find("#"+t+"tags-c"),this.$btnSyncEl=i.find("[data-sync-style]"),this.$input.hide();var c=this.getStates();return c&&c.append(this.getStateOptions()),this.renderClasses(),i.attr("class","".concat(this.className," ").concat(n,"one-bg ").concat(n,"two-color")),this}});function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){return Object(o.isString)(e)&&"#"==e[0]},y=function(e){return Object(o.isString)(e)&&"."==e[0]};t.default=function(e){var t,n=e||{};return{Selector:l.a,Selectors:c.a,name:"SelectorManager",getConfig:function(){return n},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(n=v(v({},a),e)).em,i=n.pStylePrefix;return this.em=r,i&&(n.stylePrefix=i+n.stylePrefix),this.selectorTags=new g({collection:new c.a([],{em:r,config:n}),config:n}),(t=new c.a(n.selectors)).on("add",(function(e){return r.trigger("selector:add",e)})),t.on("remove",(function(e){return r.trigger("selector:remove",e)})),t.on("change",(function(e){return r.trigger("selector:update",e,e.previousAttributes(),e.changedAttributes())})),r.on("change:state",(function(e,t){return r.trigger("selector:state",t)})),this},postRender:function(){var e=this.getConfig().appendTo;e&&(Object(o.isElement)(e)?e:document.querySelector(e)).appendChild(this.render([]))},select:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e)?e:[e],r=this.em.get("StyleManager").setTarget(n,t).filter((function(e){return e})).map((function(e){return Object(s.l)(e)||Object(s.o)(e)&&!e.get("selectorsAdd")?e:e.getSelectorsString()}));return this.selectorTags.componentChanged({targets:r}),this},setState:function(e){return this.em.setState(e),this},getState:function(){return this.em.setState()},addSelector:function(e){var r=v({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});Object(o.isObject)(e)?r=e:r.name=e,b(r.name)?(r.name=r.name.substr(1),r.type=l.a.TYPE_ID):y(r.name)&&(r.name=r.name.substr(1)),r.label&&!r.name&&(r.name=this.escapeName(r.label));var i=r.name;return(i?this.get(i,r.type):t.where(r)[0])||t.add(r,{config:n})},getSelector:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a.TYPE_CLASS;return b(e)?(e=e.substr(1),n=l.a.TYPE_ID):y(e)&&(e=e.substr(1)),t.where({name:e,type:n})[0]},add:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.isArray)(e)?e.map((function(e){return t.addSelector(e,n)})):this.addSelector(e,n)},addClass:function(e){var t=this,n=[];return Object(o.isString)(e)&&(e=e.trim().split(" ")),e.forEach((function(e){return n.push(t.addSelector(e))})),n},get:function(e,t){var n=this;if(Object(o.isArray)(e)){var r=[];return e.map((function(e){return n.getSelector(e)})).filter((function(e){return e})).forEach((function(e){return r.indexOf(e)<0&&r.push(e)})),r}return this.getSelector(e,t)},getAll:function(){return t},escapeName:function(e){var t=n.escapeName;return t?t(e):l.a.escapeName(e)},render:function(e){return e?(this.selectorTags=new g({collection:new c.a(e),config:n}),this.selectorTags.render().el):this.selectorTags.render().el}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o={textTags:["br","b","i","u","a","ul","ol"],parserCss:null,parserHtml:null},s=n(0),a={4:"media",5:"font-face",6:"page",7:"keyframes",11:"counter-style",12:"supports",13:"document",14:"font-feature-values",15:"viewport"},l=Object(s.keys)(a),c=["5","6","11","15"],u=["font-face","page","counter-style","viewport"],d=function(){for(var e=[],t=[],n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),r=0,i=n.length;r<i;r++){var o=n[r].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(o)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(o)){var s=o.split(".").filter(Boolean);t.push(s)}else e.push(o)}return{result:t,add:e}},h=function(e){for(var t=e.style,n={},r=0,i=t.length;r<i;r++){var o=t[r],s=t.getPropertyValue(o),a=t.getPropertyPriority(o);n[o]="".concat(s).concat(a?" !".concat(a):"")}return n},f=function(e){return(e.conditionText||e.media&&e.media.mediaText||e.name||e.selectorText||"").trim()},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={},i=e.length,o=e[i-1],s=o?o.split(/:(.+)/):[],a=s[1],l=n.atRule,c=n.selectorsAdd,d=n.mediaText;return u.indexOf(l)>=0&&(r.singleAtRule=1),l&&(r.atRuleType=l),c&&(r.selectorsAdd=c),d&&(r.mediaText=d),a&&(e[i-1]=s[0],r.state=a,s.splice(s.length-1,1)),r.selectors=e,r.style=t,r},g=function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t);var n=t.sheet;return document.head.removeChild(t),function e(t){for(var n=[],r=t.cssRules||[],i=0,o=r.length;i<o;i++){var s=r[i],u=s.type.toString(),g=0,m="",v="",b=s.selectorText||s.keyText,y=c.indexOf(u)>=0;if(y)g=1,m=a[u],v=f(s);else if(l.indexOf(u)>=0){var w=e(s);v=f(s);for(var x=0,O=w.length;x<O;x++){var C=w[x];v&&(C.mediaText=v),C.atRuleType=a[u]}n=n.concat(w)}if(b||y){for(var _=h(s),S=d(b),j=S.add,k=void 0,T=0,E=(b=S.result).length;T<E;T++){var P=p(b[T],_,{atRule:a[u]});n.push(P),k=P}if(j.length){var A=j.join(", ");if(k)k.selectorsAdd=A;else{var M={selectors:[],selectorsAdd:A,style:_};g&&(M.singleAtRule=g),m&&(M.atRuleType=m),v&&(M.mediaText=v),n.push(M)}}}}return n}(n)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{parse:function(t){var n=this,r=[],i=e.parserCss,o=e.em,s=o&&o.get&&o.get("Editor");return(i?i(t,s):g(t)).forEach((function(e){return r=r.concat(n.checkNode(e))})),o&&o.trigger("parse:css",{input:t,output:r}),r},checkNode:function(e){var t=e.selectors,n=e.style;if(Object(s.isString)(t)){var r=[],i=d(t),o=i.result,a=i.add.join(", "),l={atRule:e.atRule,mediaText:e.params};o.length?o.forEach((function(e){r.push(p(e,n,l))})):r.push(p([],n,l)),a&&(r[r.length-1].selectorsAdd=a),e=r}return e}}},v=n(29);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n={};return{compTypes:"",parserCss:null,parserHtml:null,name:"Parser",getConfig:function(){return n},init:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(n=y(y({},o),r)).Parser=this,e=new v.a(n),t=new m(n),this.em=n.em,this.parserCss=t,this.parserHtml=e,this},parseHtml:function(n){var r=this.em,i=this.compTypes;return e.compTypes=r?r.get("DomComponents").getTypes():i,e.parse(n,t)},parseCss:function(e){return t.parse(e)}}}},function(e,t,n){"use strict";n.r(t);var r=n(8),i=n.n(r),o=n(2),s=n.n(o),a=n(15),l=n.n(a),c=n(16),u=n.n(c),d=n(3);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.selection().anchorNode,n=t&&t.parentNode,r=t&&t.nextSibling;return n&&"A"==n.nodeName||r&&"A"==r.nodeName},g={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(e){return e.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(e){return e.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(e){return e.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(e){return e.exec("strikeThrough")}},link:{icon:'<span style="transform:rotate(45deg)">&supdsub;</span>',name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(e,t){return e&&e.selection()&&p(e)?1:0},result:function(e){p(e)?e.exec("unlink"):e.insertHTML('<a class="link" href="">'.concat(e.selection(),"</a>"))}}},m=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l()(this,e);var r=n.el;if(r._rte)return r._rte;r._rte=this,this.setEl(r),this.updateActiveActions=this.updateActiveActions.bind(this);var i=n.actions||[];i.forEach((function(e,t){"string"==typeof e?e=g[e]:g[e.name]&&(e=f(f({},g[e.name]),e)),i[t]=e}));var o=i.length?i:Object.keys(g).map((function(e){return g[e]}));n.classes=f(f({},{actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"}),n.classes);var s=n.classes,a=n.actionbar;if(this.actionbar=a,this.settings=n,this.classes=s,this.actions=o,!a){var c=n.actionbarContainer;(a=document.createElement("div")).className=s.actionbar,c.appendChild(a),this.actionbar=a,o.forEach((function(e){return t.addAction(e)}))}return n.styleWithCSS&&this.exec("styleWithCSS"),this.syncActions(),this}return u()(e,[{key:"destroy",value:function(){this.el=0,this.doc=0,this.actionbar=0,this.settings={},this.classes={},this.actions=[]}},{key:"setEl",value:function(e){this.el=e,this.doc=e.ownerDocument}},{key:"updateActiveActions",value:function(){var e=this;this.getActions().forEach((function(t){var n=t.btn,r=t.update,i=f({},e.classes),o=i.active,s=i.inactive,a=i.disabled,l=t.state,c=t.name,u=e.doc;if(n.className=n.className.replace(o,"").trim(),n.className=n.className.replace(s,"").trim(),n.className=n.className.replace(a,"").trim(),l)switch(l(e,u)){case 1:n.className+=" ".concat(o);break;case 0:n.className+=" ".concat(s);break;case-1:n.className+=" ".concat(a)}else u.queryCommandSupported(c)&&u.queryCommandState(c)&&(n.className+=" ".concat(o));r&&r(e,t)}))}},{key:"enable",value:function(){return this.enabled||(this.actionbarEl().style.display="",this.el.contentEditable=!0,Object(d.u)(this.el,"mouseup keyup",this.updateActiveActions),this.syncActions(),this.updateActiveActions(),this.el.focus(),this.enabled=1),this}},{key:"disable",value:function(){return this.actionbarEl().style.display="none",this.el.contentEditable=!1,Object(d.t)(this.el,"mouseup keyup",this.updateActiveActions),this.enabled=0,this}},{key:"syncActions",value:function(){var e=this;this.getActions().forEach((function(t){e.settings.actionbar&&(!t.state||t.state&&t.state(e,e.doc)>=0)&&(t.btn["on".concat(t.event||"click")]=function(n){t.result(e,t),e.updateActiveActions()})}))}},{key:"addAction",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).sync,n=document.createElement("span"),r=e.icon,i=e.attributes||{};for(var o in n.className=this.classes.button,e.btn=n,i)n.setAttribute(o,i[o]);"string"==typeof r?n.innerHTML=r:n.appendChild(r),this.actionbarEl().appendChild(n),t&&(this.actions.push(e),this.syncActions())}},{key:"getActions",value:function(){return this.actions}},{key:"selection",value:function(){return this.doc.getSelection()}},{key:"exec",value:function(e){this.doc.execCommand(e,!1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}},{key:"actionbarEl",value:function(){return this.actionbar}},{key:"insertHTML",value:function(e){var t=this.doc,n=t.getSelection();if(n&&n.rangeCount){var r=t.createElement("div"),i=n.getRangeAt(0);i.deleteContents(),r.innerHTML=e,Array.prototype.slice.call(r.childNodes).forEach((function(e){i.insertNode(e)})),n.removeAllRanges(),n.addRange(i),this.el.focus()}}}]),e}(),v={stylePrefix:"rte-",adjustToolbar:1,actions:["bold","italic","underline","strikethrough","link"]};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={},o=function(){var t=e.style;t.top="-1000px",t.left="-1000px",t.display="none"};return{customRte:null,name:"RichTextEditor",getConfig:function(){return r},init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(r=y(y({},v),t)).pStylePrefix;return i&&(r.stylePrefix=i+r.stylePrefix),this.pfx=r.stylePrefix,(e=document.createElement("div")).className="".concat(i,"rte-toolbar ").concat(i,"one-bg"),n=this.initRte(document.createElement("div")),Object(d.u)(e,"mousedown",(function(e){return e.stopPropagation()})),this},destroy:function(){var t=this.customRte;n&&n.destroy(),t&&t.destroy&&t.destroy(),e=0,n=0,this.actionbar=0,this.actions=0},postRender:function(t){var n=t.model.get("Canvas");e.style.pointerEvents="all",o(),n.getToolsEl().appendChild(e)},initRte:function(t){var o=this.pfx,s=e,a=this.actionbar,l=this.actions||i()(r.actions),c={actionbar:"".concat(o,"actionbar"),button:"".concat(o,"action"),active:"".concat(o,"active"),inactive:"".concat(o,"inactive"),disabled:"".concat(o,"disabled")},u=new m({el:t,classes:c,actions:l,actionbar:a,actionbarContainer:s});return n&&n.setEl(t),u.actionbar&&(this.actionbar=u.actionbar),u.actions&&(this.actions=u.actions),u},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name=e,n.addAction(t,{sync:1})},get:function(e){var t;return n.getActions().forEach((function(n){n.name==e&&(t=n)})),t},getAll:function(){return n.getActions()},remove:function(e){var t=this.getAll(),n=this.get(e);if(n){var r=n.btn,i=t.indexOf(n);r.parentNode.removeChild(r),t.splice(i,1)}return n},getToolbarEl:function(){return e},updatePosition:function(){var n=r.em.get("Canvas"),i=e.style,o=n.getTargetToElementFixed(t,e,{event:"rteToolbarPosUpdate"});i.top=o.top+"px",i.left="0px"},enable:function(n,i){t=n.el;var o=r.em.get("Canvas"),s=r.em,a=n.getChildrenContainer(),l=this.customRte;if(o.getElementPos(t),e.style.display="",i=l?l.enable(a,i):this.initRte(a).enable(),s){setTimeout(this.updatePosition.bind(this),0);var c="change:canvasOffset canvasScroll frame:scroll component:update";s.off(c,this.updatePosition,this),s.on(c,this.updatePosition,this),s.trigger("rte:enable",n,i)}return i},disable:function(e,t){var n=r.em,i=this.customRte,s=e.getChildrenContainer();i?i.disable(s,t):t&&t.disable(),o(),n&&n.trigger("rte:disable",e,t)}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(9),s=n.n(o),a=n(0),l={placeholder:"eg. Text here"},c={locale:"en",localeFallback:"en",detectLocale:1,debug:0,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:l,alt:l,title:l,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}}}}};function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){return!Array.isArray(e)&&null!==e&&"object"===s()(e)};t.default=function(){return{name:"I18n",config:c,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config=d(d(d({},c),e),{},{messages:d(d({},c.messages),e.messages||{})}),this.config.detectLocale&&(this.config.locale=this._localLang()),this.em=e.em,this},getConfig:function(){return this.config},setLocale:function(e){var t=this.em,n=this.config;return t&&t.trigger("i18n:locale",{value:e,valuePrev:n.locale}),n.locale=e,this},getLocale:function(){return this.config.locale},getMessages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config.messages;return e&&!n[e]&&this._debug("'".concat(e,"' i18n lang not found"),t),e?n[e]:n},setMessages:function(e){var t=this.em;return this.config.messages=e,t&&t.trigger("i18n:update",e),this},addMessages:function(e){var t=this.em,n=this.config.messages;return t&&t.trigger("i18n:add",e),this.setMessages(function e(){for(var t=d({},arguments.length<=0?void 0:arguments[0]),n=1;n<arguments.length;n++){var r=d({},n<0||arguments.length<=n?void 0:arguments[n]);for(var i in r){var o=t[i],s=r[i];t[i]=h(o)&&h(s)?e(o,s):s}}return t}(n,e)),this},t:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.config,r=t.params||{},i=t.l||this.getLocale(),o=t.lFlb||n.localeFallback,s=this._getMsg(e,i,t);return s||(s=this._getMsg(e,o,t)),!s&&this._debug("'".concat(e,"' i18n key not found in '").concat(i,"' lang"),t),s&&Object(a.isString)(s)?this._addParams(s,r):s},_localLang:function(){var e=window.navigator||{},t=e.language||e.userLanguage;return t?t.split("-")[0]:"en"},_addParams:function(e,t){var n=new RegExp("{([\\w\\d-]*)}","g");return e.replace(n,(function(e,n){return t[n]||""})).trim()},_getMsg:function(e,t){var n=this.getMessages(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});if(n){var r=n[e];return!r&&e.indexOf(".")>0&&(r=e.split(".").reduce((function(e,t){if(!Object(a.isUndefined)(e))return e[t]}),n)),r}},_debug:function(e){var t=this.em;((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).debug||this.config.debug)&&t&&t.logWarning(e)}}}},function(e,t,n){"use strict";n.r(t);var r=n(17),i=n(2),o=n.n(i),s=n(1),a=n.n(s),l=n(0),c=n(3);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=a.a.$,f=a.a.View.extend({initialize:function(e){this.opt=e||{},Object(l.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var t=e||{};this.elT=0,this.elL=0,this.borderOffset=t.borderOffset||10;var n=t.container;this.el="string"==typeof n?document.querySelector(n):n,this.$el=h(this.el),this.containerSel=t.containerSel||"div",this.itemSel=t.itemSel||"div",this.draggable=t.draggable||!0,this.nested=t.nested||0,this.pfx=t.pfx||"",this.ppfx=t.ppfx||"",this.freezeClass=t.freezeClass||this.pfx+"freezed",this.onStart=t.onStart||"",this.onEndMove=t.onEndMove||"",this.direction=t.direction||"v",this.onMoveClb=t.onMove||"",this.relative=t.relative||0,this.ignoreViewChildren=t.ignoreViewChildren||0,this.ignoreModels=t.ignoreModels||0,this.plh=t.placer||"",this.wmargin=t.wmargin||0,this.offTop=t.offsetTop||0,this.offLeft=t.offsetLeft||0,this.document=t.document||document,this.$document=h(this.document),this.dropContent=null,this.em=t.em||"",this.dragHelper=null,this.canvasRelative=t.canvasRelative||0,this.selectOnEnd=!t.avoidSelectOnEnd,this.scale=t.scale,this.activeTextModel=null,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},getScale:function(){return Object(l.result)(this,scale)||1},getContainerEl:function(e){if(e&&(this.el=e),!this.el){var t=this.opt.container;this.el="string"==typeof t?document.querySelector(t):t,this.$el=h(this.el)}return this.el},getDocuments:function(e){var t=this.em,n=e?e.ownerDocument:t&&t.get("Canvas").getBody().ownerDocument,r=[document];return n&&r.push(n),r},updateOffset:function(){var e=this.em.get("canvasOffset")||{};this.offTop=e.top,this.offLeft=e.left},setDropContent:function(e){this.dropModel=null,this.dropContent=e},updateTextViewCursorPosition:function(e){var t=this.em.get("Canvas"),n=t.getDocument(),r=null;if(n.caretRangeFromPoint){var i=Object(c.h)(e);r=n.caretRangeFromPoint(i.clientX,i.clientY)}else e.rangeParent&&(r=n.createRange()).setStart(e.rangeParent,e.rangeOffset);var o=t.getWindow().getSelection();t.getFrameEl().focus(),o.removeAllRanges(),r&&o.addRange(r)},setContentEditable:function(e,t){if(e){var n=e.getEl();n.contentEditable!=t&&(n.contentEditable=t)}},toggleSortCursor:function(e){var t=this.em,n=t&&t.get("Canvas");n&&(e?n.startAutoscroll():n.stopAutoscroll())},setDragHelper:function(e,t){for(var n=t||"",r=e.cloneNode(1),i=e.getBoundingClientRect(),o=getComputedStyle(e),s="",a=0;a<o.length;a++){var l=o[a];s+="".concat(l,":").concat(o.getPropertyValue(l),";")}document.body.appendChild(r),r.className+=" ".concat(this.pfx,"bdrag"),r.setAttribute("style",s),this.dragHelper=r,r.style.width="".concat(i.width,"px"),r.style.height="".concat(i.height,"px"),n&&this.moveDragHelper(n),this.em&&h(this.em.get("Canvas").getBody().ownerDocument).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper),h(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},moveDragHelper:function(e){var t=e.target.ownerDocument;if(this.dragHelper&&t){var n=e.pageY,r=e.pageX,i=0,o=0,s=(t.defaultView||t.parentWindow).frameElement,a=this.dragHelper.style;if(s){var l=s.getBoundingClientRect();i=l.top+document.documentElement.scrollTop,o=l.left+document.documentElement.scrollLeft,n=e.clientY,r=e.clientX}a.top=n+i+"px",a.left=r+o+"px"}},matches:function(e,t,n){return c.r.call(e,t)},closest:function(e,t){if(e){for(var n=e.parentNode;n&&1===n.nodeType;){if(this.matches(n,t))return n;n=n.parentNode}return null}},offset:function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},createPlaceholder:function(){var e=this.pfx,t=document.createElement("div"),n=document.createElement("div");return t.className=e+"placeholder",t.style.display="none",t.style["pointer-events"]="none",n.className=e+"placeholder-int",t.appendChild(n),t},startSort:function(e){var t,n=this.em,r=this.itemSel,i=this.containerSel,o=this.getContainerEl((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).container),s=this.getDocuments(e),a=this.onStart,l=this.plh;this.dropModel=null,this.target=null,this.prevTarget=null,this.moved=0,e&&!this.matches(e,"".concat(r,", ").concat(i))&&(e=this.closest(e,r)),this.eV=e,l||(l=this.createPlaceholder(),o.appendChild(l),this.plh=l),e&&((t=this.getSourceModel(e))&&t.set&&t.set("status","freezed"),this.srcModel=t),Object(c.u)(o,"mousemove dragover",this.onMove),Object(c.u)(s,"mouseup dragend touchend",this.endMove),Object(c.u)(s,"keydown",this.rollback),a&&a({target:t,parent:t&&t.parent(),index:t&&t.index()}),n&&n.clearSelection(),this.toggleSortCursor(1),n&&n.trigger("sorter:drag:start",e,t)},getTargetModel:function(e){return h(e||this.target).data("model")},getSourceModel:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.target,i=n.avoidChildren,o=void 0===i?1:i,s=this.em,a=e||this.eV,l=this.dropModel,c=this.dropContent,u=function(e){return e&&r&&e.opt&&e.opt.avoidChildren&&t.isTextableActive(e,r)};if(c&&s){if(u(l)&&(l=null),!l){var f=s.get("DomComponents").getComponents(),p={avoidChildren:o,avoidStore:1,avoidUpdateStyle:1},g=f.add(c,d(d({},p),{},{temporary:1}));if(l=(l=f.remove(g,p))instanceof Array?l[0]:l,this.dropModel=l,u(l))return this.getSourceModel(a,{target:r,avoidChildren:0})}return l}return a&&h(a).data("model")},selectTargetModel:function(e,t){if(!(e instanceof a.a.Collection||t&&t===e)){var n=this.targetModel;n&&n!==this.srcModel&&n.set("status",""),e&&e.set&&(e.set("status","selected-parent"),this.targetModel=e)}},onMove:function(e){var t=e,n=this.em,r=this.onMoveClb,i=this.plh;this.moved=1;var o=i.style.display;o&&"none"!==o||(i.style.display="block");var s=this.offset(this.el);this.elT=this.wmargin?Math.abs(s.top):s.top,this.elL=this.wmargin?Math.abs(s.left):s.left;var a=e.pageY-this.elT+this.el.scrollTop,c=e.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&n){var u=n.get("Canvas").getMouseRelativeCanvas(e,{noScroll:1});c=u.x,a=u.y}this.rX=c,this.rY=a,this.eventMove=e;var d=this.getSourceModel(),f=this.dimsFromTarget(e.target,c,a),p=this.target,g=p&&this.getTargetModel(p);if(this.selectTargetModel(g,d),g||(i.style.display="none"),p){this.lastDims=f;var m=this.findPosition(f,c,a);this.isTextableActive(d,g)?(this.activeTextModel=g,this.setContentEditable(g,!0),i.style.display="none",this.lastPos=m,this.updateTextViewCursorPosition(t)):(this.disableTextable(),this.activeTextModel=null,this.lastPos&&this.lastPos.index==m.index&&this.lastPos.method==m.method||(this.movePlaceholder(this.plh,f,m,this.prevTargetDim),this.$plh||(this.$plh=h(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=m)),Object(l.isFunction)(r)&&r({event:e,target:d,parent:g,index:m.index+("after"==m.method?1:0)}),n&&n.trigger("sorter:drag",{target:p,targetModel:g,sourceModel:d,dims:f,pos:m,x:c,y:a})}},isTextableActive:function(e,t){return e&&e.get&&e.get("textable")&&t&&t.is("text")},disableTextable:function(){var e=this.activeTextModel;e&&e.getView().disableEditing()},isInFlow:function(e,t){return!!e&&(t=t||document.body,!!this.styleInFlow(e,t))},styleInFlow:function(e,t){if(!Object(c.q)(e)){var n=e.style||{},r=h(e),i=t&&h(t);if(!(n.overflow&&"visible"!==n.overflow||"none"!==r.css("float")||i&&"flex"==i.css("display")&&"column"!==i.css("flex-direction"))){switch(n.position){case"static":case"relative":case"":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(r.css("display")){case"block":case"list-item":case"table":case"flex":return!0}}}},validTarget:function(e,t){var n=this.getTargetModel(e),r=this.getSourceModel(t,{target:n}),i={valid:!0,src:t=r&&r.view&&r.view.el,srcModel:r,trg:e=n&&n.view&&n.view.el,trgModel:n};if(!t||!e)return i.valid=!1,i;var o=r.get("draggable");o=o instanceof Array?o.join(", "):o,i.dragInfo=o,o=Object(l.isString)(o)?this.matches(e,o):o,i.draggable=o;var s=n.get("droppable");return s=(s=s instanceof a.a.Collection?1:s)instanceof Array?s.join(", "):s,i.dropInfo=s,s=Object(l.isString)(s)?this.matches(t,s):s,s=o&&this.isTextableActive(r,n)?1:s,i.droppable=s,s&&o||(i.valid=!1),i},dimsFromTarget:function(e,t,n){var r=this.em,i=[];if(!e)return i;if(this.matches(e,"".concat(this.itemSel,", ").concat(this.containerSel))||(e=this.closest(e,this.itemSel)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),!e)return i;if(this.prevTarget&&this.prevTarget!=e&&(this.prevTarget=null),!this.prevTarget){this.targetP=this.closest(e,this.containerSel);var o=this.validTarget(e);if(r&&r.trigger("sorter:drag:validation",o),!o.valid&&this.targetP)return this.dimsFromTarget(this.targetP,t,n);this.prevTarget=e,this.prevTargetDim=this.getDim(e),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(e)}if(this.prevTarget==e&&(i=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,t,n)||!this.nested&&!this.cacheDims.length){var s=this.targetP;s&&this.validTarget(s).valid&&(i=this.cacheDimsP,this.target=s)}return this.lastPos=null,i},getTargetFromEl:function(e){var t,n=e,r=this.targetPrev,i=this.em,o=this.containerSel,s=this.itemSel;if(this.matches(n,"".concat(s,", ").concat(o))||(n=this.closest(n,s)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(","))),r&&r!=n&&(this.targetPrev=""),!this.targetPrev){t=this.closest(n,o);var a=this.validTarget(n);if(i&&i.trigger("sorter:drag:validation",a),!a.valid&&t)return this.getTargetFromEl(t);this.targetPrev=n}return this.nearElBorders(n)&&(t=this.closest(n,o))&&this.validTarget(t).valid&&(n=t),n},nearElBorders:function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument.body,r=this.getCurrentPos(),i=r.x,o=r.y,s=t.top+n.scrollTop,a=t.left+n.scrollLeft;if(o<s+10||o>s+t.height-10||i<a+10||i>a+t.width-10)return 1},getCurrentPos:function(){var e=this.eventMove;return{x:e.pageX||0,y:e.pageY||0}},getDim:function(e){var t,n,r,i,o=this.em;if(this.canvasRelative&&o){var s=o.get("Canvas"),a=s.getElementPos(e,{noScroll:1}),l=s.getElementOffsets(e);t=a.top-l.marginTop,n=a.left-l.marginLeft,r=a.height+l.marginTop+l.marginBottom,i=a.width+l.marginLeft+l.marginRight}else{var c=this.offset(e);t=this.relative?e.offsetTop:c.top-(this.wmargin?-1:1)*this.elT,n=this.relative?e.offsetLeft:c.left-(this.wmargin?-1:1)*this.elL,r=e.offsetHeight,i=e.offsetWidth}return[t,n,r,i]},getChildrenDim:function(e){var t=this,n=[];if(!e)return n;var r=this.getTargetModel(e);if(r&&r.view&&!this.ignoreViewChildren){var i=r.getCurrentView?r.getCurrentView():r.view;e=i.getChildrenContainer()}return Object(l.each)(e.children,(function(r,i){var o=Object(c.g)(r,h),s=o&&o.index?o.index():i;if(Object(c.q)(r)||t.matches(r,t.itemSel)){var a=t.getDim(r),l=t.direction;l="v"==l||"h"!=l&&t.isInFlow(r,e),a.push(l,r,s),n.push(a)}})),n},nearBorders:function(e,t,n){var r=0,i=this.borderOffset,o=t||0,s=n||0,a=e[0],l=e[1];return(a+i>s||s>a+e[2]-i||l+i>o||o>l+e[3]-i)&&(r=1),!!r},findPosition:function(e,t,n){for(var r={index:0,indexEl:0,method:"before"},i=0,o=0,s=0,a=0,l=0,c=0,u=0,d=0,h=0,f=e.length;h<f;h++)if(s=(d=e[h])[1]+d[3],u=d[0]+d[2],l=d[1]+d[3]/2,c=d[0]+d[2]/2,!(o&&d[1]>o||a&&c>=a||i&&s<i))if(r.index=h,r.indexEl=d[6],d[4]){if(n<c){r.method="before";break}r.method="after"}else n<u&&(a=u),t<l?(o=l,r.method="before"):(i=l,r.method="after");return r},movePlaceholder:function(e,t,n,r){var i=0,o=0,s=0,a=0,l="px",c=n.method,u=t[n.index];if(e.classList.remove("vertical"),e.classList.add("horizontal"),u)u[4]?(s=u[3]+l,a="auto",i="before"==c?u[0]-0:u[0]+u[2]-0,o=u[1]):(s="auto",a=u[2]-0+l,i=u[0]+0,o="before"==c?u[1]-0:u[1]+u[3]-0,e.classList.remove("horizontal"),e.classList.add("vertical"));else{if(!this.nested)return void(e.style.display="none");r&&(i=r[0]+5,o=r[1]+5,s=parseInt(r[3])-10+l,a="auto")}e.style.top=i+l,e.style.left=o+l,s&&(e.style.width=s),a&&(e.style.height=a)},endMove:function(e){var t,n=this,r=this.eV,i=[],o=this.getDocuments(),s=this.getContainerEl(),a=this.onEndMove,u=this.target,h=this.lastPos;if(Object(c.t)(s,"mousemove dragover",this.onMove),Object(c.t)(o,"mouseup dragend touchend",this.endMove),Object(c.t)(o,"keydown",this.rollback),this.plh.style.display="none",r&&(t=this.getSourceModel(),this.selectOnEnd&&t&&t.set&&(t.set("status",""),t.set("status","selected"))),this.moved){var f=this.toMove;(Object(l.isArray)(f)?f:f?[f]:[r]).forEach((function(e){i.push(n.move(u,e,h))}))}this.plh&&(this.plh.style.display="none");var p=this.dragHelper;if(p&&(p.parentNode.removeChild(p),this.dragHelper=null),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),this.toMove=null,this.eventMove=0,this.dropModel=null,Object(l.isFunction)(a)){var g={target:t,parent:t&&t.parent(),index:t&&t.index()};i.length?i.forEach((function(e){return a(e,n,g)})):a(null,this,d(d({},g),{},{cancelled:1}))}},move:function(e,t,n){var r=this.em,i=this.activeTextModel,o=this.dropContent,s=Object(c.e)(t);r&&r.trigger("component:dragEnd:before",e,s,n);var l,u,f,p=[],g=n.indexEl,m=this.validTarget(e,s),v=h(e).data("collection"),b=m.srcModel,y=m.droppable,w=m.draggable,x=m.dropInfo,O=m.dragInfo,C=m.trgModel;y=C instanceof a.a.Collection?1:y;var _=this.isTextableActive(b,C);if(v&&y&&w){var S={at:g="after"===n.method?g+1:g,noIncrement:1};if(o?(l=o,S.silent=!1,S.avoidUpdateStyle=1):(S.temporary=1,u=v.add({},d({},S)),b.collection&&(l=b.collection.remove(b,{temporary:1}))),_){var j=i.getView();i.trigger("active");var k=j.activeRte,T=b.getEl();delete b.opt.temporary,b.getView().render(),T.setAttribute("data-gjs-textable","true"),k.insertHTML&&k.insertHTML(T.outerHTML)}else f=v.add(l,S);o?this.dropContent=null:v.remove(u),this.prevTarget=null}else v||p.push("Target collection not found"),y||p.push("Target is not droppable, accepts [".concat(x,"]")),w||p.push("Component not draggable, acceptable by [".concat(O,"]")),console.warn("Invalid target position: "+p.join(", "));return r&&r.trigger("component:dragEnd",v,l,p),r&&r.trigger("sorter:drag:end",{targetCollection:v,modelToDrop:l,warns:p,validResult:m,dst:e,srcEl:s}),f},rollback:function(e){Object(c.t)(this.getDocuments(),"keydown",this.rollback),27==(e.which||e.keyCode)&&(this.moved=0,this.endMove())}}),p=n(15),g=n.n(p),m=n(16),v=n.n(m);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={mousePosFetcher:null,updateTarget:null,ratioDefault:0,posFetcher:null,onStart:null,onMove:null,onEnd:null,onUpdateContainer:function(){},step:1,minDim:32,maxDim:"",unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:1,silentFrames:0,avoidContainerUpdate:0,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:1,tc:1,tr:1,cl:1,cr:1,bl:1,bc:1,br:1},x=function(e,t){var n=t||window,r=e.getBoundingClientRect();return{left:r.left+n.pageXOffset,top:r.top+n.pageYOffset,width:r.width,height:r.height}},O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g()(this,e),this.setOptions(t),Object(l.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop"),this}return v()(e,[{key:"getConfig",value:function(){return this.opts}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object(l.defaults)(e,w),this.setup()}},{key:"setup",value:function(){var e=this.opts,t=e.prefix||"",n=e.appendTo||document.body,r=this.container;for(r||((r=document.createElement("div")).className="".concat(t,"resizer-c"),n.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var i={};for(var o in["tl","tc","tr","cl","cr","bl","bc","br"].forEach((function(t){return i[t]=e[t]?function(e,t){var n=t.prefix||"",r=document.createElement("i");return r.className=n+"resizer-h "+n+"resizer-h-"+e,r.setAttribute("data-"+n+"handler",e),r}(t,e):""})),i){var s=i[o];s&&r.appendChild(s)}this.handlers=i,this.mousePosFetcher=e.mousePosFetcher,this.updateTarget=e.updateTarget,this.posFetcher=e.posFetcher,this.onStart=e.onStart,this.onMove=e.onMove,this.onEnd=e.onEnd,this.onUpdateContainer=e.onUpdateContainer}},{key:"toggleFrames",value:function(e){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");Object(l.each)(t,(function(t){return t.style.pointerEvents=e?"none":""}))}}},{key:"isHandler",value:function(e){var t=this.handlers;for(var n in t)if(t[n]===e)return!0;return!1}},{key:"getFocusedEl",value:function(){return this.el}},{key:"getDocumentEl",value:function(){return[this.el.ownerDocument,document]}},{key:"getElementPos",value:function(e){var t=this.posFetcher||"";return t?t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}):x(e)}},{key:"focus",value:function(e){e&&e===this.el||(this.el=e,this.updateContainer({forceShow:1}),Object(c.u)(this.getDocumentEl(),"mousedown",this.handleMouseDown))}},{key:"blur",value:function(){this.container.style.display="none",this.el&&(Object(c.t)(this.getDocumentEl(),"mousedown",this.handleMouseDown),this.el=null)}},{key:"start",value:function(e){if(0===e.button){e.preventDefault(),e.stopPropagation();var t=this.el,n=this.opts||{},r="data-"+n.prefix+"handler",i=this.getElementPos(t,{target:"el"});this.handlerAttr=e.target.getAttribute(r),this.clickedHandler=e.target,this.startDim={t:i.top,l:i.left,w:i.width,h:i.height},this.rectDim={t:i.top,l:i.left,w:i.width,h:i.height},this.startPos={x:e.clientX,y:e.clientY};var o=this.getDocumentEl();Object(c.u)(o,"mousemove",this.move),Object(c.u)(o,"keydown",this.handleKeyDown),Object(c.u)(o,"mouseup",this.stop),Object(l.isFunction)(this.onStart)&&this.onStart(e,{docs:o,config:n,el:t,resizer:this}),this.toggleFrames(1),this.move(e)}}},{key:"move",value:function(e){var t=this.onMove,n=this.mousePosFetcher,r=n?n(e):{x:e.clientX,y:e.clientY};this.currentPos=r,this.delta={x:r.x-this.startPos.x,y:r.y-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey},this.rectDim=this.calc(this),this.updateRect(0),t&&t(e),0===e.which&&this.stop(e)}},{key:"stop",value:function(e){var t=this.opts,n=this.getDocumentEl();Object(c.t)(n,"mousemove",this.move),Object(c.t)(n,"keydown",this.handleKeyDown),Object(c.t)(n,"mouseup",this.stop),this.updateRect(1),this.toggleFrames(),Object(l.isFunction)(this.onEnd)&&this.onEnd(e,{docs:n,config:t})}},{key:"updateRect",value:function(e){var t=this.el,n=this.opts,r=this.rectDim,i=this.updateTarget,o=this.getSelectedHandler(),s=n.unitHeight,a=n.unitWidth,c=n.keyWidth,u=n.keyHeight;if(Object(l.isFunction)(i))i(t,r,{store:e,selectedHandler:o,resizer:this,config:n});else{var d=t.style;d[c]=r.w+a,d[u]=r.h+s}this.updateContainer()}},{key:"updateContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.opts,n=this.container;!t.avoidContainerUpdate&&this.el&&e.forceShow&&(n.style.display="block"),this.onUpdateContainer({el:n,resizer:this,opts:y(y({},t),e)})}},{key:"getSelectedHandler",value:function(){var e=this.handlers;if(this.selectedHandler)for(var t in e)if(e[t]===this.selectedHandler)return t}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&(this.rectDim=this.startDim,this.stop(e))}},{key:"handleMouseDown",value:function(e){var t=e.target;this.isHandler(t)?(this.selectedHandler=t,this.start(e)):t!==this.el&&(this.selectedHandler="",this.blur())}},{key:"calc",value:function(e){var t,n=this.opts||{},r=n.step,i=this.startDim,o=n.minDim,s=n.maxDim,a=e.delta.x,l=e.delta.y,u=i.w,d=i.h,h={t:0,l:0,w:u,h:d};if(e){var f=e.handlerAttr;~f.indexOf("r")&&(t=Object(c.s)(u+a*r,r),t=Math.max(o,t),s&&(t=Math.min(s,t)),h.w=t),~f.indexOf("b")&&(t=Object(c.s)(d+l*r,r),t=Math.max(o,t),s&&(t=Math.min(s,t)),h.h=t),~f.indexOf("l")&&(t=Object(c.s)(u-a*r,r),t=Math.max(o,t),s&&(t=Math.min(s,t)),h.w=t),~f.indexOf("t")&&(t=Object(c.s)(d-l*r,r),t=Math.max(o,t),s&&(t=Math.min(s,t)),h.h=t);var p=n.ratioDefault?!e.keys.shift:e.keys.shift;if(f.indexOf("c")<0&&p){var g=i.w/i.h;h.w/h.h>g?h.h=Math.round(h.w/g):h.w=Math.round(h.h*g)}return~f.indexOf("l")&&(h.l=i.w-h.w),~f.indexOf("t")&&(h.t=i.h-h.h),h}}}]),e}(),C={init:function(e){return new O(e)}};t.default=function(){return{name:"Utils",init:function(){return this},Sorter:f,Resizer:C,Dragger:r.a}}},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(0),s={stylePrefix:"css-",staticRules:"",rules:[]},a=n(34),l=n(33),c=n(37),u=n(12),d=n(10);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t,n,r={};return{Selectors:u.a,name:"CssComposer",getConfig:function(){return r},storageKey:function(){var e=[],t=r.stm&&r.stm.getConfig()||{};return t.storeCss&&e.push("css"),t.storeStyles&&e.push("styles"),e},init:function(i){for(var o in r=i||{},s)o in r||(r[o]=s[o]);var a=r.pStylePrefix;return a&&(r.stylePrefix=a+r.stylePrefix),r.rules=r.em&&r.em.config.style||r.rules,e=r.em,t=new l.a([],r),n=new c.a({collection:t,config:r}),this},onLoad:function(){t.add(r.rules)},postLoad:function(e){var t=this,n="add remove",r=this.getAll(),i=e.get("UndoManager");i&&i.add(r),e.stopListening(r,n,this.handleChange),e.listenTo(r,n,this.handleChange),r.each((function(e){return t.handleChange(e,{avoidStore:1})}))},handleChange:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="change:style",i=e.get("UndoManager");i&&i.add(t);var o=e.handleUpdates.bind(e);e.stopListening(t,r,o),e.listenTo(t,r,o),!n.avoidStore&&o("","",n)},load:function(e){var n=e||"";!n&&r.stm&&(n=r.em.getCacheLoad());var i=n.styles||"";if(n.styles)try{i=JSON.parse(n.styles)}catch(e){}else n.css&&(i=r.em.get("Parser").parseCss(n.css));return Object(o.isArray)(i)?i.length&&t.reset(i):i&&t.reset(i),i},store:function(e){if(r.stm){var n={},i=this.storageKey();return i.indexOf("css")>=0&&(n.css=r.em.getCss()),i.indexOf("styles")>=0&&(n.styles=JSON.stringify(t)),e||r.stm.store(n),n}},add:function(e,n,i){var o=n||"",s=i||"",l=f({},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),c=this.get(e,o,s,l);return c&&c.config&&!c.config.singleAtRule||(l.state=o,l.mediaText=s,l.selectors=[],(c=new a.a(l,r)).get("selectors").add(e),t.add(c)),c},get:function(e,n,r,i){var o=null;return t.each((function(t){o||t.compare(e,n,r,i)&&(o=t)})),o},getAll:function(){return t},clear:function(){return this.getAll().reset(),this},addCollection:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=e instanceof Array?e:[e],o=0,s=i.length;o<s;o++){var a=i[o]||{};if(a.selectors){var l=r.em&&r.em.get("SelectorManager");l||console.warn("Selector Manager not found");for(var c=a.selectors,u=c instanceof Array?c:[c],d=[],h=0,p=u.length;h<p;h++){var g=l.add(u[h]);d.push(g)}var m=this.get(d,a.state,a.mediaText,a),v=this.add(d,a.state,a.mediaText,a),b=a.style||{};if(!m||!t.avoidUpdateStyle){var y=t.extend?f(f({},v.get("style")),b):b;v.set("style",y)}n.push(v)}}return n},setRule:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.atRuleType,o=r.atRuleParams,s=e.get("Parser").parserCss.checkNode({selectors:t,style:n})[0],a=s.state,l=s.selectorsAdd,c=e.get("SelectorManager").add(s.selectors),u=this.add(c,a,o,{selectorsAdd:l,atRule:i});return u.setStyle(n,r),u},getRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.get("SelectorManager"),i=e.get("Parser").parserCss.checkNode({selectors:t})[0],o=r.get(i.selectors);return o&&this.get(o,i.state,n.atRuleParams,{selectorsAdd:i.selectorsAdd,atRule:n.atRuleType})},setIdRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.state||"",o=r.mediaText||e.getCurrentMedia(),s=e.get("SelectorManager").add({name:t,type:d.a.TYPE_ID}),a=this.add(s,i,o);return a.setStyle(n,r),a},getIdRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.state||"",i=n.mediaText||e.getCurrentMedia(),o=e.get("SelectorManager").get(t,d.a.TYPE_ID);return o&&this.get(o,r,i)},setClassRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.state||"",o=r.mediaText||e.getCurrentMedia(),s=e.get("SelectorManager").add({name:t,type:d.a.TYPE_CLASS}),a=this.add(s,i,o);return a.setStyle(n,r),a},getClassRule:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.state||"",i=n.mediaText||e.getCurrentMedia(),o=e.get("SelectorManager").get(t,d.a.TYPE_CLASS);return o&&this.get(o,r,i)},render:function(){return n.render().el}}}},function(e,t,n){"use strict";n.r(t);var r=n(8),i=n.n(r),o=n(2),s=n.n(o),a=n(0),l=n(22),c={stylePrefix:"com-",defaults:[],strict:1},u=n(5);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e,t={},r={},o={},s={},d=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]];return{CommandAbstract:l.default,name:"Commands",init:function(){var r=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=h(h({},c),s),e=t.em;var l=t.pStylePrefix;return l&&(t.stylePrefix=l+t.stylePrefix),Object.keys(t.defaults).forEach((function(e){var n=t.defaults[e];n.id&&r.add(n.id,n)})),o["tlb-delete"]={run:function(e){return e.runCommand("core:component-delete")}},o["tlb-clone"]={run:function(e){e.runCommand("core:copy"),e.runCommand("core:paste")}},o["tlb-move"]={run:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.getModel(),o=n&&n.event,s=n.target,l=s||e.getSelected(),c=s?[s]:i()(e.getSelectedAll()),d=o&&"dragstart"==o.type,h={preserveSelected:1},f=["absolute","translate"],p=l.get("dmode")||r.get("dmode"),g=function(){return r.stopDefault(h)},m=Object(a.includes)(f,p);if(c.forEach((function(e){return e.trigger("disable")})),!l||!l.get("draggable"))return r.logWarning("The element is not draggable");d?setTimeout(g,0):g();var v=function(e){r.trigger("".concat(u.eventDrag,":start"),e)},b=function(e){r.trigger(u.eventDrag,e)},y=function(t,n,i){r.runDefault(h),c.forEach((function(e){return e.set("status","selected")})),e.select(c),l.emitUpdate(),r.trigger("".concat(u.eventDrag,":end"),i),(m||i.cancelled)&&r.set("_cmpDrag",1)};if(m)e.runCommand("core:component-drag",{guidesInfo:1,mode:p,target:l,onStart:v,onDrag:b,onEnd:y,event:o});else{d&&o.dataTransfer.setDragImage(l.view.el,0,0);var w=e.Commands.get("move-comp");w.onStart=v,w.onDrag=b,w.onEndMoveFromModel=y,w.initSorterFromModels(c)}c.forEach((function(e){return e.set("status","freezed-selected")}))}},o["core:undo"]=function(e){return e.UndoManager.undo()},o["core:redo"]=function(e){return e.UndoManager.redo()},d.forEach((function(t){var r=t[2],i=n(90)("./".concat(t[1])).default,s="core:".concat(t[0]);o[s]=i,r&&(o[r]=i,["run","stop"].forEach((function(t){e.on("".concat(t,":").concat(r),(function(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e).trigger.apply(n,["".concat(t,":").concat(s)].concat(i))}))})))})),t.em&&(t.model=t.em.get("Canvas")),this.loadDefaultCommands(),this},add:function(e,t){return Object(a.isFunction)(t)&&(t={run:t}),t.stop||(t.noStop=1),delete t.initialize,t.id=e,r[e]=l.default.extend(t),this},get:function(n){var i=r[n];return Object(a.isFunction)(i)?(i=new i(t),r[n]=i):i||e.logWarning("'".concat(n,"' command not found")),i},extend:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.get(e);if(n){var r=h(h({},n.constructor.prototype),t);this.add(e,r);var i=d.filter((function(t){return"core:".concat(t[0])===e&&t[2]}))[0];i&&this.add(i[2],r)}return this},has:function(e){return!!r[e]},getAll:function(){return r},run:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.runCommand(this.get(e),t)},stop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.stopCommand(this.get(e),t)},isActive:function(e){return this.getActive().hasOwnProperty(e)},getActive:function(){return s},loadDefaultCommands:function(){for(var e in o)this.add(e,o[e]);return this},runCommand:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.run){var o=n.id,a=e.get("Editor");this.isActive(o)&&!i.force&&t.strict||(r=n.callRun(a,i),o&&n.stop&&!n.noStop&&!i.abort&&(s[o]=r))}return r},stopCommand:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.run){var o=n.id,a=e.get("Editor");(this.isActive(o)||i.force||!t.strict)&&(o&&delete s[o],r=n.callStop(a,i))}return r},create:function(e){return e.stop||(e.noStop=1),new(l.default.extend(e))(t)}}}}]).default},zUnb:function(e,t,n){"use strict";n.r(t);var r={};function i(e){return"function"==typeof e}n.r(r),n.d(r,"audit",(function(){return $f})),n.d(r,"auditTime",(function(){return Yf})),n.d(r,"buffer",(function(){return Zf})),n.d(r,"bufferCount",(function(){return Qf})),n.d(r,"bufferTime",(function(){return rp})),n.d(r,"bufferToggle",(function(){return up})),n.d(r,"bufferWhen",(function(){return fp})),n.d(r,"catchError",(function(){return su})),n.d(r,"combineAll",(function(){return mp})),n.d(r,"combineLatest",(function(){return vp})),n.d(r,"concat",(function(){return bp})),n.d(r,"concatAll",(function(){return Dc})),n.d(r,"concatMap",(function(){return cu})),n.d(r,"concatMapTo",(function(){return yp})),n.d(r,"count",(function(){return wp})),n.d(r,"debounce",(function(){return Cp})),n.d(r,"debounceTime",(function(){return jp})),n.d(r,"defaultIfEmpty",(function(){return Wc})),n.d(r,"delay",(function(){return Ap})),n.d(r,"delayWhen",(function(){return Lp})),n.d(r,"dematerialize",(function(){return zp})),n.d(r,"distinct",(function(){return Up})),n.d(r,"distinctUntilChanged",(function(){return nf})),n.d(r,"distinctUntilKeyChanged",(function(){return qp})),n.d(r,"elementAt",(function(){return Gp})),n.d(r,"endWith",(function(){return Kp})),n.d(r,"every",(function(){return Yp})),n.d(r,"exhaust",(function(){return Jp})),n.d(r,"exhaustMap",(function(){return tg})),n.d(r,"expand",(function(){return ig})),n.d(r,"filter",(function(){return Ic})),n.d(r,"finalize",(function(){return gu})),n.d(r,"find",(function(){return ag})),n.d(r,"findIndex",(function(){return ug})),n.d(r,"first",(function(){return uu})),n.d(r,"groupBy",(function(){return dg})),n.d(r,"ignoreElements",(function(){return vg})),n.d(r,"isEmpty",(function(){return wg})),n.d(r,"last",(function(){return Kc})),n.d(r,"map",(function(){return F})),n.d(r,"mapTo",(function(){return Cg})),n.d(r,"materialize",(function(){return jg})),n.d(r,"max",(function(){return Pg})),n.d(r,"merge",(function(){return Ag})),n.d(r,"mergeAll",(function(){return q})),n.d(r,"mergeMap",(function(){return U})),n.d(r,"flatMap",(function(){return U})),n.d(r,"mergeMapTo",(function(){return Mg})),n.d(r,"mergeScan",(function(){return Dg})),n.d(r,"min",(function(){return Ng})),n.d(r,"multicast",(function(){return te})),n.d(r,"observeOn",(function(){return Of})),n.d(r,"onErrorResumeNext",(function(){return Rg})),n.d(r,"pairwise",(function(){return zg})),n.d(r,"partition",(function(){return $g})),n.d(r,"pluck",(function(){return Wg})),n.d(r,"publish",(function(){return qg})),n.d(r,"publishBehavior",(function(){return Gg})),n.d(r,"publishLast",(function(){return Yg})),n.d(r,"publishReplay",(function(){return Zg})),n.d(r,"race",(function(){return Qg})),n.d(r,"reduce",(function(){return Eg})),n.d(r,"repeat",(function(){return em})),n.d(r,"repeatWhen",(function(){return rm})),n.d(r,"retry",(function(){return sm})),n.d(r,"retryWhen",(function(){return cm})),n.d(r,"refCount",(function(){return Y})),n.d(r,"sample",(function(){return hm})),n.d(r,"sampleTime",(function(){return gm})),n.d(r,"scan",(function(){return ru})),n.d(r,"sequenceEqual",(function(){return ym})),n.d(r,"share",(function(){return ie})),n.d(r,"shareReplay",(function(){return Cm})),n.d(r,"single",(function(){return _m})),n.d(r,"skip",(function(){return km})),n.d(r,"skipLast",(function(){return Pm})),n.d(r,"skipUntil",(function(){return Dm})),n.d(r,"skipWhile",(function(){return Nm})),n.d(r,"startWith",(function(){return nu})),n.d(r,"subscribeOn",(function(){return Km})),n.d(r,"switchAll",(function(){return Zm})),n.d(r,"switchMap",(function(){return Yc})),n.d(r,"switchMapTo",(function(){return Xm})),n.d(r,"take",(function(){return Jc})),n.d(r,"takeLast",(function(){return Fc})),n.d(r,"takeUntil",(function(){return Bf})),n.d(r,"takeWhile",(function(){return Jm})),n.d(r,"tap",(function(){return hu})),n.d(r,"throttle",(function(){return If})),n.d(r,"throttleTime",(function(){return Rf})),n.d(r,"throwIfEmpty",(function(){return Bc})),n.d(r,"timeInterval",(function(){return tv})),n.d(r,"timeout",(function(){return av})),n.d(r,"timeoutWith",(function(){return iv})),n.d(r,"timestamp",(function(){return lv})),n.d(r,"toArray",(function(){return dv})),n.d(r,"window",(function(){return hv})),n.d(r,"windowCount",(function(){return gv})),n.d(r,"windowTime",(function(){return bv})),n.d(r,"windowToggle",(function(){return Sv})),n.d(r,"windowWhen",(function(){return Tv})),n.d(r,"withLatestFrom",(function(){return Av})),n.d(r,"zip",(function(){return Vv})),n.d(r,"zipAll",(function(){return zv}));let o=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else o&&console.log("RxJS: Back to a better error behavior. Thank you. <3");o=e},get useDeprecatedSynchronousErrorHandling(){return o}};function a(e){setTimeout(()=>{throw e},0)}const l={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete(){}},c=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function u(e){return null!==e&&"object"==typeof e}const d=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:r,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(i(r))try{r.call(this)}catch(s){t=s instanceof d?f(s.errors):[s]}if(c(o)){let e=-1,n=o.length;for(;++e<n;){const n=o[e];if(u(n))try{n.unsubscribe()}catch(s){t=t||[],s instanceof d?t=t.concat(f(s.errors)):t.push(s)}}}if(t)throw new d(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function f(e){return e.reduce((e,t)=>e.concat(t instanceof d?t.errors:t),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class g extends h{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!e){this.destination=l;break}if("object"==typeof e){e instanceof g?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,n)}}[p](){return this}static create(e,t,n){const r=new g(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends g{constructor(e,t,n,r){let o;super(),this._parentSubscriber=e;let s=this;i(t)?o=t:t&&(o=t.next,n=t.error,r=t.complete,t!==l&&(s=Object.create(t),i(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;a(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;a(n)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(a(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const v=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function b(e){return e}function y(...e){return w(e)}function w(e){return 0===e.length?b:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}let x=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof g)return e;if(e[p])return e[p]()}return e||t||n?new g(e,t,n):new g(l)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof g?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=O(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[v](){return this}pipe(...e){return 0===e.length?this:w(e)(this)}toPromise(e){return new(e=O(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function O(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const C=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class _ extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class S extends g{constructor(e){super(e),this.destination=e}}let j=(()=>{class e extends x{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new S(this)}lift(e){const t=new k(this,this);return t.operator=e,t}next(e){if(this.closed)throw new C;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new C;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new C;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new C;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new C;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new _(this,e))}asObservable(){const e=new x;return e.source=this,e}}return e.create=(e,t)=>new k(e,t),e})();class k extends j{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}function T(e){return e&&"function"==typeof e.schedule}class E extends g{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const P=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const M=A(),D=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function I(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const L=e=>{if(e&&"function"==typeof e[v])return r=e,e=>{const t=r[v]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(D(e))return P(e);if(I(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,a),e);if(e&&"function"==typeof e[M])return t=e,e=>{const n=t[M]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=u(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,r};function N(e,t,n,r,i=new E(e,n,r)){if(!i.closed)return t instanceof x?t.subscribe(i):L(t)(i)}class R extends g{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function F(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new V(e,t))}}class V{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new z(e,this.project,this.thisArg))}}class z extends g{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function B(e,t){return new x(n=>{const r=new h;let i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function H(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[v]}(e))return function(e,t){return new x(n=>{const r=new h;return r.add(t.schedule(()=>{const i=e[v]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(I(e))return function(e,t){return new x(n=>{const r=new h;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(D(e))return B(e,t);if(function(e){return e&&"function"==typeof e[M]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new x(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[M](),r.add(t.schedule((function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())})))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof x?e:new x(L(e))}function U(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(U((n,r)=>H(e(n,r)).pipe(F((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new $(e,n)))}class ${constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new W(e,this.project,this.concurrent))}}class W extends R{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const r=new E(this,t,n),i=this.destination;i.add(r);const o=N(this,e,void 0,void 0,r);o!==r&&i.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,i){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function q(e=Number.POSITIVE_INFINITY){return U(b,e)}function G(e,t){return t?B(e,t):new x(P(e))}function K(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return T(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof x?e[0]:q(t)(G(e,n))}function Y(){return function(e){return e.lift(new Z(e))}}class Z{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new X(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class X extends g{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class J extends x{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new ee(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return Y()(this)}}const Q=(()=>{const e=J.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class ee extends S{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function te(e,t){return function(n){let r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new ne(r,t));const i=Object.create(n,Q);return i.source=n,i.subjectFactory=r,i}}class ne{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i}}function re(){return new j}function ie(){return e=>Y()(te(re)(e))}function oe(e){return{toString:e}.toString()}const se="__parameters__";function ae(e,t,n){return oe(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(se)?e[se]:Object.defineProperty(e,se,{value:[]})[se];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}const le=ae("Inject",e=>({token:e})),ce=ae("Optional"),ue=ae("Self"),de=ae("SkipSelf");var he=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function fe(e){for(let t in e)if(e[t]===fe)return t;throw Error("Could not find renamed property on target object.")}function pe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ge(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function me(e){return ve(e,e[ye])||ve(e,e[Oe])}function ve(e,t){return t&&t.token===e?t:null}function be(e){return e&&(e.hasOwnProperty(we)||e.hasOwnProperty(Ce))?e[we]:null}const ye=fe({"\u0275prov":fe}),we=fe({"\u0275inj":fe}),xe=fe({"\u0275provFallback":fe}),Oe=fe({ngInjectableDef:fe}),Ce=fe({ngInjectorDef:fe});function _e(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(_e).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Se(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const je=fe({__forward_ref__:fe});function ke(e){return e.__forward_ref__=ke,e.toString=function(){return _e(this())},e}function Te(e){return"function"==typeof(t=e)&&t.hasOwnProperty(je)&&t.__forward_ref__===ke?e():e;var t}const Ee="undefined"!=typeof globalThis&&globalThis,Pe="undefined"!=typeof window&&window,Ae="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Me="undefined"!=typeof global&&global,De=Ee||Me||Pe||Ae,Ie=fe({"\u0275cmp":fe}),Le=fe({"\u0275dir":fe}),Ne=fe({"\u0275pipe":fe}),Re=fe({"\u0275mod":fe}),Fe=fe({"\u0275loc":fe}),Ve=fe({"\u0275fac":fe}),ze=fe({__NG_ELEMENT_ID__:fe});class Be{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=pe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return"InjectionToken "+this._desc}}const He=new Be("INJECTOR",-1),Ue={},$e=/\n/gm,We="__source",qe=fe({provide:String,useValue:fe});let Ge,Ke=void 0;function Ye(e){const t=Ke;return Ke=e,t}function Ze(e){const t=Ge;return Ge=e,t}function Xe(e,t=he.Default){if(void 0===Ke)throw new Error("inject() must be called from an injection context");return null===Ke?Qe(e,void 0,t):Ke.get(e,t&he.Optional?null:void 0,t)}function Je(e,t=he.Default){return(Ge||Xe)(Te(e),t)}function Qe(e,t,n){const r=me(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&he.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${_e(e)}]`)}function et(e){const t=[];for(let n=0;n<e.length;n++){const r=Te(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e=void 0,n=he.Default;for(let t=0;t<r.length;t++){const i=r[t];i instanceof ce||"Optional"===i.ngMetadataName||i===ce?n|=he.Optional:i instanceof de||"SkipSelf"===i.ngMetadataName||i===de?n|=he.SkipSelf:i instanceof ue||"Self"===i.ngMetadataName||i===ue?n|=he.Self:e=i instanceof le||i===le?i.token:i}t.push(Je(e,n))}else t.push(Je(r))}return t}class tt{get(e,t=Ue){if(t===Ue){const t=new Error(`NullInjectorError: No provider for ${_e(e)}!`);throw t.name="NullInjectorError",t}return t}}class nt{}class rt{}function it(e,t){e.forEach(e=>Array.isArray(e)?it(e,t):t(e))}function ot(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function st(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function at(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function lt(e,t,n){let r=ut(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function ct(e,t){const n=ut(e,t);if(n>=0)return e[1|n]}function ut(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=e[n<<1];if(t===o)return n<<1;o>t?i=n:r=n+1}return~(i<<1)}(e,t)}var dt=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),ht=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const ft={},pt=[];let gt=0;function mt(e){return oe(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===dt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||pt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ht.Emulated,id:"c",styles:e.styles||pt,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,o=e.pipes;return n.id+=gt++,n.inputs=xt(e.inputs,t),n.outputs=xt(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(vt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(bt):null,n})}function vt(e){return Ct(e)||function(e){return e[Le]||null}(e)}function bt(e){return function(e){return e[Ne]||null}(e)}const yt={};function wt(e){const t={type:e.type,bootstrap:e.bootstrap||pt,declarations:e.declarations||pt,imports:e.imports||pt,exports:e.exports||pt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&oe(()=>{yt[e.id]=e.type}),t}function xt(e,t){if(null==e)return ft;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const Ot=mt;function Ct(e){return e[Ie]||null}function _t(e,t){return e.hasOwnProperty(Ve)?e[Ve]:null}function St(e,t){const n=e[Re]||null;if(!n&&!0===t)throw new Error(`Type ${_e(e)} does not have '\u0275mod' property.`);return n}const jt=20,kt=10;function Tt(e){return Array.isArray(e)&&"object"==typeof e[1]}function Et(e){return Array.isArray(e)&&!0===e[1]}function Pt(e){return 0!=(8&e.flags)}function At(e){return 2==(2&e.flags)}function Mt(e){return 1==(1&e.flags)}function Dt(e){return null!==e.template}function It(e){return 0!=(512&e[2])}function Lt(e){return"string"==typeof e?e:null==e?"":""+e}function Nt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Lt(e)}const Rt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(De))();function Ft(e){return{name:"window",target:e.ownerDocument.defaultView}}function Vt(e){return e instanceof Function?e():e}function zt(e,t){const n=t?" in "+t:"";throw new Error(`No provider for ${Nt(e)} found${n}`)}class Bt{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ht(){const e=$t(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===ft)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Ut(e,t,n,r){const i=$t(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ft,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],l=s[a];o[a]=new Bt(l&&l.currentValue,t,s===ft),e[r]=t}function $t(e){return e.__ngSimpleChanges__||null}let Wt=void 0;function qt(e){return!!e.listen}const Gt={createRenderer:(e,t)=>void 0!==Wt?Wt:"undefined"!=typeof document?document:void 0};function Kt(e){for(;Array.isArray(e);)e=e[0];return e}function Yt(e,t){return Kt(t[e+jt])}function Zt(e,t){return Kt(t[e.index])}function Xt(e,t){return e.data[t+jt]}function Jt(e,t){const n=t[e];return Tt(n)?n:n[0]}function Qt(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function en(e){return 4==(4&e[2])}function tn(e){return 128==(128&e[2])}function nn(e,t){return null===e||null==t?null:e[t]}function rn(e){e[18]=0}function on(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const sn={lFrame:Sn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function an(){return sn.bindingsEnabled}function ln(){return sn.lFrame.lView}function cn(){return sn.lFrame.tView}function un(){return sn.lFrame.currentTNode}function dn(e,t){sn.lFrame.currentTNode=e,sn.lFrame.isParent=t}function hn(){return sn.lFrame.isParent}function fn(){sn.lFrame.isParent=!1}function pn(){return sn.isInCheckNoChangesMode}function gn(e){sn.isInCheckNoChangesMode=e}function mn(){return sn.lFrame.bindingIndex++}function vn(e){const t=sn.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function bn(e,t){const n=sn.lFrame;n.bindingIndex=n.bindingRootIndex=e,yn(t)}function yn(e){sn.lFrame.currentDirectiveIndex=e}function wn(){return sn.lFrame.currentQueryIndex}function xn(e){sn.lFrame.currentQueryIndex=e}function On(e,t){const n=_n();sn.lFrame=n,n.currentTNode=t,n.lView=e}function Cn(e){const t=_n(),n=e[1];sn.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex}function _n(){const e=sn.lFrame,t=null===e?null:e.child;return null===t?Sn(e):t}function Sn(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function jn(){const e=sn.lFrame;return sn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const kn=jn;function Tn(){const e=jn();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function En(){return sn.lFrame.selectedIndex}function Pn(e){sn.lFrame.selectedIndex=e}function An(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),o&&(e.viewHooks||(e.viewHooks=[])).push(-n,o),s&&((e.viewHooks||(e.viewHooks=[])).push(n,s),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,s)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function Mn(e,t,n){Ln(e,t,3,n)}function Dn(e,t,n,r){(3&e[2])===n&&Ln(e,t,n,r)}function In(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Ln(e,t,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&e[18]:0;s<t.length;s++)if("number"==typeof t[s+1]){if(o=t[s],null!=r&&o>=r)break}else t[s]<0&&(e[18]+=65536),(o<i||-1==i)&&(Nn(e,n,t,s),e[18]=(4294901760&e[18])+s+2),s++}function Nn(e,t,n,r){const i=n[r]<0,o=n[r+1],s=e[i?-n[r]:n[r]];i?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,o.call(s)):o.call(s)}const Rn=-1;class Fn{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Vn(e,t,n){const r=qt(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],l=n[i++];r?e.setAttribute(t,a,l,s):t.setAttributeNS(s,a,l)}else{const s=o,a=n[++i];Bn(s)?r&&e.setProperty(t,s,a):r?e.setAttribute(t,s,a):t.setAttribute(s,a),i++}}return i}function zn(e){return 3===e||4===e||6===e}function Bn(e){return 64===e.charCodeAt(0)}function Hn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Un(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Un(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const n=e[o++];if("number"==typeof n){if(n===t){s=-1;break}if(n>t){s=o-1;break}}}for(;o<e.length;){const t=e[o];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function $n(e){return e!==Rn}function Wn(e){return 32767&e}function qn(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Gn=!0;function Kn(e){const t=Gn;return Gn=e,t}let Yn=0;function Zn(e,t){const n=Jn(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Xn(r.data,e),Xn(t,null),Xn(r.blueprint,null));const i=Qn(e,t),o=e.injectorIndex;if($n(i)){const e=Wn(i),n=qn(i,t),r=n[1].data;for(let i=0;i<8;i++)t[o+i]=n[e+i]|r[e+i]}return t[o+8]=i,o}function Xn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Jn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Qn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return Rn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Rn}function er(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ze)&&(r=n[ze]),null==r&&(r=n[ze]=Yn++);const i=255&r,o=1<<i,s=64&i,a=32&i,l=t.data;128&i?s?a?l[e+7]|=o:l[e+6]|=o:a?l[e+5]|=o:l[e+4]|=o:s?a?l[e+3]|=o:l[e+2]|=o:a?l[e+1]|=o:l[e]|=o}(e,t,n)}function tr(e,t,n,r=he.Default,i){if(null!==e){const i=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ze)?e[ze]:void 0;return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof i){On(t,e);try{const e=i();if(null!=e||r&he.Optional)return e;zt(n)}finally{kn()}}else if("number"==typeof i){if(-1===i)return new lr(e,t);let o=null,s=Jn(e,t),a=Rn,l=r&he.Host?t[16][6]:null;for((-1===s||r&he.SkipSelf)&&(a=-1===s?Qn(e,t):t[s+8],a!==Rn&&ar(r,!1)?(o=t[1],s=Wn(a),t=qn(a,t)):s=-1);-1!==s;){const e=t[1];if(sr(i,s,e.data)){const e=rr(s,t,n,o,r,l);if(e!==nr)return e}a=t[s+8],a!==Rn&&ar(r,t[1].data[s+8]===l)&&sr(i,s,t)?(o=e,s=Wn(a),t=qn(a,t)):s=-1}}}if(r&he.Optional&&void 0===i&&(i=null),0==(r&(he.Self|he.Host))){const e=t[9],o=Ze(void 0);try{return e?e.get(n,i,r&he.Optional):Qe(n,i,r&he.Optional)}finally{Ze(o)}}if(r&he.Optional)return i;zt(n,"NodeInjector")}const nr={};function rr(e,t,n,r,i,o){const s=t[1],a=s.data[e+8],l=ir(a,s,n,null==r?At(a)&&Gn:r!=s&&2===a.type,i&he.Host&&o===a);return null!==l?or(t,s,l,a):nr}function ir(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,l=e.directiveStart,c=o>>20,u=i?a+c:e.directiveEnd;for(let d=r?a:a+c;d<u;d++){const e=s[d];if(d<l&&n===e||d>=l&&e.type===n)return d}if(i){const e=s[l];if(e&&Dt(e)&&e.type===n)return l}return null}function or(e,t,n,r){let i=e[n];const o=t.data;if(i instanceof Fn){const s=i;s.resolving&&function(e,t){throw new Error("Circular dependency in DI detected for "+e)}(Nt(o[n]));const a=Kn(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Ze(s.injectImpl):null;On(e,r);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const r=((s=t).type.prototype.ngOnChanges&&(s.setInput=Ut),Ht);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}var s;i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&Ze(l),Kn(a),s.resolving=!1,kn()}}return i}function sr(e,t,n){const r=64&e,i=32&e;let o;return o=128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t],!!(o&1<<e)}function ar(e,t){return!(e&he.Self||e&he.Host&&t)}class lr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return tr(this._tNode,this._lView,e,void 0,t)}}function cr(e){return e.ngDebugContext}function ur(e){return e.ngOriginalError}function dr(e,...t){e.error(...t)}class hr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||dr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?cr(e)?cr(e):this._findContext(ur(e)):null}_findOriginalError(e){let t=ur(e);for(;t&&ur(t);)t=ur(t);return t}}let fr=!0,pr=!1;function gr(){return pr=!0,fr}function mr(e,t){e.__ngContext__=t}function vr(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const br="ng-template";function yr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==vr(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function wr(e){return 0===e.type&&e.tagName!==br}function xr(e,t,n){return t===(0!==e.type||n?e.tagName:br)}function Or(e,t,n){let r=4;const i=e.attrs||[],o=function(e){for(let t=0;t<e.length;t++)if(zn(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!xr(e,l,n)||""===l&&1===t.length){if(Cr(r))return!1;s=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!yr(e.attrs,c,n)){if(Cr(r))return!1;s=!0}continue}const u=_r(8&r?"class":l,i,wr(e),n);if(-1===u){if(Cr(r))return!1;s=!0;continue}if(""!==c){let e;e=u>o?"":i[u+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==vr(t,c,0)||2&r&&c!==e){if(Cr(r))return!1;s=!0}}}}else{if(!s&&!Cr(r)&&!Cr(l))return!1;if(s&&Cr(l))continue;s=!1,r=l|1&r}}return Cr(r)||s}function Cr(e){return 0==(1&e)}function _r(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Sr(e,t,n=!1){for(let r=0;r<t.length;r++)if(Or(e,t[r],n))return!0;return!1}function jr(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function kr(e,t){return e?":not("+t.trim()+")":t}function Tr(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const t=e[++n];i+="["+s+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Cr(s)||(t+=kr(o,i),i=""),r=s,o=o||!Cr(r);n++}return""!==i&&(t+=kr(o,i)),t}const Er={};function Pr(e){const t=e[3];return Et(t)?t[3]:t}function Ar(e){return Dr(e[13])}function Mr(e){return Dr(e[4])}function Dr(e){for(;null!==e&&!Et(e);)e=e[4];return e}function Ir(e){Lr(cn(),ln(),En()+e,pn())}function Lr(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&Mn(t,r,n)}else{const r=e.preOrderHooks;null!==r&&Dn(t,r,0,n)}Pn(n)}function Nr(e,t){return e<<17|t<<2}function Rr(e){return e>>17&32767}function Fr(e){return 2|e}function Vr(e){return(131068&e)>>2}function zr(e,t){return-131069&e|t<<2}function Br(e){return 1|e}function Hr(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=e.data[o];xn(i),n.contentQueries(2,t[o],o)}}}function Ur(e,t,n){return qt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function $r(e,t,n,r,i,o,s,a,l,c){const u=t.blueprint.slice();return u[0]=i,u[2]=140|r,rn(u),u[3]=u[15]=e,u[8]=n,u[10]=s||e&&e[10],u[11]=a||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=o,u[16]=2==t.type?e[16]:u,u}function Wr(e,t,n,r,i){const o=t+jt,s=e.data[o]||function(e,t,n,r,i){const o=un(),s=hn(),a=e.data[t]=function(e,t,n,r,i,o){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(e,o,n,r,i);return dn(s,!0),s}function qr(e,t,n){Cn(t);try{const r=e.viewQuery;null!==r&&Oi(1,r,n);const i=e.template;null!==i&&Yr(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Hr(e,t),e.staticViewQueries&&Oi(2,e.viewQuery,n);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)vi(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,Tn()}}function Gr(e,t,n,r){const i=t[2];if(256==(256&i))return;Cn(t);const o=pn();try{rn(t),sn.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Yr(e,t,n,2,r);const s=3==(3&i);if(!o)if(s){const n=e.preOrderCheckHooks;null!==n&&Mn(t,n,null)}else{const n=e.preOrderHooks;null!==n&&Dn(t,n,0,null),In(t,0)}if(function(e){for(let t=Ar(e);null!==t;t=Mr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&on(r,1),n[2]|=1024}}}(t),function(e){for(let t=Ar(e);null!==t;t=Mr(t))for(let e=kt;e<t.length;e++){const n=t[e],r=n[1];tn(n)&&Gr(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Hr(e,t),!o)if(s){const n=e.contentCheckHooks;null!==n&&Mn(t,n)}else{const n=e.contentHooks;null!==n&&Dn(t,n,1),In(t,1)}!function(e,t){try{const n=e.expandoInstructions;if(null!==n){let r=e.expandoStartIndex,i=-1,o=-1;for(let e=0;e<n.length;e++){const s=n[e];"number"==typeof s?s<=0?(o=0-s,Pn(o),r+=9+n[++e],i=r):r+=s:(null!==s&&(bn(r,i),s(2,t[i])),i++)}}}finally{Pn(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)mi(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&Oi(2,l,r),!o)if(s){const n=e.viewCheckHooks;null!==n&&Mn(t,n)}else{const n=e.viewHooks;null!==n&&Dn(t,n,2),In(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,on(t[3],-1))}finally{Tn()}}function Kr(e,t,n,r){const i=t[10],o=!pn(),s=en(t);try{o&&!s&&i.begin&&i.begin(),s&&qr(e,t,r),Gr(e,t,n,r)}finally{o&&!s&&i.end&&i.end()}}function Yr(e,t,n,r,i){const o=En();try{Pn(-1),2&r&&t.length>jt&&Lr(e,t,0,pn()),n(r,i)}finally{Pn(o)}}function Zr(e,t,n){if(Pt(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function Xr(e,t,n){an()&&(function(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Zn(n,t),mr(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const r=e.data[a],o=Dt(r);o&&hi(t,n,r);const l=or(t,e,a,n);mr(l,t),null!==s&&fi(0,a-i,l,r,0,s),o&&(Jt(n.index,t)[8]=l)}}(e,t,n,Zt(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=e.expandoInstructions,s=e.firstCreatePass,a=n.index-jt,l=sn.lFrame.currentDirectiveIndex;try{Pn(a);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];yn(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?si(r,i):s&&o.push(null)}}finally{Pn(-1),yn(l)}}(e,t,n))}function Jr(e,t,n=Zt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}function Qr(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ei(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ei(e,t,n,r,i,o,s,a,l,c){const u=jt+r,d=u+i,h=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Er);return n}(u,d),f="function"==typeof c?c():c;return h[1]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function ti(e,t,n,r){const i=_i(t);i.push(n),e.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1)}function ni(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function ri(e,t,n,r){let i=!1;if(an()){const o=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Sr(n,s.selectors,!1)&&(i||(i=[]),er(Zn(n,t),e,s.type),Dt(s)?(li(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,ui(n,e.data.length,o.length);for(let e=0;e<o.length;e++){const t=o[e];t.providersResolver&&t.providersResolver(t)}ai(e,n,o.length);let a=!1,l=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Hn(n.mergedAttrs,c.hostAttrs),di(e,t,c),ci(e.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!a&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-jt),a=!0),l||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-jt),l=!0),ii(e,c),r+=c.hostVars}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,o=[];let s=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=r[l],n=e.inputs,c=null===i||wr(t)?null:pi(n,i);o.push(c),s=ni(n,l,s),a=ni(e.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(t.flags|=16),s.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=s,t.outputs=a}(e,n),oi(e,t,r)}s&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new Error(`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,s)}return n.mergedAttrs=Hn(n.mergedAttrs,n.attrs),i}function ii(e,t){const n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function oi(e,t,n){for(let r=0;r<n;r++)t.push(Er),e.blueprint.push(Er),e.data.push(null)}function si(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ai(e,t,n){const r=jt-t.index,i=e.data.length-(1048575&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function li(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ci(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Dt(t)&&(n[""]=e)}}function ui(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function di(e,t,n){e.data.push(n);const r=n.factory||(n.factory=_t(n.type)),i=new Fn(r,Dt(n),null);e.blueprint.push(i),t.push(i)}function hi(e,t,n){const r=Zt(t,e),i=Qr(n),o=e[10],s=bi(e,$r(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=s}function fi(e,t,n,r,i,o){const s=o[t];if(null!==s){const e=r.setInput;for(let t=0;t<s.length;){const i=s[t++],o=s[t++],a=s[t++];null!==e?r.setInput(n,a,i,o):n[o]=a}}}function pi(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function gi(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function mi(e,t){const n=Jt(t,e);if(tn(n)){const e=n[1];80&n[2]?Gr(e,n,e.template,n[8]):n[5]>0&&function e(t){for(let r=Ar(t);null!==r;r=Mr(r))for(let t=kt;t<r.length;t++){const n=r[t];if(1024&n[2]){const e=n[1];Gr(e,n,e.template,n[8])}else n[5]>0&&e(n)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Jt(n[r],t);tn(i)&&i[5]>0&&e(i)}}(n)}}function vi(e,t){const n=Jt(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),qr(r,n,n[8])}function bi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function yi(e){for(;e;){e[2]|=64;const t=Pr(e);if(It(e)&&!t)return e;e=t}return null}function wi(e,t,n){const r=t[10];r.begin&&r.begin();try{Gr(e,t,e.template,n)}catch(i){throw Si(t,i),i}finally{r.end&&r.end()}}function xi(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Qt(n),i=r[1];Kr(i,r,i.template,n)}}(e[8])}function Oi(e,t,n){xn(0),t(e,n)}const Ci=(()=>Promise.resolve(null))();function _i(e){return e[7]||(e[7]=[])}function Si(e,t){const n=e[9],r=n?n.get(hr,null):null;r&&r.handleError(t)}function ji(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=t[s],c=e.data[s];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function ki(e,t,n){const r=Yt(t,e),i=e[11];qt(i)?i.setValue(r,n):r.textContent=n}function Ti(e,t,n,r,i){if(null!=r){let o,s=!1;Et(r)?o=r:Tt(r)&&(s=!0,r=r[0]);const a=Kt(r);0===e&&null!==n?null==i?Li(t,n,a):Ii(t,n,a,i||null):1===e&&null!==n?Ii(t,n,a,i||null):2===e?function(e,t,n){const r=Ri(e,t);r&&function(e,t,n,r){qt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function(e,t,n,r,i){const o=n[7];o!==Kt(n)&&Ti(t,e,r,o,i);for(let s=kt;s<n.length;s++){const i=n[s];Bi(i[1],i,e,t,r,o)}}(t,e,o,n,i)}}function Ei(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,on(i,-1)),n.splice(r,1)}function Pi(e,t){if(e.length<=kt)return;const n=kt+t,r=e[n];if(r){const o=r[17];null!==o&&o!==e&&Ei(o,r),t>0&&(e[n-1][4]=r[4]);const s=st(e,kt+t);Bi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ai(e,t){if(!(256&t[2])){const n=t[11];qt(n)&&n.destroyNode&&Bi(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Mi(e[1],e);for(;t;){let n=null;if(Tt(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)Tt(t)&&Mi(t[1],t),t=t[3];null===t&&(t=e),Tt(t)&&Mi(t[1],t),n=t&&t[4]}t=n}}(t)}}function Mi(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Fn)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2)t[n+1].call(e[t[n]]);else t.call(e)}}}(e,t),function(e,t){const n=e.cleanup;if(null!==n){const e=t[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(t):Kt(t[i]),s=e[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?e[a]():e[-a].unsubscribe(),r+=2}else n[r].call(e[n[r+1]]);t[7]=null}}(e,t),1===t[1].type&&qt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Et(t[3])){n!==t[3]&&Ei(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Di(e,t,n){let r=t.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(t=r).parent;if(null===r)return n[0];if(t&&4===t.type&&4&t.flags)return Zt(t,n).parentNode;if(2&r.flags){const t=e.data,n=t[t[r.index].directiveStart].encapsulation;if(n!==ht.ShadowDom&&n!==ht.Native)return null}return Zt(r,n)}function Ii(e,t,n,r){qt(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function Li(e,t,n){qt(e)?e.appendChild(t,n):t.appendChild(n)}function Ni(e,t,n,r){null!==r?Ii(e,t,n,r):Li(e,t,n)}function Ri(e,t){return qt(e)?e.parentNode(t):t.parentNode}function Fi(e,t){return 3===e.type||4===e.type?Zt(e,t):null}function Vi(e,t,n,r){const i=Di(e,r,t);if(null!=i){const e=t[11],o=Fi(r.parent||t[6],t);if(Array.isArray(n))for(let t=0;t<n.length;t++)Ni(e,i,n[t],o);else Ni(e,i,n,o)}}function zi(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;s&&0===t&&(a&&mr(Kt(a),r),n.flags|=4),64!=(64&n.flags)&&(3===l||4===l?(zi(e,t,n.child,r,i,o,!1),Ti(t,e,i,a,o)):1===l?Hi(e,t,r,n,i,o):Ti(t,e,i,a,o)),n=s?n.projectionNext:n.next}}function Bi(e,t,n,r,i,o){zi(n,r,e.firstChild,t,i,o,!1)}function Hi(e,t,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Ti(t,e,i,a[l],o);else zi(e,t,a,s[3],i,o,!0)}function Ui(e,t,n){qt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function $i(e,t,n){qt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}class Wi{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const e=this._lView,t=e[1];return function e(t,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Kt(s)),Et(s))for(let t=kt;t<s.length;t++){const n=s[t],r=n[1].firstChild;null!==r&&e(n[1],n,r,i)}const a=r.type;if(3===a||4===a)e(t,n,r.child,i);else if(1===a){const t=n[16],o=t[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=Pr(t);e(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(t,e,t.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}Ai(this._lView[1],this._lView)}onDestroy(e){ti(this._lView[1],this._lView,null,e)}markForCheck(){yi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){wi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){gn(!0);try{wi(e,t,n)}finally{gn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}detachFromAppRef(){var e;this._appRef=null,Bi(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class qi extends Wi{constructor(e){super(e),this._view=e}detectChanges(){xi(this._view)}checkNoChanges(){!function(e){gn(!0);try{xi(e)}finally{gn(!1)}}(this._view)}get context(){return null}}let Gi,Ki,Yi;function Zi(e,t,n){return Gi||(Gi=class extends e{}),new Gi(Zt(t,n))}function Xi(e,t,n,r){return Ki||(Ki=class extends e{constructor(e,t,n){super(),this._declarationView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=$r(this._declarationView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),qr(t,n,e),new Wi(n)}}),0===n.type?new Ki(r,n,Zi(t,n,r)):null}function Ji(e,t,n,r){let i;Yi||(Yi=class extends e{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostView=n}get element(){return Zi(t,this._hostTNode,this._hostView)}get injector(){return new lr(this._hostTNode,this._hostView)}get parentInjector(){const e=Qn(this._hostTNode,this._hostView);if($n(e)){const t=qn(e,this._hostView),n=Wn(e);return new lr(t[1].data[n+8],t)}return new lr(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}get length(){return this._lContainer.length-kt}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const o=n||this.parentInjector;if(!i&&null==e.ngModule&&o){const e=o.get(nt,null);e&&(i=e)}const s=e.create(o,r,void 0,i);return this.insert(s.hostView,t),s}insert(e,t){const n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Et(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Yi(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),o=this._lContainer;!function(e,t,n,r){const i=kt+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-kt?(t[4]=n[i],ot(n,kt+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,o,i);const s=function e(t,n){const r=kt+t+1;if(r<n.length){const t=n[r],i=t[1].firstChild;if(null!==i)return function t(n,r){if(null!==r){const i=r.type;if(2===i)return Zt(r,n);if(0===i)return e(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return t(n,i);{const t=n[r.index];return Et(t)?e(-1,t):Kt(t)}}{const e=n[16],i=e[6],o=Pr(e),s=i.projection[r.projection];return null!=s?t(o,s):t(n,r.next)}}return null}(t,i)}return n[7]}(i,o),a=n[11],l=Ri(a,o[7]);return null!==l&&function(e,t,n,r,i,o){r[0]=i,r[6]=t,Bi(e,r,n,1,i,o)}(r,o[6],a,n,l,s),e.attachToViewContainerRef(this),ot(o[8],i,e),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}indexOf(e){const t=this._lContainer[8];return null!==t?t.indexOf(e):-1}remove(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),n=Pi(this._lContainer,t);n&&(st(this._lContainer[8],t),Ai(n[1],n))}detach(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),n=Pi(this._lContainer,t);return n&&null!=st(this._lContainer[8],t)?new Wi(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Et(o))i=o;else{let e;if(3===n.type)e=Kt(o);else if(e=r[11].createComment(""),It(r)){const t=r[11],i=Zt(n,r);Ii(t,Ri(t,i),e,function(e,t){return qt(e)?e.nextSibling(t):t.nextSibling}(t,i))}else Vi(r[1],r,e,n);r[n.index]=i=gi(o,r,e,n),bi(r,i)}return new Yi(i,n,r)}let Qi=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>eo(),e})();const eo=function(e=!1){return function(e,t,n){if(!n&&At(e)){const n=Jt(e.index,t);return new Wi(n,n)}return 2===e.type||0===e.type||3===e.type||4===e.type?new Wi(t[16],t):null}(un(),ln(),e)},to=Function,no=new Be("Set Injector scope."),ro={},io={},oo=[];let so=void 0;function ao(){return void 0===so&&(so=new tt),so}function lo(e,t=null,n=null,r){return new co(e,n,t||ao(),r)}class co{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&it(t,n=>this.processProvider(n,e,t)),it([e],e=>this.processInjectorType(e,[],i)),this.records.set(He,fo(void 0,this));const o=this.records.get(no);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:_e(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Ue,n=he.Default){this.assertNotDestroyed();const r=Ye(this);try{if(!(n&he.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Be)&&me(e);t=n&&this.injectableDefInScope(n)?fo(uo(e),ro):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&he.Self?ao():this.parent).get(e,t=n&he.Optional&&t===Ue?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(_e(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[We]&&i.unshift(t[We]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=_e(t);if(Array.isArray(t))i=t.map(_e).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):_e(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace($e,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{Ye(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(_e(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=Te(e)))return!1;let r=be(e);const i=null==r&&e.ngModule||void 0,o=void 0===i?e:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=be(i)),null==r)return!1;if(null!=r.imports&&!s){let e;n.push(o);try{it(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];it(r,e=>this.processProvider(e,n,r||oo))}}this.injectorDefTypes.add(o),this.records.set(o,fo(r.factory,ro));const a=r.providers;if(null!=a&&!s){const t=e;it(a,e=>this.processProvider(e,t,a))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=go(e=Te(e))?e:Te(e&&e.provide);const i=function(e,t,n){return po(e)?fo(void 0,e.useValue):fo(ho(e),ro)}(e);if(go(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=fo(void 0,ro,!0),t.factory=()=>et(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===ro&&(t.value=io,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function uo(e){const t=me(e),n=null!==t?t.factory:_t(e);if(null!==n)return n;const r=be(e);if(null!==r)return r.factory;if(e instanceof Be)throw new Error(`Token ${_e(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=at(t,"?");throw new Error(`Can't resolve all parameters for ${_e(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[ye]||e[Oe]||e[xe]&&e[xe]());if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ho(e,t,n){let r=void 0;if(go(e)){const t=Te(e);return _t(t)||uo(t)}if(po(e))r=()=>Te(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...et(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Je(Te(e.useExisting));else{const t=Te(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return _t(t)||uo(t);r=()=>new t(...et(e.deps))}var i;return r}function fo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function po(e){return null!==e&&"object"==typeof e&&qe in e}function go(e){return"function"==typeof e}const mo=function(e,t,n){return function(e,t=null,n=null,r){const i=lo(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let vo=(()=>{class e{static create(e,t){return Array.isArray(e)?mo(e,t,""):mo(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Ue,e.NULL=new tt,e.\u0275prov=pe({token:e,providedIn:"any",factory:()=>Je(He)}),e.__NG_ELEMENT_ID__=-1,e})();const bo=new Be("AnalyzeForEntryComponents");function yo(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const e=t[s];"number"==typeof e?o=e:1==o?i=Se(i,e):2==o&&(r=Se(r,e+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function wo(e,t){const n=Qt(e)[1],r=n.data.length-1;An(n,{directiveStart:r,directiveEnd:r+1})}let xo=null;function Oo(){if(!xo){const e=De.Symbol;if(e&&e.iterator)xo=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(xo=n)}}}return xo}function Co(e){return!!_o(e)&&(Array.isArray(e)||!(e instanceof Map)&&Oo()in e)}function _o(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function So(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function jo(e,t,n,r,i,o,s,a){const l=ln(),c=cn(),u=e+jt,d=c.firstCreatePass?function(e,t,n,r,i,o,s,a,l){const c=t.consts,u=Wr(t,e,0,s||null,nn(c,a));ri(t,n,u,nn(c,l)),An(t,u);const d=u.tViews=ei(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(e,c,l,t,n,r,i,o,s):c.data[u];dn(d,!1);const h=l[11].createComment("");Vi(c,l,h,d),mr(h,l),bi(l,l[u]=gi(h,l,h,d)),Mt(d)&&Xr(c,l,d),null!=s&&Jr(l,d,a)}function ko(e,t=he.Default){const n=ln();return null===n?Je(e,t):tr(un(),n,Te(e),t)}function To(e,t,n){const r=ln();return So(r,mn(),t)&&function(e,t,n,r,i,o,s,a){const l=Zt(t,n);let c,u=t.inputs;var d;null!=u&&(c=u[r])?(ji(e,n,c,r,i),At(t)&&function(e,t){const n=Jt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):2===t.type&&(r="class"===(d=r)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d,i=null!=s?s(i,t.tagName||"",r):i,qt(o)?o.setProperty(l,r,i):Bn(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(cn(),function(){const e=sn.lFrame;return Xt(e.tView,e.selectedIndex)}(),r,e,t,r[11],n),To}function Eo(e,t,n,r,i){const o=i?"class":"style";ji(e,n,t.inputs[o],o,r)}function Po(e,t,n,r){const i=ln(),o=cn(),s=jt+e,a=i[11],l=i[s]=Ur(t,a,sn.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,n,r,i,o,s){const a=t.consts,l=Wr(t,e,2,i,nn(a,o));return ri(t,n,l,nn(a,s)),null!==l.attrs&&yo(l,l.attrs,!1),null!==l.mergedAttrs&&yo(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(e,o,i,0,t,n,r):o.data[s];dn(c,!0);const u=c.mergedAttrs;null!==u&&Vn(a,l,u);const d=c.classes;null!==d&&$i(a,l,d);const h=c.styles;null!==h&&Ui(a,l,h),Vi(o,i,l,c),0===sn.lFrame.elementDepthCount&&mr(l,i),sn.lFrame.elementDepthCount++,Mt(c)&&(Xr(o,i,c),Zr(o,c,i)),null!==r&&Jr(i,c)}function Ao(){let e=un();hn()?fn():(e=e.parent,dn(e,!1));const t=e;sn.lFrame.elementDepthCount--;const n=cn();n.firstCreatePass&&(An(n,e),Pt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Eo(n,t,ln(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Eo(n,t,ln(),t.stylesWithoutHost,!1)}function Mo(e,t,n,r){Po(e,t,n,r),Ao()}function Do(e,t,n){(function(e,t,n){const r=ln(),i=cn(),o=e+jt,s=i.firstCreatePass?function(e,t,n,r,i){const o=t.consts,s=nn(o,r),a=Wr(t,e,3,"ng-container",s);return null!==s&&yo(a,s,!0),ri(t,n,a,nn(o,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(e,i,r,t,n):i.data[o];dn(s,!0);const a=r[o]=r[11].createComment("");Vi(i,r,a,s),mr(a,r),Mt(s)&&(Xr(i,r,s),Zr(i,s,r)),null!=n&&Jr(r,s)})(e,t,n),function(){let e=un();const t=cn();hn()?fn():(e=e.parent,dn(e,!1)),t.firstCreatePass&&(An(t,e),Pt(e)&&t.queries.elementEnd(e))}()}function Io(e){return!!e&&"function"==typeof e.then}function Lo(e,t,n=!1,r){const i=ln(),o=cn(),s=un();return function(e,t,n,r,i,o,s=!1,a){const l=Mt(r),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),u=_i(t);let d=!0;if(2===r.type){const h=Zt(r,t),f=a?a(h):ft,p=f.target||h,g=u.length,m=a?e=>a(Kt(e[r.index])).target:r.index;if(qt(n)){let s=null;if(!a&&l&&(s=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const e=i[o];if(e===n&&i[o+1]===r){const e=t[7],n=i[o+2];return e.length>n?e[n]:null}"string"==typeof e&&(o+=2)}return null}(e,t,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,d=!1;else{o=Ro(r,t,o,!1);const e=n.listen(f.name||p,i,o);u.push(o,e),c&&c.push(i,m,g,g+1)}}else o=Ro(r,t,o,!0),p.addEventListener(i,o,s),u.push(o),c&&c.push(i,m,g,s)}const h=r.outputs;let f;if(d&&null!==h&&(f=h[i])){const e=f.length;if(e)for(let n=0;n<e;n+=2){const e=t[f[n]][f[n+1]].subscribe(o),s=u.length;u.push(o,e),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,e,t,n,r),Lo}function No(e,t,n){try{return!1!==t(n)}catch(r){return Si(e,r),!1}}function Ro(e,t,n,r){return function i(o){if(o===Function)return n;const s=2&e.flags?Jt(e.index,t):t;0==(32&t[2])&&yi(s);let a=No(t,n,o),l=i.__ngNextListenerFn__;for(;l;)a=No(t,l,o)&&a,l=l.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Fo(e=1){return function(e){return(sn.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,sn.lFrame.contextLView))[8]}(e)}function Vo(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const o=t[i];if("*"!==o){if(null===r?Sr(e,o,!0):jr(r,o))return i}else n=i}return n}function zo(e){const t=ln()[16][6];if(!t.projection){const n=t.projection=at(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?Vo(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function Bo(e,t=0,n){const r=ln(),i=cn(),o=Wr(i,e,1,null,n||null);null===o.projection&&(o.projection=t),fn(),function(e,t,n){Hi(t[11],0,t,n,Di(e,n,t),Fi(n.parent||t[6],t))}(i,r,o)}const Ho=[];function Uo(e,t,n,r,i){const o=e[n+1],s=null===t;let a=r?Rr(o):Vr(o),l=!1;for(;0!==a&&(!1===l||s);){const n=e[a+1];$o(e[a],t)&&(l=!0,e[a+1]=r?Br(n):Fr(n)),a=r?Rr(n):Vr(n)}l&&(e[n+1]=r?Fr(o):Br(o))}function $o(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&ut(e,t)>=0}function Wo(e,t){return function(e,t,n,r){const i=ln(),o=cn(),s=vn(2);o.firstUpdatePass&&function(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[En()+jt],s=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(o)&&null===t&&!s&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=sn.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=t.residualClasses;if(null===i)0===t.classBindings&&(n=Go(n=qo(null,e,t,n,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=qo(i,e,t,n,r),null===o){let n=function(e,t,n){const r=t.classBindings;if(0!==Vr(r))return e[Rr(r)]}(e,t);void 0!==n&&Array.isArray(n)&&(n=qo(null,e,t,n[1],r),n=Go(n,t.attrs,r),function(e,t,n,r){e[Rr(t.classBindings)]=r}(e,t,0,n))}else o=function(e,t,n){let r=void 0;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=Go(r,e[o].hostAttrs,true);return Go(r,t.attrs,true)}(e,t)}return void 0!==o&&(t.residualClasses=o),n}(i,o,t,r),function(e,t,n,r,i,o){let s=t.classBindings,a=Rr(s),l=Vr(s);e[r]=n;let c,u=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||ut(e,c)>0)&&(u=!0)}else c=n;if(i)if(0!==l){const t=Rr(e[a+1]);e[r+1]=Nr(t,a),0!==t&&(e[t+1]=zr(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Nr(a,0),0!==a&&(e[a+1]=zr(e[a+1],r)),a=r;else e[r+1]=Nr(l,0),0===a?a=r:e[l+1]=zr(e[l+1],r),l=r;u&&(e[r+1]=Fr(e[r+1])),Uo(e,c,r,!0),Uo(e,c,r,!1),function(e,t,n,r,i){const o=e.residualClasses;null!=o&&"string"==typeof t&&ut(o,t)>=0&&(n[r+1]=Br(n[r+1]))}(t,c,e,r),s=Nr(a,l),t.classBindings=s}(i,o,t,n,s)}}(o,e,s,true),t!==Er&&So(i,s,t)&&function(e,t,n,r,i,o,s,a){if(2!==t.type)return;const l=e.data,c=l[a+1];Yo(1==(1&c)?Ko(l,t,n,i,Vr(c),s):void 0)||(Yo(o)||function(e){return 2==(2&e)}(c)&&(o=Ko(l,null,n,i,a,s)),function(e,t,n,r,i){const o=qt(e);i?o?e.addClass(n,r):n.classList.add(r):o?e.removeClass(n,r):n.classList.remove(r)}(r,0,Yt(En(),n),i,o))}(o,o.data[En()+jt],i,i[11],e,i[s+1]=function(e,t){return null==e||"object"==typeof e&&(e=_e(function(e){return e instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}?e.changingThisBreaksApplicationSecurity:e}(e))),e}(t),true,s)}(e,t),Wo}function qo(e,t,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],r=Go(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Go(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),lt(e,s,!!n||t[++o]))}return void 0===e?null:e}function Ko(e,t,n,r,i,o){const s=null===t;let a=void 0;for(;i>0;){const t=e[i],o=Array.isArray(t),l=o?t[1]:t,c=null===l;let u=n[i+1];u===Er&&(u=c?Ho:void 0);let d=c?ct(u,r):l===r?u:void 0;if(o&&!Yo(d)&&(d=ct(t,r)),Yo(d)&&(a=d,s))return a;const h=e[i+1];i=s?Rr(h):Vr(h)}if(null!==t){let e=o?t.residualClasses:t.residualStyles;null!=e&&(a=ct(e,r))}return a}function Yo(e){return void 0!==e}function Zo(e,t=""){const n=ln(),r=cn(),i=e+jt,o=r.firstCreatePass?Wr(r,e,2,null,null):r.data[i],s=n[i]=function(e,t){return qt(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Vi(r,n,s,o),dn(o,!1)}function Xo(e){return Jo("",e,""),Xo}function Jo(e,t,n){const r=ln(),i=function(e,t,n,r){return So(e,mn(),n)?t+Lt(n)+r:Er}(r,e,t,n);return i!==Er&&ki(r,En(),i),Jo}function Qo(e,t,n,r,i){const o=ln(),s=function(e,t,n,r,i,o){const s=function(e,t,n,r){const i=So(e,t,n);return So(e,t+1,r)||i}(e,sn.lFrame.bindingIndex,n,i);return vn(2),s?t+Lt(n)+r+Lt(i)+o:Er}(o,e,t,n,r,i);return s!==Er&&ki(o,En(),s),Qo}const es=void 0;var ts=["en",[["a","p"],["AM","PM"],es],[["AM","PM"],es,es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",es,"{1} 'at' {0}",es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let ns={};function rs(e){return e in ns||(ns[e]=De.ng&&De.ng.common&&De.ng.common.locales&&De.ng.common.locales[e]),ns[e]}var is=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const os="en-US";let ss=os;function as(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: "+e+` [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(ss=e.toLowerCase().replace(/_/g,"-"))}function ls(e,t,n,r,i){if(e=Te(e),Array.isArray(e))for(let o=0;o<e.length;o++)ls(e[o],t,n,r,i);else{const o=cn(),s=ln();let a=go(e)?e:Te(e.provide),l=ho(e);const c=un(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(go(e)||!e.multi){const r=new Fn(l,i,ko),f=ds(a,t,i?u:u+h,d);-1===f?(er(Zn(c,s),o,a),cs(o,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=ds(a,t,u+h,d),p=ds(a,t,u,u+h),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){er(Zn(c,s),o,a);const u=function(e,t,n,r,i){const o=new Fn(e,n,ko);return o.multi=[],o.index=t,o.componentProviders=0,us(o,i,r&&!n),o}(i?fs:hs,n.length,i,r,l);!i&&m&&(n[p].providerFactory=u),cs(o,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(u),s.push(u)}else cs(o,e,f>-1?f:p,us(n[i?p:f],l,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function cs(e,t,n,r){const i=go(t);if(i||t.useClass){const o=(t.useClass||t).prototype.ngOnDestroy;if(o){const s=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=s.indexOf(n);-1===e?s.push(n,[r,o]):s[e+1].push(r,o)}else s.push(n,o)}}}function us(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ds(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function hs(e,t,n,r){return ps(this.multi,[])}function fs(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=or(n,n[1],this.providerFactory.index,r);o=t.slice(0,e),ps(i,o);for(let n=e;n<t.length;n++)o.push(t[n])}else o=[],ps(i,o);return o}function ps(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function gs(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=cn();if(r.firstCreatePass){const i=Dt(e);ls(n,r.data,r.blueprint,i,!0),ls(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class ms{}class vs{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${_e(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let bs=(()=>{class e{}return e.NULL=new vs,e})(),ys=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>ws(e),e})();const ws=function(e){return Zi(e,un(),ln())};class xs{}var Os=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});let Cs=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>_s(),e})();const _s=function(){const e=ln(),t=Jt(un().index,e);return function(e){const t=e[11];if(qt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Tt(t)?t:e)};let Ss=(()=>{class e{}return e.\u0275prov=pe({token:e,providedIn:"root",factory:()=>null}),e})();class js{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ks=new js("10.2.1");class Ts{constructor(){}supports(e){return Co(e)}create(e){return new Ps(e)}}const Es=(e,t)=>t;class Ps{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Es}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const o=!n||t&&t.currentIndex<Is(n,r,i)?t:n,s=Is(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);const e=s-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;t<=o&&o<e&&(i[n]=r+1)}i[o.previousIndex]=t-e}}s!==a&&e(o,s,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Co(e))throw new Error(`Error trying to diff '${_e(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),o=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Oo()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),o=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new As(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ds),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ds),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class As{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ms{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Ds{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Ms,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Is(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class Ls{constructor(){}supports(e){return e instanceof Map||_o(e)}create(){return new Ns}}class Ns{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||_o(e)))throw new Error(`Error trying to diff '${_e(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Rs(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Rs{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Fs=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new de,new ce]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e([new Ts])}),e})(),Vs=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new de,new ce]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e([new Ls])}),e})();const zs=[new Ls],Bs=new Fs([new Ts]),Hs=new Vs(zs);let Us=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>$s(e,ys),e})();const $s=function(e,t){return Xi(e,t,un(),ln())};let Ws=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>qs(e,ys),e})();const qs=function(e,t){return Ji(e,t,un(),ln())},Gs={};class Ks extends bs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ct(e);return new Xs(t,this.ngModule)}}function Ys(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Zs=new Be("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Rt});class Xs extends ms{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(Tr).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Ys(this.componentDef.inputs)}get outputs(){return Ys(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const o=e.get(n,Gs,i);return o!==Gs||r===Gs?o:t.get(n,r,i)}}}(e,r.injector):e,o=i.get(xs,Gt),s=i.get(Ss,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(qt(e))return e.selectRootElement(t,n===ht.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ur(l,o.createRenderer(null,this.componentDef),function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,d={components:[],scheduler:Rt,clean:Ci,playerHandler:null,flags:0},h=ei(0,null,null,1,0,null,null,null,null,null),f=$r(null,h,d,u,null,null,o,a,s,i);let p,g;Cn(f);try{const e=function(e,t,n,r,i,o){const s=n[1];n[20]=e;const a=Wr(s,0,2,null,null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(yo(a,l,!0),null!==e&&(Vn(i,e,l),null!==a.classes&&$i(i,e,a.classes),null!==a.styles&&Ui(i,e,a.styles)));const c=r.createRenderer(e,t),u=$r(n,Qr(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(er(Zn(a,n),s,t.type),li(s,a),ui(a,n.length,1)),bi(n,u),n[20]=u}(c,this.componentDef,f,o,a);if(c)if(n)Vn(a,c,["ng-version",ks.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Cr(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Vn(a,c,e),t&&t.length>0&&$i(a,c,t.join(" "))}if(g=Xt(h,0),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const o=n[1],s=function(e,t,n){const r=un();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ai(e,r,1),di(e,t,n));const i=or(t,e,t.length-1,r);mr(i,t);const o=Zt(r,t);return o&&mr(o,t),i}(o,n,t);r.components.push(s),e[8]=s,i&&i.forEach(e=>e(s,t)),t.contentQueries&&t.contentQueries(1,s,n.length-1);const a=un();if(o.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){Pn(a.index-jt);const e=n[1];ii(e,t),oi(e,n,t.hostVars),si(t,s)}return s}(e,this.componentDef,f,d,[wo]),qr(h,f,null)}finally{Tn()}return new Js(this.componentType,p,Zi(ys,g,f),f,g)}}class Js extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=t,this.hostView=this.changeDetectorRef=new qi(r),this.componentType=e}get injector(){return new lr(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(e=>e()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(e){this.destroyCbs&&this.destroyCbs.push(e)}}const Qs=new Map;class ea extends nt{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ks(this);const n=St(e),r=e[Fe]||null;r&&as(r),this._bootstrapComponents=Vt(n.bootstrap),this._r3Injector=lo(e,t,[{provide:nt,useValue:this},{provide:bs,useValue:this.componentFactoryResolver}],_e(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=vo.THROW_IF_NOT_FOUND,n=he.Default){return e===vo||e===nt||e===He?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ta extends rt{constructor(e){super(),this.moduleType=e,null!==St(e)&&function e(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${_e(t)} vs ${_e(t.name)}`)})(e,Qs.get(e),t),Qs.set(e,t)}let n=t.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(t=>e(t))}(e)}create(e){return new ea(this.moduleType,e)}}const na=class extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,i=e=>null,o=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(i=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(o=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return e instanceof h&&e.add(s),s}};function ra(){return this._results[Oo()]()}class ia{constructor(){this.dirty=!0,this._results=[],this.changes=new na,this.length=0;const e=Oo(),t=ia.prototype;t[e]||(t[e]=ra)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class oa{constructor(e){this.queryList=e,this.matches=null}clone(){return new oa(this.queryList)}setDirty(){this.queryList.setDirty()}}class sa{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new sa(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==ya(e,t).matches&&this.queries[t].setDirty()}}class aa{constructor(e,t,n,r=null){this.predicate=e,this.descendants=t,this.isStatic=n,this.read=r}}class la{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new la(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ca{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new ca(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&3===n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,ua(t,i)),this.matchTNodeWithReadOption(e,t,ir(t,e,i,!1,!1))}else n===Us?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ir(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ys||r===Ws||r===Us&&0===t.type)this.addMatch(t.index,-2);else{const n=ir(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function ua(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function da(e,t,n,r){return-1===n?function(e,t){return 2===e.type||3===e.type?Zi(ys,e,t):0===e.type?Xi(Us,ys,e,t):null}(t,e):-2===n?function(e,t,n){return n===ys?Zi(ys,t,e):n===Us?Xi(Us,ys,t,e):n===Ws?Ji(Ws,ys,t,e):void 0}(e,t,r):or(e,e[1],n,t)}function ha(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,o=n.matches,s=[];for(let e=0;e<o.length;e+=2){const i=o[e];s.push(i<0?null:da(t,r[i],o[e+1],n.metadata.read))}i.matches=s}return i.matches}function fa(e){const t=ln(),n=cn(),r=wn();xn(r+1);const i=ya(n,r);if(e.dirty&&en(t)===i.metadata.isStatic){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?function e(t,n,r,i){const o=t.queries.getByIndex(r),s=o.matches;if(null!==s){const a=ha(t,n,o,r);for(let t=0;t<s.length;t+=2){const r=s[t];if(r>0)i.push(a[t/2]);else{const o=s[t+1],a=n[-r];for(let t=kt;t<a.length;t++){const n=a[t];n[17]===n[3]&&e(n[1],n,o,i)}if(null!==a[9]){const t=a[9];for(let n=0;n<t.length;n++){const r=t[n];e(r[1],r,o,i)}}}}}return i}(n,t,r,[]):ha(n,t,i,r);e.reset(o),e.notifyOnChanges()}return!0}return!1}function pa(e,t,n){ga(cn(),ln(),e,t,n,!0)}function ga(e,t,n,r,i,o){e.firstCreatePass&&(ba(e,new aa(n,r,o,i),-1),o&&(e.staticViewQueries=!0)),va(e,t)}function ma(){return e=ln(),t=wn(),e[19].queries[t].queryList;var e,t}function va(e,t){const n=new ia;ti(e,t,n,n.destroy),null===t[19]&&(t[19]=new sa),t[19].queries.push(new oa(n))}function ba(e,t,n){null===e.queries&&(e.queries=new la),e.queries.track(new ca(t,n))}function ya(e,t){return e.queries.getByIndex(t)}const wa=new Be("Application Initializer");let xa=(()=>{class e{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Io(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Je(wa,8))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();const Oa=new Be("AppId"),Ca={provide:Oa,useFactory:function(){return`${_a()}${_a()}${_a()}`},deps:[]};function _a(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sa=new Be("Platform Initializer"),ja=new Be("Platform ID"),ka=new Be("appBootstrapListener");let Ta=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();const Ea=new Be("LocaleId"),Pa=new Be("DefaultCurrencyCode");class Aa{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Ma=function(e){return new ta(e)},Da=Ma,Ia=function(e){return Promise.resolve(Ma(e))},La=function(e){const t=Ma(e),n=Vt(St(e).declarations).reduce((e,t)=>{const n=Ct(t);return n&&e.push(new Xs(n)),e},[]);return new Aa(t,n)},Na=La,Ra=function(e){return Promise.resolve(La(e))};let Fa=(()=>{class e{constructor(){this.compileModuleSync=Da,this.compileModuleAsync=Ia,this.compileModuleAndAllComponentsSync=Na,this.compileModuleAndAllComponentsAsync=Ra}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();const Va=(()=>Promise.resolve(0))();function za(e){"undefined"==typeof Zone?Va.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ba{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new na(!1),this.onMicrotaskEmpty=new na(!1),this.onStable=new na(!1),this.onError=new na(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=t,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let e=De.requestAnimationFrame,t=De.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(De,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Wa(e),$a(e)},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Wa(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:t},onInvokeTask:(n,r,i,o,s,a)=>{try{return qa(e),n.invokeTask(i,o,s,a)}finally{t&&"eventTask"===o.type&&t(),Ga(e)}},onInvoke:(t,n,r,i,o,s,a)=>{try{return qa(e),t.invoke(r,i,o,s,a)}finally{Ga(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Wa(e),$a(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ba.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ba.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,Ua,Ha,Ha);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function Ha(){}const Ua={};function $a(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Wa(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function qa(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ga(e){e._nesting--,$a(e)}class Ka{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new na,this.onMicrotaskEmpty=new na,this.onStable=new na,this.onError=new na}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Ya=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ba.assertNotInAngularZone(),za(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())za(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Je(Ba))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),Za=(()=>{class e{constructor(){this._applications=new Map,Qa.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Qa.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();class Xa{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let Ja,Qa=new Xa;const el=new Be("AllowMultipleToken");class tl{constructor(e,t){this.name=e,this.token=t}}function nl(e,t,n=[]){const r="Platform: "+t,i=new Be(r);return(t=[])=>{let o=rl();if(!o||o.injector.get(el,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:no,useValue:"platform"});!function(e){if(Ja&&!Ja.destroyed&&!Ja.injector.get(el,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ja=e.get(il);const t=e.get(Sa,null);t&&t.forEach(e=>e())}(vo.create({providers:e,name:r}))}return function(e){const t=rl();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function rl(){return Ja&&!Ja.destroyed?Ja:null}let il=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Ka:("zone.js"===e?void 0:e)||new Ba({enableLongStackTrace:gr(),shouldCoalesceEventChangeDetection:t}),n}(t?t.ngZone:void 0,t&&t.ngZoneEventCoalescing||!1),r=[{provide:Ba,useValue:n}];return n.run(()=>{const t=vo.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),o=i.injector.get(hr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>al(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{o.handleError(e)}})),function(e,t,n){try{const r=n();return Io(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=i.injector.get(xa);return e.runInitializers(),e.donePromise.then(()=>(as(i.injector.get(Ea,os)||os),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=ol({},t);return function(e,t,n){const r=new ta(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(sl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${_e(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Je(vo))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();function ol(e,t){return Array.isArray(t)?t.reduce(ol,e):Object.assign(Object.assign({},e),t)}let sl=(()=>{class e{constructor(e,t,n,r,i,o){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=gr(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new x(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new x(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Ba.assertNotInAngularZone(),za(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ba.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=K(s,a.pipe(ie()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof ms?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(nt),i=n.create(vo.NULL,[],t||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Ya,null);return o&&i.injector.get(Za).registerApplication(i.location.nativeElement,o),this._loadComponent(i),gr()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;al(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ka,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),al(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Je(Ba),Je(Ta),Je(vo),Je(hr),Je(bs),Je(xa))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();function al(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ll{}class cl{}const ul={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let dl=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||ul}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n("zn8P")(t).then(e=>e[r]).then(e=>hl(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>hl(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(Je(Fa),Je(cl,8))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();function hl(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const fl=nl(null,"core",[{provide:ja,useValue:"unknown"},{provide:il,deps:[vo]},{provide:Za,deps:[]},{provide:Ta,deps:[]}]),pl=[{provide:sl,useClass:sl,deps:[Ba,Ta,vo,hr,bs,xa]},{provide:Zs,deps:[Ba],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:xa,useClass:xa,deps:[[new ce,wa]]},{provide:Fa,useClass:Fa,deps:[]},Ca,{provide:Fs,useFactory:function(){return Bs},deps:[]},{provide:Vs,useFactory:function(){return Hs},deps:[]},{provide:Ea,useFactory:function(e){return as(e=e||"undefined"!=typeof $localize&&$localize.locale||os),e},deps:[[new le(Ea),new ce,new de]]},{provide:Pa,useValue:"USD"}];let gl=(()=>{class e{constructor(e){}}return e.\u0275mod=wt({type:e}),e.\u0275inj=ge({factory:function(t){return new(t||e)(Je(sl))},providers:pl}),e})(),ml=null;function vl(){return ml}const bl=new Be("DocumentToken");let yl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({factory:wl,token:e,providedIn:"platform"}),e})();function wl(){return Je(Ol)}const xl=new Be("Location Initialized");let Ol=(()=>{class e extends yl{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=vl().getLocation(),this._history=vl().getHistory()}getBaseHrefFromDOM(){return vl().getBaseHref(this._doc)}onPopState(e){vl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){vl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){Cl()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){Cl()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Je(bl))},e.\u0275prov=pe({factory:_l,token:e,providedIn:"platform"}),e})();function Cl(){return!!window.history.pushState}function _l(){return new Ol(Je(bl))}function Sl(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function jl(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function kl(e){return e&&"?"!==e[0]?"?"+e:e}let Tl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({factory:El,token:e,providedIn:"root"}),e})();function El(e){const t=Je(bl).location;return new Al(Je(yl),t&&t.origin||"")}const Pl=new Be("appBaseHref");let Al=(()=>{class e extends Tl{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Sl(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+kl(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+kl(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+kl(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Je(yl),Je(Pl,8))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),Ml=(()=>{class e extends Tl{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Sl(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+kl(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+kl(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Je(yl),Je(Pl,8))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),Dl=(()=>{class e{constructor(e,t){this._subject=new na,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=jl(Ll(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+kl(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Ll(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+kl(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+kl(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(Je(Tl),Je(yl))},e.normalizeQueryParams=kl,e.joinWithSlash=Sl,e.stripTrailingSlash=jl,e.\u0275prov=pe({factory:Il,token:e,providedIn:"root"}),e})();function Il(){return new Dl(Je(Tl),Je(yl))}function Ll(e){return e.replace(/\/index.html$/,"")}var Nl=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});class Rl{}let Fl=(()=>{class e extends Rl{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=rs(t);if(n)return n;const r=t.split("-")[0];if(n=rs(r),n)return n;if("en"===r)return ts;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[is.PluralCase]}(t||this.locale)(e)){case Nl.Zero:return"zero";case Nl.One:return"one";case Nl.Two:return"two";case Nl.Few:return"few";case Nl.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Je(Ea))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();class Vl{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zl=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){gr()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Vl(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Bl(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new Bl(e,i);t.push(o)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(ko(Ws),ko(Us),ko(Fs))},e.\u0275dir=Ot({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class Bl{constructor(e,t){this.record=e,this.view=t}}let Hl=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new Ul,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){$l("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){$l("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(ko(Ws),ko(Us))},e.\u0275dir=Ot({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class Ul{constructor(){this.$implicit=null,this.ngIf=null}}function $l(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${_e(t)}'.`)}let Wl=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=ge({factory:function(t){return new(t||e)},providers:[{provide:Rl,useClass:Fl}]}),e})(),ql=(()=>{class e{}return e.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new Gl(Je(bl),window,Je(hr))}),e})();class Gl{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportsScrolling()){const t=this.document.getElementById(e)||this.document.getElementsByName(e)[0];t&&this.scrollToElement(t)}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const e=Kl(this.window.history)||Kl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(e){return!1}}}function Kl(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Yl extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new Yl,ml||(ml=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=Xl||(Xl=document.querySelector("base"),Xl)?Xl.getAttribute("href"):null;return null==t?null:(n=t,Zl||(Zl=document.createElement("a")),Zl.setAttribute("href",n),"/"===Zl.pathname.charAt(0)?Zl.pathname:"/"+Zl.pathname);var n}resetBaseElement(){Xl=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,e)}}let Zl,Xl=null;const Jl=new Be("TRANSITION_ID"),Ql=[{provide:wa,useFactory:function(e,t,n){return()=>{n.get(xa).donePromise.then(()=>{const n=vl();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Jl,bl,vo],multi:!0}];class ec{static init(){var e;e=new ec,Qa=e}addToWindow(e){De.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},De.getAllAngularTestabilities=()=>e.getAllTestabilities(),De.getAllAngularRootElements=()=>e.getAllRootElements(),De.frameworkStabilizers||(De.frameworkStabilizers=[]),De.frameworkStabilizers.push(e=>{const t=De.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,n--,0==n&&e(r)};t.forEach((function(e){e.whenStable(i)}))})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?vl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const tc=new Be("EventManagerPlugins");let nc=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error("No event manager plugin found for event "+e)}}return e.\u0275fac=function(t){return new(t||e)(Je(tc),Je(Ba))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();class rc{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=vl().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let ic=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),oc=(()=>{class e extends ic{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>vl().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(Je(bl))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();const sc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ac=/%COMP%/g;function lc(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?lc(e,i,n):(i=i.replace(ac,e),n.push(i))}return n}function cc(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let uc=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new dc(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case ht.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new hc(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case ht.Native:case ht.ShadowDom:return new fc(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=lc(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Je(nc),Je(oc),Je(Oa))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();class dc{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(sc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=sc[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=sc[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&Os.DashCase?e.style.setProperty(t,n,r&Os.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Os.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,cc(n)):this.eventManager.addEventListener(e,t,cc(n))}}class hc extends dc{constructor(e,t,n,r){super(e),this.component=n;const i=lc(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ac,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ac,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class fc extends dc{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===ht.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=lc(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const e=document.createElement("style");e.textContent=i[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let pc=(()=>{class e extends rc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(Je(bl))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();const gc=["alt","control","meta","shift"],mc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},bc={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let yc=(()=>{class e extends rc{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vl().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let o="";if(gc.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&vc.hasOwnProperty(t)&&(t=vc[t]))}return mc[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),gc.forEach(r=>{r!=n&&(0,bc[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(Je(bl))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();const wc=nl(fl,"browser",[{provide:ja,useValue:"browser"},{provide:Sa,useValue:function(){Yl.makeCurrent(),ec.init()},multi:!0},{provide:bl,useFactory:function(){return function(e){Wt=e}(document),document},deps:[]}]),xc=[[],{provide:no,useValue:"root"},{provide:hr,useFactory:function(){return new hr},deps:[]},{provide:tc,useClass:pc,multi:!0,deps:[bl,Ba,ja]},{provide:tc,useClass:yc,multi:!0,deps:[bl]},[],{provide:uc,useClass:uc,deps:[nc,oc,Oa]},{provide:xs,useExisting:uc},{provide:ic,useExisting:oc},{provide:oc,useClass:oc,deps:[bl]},{provide:Ya,useClass:Ya,deps:[Ba]},{provide:nc,useClass:nc,deps:[tc,Ba]},[]];let Oc=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:Oa,useValue:t.appId},{provide:Jl,useExisting:Oa},Ql]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=ge({factory:function(t){return new(t||e)(Je(e,12))},providers:xc,imports:[Wl,gl]}),e})();function Cc(...e){let t=e[e.length-1];return T(t)?(e.pop(),B(e,t)):G(e)}"undefined"!=typeof window&&window;class _c extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new C;return this._value}next(e){super.next(this._value=e)}}const Sc={};function jc(...e){let t=null,n=null;return T(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),G(e,n).lift(new kc(t))}class kc{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Tc(e,this.resultSelector))}}class Tc extends R{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Sc),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(N(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,r,i){const o=this.values,s=this.toRespond?o[n]===Sc?--this.toRespond:this.toRespond:0;o[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Ec=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),Pc=new x(e=>e.complete());function Ac(e){return e?function(e){return new x(t=>e.schedule(()=>t.complete()))}(e):Pc}function Mc(e){return new x(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?H(n):Ac()).subscribe(t)})}function Dc(){return q(1)}function Ic(e,t){return function(n){return n.lift(new Lc(e,t))}}class Lc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Nc(e,this.predicate,this.thisArg))}}class Nc extends g{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}const Rc=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Fc(e){return function(t){return 0===e?Ac():t.lift(new Vc(e))}}class Vc{constructor(e){if(this.total=e,this.total<0)throw new Rc}call(e,t){return t.subscribe(new zc(e,this.total))}}class zc extends g{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function Bc(e=$c){return t=>t.lift(new Hc(e))}class Hc{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Uc(e,this.errorFactory))}}class Uc extends g{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function $c(){return new Ec}function Wc(e=null){return t=>t.lift(new qc(e))}class qc{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Gc(e,this.defaultValue))}}class Gc extends g{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Kc(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ic((t,n)=>e(t,n,r)):b,Fc(1),n?Wc(t):Bc(()=>new Ec))}function Yc(e,t){return"function"==typeof t?n=>n.pipe(Yc((n,r)=>H(e(n,r)).pipe(F((e,i)=>t(n,e,r,i))))):t=>t.lift(new Zc(e))}class Zc{constructor(e){this.project=e}call(e,t){return t.subscribe(new Xc(e,this.project))}}class Xc extends R{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}_innerSub(e,t,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new E(this,t,n),o=this.destination;o.add(i),this.innerSubscription=N(this,e,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,r,i){this.destination.next(t)}}function Jc(e){return t=>0===e?Ac():t.lift(new Qc(e))}class Qc{constructor(e){if(this.total=e,this.total<0)throw new Rc}call(e,t){return t.subscribe(new eu(e,this.total))}}class eu extends g{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function tu(...e){return Dc()(Cc(...e))}function nu(...e){const t=e[e.length-1];return T(t)?(e.pop(),n=>tu(e,n,t)):t=>tu(e,t)}function ru(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new iu(e,t,n))}}class iu{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new ou(e,this.accumulator,this.seed,this.hasSeed))}}class ou extends g{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function su(e){return function(t){const n=new au(e),r=t.lift(n);return n.caught=r}}class au{constructor(e){this.selector=e}call(e,t){return t.subscribe(new lu(e,this.selector,this.caught))}}class lu extends R{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new E(this,void 0,void 0);this.add(r);const i=N(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function cu(e,t){return U(e,t,1)}function uu(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ic((t,n)=>e(t,n,r)):b,Jc(1),n?Wc(t):Bc(()=>new Ec))}function du(){}function hu(e,t,n){return function(r){return r.lift(new fu(e,t,n))}}class fu{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new pu(e,this.nextOrObserver,this.error,this.complete))}}class pu extends g{constructor(e,t,n,r){super(e),this._tapNext=du,this._tapError=du,this._tapComplete=du,this._tapError=n||du,this._tapComplete=r||du,i(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||du,this._tapError=t.error||du,this._tapComplete=t.complete||du)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function gu(e){return t=>t.lift(new mu(e))}class mu{constructor(e){this.callback=e}call(e,t){return t.subscribe(new vu(e,this.callback))}}class vu extends g{constructor(e,t){super(e),this.add(new h(t))}}class bu{constructor(e,t){this.id=e,this.url=t}}class yu extends bu{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wu extends bu{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xu extends bu{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ou extends bu{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Cu extends bu{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _u extends bu{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Su extends bu{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ju extends bu{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ku extends bu{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Eu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Au{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mu{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Du{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Iu{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lu="primary";class Nu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ru(e){return new Nu(e)}function Fu(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Vu(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const t=r[o],n=e[o];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function zu(e,t){const n=Object.keys(e),r=Object.keys(t);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Bu(e[i],t[i]))return!1;return!0}function Bu(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function Hu(e){return Array.prototype.concat.apply([],e)}function Uu(e){return e.length>0?e[e.length-1]:null}function $u(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Wu(e){return(t=e)&&"function"==typeof t.subscribe?e:Io(e)?H(Promise.resolve(e)):Cc(e);var t}function qu(e,t,n){return n?function(e,t){return zu(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Zu(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Bu(e[n],t[n]))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!Zu(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Zu(n.segments,i))return!1;for(const t in r.children){if(!n.children[t])return!1;if(!e(n.children[t],r.children[t]))return!1}return!0}{const e=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Zu(n.segments,e)&&!!n.children.primary&&t(n.children.primary,r,o)}}(t,n,n.segments)}(e.root,t.root)}class Gu{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ru(this.queryParams)),this._queryParamMap}toString(){return ed.serialize(this)}}class Ku{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$u(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return td(this)}}class Yu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ru(this.parameters)),this._parameterMap}toString(){return ad(this)}}function Zu(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function Xu(e,t){let n=[];return $u(e.children,(e,r)=>{r===Lu&&(n=n.concat(t(e,r)))}),$u(e.children,(e,r)=>{r!==Lu&&(n=n.concat(t(e,r)))}),n}class Ju{}class Qu{parse(e){const t=new hd(e);return new Gu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${"/"+function e(t,n){if(!t.hasChildren())return td(t);if(n){const n=t.children.primary?e(t.children.primary,!1):"",r=[];return $u(t.children,(t,n)=>{n!==Lu&&r.push(`${n}:${e(t,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Xu(t,(n,r)=>r===Lu?[e(t.children.primary,!1)]:[`${r}:${e(n,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${td(t)}/${n[0]}`:`${td(t)}/(${n.join("//")})`}}(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${rd(t)}=${rd(e)}`).join("&"):`${rd(t)}=${rd(n)}`});return t.length?"?"+t.join("&"):""}(e.queryParams)}${"string"==typeof e.fragment?"#"+encodeURI(e.fragment):""}`}}const ed=new Qu;function td(e){return e.segments.map(e=>ad(e)).join("/")}function nd(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rd(e){return nd(e).replace(/%3B/gi,";")}function id(e){return nd(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function od(e){return decodeURIComponent(e)}function sd(e){return od(e.replace(/\+/g,"%20"))}function ad(e){return`${id(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${id(e)}=${id(t[e])}`).join("")}`;var t}const ld=/^[^\/()?;=#]+/;function cd(e){const t=e.match(ld);return t?t[0]:""}const ud=/^[^=?&#]+/,dd=/^[^?&#]+/;class hd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ku([],{}):new Ku([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Ku(e,t)),n}parseSegment(){const e=cd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Yu(od(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cd(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=cd(this.remaining);e&&(n=e,this.capture(n))}e[od(t)]=od(n)}parseQueryParam(e){const t=function(e){const t=e.match(ud);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(dd);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=sd(t),i=sd(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=cd(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Lu);const o=this.parseChildren();t[i]=1===Object.keys(o).length?o.primary:new Ku([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class fd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=pd(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=pd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return gd(e,this._root).map(e=>e.value)}}function pd(e,t){if(e===t.value)return t;for(const n of t.children){const t=pd(e,n);if(t)return t}return null}function gd(e,t){if(e===t.value)return[t];for(const n of t.children){const r=gd(e,n);if(r.length)return r.unshift(t),r}return[]}class md{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vd(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class bd extends fd{constructor(e,t){super(e),this.snapshot=t,_d(this,e)}toString(){return this.snapshot.toString()}}function yd(e,t){const n=function(e,t){const n=new Od([],{},{},"",{},Lu,t,null,e.root,-1,{});return new Cd("",new md(n,[]))}(e,t),r=new _c([new Yu("",{})]),i=new _c({}),o=new _c({}),s=new _c({}),a=new _c(""),l=new wd(r,i,s,a,o,Lu,t,n.root);return l.snapshot=n.root,new bd(new md(l,[]),n)}class wd{constructor(e,t,n,r,i,o,s,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(F(e=>Ru(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(F(e=>Ru(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xd(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Od{constructor(e,t,n,r,i,o,s,a,l,c,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ru(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ru(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Cd extends fd{constructor(e,t){super(t),this.url=e,_d(this,t)}toString(){return Sd(this._root)}}function _d(e,t){t.value._routerState=e,t.children.forEach(t=>_d(e,t))}function Sd(e){const t=e.children.length>0?` { ${e.children.map(Sd).join(", ")} } `:"";return`${e.value}${t}`}function jd(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,zu(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),zu(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!zu(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),zu(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function kd(e,t){var n,r;return zu(e.params,t.params)&&Zu(n=e.url,r=t.url)&&n.every((e,t)=>zu(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||kd(e.parent,t.parent))}function Td(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Ed(e,t,n,r,i){let o={};return r&&$u(r,(e,t)=>{o[t]=Array.isArray(e)?e.map(e=>""+e):""+e}),new Gu(n.root===e?t:function e(t,n,r){const i={};return $u(t.children,(t,o)=>{i[o]=t===n?r:e(t,n,r)}),new Ku(t.segments,i)}(n.root,e,t),o,i)}class Pd{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Td(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(r&&r!==Uu(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ad{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Md(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:""+e}function Dd(e,t,n){if(e||(e=new Ku([],{})),0===e.segments.length&&e.hasChildren())return Id(e,t,n);const r=function(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const t=e.segments[i],s=Md(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Fd(s,a,t))return o;r+=2}else{if(!Fd(s,{},t))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new Ku(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new Ku(e.segments.slice(r.pathIndex),e.children),Id(t,0,i)}return r.match&&0===i.length?new Ku(e.segments,{}):r.match&&!e.hasChildren()?Ld(e,t,n):r.match?Id(e,0,i):Ld(e,t,n)}function Id(e,t,n){if(0===n.length)return new Ku(e.segments,{});{const r=function(e){return"object"==typeof e[0]&&null!==e[0]&&e[0].outlets?e[0].outlets:{[Lu]:e}}(n),i={};return $u(r,(n,r)=>{null!==n&&(i[r]=Dd(e.children[r],t,n))}),$u(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new Ku(e.segments,i)}}function Ld(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const e=Nd(n[i].outlets);return new Ku(r,e)}if(0===i&&Td(n[0])){r.push(new Yu(e.segments[t].path,n[0])),i++;continue}const o=Md(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Td(s)?(r.push(new Yu(o,Rd(s))),i+=2):(r.push(new Yu(o,{})),i++)}return new Ku(r,{})}function Nd(e){const t={};return $u(e,(e,n)=>{null!==e&&(t[n]=Ld(new Ku([],{}),0,e))}),t}function Rd(e){const t={};return $u(e,(e,n)=>t[n]=""+e),t}function Fd(e,t,n){return e==n.path&&zu(t,n.parameters)}class Vd{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),jd(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=vd(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),$u(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const r=vd(e),i=e.value.component?n.children:t;$u(r,(e,t)=>this.deactivateRouteAndItsChildren(e,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const r=vd(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Du(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Au(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(jd(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),zd(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function zd(e){jd(e.value),e.children.forEach(zd)}class Bd{constructor(e,t){this.routes=e,this.module=t}}function Hd(e){return"function"==typeof e}function Ud(e){return e instanceof Gu}const $d=Symbol("INITIAL_VALUE");function Wd(){return Yc(e=>jc(...e.map(e=>e.pipe(Jc(1),nu($d)))).pipe(ru((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==$d)return e;if(r===$d&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||Ud(r))return r}return e},e)},$d),Ic(e=>e!==$d),F(e=>Ud(e)?e:!0===e),Jc(1)))}class qd{constructor(e){this.segmentGroup=e||null}}class Gd{constructor(e){this.urlTree=e}}function Kd(e){return new x(t=>t.error(new qd(e)))}function Yd(e){return new x(t=>t.error(new Gd(e)))}function Zd(e){return new x(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Xd{constructor(e,t,n,r,i){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(nt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Lu).pipe(F(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(su(e=>{if(e instanceof Gd)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof qd)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Lu).pipe(F(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(su(e=>{if(e instanceof qd)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new Ku([],{[Lu]:e}):e;return new Gu(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(F(e=>new Ku([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return Cc({});const n=[],r=[],i={};return $u(e,(e,o)=>{const s=t(o,e).pipe(F(e=>i[o]=e));o===Lu?n.push(s):r.push(s)}),Cc.apply(null,n.concat(r)).pipe(Dc(),Kc(),F(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(e,t,r,n))}expandSegment(e,t,n,r,i,o){return Cc(...n).pipe(cu(s=>this.expandSegmentAgainstRoute(e,t,n,s,r,i,o).pipe(su(e=>{if(e instanceof qd)return Cc(null);throw e}))),uu(e=>!!e),su((e,n)=>{if(e instanceof Ec||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,r,i))return Cc(new Ku([],{}));throw new qd(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,r,i,o,s){return th(r)!==o?Kd(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):Kd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Yd(i):this.lineralizeSegments(n,i).pipe(U(n=>{const i=new Ku(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:c}=Jd(t,r,i);if(!s)return Kd(t);const u=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Yd(u):this.lineralizeSegments(r,u).pipe(U(r=>this.expandSegment(e,t,n,r.concat(i.slice(l)),o,!1)))}matchSegmentAgainstRoute(e,t,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(F(e=>(n._loadedConfig=e,new Ku(r,{})))):Cc(new Ku(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Jd(t,n,r);if(!i)return Kd(t);const a=r.slice(s);return this.getChildConfig(e,n,r).pipe(U(e=>{const n=e.module,r=e.routes,{segmentGroup:i,slicedSegments:s}=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some(n=>eh(e,t,n)&&th(n)!==Lu)}(e,n,r)?{segmentGroup:Qd(new Ku(t,function(e,t){const n={};n.primary=t;for(const r of e)""===r.path&&th(r)!==Lu&&(n[th(r)]=new Ku([],{}));return n}(r,new Ku(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some(n=>eh(e,t,n))}(e,n,r)?{segmentGroup:Qd(new Ku(e.segments,function(e,t,n,r){const i={};for(const o of n)eh(e,t,o)&&!r[th(o)]&&(i[th(o)]=new Ku([],{}));return Object.assign(Object.assign({},r),i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(F(e=>new Ku(o,e))):0===r.length&&0===s.length?Cc(new Ku(o,{})):this.expandSegment(n,i,r,s,Lu,!0).pipe(F(e=>new Ku(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Cc(new Bd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Cc(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(U(n=>n?this.configLoader.load(e.injector,t).pipe(F(e=>(t._loadedConfig=e,e))):function(e){return new x(t=>t.error(Fu(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Cc(new Bd([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;return r&&0!==r.length?Cc(r.map(r=>{const i=e.get(r);let o;if(function(e){return e&&Hd(e.canLoad)}(i))o=i.canLoad(t,n);else{if(!Hd(i))throw new Error("Invalid CanLoad guard");o=i(t,n)}return Wu(o)})).pipe(Wd(),hu(e=>{if(!Ud(e))return;const t=Fu(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),F(e=>!0===e)):Cc(!0)}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Cc(n);if(r.numberOfChildren>1||!r.children.primary)return Zd(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new Gu(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return $u(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let o={};return $u(t.children,(t,i)=>{o[i]=this.createSegmentGroup(e,t,n,r)}),new Ku(i,o)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Jd(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(t.matcher||Vu)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Qd(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new Ku(e.segments.concat(t.segments),t.children)}return e}function eh(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function th(e){return e.outlet||Lu}class nh{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class rh{constructor(e,t){this.component=e,this.route=t}}function ih(e,t,n){const r=e._root;return function e(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=vd(n);return t.children.forEach(t=>{!function(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,a=n?n.value:null,l=r?r.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Zu(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Zu(e.url,t.url)||!zu(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kd(e,t)||!zu(e.queryParams,t.queryParams);case"paramsChange":default:return!kd(e,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new nh(i)):(s.data=a.data,s._resolvedData=a._resolvedData),e(t,n,s.component?l?l.children:null:r,i,o),c&&l&&l.outlet&&l.outlet.isActivated&&o.canDeactivateChecks.push(new rh(l.outlet.component,a))}else a&&sh(n,l,o),o.canActivateChecks.push(new nh(i)),e(t,null,s.component?l?l.children:null:r,i,o)}(t,s[t.value.outlet],r,i.concat([t.value]),o),delete s[t.value.outlet]}),$u(s,(e,t)=>sh(e,r.getContext(t),o)),o}(r,t?t._root:null,n,[r.value])}function oh(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function sh(e,t,n){const r=vd(e),i=e.value;$u(r,(e,r)=>{sh(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new rh(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function ah(e,t){return null!==e&&t&&t(new Mu(e)),Cc(!0)}function lh(e,t){return null!==e&&t&&t(new Pu(e)),Cc(!0)}function ch(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Cc(r.map(r=>Mc(()=>{const i=oh(r,t,n);let o;if(function(e){return e&&Hd(e.canActivate)}(i))o=Wu(i.canActivate(t,e));else{if(!Hd(i))throw new Error("Invalid CanActivate guard");o=Wu(i(t,e))}return o.pipe(uu())}))).pipe(Wd()):Cc(!0)}function uh(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Mc(()=>Cc(t.guards.map(i=>{const o=oh(i,t.node,n);let s;if(function(e){return e&&Hd(e.canActivateChild)}(o))s=Wu(o.canActivateChild(r,e));else{if(!Hd(o))throw new Error("Invalid CanActivateChild guard");s=Wu(o(r,e))}return s.pipe(uu())})).pipe(Wd())));return Cc(i).pipe(Wd())}class dh{}class hh{constructor(e,t,n,r,i,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const e=gh(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Lu),n=new Od([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lu,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new md(n,t),i=new Cd(this.url,r);return this.inheritParamsAndData(i._root),Cc(i)}catch(e){return new x(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=xd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=Xu(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};e.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),r=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${r}'.`)}t[e.value.outlet]=e.value})}(n),n.sort((e,t)=>e.value.outlet===Lu?-1:t.value.outlet===Lu?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,r){for(const o of e)try{return this.processSegmentAgainstRoute(o,t,n,r)}catch(i){if(!(i instanceof dh))throw i}if(this.noLeftoversInUrl(t,n,r))return[];throw new dh}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo)throw new dh;if((e.outlet||Lu)!==r)throw new dh;let i,o=[],s=[];if("**"===e.path){const o=n.length>0?Uu(n).parameters:{};i=new Od(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bh(e),r,e.component,e,fh(t),ph(t)+n.length,yh(e))}else{const a=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new dh;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(t.matcher||Vu)(n,e,t);if(!r)throw new dh;const i={};$u(r.posParams,(e,t)=>{i[t]=e.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(t,e,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Od(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bh(e),r,e.component,e,fh(t),ph(t)+o.length,yh(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:c}=gh(t,o,s,a,this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const e=this.processChildren(a,l);return[new md(i,e)]}if(0===a.length&&0===c.length)return[new md(i,[])];const u=this.processSegment(a,l,c,Lu);return[new md(i,u)]}}function fh(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function ph(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function gh(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some(n=>mh(e,t,n)&&vh(n)!==Lu)}(e,n,r)){const i=new Ku(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&vh(o)!==Lu){const n=new Ku([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[vh(o)]=n}return i}(e,t,r,new Ku(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>mh(e,t,n))}(e,n,r)){const o=new Ku(e.segments,function(e,t,n,r,i,o){const s={};for(const a of r)if(mh(e,n,a)&&!i[vh(a)]){const n=new Ku([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[vh(a)]=n}return Object.assign(Object.assign({},i),s)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const o=new Ku(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function mh(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function vh(e){return e.outlet||Lu}function bh(e){return e.data||{}}function yh(e){return e.resolve||{}}function wh(e){return function(t){return t.pipe(Yc(t=>{const n=e(t);return n?H(n).pipe(F(()=>t)):H([t])}))}}class xh extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}let Oh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=mt({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Mo(0,"router-outlet")},directives:function(){return[Nh]},encapsulation:2}),e})();function Ch(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];_h(r,Sh(t,r))}}function _h(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Lu)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Ch(e.children,t)}function Sh(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:`${e}/${t.path}`:"":e}function jh(e){const t=e.children&&e.children.map(jh),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Lu&&(n.component=Oh),n}const kh=new Be("ROUTES");class Th{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(F(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new Bd(Hu(r.injector.get(kh)).map(jh),r)}))}loadModuleFactory(e){return"string"==typeof e?H(this.loader.load(e)):Wu(e()).pipe(U(e=>e instanceof rt?Cc(e):H(this.compiler.compileModuleAsync(e))))}}class Eh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ph,this.attachRef=null}}class Ph{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Eh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Ah{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Mh(e){throw e}function Dh(e,t,n){return t.parse("/")}function Ih(e,t){return Cc(null)}let Lh=(()=>{class e{constructor(e,t,n,r,i,o,s,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new j,this.errorHandler=Mh,this.malformedUriErrorHandler=Dh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ih,afterPreactivation:Ih},this.urlHandlingStrategy=new Ah,this.routeReuseStrategy=new xh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(nt),this.console=i.get(Ta);const l=i.get(Ba);this.isNgZoneEnabled=l instanceof Ba,this.resetConfig(a),this.currentUrlTree=new Gu(new Ku([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Th(o,s,e=>this.triggerEvent(new Tu(e)),e=>this.triggerEvent(new Eu(e))),this.routerState=yd(this.currentUrlTree,this.rootComponentType),this.transitions=new _c({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Ic(e=>0!==e.id),F(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Yc(e=>{let n=!1,r=!1;return Cc(e).pipe(hu(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yc(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Cc(e).pipe(Yc(e=>{const n=this.transitions.getValue();return t.next(new yu(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Pc:[e]}),Yc(e=>Promise.resolve(e)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(e){return e.pipe(Yc(e=>function(e,t,n,r,i){return new Xd(e,t,n,r,i).apply()}(r,i,o,e.extractedUrl,s).pipe(F(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t})))))}),hu(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return function(o){return o.pipe(U(o=>function(e,t,n,r,i="emptyOnly",o="legacy"){return new hh(e,t,n,r,i,o).recognize()}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(F(e=>Object.assign(Object.assign({},o),{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),hu(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),hu(e=>{const n=new Cu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=e,a=new yu(n,this.serializeUrl(r),i,o);t.next(a);const l=yd(r,this.rootComponentType).snapshot;return Cc(Object.assign(Object.assign({},e),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Pc}),wh(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),hu(e=>{const t=new _u(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),F(e=>Object.assign(Object.assign({},e),{guards:ih(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(U(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Cc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return H(e).pipe(U(e=>function(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Cc(o.map(o=>{const s=oh(o,t,i);let a;if(function(e){return e&&Hd(e.canDeactivate)}(s))a=Wu(s.canDeactivate(e,t,n,r));else{if(!Hd(s))throw new Error("Invalid CanDeactivate guard");a=Wu(s(e,t,n,r))}return a.pipe(uu())})).pipe(Wd()):Cc(!0)}(e.component,e.route,n,t,r)),uu(e=>!0!==e,!0))}(s,r,i,e).pipe(U(n=>n&&"boolean"==typeof n?function(e,t,n,r){return H(t).pipe(cu(t=>H([lh(t.route.parent,r),ah(t.route,r),uh(e,t.path,n),ch(e,t.route,n)]).pipe(Dc(),uu(e=>!0!==e,!0))),uu(e=>!0!==e,!0))}(r,o,e,t):Cc(n)),F(e=>Object.assign(Object.assign({},n),{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),hu(e=>{if(Ud(e.guardsResult)){const t=Fu(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),hu(e=>{const t=new Su(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Ic(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new xu(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),wh(e=>{if(e.guards.canActivateChecks.length)return Cc(e).pipe(hu(e=>{const t=new ju(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Yc(e=>{let n=!1;return Cc(e).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(e){return e.pipe(U(e=>{const{targetSnapshot:t,guards:{canActivateChecks:n}}=e;if(!n.length)return Cc(e);let o=0;return H(n).pipe(cu(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return Cc({});const o={};return H(i).pipe(U(i=>function(e,t,n,r){const i=oh(e,t,r);return Wu(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe(hu(e=>{o[i]=e}))),Fc(1),U(()=>Object.keys(o).length===i.length?Cc(o):Pc))}(e._resolve,e,t,r).pipe(F(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),xd(e,n).resolve),null)))}(e.route,t,r,i)),hu(()=>o++),Fc(1),U(t=>o===n.length?Cc(e):Pc))}))}),hu({next:()=>n=!0,complete:()=>{if(!n){const n=new xu(e.id,this.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");t.next(n),e.resolve(!1)}}}));var r,i}),hu(e=>{const t=new ku(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),wh(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),F(e=>{const t=function(e,t,n){const r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(t,n,r){return n.children.map(n=>{for(const i of r.children)if(t.shouldReuseRoute(i.value.snapshot,n.value))return e(t,n,i);return e(t,n)})}(t,n,r);return new md(i,o)}{const r=t.retrieve(n.value);if(r){const e=r.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,e),e}{const r=new wd(new _c((i=n.value).url),new _c(i.params),new _c(i.queryParams),new _c(i.fragment),new _c(i.data),i.outlet,i.component,i),o=n.children.map(n=>e(t,n));return new md(r,o)}}var i}(e,t._root,n?n._root:void 0);return new bd(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),hu(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=e=>this.triggerEvent(e),F(e=>(new Vd(o,e.targetRouterState,e.currentRouterState,s).activate(i),e))),hu({next(){n=!0},complete(){n=!0}}),gu(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new xu(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null}),su(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Ud(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new xu(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new Ou(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(o){e.reject(o)}}var i;return Pc}));var i,o,s}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Ch(e),this.config=e.map(jh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=t;gr()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,c=a?this.currentUrlTree.fragment:i;let u=null;if(s)switch(s){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}else u=o?this.currentUrlTree.queryParams:r||null;return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,r,i){if(0===n.length)return Ed(t.root,t.root,t,r,i);const o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Pd(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return $u(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Pd(n,t,r)}(n);if(o.toRoot())return Ed(t.root,new Ku([],{}),t,r,i);const s=function(e,t,n){if(e.isAbsolute)return new Ad(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new Ad(e,e===t.root,0)}const r=Td(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ad(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(o,t,e),a=s.processChildren?Id(s.segmentGroup,s.index,o.commands):Dd(s.segmentGroup,s.index,o.commands);return Ed(s.segmentGroup,a,t,r,i)}(l,this.currentUrlTree,e,u,c)}navigateByUrl(e,t={skipLocationChange:!1}){gr()&&this.isNgZoneEnabled&&!Ba.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Ud(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(Ud(e))return qu(this.currentUrlTree,e,t);const n=this.parseUrl(e);return qu(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new wu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){const o=this.getTransition(),s="imperative"!==t&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===e.toString();if(s&&a)return Promise.resolve(!0);let l,c,u;i?(l=i.resolve,c=i.reject,u=i.promise):u=new Promise((e,t)=>{l=e,c=t});const d=++this.navigationId;return this.setTransition({id:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,r){const i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return e.\u0275fac=function(t){return new(t||e)(Je(to),Je(Ju),Je(Ph),Je(Dl),Je(vo),Je(ll),Je(Fa),Je(void 0))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),Nh=(()=>{class e{constructor(e,t,n,r,i){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new na,this.deactivateEvents=new na,this.name=r||Lu,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Rh(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(ko(Ph),ko(Ws),ko(bs),("name",function(e,t){const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(zn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(un(),"name")),ko(Qi))},e.\u0275dir=Ot({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Rh{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===wd?this.route:e===Ph?this.childContexts:this.parent.get(e,t)}}class Fh{}class Vh{preload(e,t){return Cc(null)}}let zh=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new Th(t,n,t=>e.triggerEvent(new Tu(t)),t=>e.triggerEvent(new Eu(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ic(e=>e instanceof wu),cu(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(nt);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return H(n).pipe(q(),F(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(U(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(Je(Lh),Je(ll),Je(Fa),Je(vo),Je(Fh))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),Bh=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof yu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof wu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Iu&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Iu(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Je(Lh),Je(ql),Je(void 0))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();const Hh=new Be("ROUTER_CONFIGURATION"),Uh=new Be("ROUTER_FORROOT_GUARD"),$h=[Dl,{provide:Ju,useClass:Qu},{provide:Lh,useFactory:function(e,t,n,r,i,o,s,a={},l,c){const u=new Lh(null,e,t,n,r,i,o,Hu(s));if(l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),a.errorHandler&&(u.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(u.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const e=vl();u.events.subscribe(t=>{e.logGroup("Router Event: "+t.constructor.name),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return a.onSameUrlNavigation&&(u.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(u.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(u.relativeLinkResolution=a.relativeLinkResolution),u},deps:[Ju,Ph,Dl,vo,ll,Fa,kh,Hh,[class{},new ce],[class{},new ce]]},Ph,{provide:wd,useFactory:function(e){return e.routerState.root},deps:[Lh]},{provide:ll,useClass:dl},zh,Vh,class{preload(e,t){return t().pipe(su(()=>Cc(null)))}},{provide:Hh,useValue:{enableTracing:!1}}];function Wh(){return new tl("Router",Lh)}let qh=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[$h,Zh(t),{provide:Uh,useFactory:Yh,deps:[[Lh,new ce,new de]]},{provide:Hh,useValue:n||{}},{provide:Tl,useFactory:Kh,deps:[yl,[new le(Pl),new ce],Hh]},{provide:Bh,useFactory:Gh,deps:[Lh,ql,Hh]},{provide:Fh,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Vh},{provide:tl,multi:!0,useFactory:Wh},[Xh,{provide:wa,multi:!0,useFactory:Jh,deps:[Xh]},{provide:ef,useFactory:Qh,deps:[Xh]},{provide:ka,multi:!0,useExisting:ef}]]}}static forChild(t){return{ngModule:e,providers:[Zh(t)]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=ge({factory:function(t){return new(t||e)(Je(Uh,8),Je(Lh,8))}}),e})();function Gh(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Bh(e,t,n)}function Kh(e,t,n={}){return n.useHash?new Ml(e,t):new Al(e,t)}function Yh(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Zh(e){return[{provide:bo,multi:!0,useValue:e},{provide:kh,multi:!0,useValue:e}]}let Xh=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new j}appInitializer(){return this.injector.get(xl,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Lh),r=this.injector.get(Hh);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))e(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Cc(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(Hh),n=this.injector.get(zh),r=this.injector.get(Bh),i=this.injector.get(Lh),o=this.injector.get(sl);e===o.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}return e.\u0275fac=function(t){return new(t||e)(Je(vo))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();function Jh(e){return e.appInitializer.bind(e)}function Qh(e){return e.bootstrapListener.bind(e)}const ef=new Be("Router Initializer"),tf=[{id:"test",type:"Block",options:{test:"1",test2:"1"},bindings:{test:'returnValue(state.test + " value test"); setTimeout(() => console.log("timeout"), 2000);',test2:'console.log(state.test); console.log(state["test"]); const test2 = "value test 2"; returnValue(test2);'},actions:{doSomething:'state.test = "something done"; console.log("action done");'},style:{large:{"background-color":"red",border:"3px solid black",perspective:"500px"}},class:["test-class"],childrenContainerLayout:"row",children:[{type:"Block",options:{test:"1.1",test2:"1.1"},bindings:{test:'returnValue(fetch("https://jsonplaceholder.typicode.com/todos/1").then(res => res.json()).then(json => JSON.stringify(json)));'},script:'state.subscribeOnChanges((changes) => fetch("https://jsonplaceholder.typicode.com/todos/1").then(res => res.json()).then(json => JSON.stringify(json)).then(r => parent.state.test = r));',children:[{type:"Block",options:{test:"1.1.1",test2:"1.1.1"},actions:{doSomething:'parent.state.test = "child set me";',mouseenter:"state.test = event.name;",mouseleave:"state.test = event.name;"},style:{large:{"background-color":"blue",border:"3px solid yellow"}}},{type:"Text",id:"text1",options:{text:"test text block"},style:{large:{position:"relative"}}}]},{type:"Box",style:{large:{position:"relative","background-color":"purple",padding:"30px",margin:"30px",overflow:"hidden"}},animationActions:{mousePos:{timelines:{x:[{key:0,effects:[{type:"move",target:"#shiny",options:{x:"100%"}},{type:"rotate",target:"self",options:{y:"-5deg"}}]},{key:1,effects:[{type:"move",target:"#shiny",options:{x:"0%"}},{type:"rotate",target:"self",options:{y:"5deg"}}]}],y:[{key:0,effects:[{type:"move",target:"#shiny",options:{y:"100%"}},{type:"rotate",target:"self",options:{x:"5deg"}}]},{key:1,effects:[{type:"move",target:"#shiny",options:{y:"0%"}},{type:"rotate",target:"self",options:{x:"-5deg"}}]}]}}},children:[{type:"Block",script:'state.test = "script works"; console.log("executing script");',bindings:{test:'returnValue(parent.state.onChange("test").pipe(rxjs.map(change => "listen parent: "+change.nextValue)))'},actions:{mousemove:'state.test = event.name + " | screenX:" + event.value.screenX + " | screenY:" + event.value.screenY;'},options:{test:"1.2",test2:"1.2"}},{type:"Box",id:"shiny",style:{large:{"background-color":"white",position:"absolute",width:"300px",height:"300px","margin-top":"-150px","margin-left":"-150px","border-radius":"150px",opacity:.3,filter:"blur(1.5rem)"}}}]}]}];function nf(e,t){return n=>n.lift(new rf(e,t))}class rf{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new of(e,this.compare,this.keySelector))}}class of extends g{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}class sf{constructor(e){this.state=e,this.store=new _c(e)}select(e){return this.store.asObservable().pipe(F(e),nf())}getValue(){return this.store.getValue()}set(e){this.store.next(e)}update(e){this.store.next(Object.assign({},this.getValue(),e))}}let af=(()=>{class e{constructor(){this.store=new sf({})}blocksChanges(e){return this.store.select(t=>t[e]).pipe(nf())}getBlock(e){return this.store.getValue()[e]}register(e,t){this.store.update({[e]:t})}unregister(e){const t=Object.assign({},this.store.getValue());delete t[e],this.store.set(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();function lf(e,t){return e.sort((e,n)=>{const r=t(e),i=t(n);return r>i?1:r===i?0:-1})}n("0d2Z"),n("KtHC"),n("kvMl");const cf=new Be("RXSHAPER_OPTIONS");let uf=(()=>{class e{constructor(e,t){this.parent=e,this.types={},this.extensions=[],this.wrappers=[],t.forEach(e=>this.addOptions(e))}addOptions(e){e.types&&this.addTypes(e.types),e.extensions&&this.addExtensions(e.extensions),e.wrappers&&this.addWrappers(e.wrappers)}addTypes(e){e.forEach(e=>this.addType(e))}addType(e){this.types[e.name]=e}addExtensions(e){e.forEach(e=>this.addExtension(e))}addExtension(e){const t=this.extensions.find(t=>t.name===e.name);t?this.extensions.splice(this.extensions.indexOf(t),1,e):this.extensions.push(e)}addWrappers(e){e.forEach(e=>this.addWrapper(e))}addWrapper(e){const t=this.wrappers.find(t=>t.name===e.name);t?this.wrappers.splice(this.wrappers.indexOf(t),1,e):this.wrappers.push(e)}}return e.\u0275fac=function(t){return new(t||e)(Je(e,12),Je(cf))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),df=(()=>{class e{constructor(e){this.config=e,this.extensions=lf(this.config.extensions,e=>e.priority)}getComponentTypes(){return this.config.types}getComponentType(e){if(!this.config.types[e])throw new Error(`[RxShaper Error] The type "${e}" could not be found. Please make sure that is registered through the RxShaperModule declaration.`);return this.config.types[e]}getExtensions(){return this.config.extensions}getExtension(e){const t=this.config.extensions.find(t=>t.name===e);if(!t)throw new Error(`[RxShaper Error] The extension "${e}" could not be found. Please make sure that is registered through the RxShaperModule declaration.`);return t.extension}}return e.OutputsStore=[],e.InputsStore=[],e.Components=[],e.\u0275fac=function(t){return new(t||e)(Je(uf))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();new Be("BUILDER");class hf extends h{constructor(e,t){super()}schedule(e,t=0){return this}}class ff extends hf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class pf extends ff{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}let gf=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class mf extends gf{constructor(e,t=gf.now){super(e,()=>mf.delegate&&mf.delegate!==this?mf.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return mf.delegate&&mf.delegate!==this?mf.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class vf extends mf{}const bf=new vf(pf);function yf(e,t){return new x(t?n=>t.schedule(wf,0,{error:e,subscriber:n}):t=>t.error(e))}function wf({error:e,subscriber:t}){t.error(e)}let xf=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Cc(this.value);case"E":return yf(this.error);case"C":return Ac()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();function Of(e,t=0){return function(n){return n.lift(new Cf(e,t))}}class Cf{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new _f(e,this.scheduler,this.delay))}}class _f extends g{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(_f.dispatch,this.delay,new Sf(e,this.destination)))}_next(e){this.scheduleMessage(xf.createNext(e))}_error(e){this.scheduleMessage(xf.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(xf.createComplete()),this.unsubscribe()}}class Sf{constructor(e,t){this.notification=e,this.destination=t}}class jf extends j{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new kf(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new C;if(this.isStopped||this.hasError?o=h.EMPTY:(this.observers.push(e),o=new _(this,e)),r&&e.add(e=new _f(e,r)),t)for(let s=0;s<i&&!e.closed;s++)e.next(n[s]);else for(let s=0;s<i&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||bf).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r}}class kf{constructor(e,t){this.time=e,this.value=t}}function Tf(e,t,n,r){return i(n)&&(r=n,n=void 0),r?Tf(e,t,n).pipe(F(e=>c(e)?r(...e):r(e))):new x(r=>{!function e(t,n,r,i,o){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(n,r,o),s=()=>e.removeEventListener(n,r,o)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){const e=t;t.on(n,r),s=()=>e.off(n,r)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){const e=t;t.addListener(n,r),s=()=>e.removeListener(n,r)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,a=t.length;s<a;s++)e(t[s],n,r,i,o)}i.add(s)}(e,t,(function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),r,n)})}class Ef extends ff{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}class Pf extends mf{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}const Af=new Pf(Ef);n("4Gpi");const Mf=new mf(ff),Df={leading:!0,trailing:!1};function If(e,t=Df){return n=>n.lift(new Lf(e,t.leading,t.trailing))}class Lf{constructor(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}call(e,t){return t.subscribe(new Nf(e,this.durationSelector,this.leading,this.trailing))}}class Nf extends R{constructor(e,t,n,r){super(e),this.destination=e,this.durationSelector=t,this._leading=n,this._trailing=r,this._hasValue=!1}_next(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))}send(){const{_hasValue:e,_sendValue:t}=this;e&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=null}throttle(e){const t=this.tryDurationSelector(e);t&&this.add(this._throttled=N(this,t))}tryDurationSelector(e){try{return this.durationSelector(e)}catch(t){return this.destination.error(t),null}}throttlingDone(){const{_throttled:e,_trailing:t}=this;e&&e.unsubscribe(),this._throttled=null,t&&this.send()}notifyNext(e,t,n,r,i){this.throttlingDone()}notifyComplete(){this.throttlingDone()}}function Rf(e,t=Mf,n=Df){return r=>r.lift(new Ff(e,t,n.leading,n.trailing))}class Ff{constructor(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}call(e,t){return t.subscribe(new Vf(e,this.duration,this.scheduler,this.leading,this.trailing))}}class Vf extends g{constructor(e,t,n,r,i){super(e),this.duration=t,this.scheduler=n,this.leading=r,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}_next(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(zf,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}function zf(e){const{subscriber:t}=e;t.clearThrottle()}function Bf(e){return t=>t.lift(new Hf(e))}class Hf{constructor(e){this.notifier=e}call(e,t){const n=new Uf(e),r=N(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}class Uf extends R{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,n,r,i){this.seenValue=!0,this.complete()}notifyComplete(){}}function $f(e){return function(t){return t.lift(new Wf(e))}}class Wf{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new qf(e,this.durationSelector))}}class qf extends R{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:t}=this;n=t(e)}catch(t){return this.destination.error(t)}const r=N(this,n);!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,t,n,r){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Gf(e){return!c(e)&&e-parseFloat(e)+1>=0}function Kf(e){const{index:t,period:n,subscriber:r}=e;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Yf(e,t=Mf){return $f(()=>function(e=0,t,n){let r=-1;return Gf(t)?r=Number(t)<1?1:Number(t):T(t)&&(n=t),T(n)||(n=Mf),new x(t=>{const i=Gf(e)?e:+e-n.now();return n.schedule(Kf,i,{index:0,period:r,subscriber:t})})}(e,t))}function Zf(e){return function(t){return t.lift(new Xf(e))}}class Xf{constructor(e){this.closingNotifier=e}call(e,t){return t.subscribe(new Jf(e,this.closingNotifier))}}class Jf extends R{constructor(e,t){super(e),this.buffer=[],this.add(N(this,t))}_next(e){this.buffer.push(e)}notifyNext(e,t,n,r,i){const o=this.buffer;this.buffer=[],this.destination.next(o)}}function Qf(e,t=null){return function(n){return n.lift(new ep(e,t))}}class ep{constructor(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?np:tp}call(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))}}class tp extends g{constructor(e,t){super(e),this.bufferSize=t,this.buffer=[]}_next(e){const t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])}_complete(){const e=this.buffer;e.length>0&&this.destination.next(e),super._complete()}}class np extends g{constructor(e,t,n){super(e),this.bufferSize=t,this.startBufferEvery=n,this.buffers=[],this.count=0}_next(e){const{bufferSize:t,startBufferEvery:n,buffers:r,count:i}=this;this.count++,i%n==0&&r.push([]);for(let o=r.length;o--;){const n=r[o];n.push(e),n.length===t&&(r.splice(o,1),this.destination.next(n))}}_complete(){const{buffers:e,destination:t}=this;for(;e.length>0;){let n=e.shift();n.length>0&&t.next(n)}super._complete()}}function rp(e){let t=arguments.length,n=Mf;T(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);let r=null;t>=2&&(r=arguments[1]);let i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),function(t){return t.lift(new ip(e,r,i,n))}}class ip{constructor(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}call(e,t){return t.subscribe(new sp(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class op{constructor(){this.buffer=[]}}class sp extends g{constructor(e,t,n,r,i){super(e),this.bufferTimeSpan=t,this.bufferCreationInterval=n,this.maxBufferSize=r,this.scheduler=i,this.contexts=[];const o=this.openContext();if(this.timespanOnly=null==n||n<0,this.timespanOnly)this.add(o.closeAction=i.schedule(ap,t,{subscriber:this,context:o,bufferTimeSpan:t}));else{const e={bufferTimeSpan:t,bufferCreationInterval:n,subscriber:this,scheduler:i};this.add(o.closeAction=i.schedule(cp,t,{subscriber:this,context:o})),this.add(i.schedule(lp,n,e))}}_next(e){const t=this.contexts,n=t.length;let r;for(let i=0;i<n;i++){const n=t[i],o=n.buffer;o.push(e),o.length==this.maxBufferSize&&(r=n)}r&&this.onBufferFull(r)}_error(e){this.contexts.length=0,super._error(e)}_complete(){const{contexts:e,destination:t}=this;for(;e.length>0;){const n=e.shift();t.next(n.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(e){this.closeContext(e);const t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();const t=this.bufferTimeSpan;this.add(e.closeAction=this.scheduler.schedule(ap,t,{subscriber:this,context:e,bufferTimeSpan:t}))}}openContext(){const e=new op;return this.contexts.push(e),e}closeContext(e){this.destination.next(e.buffer);const t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)}}function ap(e){const t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function lp(e){const{bufferCreationInterval:t,bufferTimeSpan:n,subscriber:r,scheduler:i}=e,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(cp,n,{subscriber:r,context:o})),this.schedule(e,t))}function cp(e){const{subscriber:t,context:n}=e;t.closeContext(n)}function up(e,t){return function(n){return n.lift(new dp(e,t))}}class dp{constructor(e,t){this.openings=e,this.closingSelector=t}call(e,t){return t.subscribe(new hp(e,this.openings,this.closingSelector))}}class hp extends R{constructor(e,t,n){super(e),this.openings=t,this.closingSelector=n,this.contexts=[],this.add(N(this,t))}_next(e){const t=this.contexts,n=t.length;for(let r=0;r<n;r++)t[r].buffer.push(e)}_error(e){const t=this.contexts;for(;t.length>0;){const e=t.shift();e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,super._error(e)}_complete(){const e=this.contexts;for(;e.length>0;){const t=e.shift();this.destination.next(t.buffer),t.subscription.unsubscribe(),t.buffer=null,t.subscription=null}this.contexts=null,super._complete()}notifyNext(e,t,n,r,i){e?this.closeBuffer(e):this.openBuffer(t)}notifyComplete(e){this.closeBuffer(e.context)}openBuffer(e){try{const t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(t){this._error(t)}}closeBuffer(e){const t=this.contexts;if(t&&e){const{buffer:n,subscription:r}=e;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}}trySubscribe(e){const t=this.contexts,n=new h,r={buffer:[],subscription:n};t.push(r);const i=N(this,e,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))}}function fp(e){return function(t){return t.lift(new pp(e))}}class pp{constructor(e){this.closingSelector=e}call(e,t){return t.subscribe(new gp(e,this.closingSelector))}}class gp extends R{constructor(e,t){super(e),this.closingSelector=t,this.subscribing=!1,this.openBuffer()}_next(e){this.buffer.push(e)}_complete(){const e=this.buffer;e&&this.destination.next(e),super._complete()}_unsubscribe(){this.buffer=null,this.subscribing=!1}notifyNext(e,t,n,r,i){this.openBuffer()}notifyComplete(){this.subscribing?this.complete():this.openBuffer()}openBuffer(){let e,{closingSubscription:t}=this;t&&(this.remove(t),t.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];try{const{closingSelector:t}=this;e=t()}catch(n){return this.error(n)}t=new h,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(N(this,e)),this.subscribing=!1}}function mp(e){return t=>t.lift(new kc(e))}function vp(...e){let t=null;return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0].slice()),n=>n.lift.call(H([n,...e]),new kc(t))}function bp(...e){return t=>t.lift.call(tu(t,...e))}function yp(e,t){return cu(()=>e,t)}function wp(e){return t=>t.lift(new xp(e,t))}class xp{constructor(e,t){this.predicate=e,this.source=t}call(e,t){return t.subscribe(new Op(e,this.predicate,this.source))}}class Op extends g{constructor(e,t,n){super(e),this.predicate=t,this.source=n,this.count=0,this.index=0}_next(e){this.predicate?this._tryPredicate(e):this.count++}_tryPredicate(e){let t;try{t=this.predicate(e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t&&this.count++}_complete(){this.destination.next(this.count),this.destination.complete()}}function Cp(e){return t=>t.lift(new _p(e))}class _p{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new Sp(e,this.durationSelector))}}class Sp extends R{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1,this.durationSubscription=null}_next(e){try{const t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(t){this.destination.error(t)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(e,t){let n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),n=N(this,t),n&&!n.closed&&this.add(this.durationSubscription=n)}notifyNext(e,t,n,r,i){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const e=this.value,t=this.durationSubscription;t&&(this.durationSubscription=null,t.unsubscribe(),this.remove(t)),this.value=null,this.hasValue=!1,super._next(e)}}}function jp(e,t=Mf){return n=>n.lift(new kp(e,t))}class kp{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new Tp(e,this.dueTime,this.scheduler))}}class Tp extends g{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ep,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function Ep(e){e.debouncedNext()}function Pp(e){return e instanceof Date&&!isNaN(+e)}function Ap(e,t=Mf){const n=Pp(e)?+e-t.now():Math.abs(e);return e=>e.lift(new Mp(n,t))}class Mp{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new Dp(e,this.delay,this.scheduler))}}class Dp extends g{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,r=e.scheduler,i=e.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const t=Math.max(0,n[0].time-r.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(Dp.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new Ip(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(xf.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(xf.createComplete()),this.unsubscribe()}}class Ip{constructor(e,t){this.time=e,this.notification=t}}function Lp(e,t){return t?n=>new Fp(n,t).lift(new Np(e)):t=>t.lift(new Np(e))}class Np{constructor(e){this.delayDurationSelector=e}call(e,t){return t.subscribe(new Rp(e,this.delayDurationSelector))}}class Rp extends R{constructor(e,t){super(e),this.delayDurationSelector=t,this.completed=!1,this.delayNotifierSubscriptions=[],this.index=0}notifyNext(e,t,n,r,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()}notifyError(e,t){this._error(e)}notifyComplete(e){const t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()}_next(e){const t=this.index++;try{const n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(n){this.destination.error(n)}}_complete(){this.completed=!0,this.tryComplete(),this.unsubscribe()}removeSubscription(e){e.unsubscribe();const t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue}tryDelay(e,t){const n=N(this,e,t);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))}tryComplete(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}class Fp extends x{constructor(e,t){super(),this.source=e,this.subscriptionDelay=t}_subscribe(e){this.subscriptionDelay.subscribe(new Vp(e,this.source))}}class Vp extends g{constructor(e,t){super(),this.parent=e,this.source=t,this.sourceSubscribed=!1}_next(e){this.subscribeToSource()}_error(e){this.unsubscribe(),this.parent.error(e)}_complete(){this.unsubscribe(),this.subscribeToSource()}subscribeToSource(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}function zp(){return function(e){return e.lift(new Bp)}}class Bp{call(e,t){return t.subscribe(new Hp(e))}}class Hp extends g{constructor(e){super(e)}_next(e){e.observe(this.destination)}}function Up(e,t){return n=>n.lift(new $p(e,t))}class $p{constructor(e,t){this.keySelector=e,this.flushes=t}call(e,t){return t.subscribe(new Wp(e,this.keySelector,this.flushes))}}class Wp extends R{constructor(e,t,n){super(e),this.keySelector=t,this.values=new Set,n&&this.add(N(this,n))}notifyNext(e,t,n,r,i){this.values.clear()}notifyError(e,t){this._error(e)}_next(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)}_useKeySelector(e){let t;const{destination:n}=this;try{t=this.keySelector(e)}catch(r){return void n.error(r)}this._finalizeNext(t,e)}_finalizeNext(e,t){const{values:n}=this;n.has(e)||(n.add(e),this.destination.next(t))}}function qp(e,t){return nf((n,r)=>t?t(n[e],r[e]):n[e]===r[e])}function Gp(e,t){if(e<0)throw new Rc;const n=arguments.length>=2;return r=>r.pipe(Ic((t,n)=>n===e),Jc(1),n?Wc(t):Bc(()=>new Rc))}function Kp(...e){return t=>tu(t,Cc(...e))}function Yp(e,t){return n=>n.lift(new Zp(e,t,n))}class Zp{constructor(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}call(e,t){return t.subscribe(new Xp(e,this.predicate,this.thisArg,this.source))}}class Xp extends g{constructor(e,t,n,r){super(e),this.predicate=t,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Jp(){return e=>e.lift(new Qp)}class Qp{call(e,t){return t.subscribe(new eg(e))}}class eg extends R{constructor(e){super(e),this.hasCompleted=!1,this.hasSubscription=!1}_next(e){this.hasSubscription||(this.hasSubscription=!0,this.add(N(this,e)))}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}notifyComplete(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function tg(e,t){return t?n=>n.pipe(tg((n,r)=>H(e(n,r)).pipe(F((e,i)=>t(n,e,r,i))))):t=>t.lift(new ng(e))}class ng{constructor(e){this.project=e}call(e,t){return t.subscribe(new rg(e,this.project))}}class rg extends R{constructor(e,t){super(e),this.project=t,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(e){this.hasSubscription||this.tryNext(e)}tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(t,e,n)}_innerSub(e,t,n){const r=new E(this,t,n),i=this.destination;i.add(r);const o=N(this,e,void 0,void 0,r);o!==r&&i.add(o)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e){this.destination.error(e)}notifyComplete(e){this.destination.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function ig(e,t=Number.POSITIVE_INFINITY,n){return t=(t||0)<1?Number.POSITIVE_INFINITY:t,r=>r.lift(new og(e,t,n))}class og{constructor(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}call(e,t){return t.subscribe(new sg(e,this.project,this.concurrent,this.scheduler))}}class sg extends R{constructor(e,t,n,r){super(e),this.project=t,this.concurrent=n,this.scheduler=r,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}static dispatch(e){const{subscriber:t,result:n,value:r,index:i}=e;t.subscribeToProjection(n,r,i)}_next(e){const t=this.destination;if(t.closed)return void this._complete();const n=this.index++;if(this.active<this.concurrent){t.next(e);try{const{project:t}=this,r=t(e,n);this.scheduler?this.destination.add(this.scheduler.schedule(sg.dispatch,0,{subscriber:this,result:r,value:e,index:n})):this.subscribeToProjection(r,e,n)}catch(r){t.error(r)}}else this.buffer.push(e)}subscribeToProjection(e,t,n){this.active++,this.destination.add(N(this,e,t,n))}_complete(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,i){this._next(t)}notifyComplete(e){const t=this.buffer;this.destination.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}function ag(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return n=>n.lift(new lg(e,n,!1,t))}class lg{constructor(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}call(e,t){return t.subscribe(new cg(e,this.predicate,this.source,this.yieldIndex,this.thisArg))}}class cg extends g{constructor(e,t,n,r,i){super(e),this.predicate=t,this.source=n,this.yieldIndex=r,this.thisArg=i,this.index=0}notifyComplete(e){const t=this.destination;t.next(e),t.complete(),this.unsubscribe()}_next(e){const{predicate:t,thisArg:n}=this,r=this.index++;try{t.call(n||this,e,r,this.source)&&this.notifyComplete(this.yieldIndex?r:e)}catch(i){this.destination.error(i)}}_complete(){this.notifyComplete(this.yieldIndex?-1:void 0)}}function ug(e,t){return n=>n.lift(new lg(e,n,!0,t))}function dg(e,t,n,r){return i=>i.lift(new hg(e,t,n,r))}class hg{constructor(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}call(e,t){return t.subscribe(new fg(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class fg extends g{constructor(e,t,n,r,i){super(e),this.keySelector=t,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(e){let t;try{t=this.keySelector(e)}catch(n){return void this.error(n)}this._group(e,t)}_group(e,t){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(o){this.error(o)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new j,n.set(t,i);const e=new gg(t,i,this);if(this.destination.next(e),this.durationSelector){let e;try{e=this.durationSelector(new gg(t,i))}catch(o){return void this.error(o)}this.add(e.subscribe(new pg(t,i,this)))}}i.closed||i.next(r)}_error(e){const t=this.groups;t&&(t.forEach((t,n)=>{t.error(e)}),t.clear()),this.destination.error(e)}_complete(){const e=this.groups;e&&(e.forEach((e,t)=>{e.complete()}),e.clear()),this.destination.complete()}removeGroup(e){this.groups.delete(e)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class pg extends g{constructor(e,t,n){super(t),this.key=e,this.group=t,this.parent=n}_next(e){this.complete()}_unsubscribe(){const{parent:e,key:t}=this;this.key=this.parent=null,e&&e.removeGroup(t)}}class gg extends x{constructor(e,t,n){super(),this.key=e,this.groupSubject=t,this.refCountSubscription=n}_subscribe(e){const t=new h,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&t.add(new mg(n)),t.add(r.subscribe(e)),t}}class mg extends h{constructor(e){super(),this.parent=e,e.count++}unsubscribe(){const e=this.parent;e.closed||this.closed||(super.unsubscribe(),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())}}function vg(){return function(e){return e.lift(new bg)}}class bg{call(e,t){return t.subscribe(new yg(e))}}class yg extends g{_next(e){}}function wg(){return e=>e.lift(new xg)}class xg{call(e,t){return t.subscribe(new Og(e))}}class Og extends g{constructor(e){super(e)}notifyComplete(e){const t=this.destination;t.next(e),t.complete()}_next(e){this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Cg(e){return t=>t.lift(new _g(e))}class _g{constructor(e){this.value=e}call(e,t){return t.subscribe(new Sg(e,this.value))}}class Sg extends g{constructor(e,t){super(e),this.value=t}_next(e){this.destination.next(this.value)}}function jg(){return function(e){return e.lift(new kg)}}class kg{call(e,t){return t.subscribe(new Tg(e))}}class Tg extends g{constructor(e){super(e)}_next(e){this.destination.next(xf.createNext(e))}_error(e){const t=this.destination;t.next(xf.createError(e)),t.complete()}_complete(){const e=this.destination;e.next(xf.createComplete()),e.complete()}}function Eg(e,t){return arguments.length>=2?function(n){return y(ru(e,t),Fc(1),Wc(t))(n)}:function(t){return y(ru((t,n,r)=>e(t,n,r+1)),Fc(1))(t)}}function Pg(e){return Eg("function"==typeof e?(t,n)=>e(t,n)>0?t:n:(e,t)=>e>t?e:t)}function Ag(...e){return t=>t.lift.call(K(t,...e))}function Mg(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?U(()=>e,t,n):("number"==typeof t&&(n=t),U(()=>e,n))}function Dg(e,t,n=Number.POSITIVE_INFINITY){return r=>r.lift(new Ig(e,t,n))}class Ig{constructor(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}call(e,t){return t.subscribe(new Lg(e,this.accumulator,this.seed,this.concurrent))}}class Lg extends R{constructor(e,t,n,r){super(e),this.accumulator=t,this.acc=n,this.concurrent=r,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){if(this.active<this.concurrent){const n=this.index++,r=this.destination;let i;try{const{accumulator:t}=this;i=t(this.acc,e,n)}catch(t){return r.error(t)}this.active++,this._innerSub(i,e,n)}else this.buffer.push(e)}_innerSub(e,t,n){const r=new E(this,t,n),i=this.destination;i.add(r);const o=N(this,e,void 0,void 0,r);o!==r&&i.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}notifyNext(e,t,n,r,i){const{destination:o}=this;this.acc=t,this.hasValue=!0,o.next(t)}notifyComplete(e){const t=this.buffer;this.destination.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}function Ng(e){return Eg("function"==typeof e?(t,n)=>e(t,n)<0?t:n:(e,t)=>e<t?e:t)}function Rg(...e){return 1===e.length&&c(e[0])&&(e=e[0]),t=>t.lift(new Fg(e))}class Fg{constructor(e){this.nextSources=e}call(e,t){return t.subscribe(new Vg(e,this.nextSources))}}class Vg extends R{constructor(e,t){super(e),this.destination=e,this.nextSources=t}notifyError(e,t){this.subscribeToNextSource()}notifyComplete(e){this.subscribeToNextSource()}_error(e){this.subscribeToNextSource(),this.unsubscribe()}_complete(){this.subscribeToNextSource(),this.unsubscribe()}subscribeToNextSource(){const e=this.nextSources.shift();if(e){const t=new E(this,void 0,void 0),n=this.destination;n.add(t);const r=N(this,e,void 0,void 0,t);r!==t&&n.add(r)}else this.destination.complete()}}function zg(){return e=>e.lift(new Bg)}class Bg{call(e,t){return t.subscribe(new Hg(e))}}class Hg extends g{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function Ug(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function $g(e,t){return n=>[Ic(e,t)(n),Ic(Ug(e,t))(n)]}function Wg(...e){const t=e.length;if(0===t)throw new Error("list of properties cannot be empty.");return n=>F(function(e,t){return n=>{let r=n;for(let i=0;i<t;i++){const t=r[e[i]];if(void 0===t)return;r=t}return r}}(e,t))(n)}function qg(e){return e?te(()=>new j,e):te(new j)}function Gg(e){return t=>te(new _c(e))(t)}class Kg extends j{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(e){return this.hasError?(e.error(this.thrownError),h.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),h.EMPTY):super._subscribe(e)}next(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}error(e){this.hasCompleted||super.error(e)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}function Yg(){return e=>te(new Kg)(e)}function Zg(e,t,n,r){n&&"function"!=typeof n&&(r=n);const i="function"==typeof n?n:void 0,o=new jf(e,t,r);return e=>te(()=>o,i)(e)}class Xg{call(e,t){return t.subscribe(new Jg(e))}}class Jg extends R{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let n=0;n<t&&!this.hasFirst;n++){let t=e[n],r=N(this,t,t,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}}notifyNext(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(let e=0;e<this.subscriptions.length;e++)if(e!==n){let t=this.subscriptions[e];t.unsubscribe(),this.remove(t)}this.subscriptions=null}this.destination.next(t)}}function Qg(...e){return function(t){return 1===e.length&&c(e[0])&&(e=e[0]),t.lift.call(function(...e){if(1===e.length){if(!c(e[0]))return e[0];e=e[0]}return G(e,void 0).lift(new Xg)}(t,...e))}}function em(e=-1){return t=>0===e?Ac():t.lift(new tm(e<0?-1:e-1,t))}class tm{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new nm(e,this.count,this.source))}}class nm extends g{constructor(e,t,n){super(e),this.count=t,this.source=n}complete(){if(!this.isStopped){const{source:e,count:t}=this;if(0===t)return super.complete();t>-1&&(this.count=t-1),e.subscribe(this._unsubscribeAndRecycle())}}}function rm(e){return t=>t.lift(new im(e))}class im{constructor(e){this.notifier=e}call(e,t){return t.subscribe(new om(e,this.notifier,t))}}class om extends R{constructor(e,t,n){super(e),this.notifier=t,this.source=n,this.sourceIsBeingSubscribedTo=!0}notifyNext(e,t,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}notifyComplete(e){if(!1===this.sourceIsBeingSubscribedTo)return super.complete()}complete(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return super.complete();this._unsubscribeAndRecycle(),this.notifications.next()}}_unsubscribe(){const{notifications:e,retriesSubscription:t}=this;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null}_unsubscribeAndRecycle(){const{_unsubscribe:e}=this;return this._unsubscribe=null,super._unsubscribeAndRecycle(),this._unsubscribe=e,this}subscribeToRetries(){let e;this.notifications=new j;try{const{notifier:t}=this;e=t(this.notifications)}catch(t){return super.complete()}this.retries=e,this.retriesSubscription=N(this,e)}}function sm(e=-1){return t=>t.lift(new am(e,t))}class am{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new lm(e,this.count,this.source))}}class lm extends g{constructor(e,t,n){super(e),this.count=t,this.source=n}error(e){if(!this.isStopped){const{source:t,count:n}=this;if(0===n)return super.error(e);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}}}function cm(e){return t=>t.lift(new um(e,t))}class um{constructor(e,t){this.notifier=e,this.source=t}call(e,t){return t.subscribe(new dm(e,this.notifier,this.source))}}class dm extends R{constructor(e,t,n){super(e),this.notifier=t,this.source=n}error(e){if(!this.isStopped){let n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new j;try{const{notifier:e}=this;r=e(n)}catch(t){return super.error(t)}i=N(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}}_unsubscribe(){const{errors:e,retriesSubscription:t}=this;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null}notifyNext(e,t,n,r,i){const{_unsubscribe:o}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)}}function hm(e){return t=>t.lift(new fm(e))}class fm{constructor(e){this.notifier=e}call(e,t){const n=new pm(e),r=t.subscribe(n);return r.add(N(n,this.notifier)),r}}class pm extends R{constructor(){super(...arguments),this.hasValue=!1}_next(e){this.value=e,this.hasValue=!0}notifyNext(e,t,n,r,i){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}function gm(e,t=Mf){return n=>n.lift(new mm(e,t))}class mm{constructor(e,t){this.period=e,this.scheduler=t}call(e,t){return t.subscribe(new vm(e,this.period,this.scheduler))}}class vm extends g{constructor(e,t,n){super(e),this.period=t,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(bm,t,{subscriber:this,period:t}))}_next(e){this.lastValue=e,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function bm(e){let{subscriber:t,period:n}=e;t.notifyNext(),this.schedule(e,n)}function ym(e,t){return n=>n.lift(new wm(e,t))}class wm{constructor(e,t){this.compareTo=e,this.comparator=t}call(e,t){return t.subscribe(new xm(e,this.compareTo,this.comparator))}}class xm extends g{constructor(e,t,n){super(e),this.compareTo=t,this.comparator=n,this._a=[],this._b=[],this._oneComplete=!1,this.destination.add(t.subscribe(new Om(e,this)))}_next(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())}_complete(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}checkValues(){const{_a:e,_b:t,comparator:n}=this;for(;e.length>0&&t.length>0;){let i=e.shift(),o=t.shift(),s=!1;try{s=n?n(i,o):i===o}catch(r){this.destination.error(r)}s||this.emit(!1)}}emit(e){const{destination:t}=this;t.next(e),t.complete()}nextB(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())}completeB(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}class Om extends g{constructor(e,t){super(e),this.parent=t}_next(e){this.parent.nextB(e)}_error(e){this.parent.error(e),this.unsubscribe()}_complete(){this.parent.completeB(),this.unsubscribe()}}function Cm(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,l=!1;return function(c){s++,i&&!a||(a=!1,i=new jf(e,t,r),o=c.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){l=!0,o=void 0,i.complete()}}));const u=i.subscribe(this);this.add(()=>{s--,u.unsubscribe(),o&&!l&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function _m(e){return t=>t.lift(new Sm(e,t))}class Sm{constructor(e,t){this.predicate=e,this.source=t}call(e,t){return t.subscribe(new jm(e,this.predicate,this.source))}}class jm extends g{constructor(e,t,n){super(e),this.predicate=t,this.source=n,this.seenValue=!1,this.index=0}applySingleValue(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)}_next(e){const t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)}tryNext(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(n){this.destination.error(n)}}_complete(){const e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new Ec)}}function km(e){return t=>t.lift(new Tm(e))}class Tm{constructor(e){this.total=e}call(e,t){return t.subscribe(new Em(e,this.total))}}class Em extends g{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function Pm(e){return t=>t.lift(new Am(e))}class Am{constructor(e){if(this._skipCount=e,this._skipCount<0)throw new Rc}call(e,t){return t.subscribe(0===this._skipCount?new g(e):new Mm(e,this._skipCount))}}class Mm extends g{constructor(e,t){super(e),this._skipCount=t,this._count=0,this._ring=new Array(t)}_next(e){const t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{const r=n%t,i=this._ring,o=i[r];i[r]=e,this.destination.next(o)}}}function Dm(e){return t=>t.lift(new Im(e))}class Im{constructor(e){this.notifier=e}call(e,t){return t.subscribe(new Lm(e,this.notifier))}}class Lm extends R{constructor(e,t){super(e),this.hasValue=!1;const n=new E(this,void 0,void 0);this.add(n),this.innerSubscription=n;const r=N(this,t,void 0,void 0,n);r!==n&&(this.add(r),this.innerSubscription=r)}_next(e){this.hasValue&&super._next(e)}notifyNext(e,t,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}notifyComplete(){}}function Nm(e){return t=>t.lift(new Rm(e))}class Rm{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Fm(e,this.predicate))}}class Fm extends g{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}let Vm=1;const zm=(()=>Promise.resolve())(),Bm={};function Hm(e){return e in Bm&&(delete Bm[e],!0)}const Um={setImmediate(e){const t=Vm++;return Bm[t]=!0,zm.then(()=>Hm(t)&&e()),t},clearImmediate(e){Hm(e)}};class $m extends ff{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=Um.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(Um.clearImmediate(t),e.scheduled=void 0)}}class Wm extends mf{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}const qm=new Wm($m);class Gm extends x{constructor(e,t=0,n=qm){super(),this.source=e,this.delayTime=t,this.scheduler=n,(!Gf(t)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=qm)}static create(e,t=0,n=qm){return new Gm(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(Gm.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function Km(e,t=0){return function(n){return n.lift(new Ym(e,t))}}class Ym{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new Gm(t,this.delay,this.scheduler).subscribe(e)}}function Zm(){return Yc(b)}function Xm(e,t){return t?Yc(()=>e,t):Yc(()=>e)}function Jm(e,t=!1){return n=>n.lift(new Qm(e,t))}class Qm{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new ev(e,this.predicate,this.inclusive))}}class ev extends g{constructor(e,t,n){super(e),this.predicate=t,this.inclusive=n,this.index=0}_next(e){const t=this.destination;let n;try{n=this.predicate(e,this.index++)}catch(r){return void t.error(r)}this.nextOrComplete(e,n)}nextOrComplete(e,t){const n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}function tv(e=Mf){return t=>Mc(()=>t.pipe(ru(({current:t},n)=>({value:n,current:e.now(),last:t}),{current:e.now(),value:void 0,last:void 0}),F(({current:e,last:t,value:n})=>new nv(n,e-t))))}class nv{constructor(e,t){this.value=e,this.interval=t}}const rv=(()=>{function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e})();function iv(e,t,n=Mf){return r=>{let i=Pp(e),o=i?+e-n.now():Math.abs(e);return r.lift(new ov(o,i,t,n))}}class ov{constructor(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}call(e,t){return t.subscribe(new sv(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class sv extends R{constructor(e,t,n,r,i){super(e),this.absoluteTimeout=t,this.waitFor=n,this.withObservable=r,this.scheduler=i,this.action=null,this.scheduleTimeout()}static dispatchTimeout(e){const{withObservable:t}=e;e._unsubscribeAndRecycle(),e.add(N(e,t))}scheduleTimeout(){const{action:e}=this;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(sv.dispatchTimeout,this.waitFor,this))}_next(e){this.absoluteTimeout||this.scheduleTimeout(),super._next(e)}_unsubscribe(){this.action=null,this.scheduler=null,this.withObservable=null}}function av(e,t=Mf){return iv(e,yf(new rv),t)}function lv(e=Mf){return F(t=>new cv(t,e.now()))}class cv{constructor(e,t){this.value=e,this.timestamp=t}}function uv(e,t,n){return 0===n?[t]:(e.push(t),e)}function dv(){return Eg(uv,[])}function hv(e){return function(t){return t.lift(new fv(e))}}class fv{constructor(e){this.windowBoundaries=e}call(e,t){const n=new pv(e),r=t.subscribe(n);return r.closed||n.add(N(n,this.windowBoundaries)),r}}class pv extends R{constructor(e){super(e),this.window=new j,e.next(this.window)}notifyNext(e,t,n,r,i){this.openWindow()}notifyError(e,t){this._error(e)}notifyComplete(e){this._complete()}_next(e){this.window.next(e)}_error(e){this.window.error(e),this.destination.error(e)}_complete(){this.window.complete(),this.destination.complete()}_unsubscribe(){this.window=null}openWindow(){const e=this.window;e&&e.complete();const t=this.destination,n=this.window=new j;t.next(n)}}function gv(e,t=0){return function(n){return n.lift(new mv(e,t))}}class mv{constructor(e,t){this.windowSize=e,this.startWindowEvery=t}call(e,t){return t.subscribe(new vv(e,this.windowSize,this.startWindowEvery))}}class vv extends g{constructor(e,t,n){super(e),this.destination=e,this.windowSize=t,this.startWindowEvery=n,this.windows=[new j],this.count=0,e.next(this.windows[0])}_next(e){const t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length;for(let a=0;a<o&&!this.closed;a++)i[a].next(e);const s=this.count-r+1;if(s>=0&&s%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){const e=new j;i.push(e),n.next(e)}}_error(e){const t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)}_complete(){const e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()}_unsubscribe(){this.count=0,this.windows=null}}function bv(e){let t=Mf,n=null,r=Number.POSITIVE_INFINITY;return T(arguments[3])&&(t=arguments[3]),T(arguments[2])?t=arguments[2]:Gf(arguments[2])&&(r=arguments[2]),T(arguments[1])?t=arguments[1]:Gf(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new yv(e,n,r,t))}}class yv{constructor(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}call(e,t){return t.subscribe(new xv(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}class wv extends j{constructor(){super(...arguments),this._numberOfNextedValues=0}next(e){this._numberOfNextedValues++,super.next(e)}get numberOfNextedValues(){return this._numberOfNextedValues}}class xv extends g{constructor(e,t,n,r,i){super(e),this.destination=e,this.windowTimeSpan=t,this.windowCreationInterval=n,this.maxWindowSize=r,this.scheduler=i,this.windows=[];const o=this.openWindow();if(null!==n&&n>=0){const e={windowTimeSpan:t,windowCreationInterval:n,subscriber:this,scheduler:i};this.add(i.schedule(_v,t,{subscriber:this,window:o,context:null})),this.add(i.schedule(Cv,n,e))}else this.add(i.schedule(Ov,t,{subscriber:this,window:o,windowTimeSpan:t}))}_next(e){const t=this.windows,n=t.length;for(let r=0;r<n;r++){const n=t[r];n.closed||(n.next(e),n.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(n))}}_error(e){const t=this.windows;for(;t.length>0;)t.shift().error(e);this.destination.error(e)}_complete(){const e=this.windows;for(;e.length>0;){const t=e.shift();t.closed||t.complete()}this.destination.complete()}openWindow(){const e=new wv;return this.windows.push(e),this.destination.next(e),e}closeWindow(e){e.complete();const t=this.windows;t.splice(t.indexOf(e),1)}}function Ov(e){const{subscriber:t,windowTimeSpan:n,window:r}=e;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function Cv(e){const{windowTimeSpan:t,subscriber:n,scheduler:r,windowCreationInterval:i}=e,o=n.openWindow(),s=this;let a={action:s,subscription:null};a.subscription=r.schedule(_v,t,{subscriber:n,window:o,context:a}),s.add(a.subscription),s.schedule(e,i)}function _v(e){const{subscriber:t,window:n,context:r}=e;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}function Sv(e,t){return n=>n.lift(new jv(e,t))}class jv{constructor(e,t){this.openings=e,this.closingSelector=t}call(e,t){return t.subscribe(new kv(e,this.openings,this.closingSelector))}}class kv extends R{constructor(e,t,n){super(e),this.openings=t,this.closingSelector=n,this.contexts=[],this.add(this.openSubscription=N(this,t,t))}_next(e){const{contexts:t}=this;if(t){const n=t.length;for(let r=0;r<n;r++)t[r].window.next(e)}}_error(e){const{contexts:t}=this;if(this.contexts=null,t){const n=t.length;let r=-1;for(;++r<n;){const n=t[r];n.window.error(e),n.subscription.unsubscribe()}}super._error(e)}_complete(){const{contexts:e}=this;if(this.contexts=null,e){const t=e.length;let n=-1;for(;++n<t;){const t=e[n];t.window.complete(),t.subscription.unsubscribe()}}super._complete()}_unsubscribe(){const{contexts:e}=this;if(this.contexts=null,e){const t=e.length;let n=-1;for(;++n<t;){const t=e[n];t.window.unsubscribe(),t.subscription.unsubscribe()}}}notifyNext(e,t,n,r,i){if(e===this.openings){let e;try{const{closingSelector:n}=this;e=n(t)}catch(o){return this.error(o)}const n=new j,r=new h,i={window:n,subscription:r};this.contexts.push(i);const s=N(this,e,i);s.closed?this.closeWindow(this.contexts.length-1):(s.context=i,r.add(s)),this.destination.next(n)}else this.closeWindow(this.contexts.indexOf(e))}notifyError(e){this.error(e)}notifyComplete(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))}closeWindow(e){if(-1===e)return;const{contexts:t}=this,n=t[e],{window:r,subscription:i}=n;t.splice(e,1),r.complete(),i.unsubscribe()}}function Tv(e){return function(t){return t.lift(new Ev(e))}}class Ev{constructor(e){this.closingSelector=e}call(e,t){return t.subscribe(new Pv(e,this.closingSelector))}}class Pv extends R{constructor(e,t){super(e),this.destination=e,this.closingSelector=t,this.openWindow()}notifyNext(e,t,n,r,i){this.openWindow(i)}notifyError(e,t){this._error(e)}notifyComplete(e){this.openWindow(e)}_next(e){this.window.next(e)}_error(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()}_complete(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}unsubscribeClosingNotification(){this.closingNotification&&this.closingNotification.unsubscribe()}openWindow(e=null){e&&(this.remove(e),e.unsubscribe());const t=this.window;t&&t.complete();const n=this.window=new j;let r;this.destination.next(n);try{const{closingSelector:e}=this;r=e()}catch(i){return this.destination.error(i),void this.window.error(i)}this.add(this.closingNotification=N(this,r))}}function Av(...e){return t=>{let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new Mv(e,n))}}class Mv{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new Dv(e,this.observables,this.project))}}class Dv extends R{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let e=t[i];this.add(N(this,e,e,i))}}notifyNext(e,t,n,r,i){this.values[n]=t;const o=this.toRespond;if(o.length>0){const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class Iv{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Lv(e,this.resultSelector))}}class Lv extends g{constructor(e,t,n=Object.create(null)){super(e),this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:null,this.values=n}_next(e){const t=this.iterators;c(e)?t.push(new Rv(e)):t.push("function"==typeof e[M]?new Nv(e[M]()):new Fv(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let n=0;n<t;n++){let t=e[n];t.stillUnsubscribed?this.destination.add(t.subscribe(t,n)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,n=this.destination;for(let o=0;o<t;o++){let t=e[o];if("function"==typeof t.hasValue&&!t.hasValue())return}let r=!1;const i=[];for(let o=0;o<t;o++){let t=e[o],s=t.next();if(t.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class Nv{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return e&&e.done}}class Rv{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[M](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Fv extends R{constructor(e,t,n){super(e),this.parent=t,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[M](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()}subscribe(e,t){return N(this,this.observable,this,t)}}function Vv(...e){return function(t){return t.lift.call(function(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),G(e,void 0).lift(new Iv(t))}(t,...e))}}function zv(e){return t=>t.lift(new Iv(e))}function Bv(e,t){const n=new Map;return e.forEach(e=>{const r=t(e),i=n.get(r);i?i.push(e):n.set(r,[e])}),n}class Hv{}const Uv="*";function $v(e,t=null){return{type:2,steps:e,options:t}}function Wv(e){return{type:6,styles:e,offset:null}}function qv(e){Promise.resolve(null).then(e)}class Gv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qv(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){}getPosition(){return 0}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Kv{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const i=this.players.length;0==i?qv(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==i&&this._onFinish()}),e.onDestroy(()=>{++n==i&&this._onDestroy()}),e.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){let e=0;return this.players.forEach(t=>{const n=t.getPosition();e=Math.min(n,e)}),e}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const Yv={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Zv={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Xv=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Jv={CSS:{},springs:{}};function Qv(e,t,n){return Math.min(Math.max(e,t),n)}function eb(e,t){return e.indexOf(t)>-1}function tb(e,t){return e(...t)}const nb={arr:function(e){return Array.isArray(e)},obj:function(e){return eb(Object.prototype.toString.call(e),"Object")},pth:function(e){return nb.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||nb.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},nil:function(e){return nb.und(e)||null===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return nb.hex(e)||nb.rgb(e)||nb.hsl(e)},key:function(e){return!Yv.hasOwnProperty(e)&&!Zv.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function rb(e){const t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function ib(e,t){const n=rb(e),r=Qv(nb.und(n[0])?1:n[0],.1,100),i=Qv(nb.und(n[1])?100:n[1],.1,100),o=Qv(nb.und(n[2])?10:n[2],.1,100),s=Qv(nb.und(n[3])?0:n[3],.1,100),a=Math.sqrt(i/r),l=o/(2*Math.sqrt(i*r)),c=l<1?a*Math.sqrt(1-l*l):0,u=l<1?(l*a-s)/c:-s+a;function d(e){let n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*a)*(1*Math.cos(c*n)+u*Math.sin(c*n)):(1+u*n)*Math.exp(-n*a),0===e||1===e?e:1-n}return t?d:function(){const t=Jv.springs[e];if(t)return t;const n=1/6;let r=0,i=0;for(;;)if(r+=n,1===d(r)){if(i++,i>=16)break}else i=0;const o=r*n*1e3;return Jv.springs[e]=o,o}}function ob(e){return void 0===e&&(e=10),function(t){return Math.ceil(Qv(t,1e-6,1)*e)*(1/e)}}const sb=function(){const e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function i(e,i,o){return((t(i,o)*e+n(i,o))*e+r(i))*e}function o(e,i,o){return 3*t(i,o)*e*e+2*n(i,o)*e+r(i)}return function(t,n,r,s){if(!(0<=t&&t<=1&&0<=r&&r<=1))return;const a=new Float32Array(11);if(t!==n||r!==s)for(let o=0;o<11;++o)a[o]=i(o*e,t,r);return l=>t===n&&r===s||0===l||1===l?l:i(function(n){let s=0,l=1;for(;10!==l&&a[l]<=n;++l)s+=e;--l;const c=s+(n-a[l])/(a[l+1]-a[l])*e,u=o(c,t,r);return u>=.001?function(e,t,n,r){for(let s=0;s<4;++s){const s=o(t,n,r);if(0===s)return t;t-=(i(t,n,r)-e)/s}return t}(n,c,t,r):0===u?c:function(e,t,n,r,o){let s,a,l=0;do{a=t+(n-t)/2,s=i(a,r,o)-e,s>0?n=a:t=a}while(Math.abs(s)>1e-7&&++l<10);return a}(n,s,s+e,t,r)}(l),n,s)}}(),ab=function(){const e={linear:function(){return function(e){return e}}},t={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){let t,n=4;for(;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);const n=Qv(e,1,10),r=Qv(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,n){t[e]=function(){return function(e){return Math.pow(e,n+2)}}})),Object.keys(t).forEach((function(n){const r=t[n];e["easeIn"+n]=r,e["easeOut"+n]=function(e,t){return function(n){return 1-r(e,t)(1-n)}},e["easeInOut"+n]=function(e,t){return function(n){return n<.5?r(e,t)(2*n)/2:1-r(e,t)(-2*n+2)/2}},e["easeOutIn"+n]=function(e,t){return function(n){return n<.5?(1-r(e,t)(1-2*n))/2:(r(e,t)(2*n-1)+1)/2}}})),e}();function lb(e,t){const n=e.length,r=arguments.length>=2?arguments[1]:void 0,i=[];for(let o=0;o<n;o++)if(o in e){const n=e[o];t.call(r,n,o,e)&&i.push(n)}return i}function cb(e){return e.reduce((function(e,t){return e.concat(nb.arr(t)?cb(t):t)}),[])}function ub(e){return nb.arr(e)?e:(nb.str(e)&&(e=function(e){try{return document.querySelectorAll(e)}catch(t){return}}(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function db(e,t){return e.some((function(e){return e===t}))}function hb(e){return Object.assign({},e)}function fb(e,t){const n=hb(e);for(const r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function pb(e,t){const n=hb(e);for(const r in t)n[r]=nb.und(e[r])?t[r]:e[r];return n}function gb(e){const t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function mb(e,t){return nb.fnc(e)?e(t.target,t.id,t.total):e}function vb(e,t){return e.getAttribute(t)}function bb(e,t,n){if(db([n,"deg","rad","turn"],gb(t)))return t;const r=Jv.CSS[t+n];if(!nb.und(r))return r;const i=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(i),i.style.position="absolute",i.style.width=100+n;const s=100/i.offsetWidth;o.removeChild(i);const a=s*parseFloat(t);return Jv.CSS[t+n]=a,a}function yb(e,t,n){if(t in e.style){const r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?bb(e,i,n):i}}function wb(e,t){return nb.dom(e)&&!nb.inp(e)&&(!nb.nil(vb(e,t))||nb.svg(e)&&e[t])?"attribute":nb.dom(e)&&db(Xv,t)?"transform":nb.dom(e)&&"transform"!==t&&yb(e,t)?"css":null!=e[t]?"object":void 0}function xb(e){if(!nb.dom(e))return;const t=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,r=new Map;let i;for(;i=n.exec(t);)r.set(i[1],i[2]);return r}function Ob(e,t,n,r){switch(wb(e,t)){case"transform":return function(e,t,n,r){const i=eb(t,"scale")?1:0+function(e){return eb(e,"translate")||"perspective"===e?"px":eb(e,"rotate")||eb(e,"skew")?"deg":void 0}(t),o=xb(e).get(t)||i;return n&&(n.transforms.list.set(t,o),n.transforms.last=t),r?bb(e,o,r):o}(e,t,r,n);case"css":return yb(e,t,n);case"attribute":return vb(e,t);default:return e[t]||0}}function Cb(e,t){const n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;const r=gb(e)||0,i=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return i+o+r;case"-":return i-o+r;case"*":return i*o+r}}function _b(e,t){if(nb.col(e))return function(e){return nb.rgb(e)?function(e){const t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}(e):nb.hex(e)?function(e){const t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):nb.hsl(e)?function(e){const t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),n=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100,o=t[4]||1;function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}let a,l,c;if(0==r)a=l=c=i;else{const e=i<.5?i*(1+r):i+r-i*r,t=2*i-e;a=s(t,e,n+1/3),l=s(t,e,n),c=s(t,e,n-1/3)}return"rgba("+255*a+","+255*l+","+255*c+","+o+")"}(e):void 0}(e);if(/\s/g.test(e))return e;const n=gb(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function Sb(e,t,n){function r(n){return void 0===n&&(n=0),e.el.getPointAtLength(t+n>=1?t+n:0)}const i=function(e,t){const n=t||{},r=n.el||function(e){let t=e.parentNode;for(;nb.svg(t)&&nb.svg(t.parentNode);)t=t.parentNode;return t}(e),i=r.getBoundingClientRect(),o=vb(r,"viewBox"),s=i.width,a=i.height,l=n.viewBox||(o?o.split(" "):[0,0,s,a]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:s,h:a,vW:l[2],vH:l[3]}}(e.el,e.svg),o=r(),s=r(-1),a=r(1),l=n?1:i.w/i.vW,c=n?1:i.h/i.vH;switch(e.property){case"x":return(o.x-i.x)*l;case"y":return(o.y-i.y)*c;case"angle":return 180*Math.atan2(a.y-s.y,a.x-s.x)/Math.PI}}function jb(e,t){const n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=_b(nb.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:nb.str(e)||t?r.split(n):[]}}function kb(e){return lb(e?cb(nb.arr(e)?e.map(ub):ub(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function Tb(e,t=null){const n=kb(e);let r=!0;return n.map((function(e,i){let o;const s=xb(e);if(t){const n=t.animatables.find(t=>t.target===e);n?(s.forEach((e,t)=>n.transforms.list.set(t,e)),o=n.transforms,r=!1):o={list:s}}else o={list:s};const a={target:e,id:i,total:n.length,transforms:o};return r&&t.registerAnimatable(e,o),a}))}function Eb(e,t){const n=hb(t);if(/^spring/.test(n.easing)&&(n.duration=ib(n.easing)),nb.arr(e)){const r=e.length;2!==r||nb.obj(e[0])?nb.fnc(t.duration)||(n.duration=t.duration/r):e={value:e}}const r=nb.arr(e)?e:[e];return r.map((function(e,n){const i=nb.obj(e)&&!nb.pth(e)?e:{value:e};return nb.und(i.delay)&&(i.delay=n?0:t.delay),nb.und(i.endDelay)&&(i.endDelay=n===r.length-1?t.endDelay:0),i})).map((function(e){return pb(e,n)}))}const Pb={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,i){if(r.list.set(t,n),t===r.last||i){let t="";r.list.forEach((function(e,n){t+=n+"("+e+") "})),e.style.transform=t}}};function Ab(e,t){const n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},i={duration:n?Math.max(...e.map((function(e){return r(e)+e.duration}))):t.duration,delay:n?Math.min(...e.map((function(e){return r(e)+e.delay}))):t.delay,endDelay:null};return i.endDelay=n?i.duration-Math.max(...e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,i}let Mb=0;const Db=(e,t)=>Ib(e,t,new Rb(e));function Ib(e,t,n){const r=fb(Yv,t),i=fb(Zv,t),o=function(e,t){const n=[],r=t.keyframes;r&&(t=pb(function(e){const t=lb(cb(e.map((function(e){return Object.keys(e)}))),(function(e){return nb.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){const i=t[r];n[i]=e.map((function(e){const t={};for(const n in e)nb.key(n)?n==i&&(t.value=e[n]):t[n]=e[n];return t}))};for(let i=0;i<t.length;i++)r(i);return n}(r),t));for(const i in t)nb.key(i)&&n.push({name:i,tweens:Eb(t[i],e)});return n}(i,t),s=Tb(t.targets,e.manager),a=function(e,t){return lb(cb(e.map((function(e){return t.map((function(t){return function(e,t){const n=wb(e.target,t.name);if(n){const r=function(e,t){let n;return e.tweens.map((function(r){const i=function(e,t){const n={};for(const r in e){let i=mb(e[r],t);nb.arr(i)&&(i=i.map((function(e){return mb(e,t)})),1===i.length&&(i=i[0])),n[r]=i}return n.duration=parseFloat(e.duration),n.delay=parseFloat(e.delay),n}(r,t),o=i.value;let s=nb.arr(o)?o[1]:o;const a=gb(s),l=Ob(t.target,e.name,a,t),c=n?n.to.original:l,u=nb.arr(o)?o[0]:c,d=gb(u)||gb(l),h=a||d;return nb.und(s)&&(s=c),i.from=jb(u,h),i.to=jb(Cb(s,u),h),i.start=n?n.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=function(e,t){if(nb.fnc(e))return e;const n=e.split("(")[0],r=ab[n],i=rb(e);switch(n){case"spring":return ib(e,t);case"cubicBezier":return tb(sb,i);case"steps":return tb(ob,i);default:return tb(r,i)}}(i.easing,i.duration),i.isPath=nb.pth(o),i.isPathTargetInsideSVG=i.isPath&&nb.svg(t.target),i.isColor=nb.col(i.from.original),i.isColor&&(i.round=1),n=i,i}))}(t,e),i=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}(e,t)}))}))),(function(e){return!nb.und(e)}))}(s,o),l=Ab(a,i),c=Mb;Mb++;const u=pb(r,{id:c,children:[],animatables:s,animations:a,duration:l.duration,delay:l.delay,endDelay:l.endDelay});return Object.assign(n,u),n}class Lb{constructor(e){this.manager=e,"undefined"!=typeof document&&document.addEventListener("visibilitychange",()=>this.handleVisibilityChange())}play(){this.raf||Nb()&&this.manager.suspendWhenDocumentHidden||!(this.manager.activeInstances.length>0)||(this.raf=requestAnimationFrame(e=>this.step(e)))}step(e){let t=this.manager.activeInstances.length,n=0;for(;n<t;){const r=this.manager.activeInstances[n];r.paused?(this.manager.activeInstances.splice(n,1),t--):(r.tick(e),n++)}this.raf=n>0?requestAnimationFrame(e=>this.step(e)):void 0}handleVisibilityChange(){this.manager.suspendWhenDocumentHidden&&(Nb()?this.raf=cancelAnimationFrame(this.raf):(this.manager.activeInstances.forEach(e=>e._onDocumentVisibility()),this.play()))}}function Nb(){return!!document&&document.hidden}class Rb{constructor(e){this.animatables=[],this.animations=[],this.children=[],this.anime=e}reset(){this.passThrough=!1,this.currentTime=0,this.progress=0,this.paused=!0,this.began=!1,this.loopBegan=!1,this.changeBegan=!1,this.completed=!1,this.changeCompleted=!1,this.reversePlayback=!1,this.reversed="reverse"===this.direction,this.remaining=this.loop;for(let e=this.children.length;e--;)this.children[e].reset();(this.reversed&&!0!==this.loop||"alternate"===this.direction&&1===this.loop)&&this.remaining++,this.anime.setAnimationsProgress(this.reversed?this.duration:0)}set(e,t){return function(e,t){Tb(e).forEach((function(e){for(const n in t){const r=mb(t[n],e),i=e.target,o=gb(r),s=Ob(i,n,o,e),a=Cb(_b(r,o||gb(s)),s),l=wb(i,n);Pb[l](i,n,a,e.transforms,!0)}}))}(e,t),this}tick(e){this.anime.now=e,this.anime.startTime||(this.anime.startTime=this.anime.now),this.anime.setInstanceProgress((this.anime.now+(this.anime.lastTime-this.anime.startTime))*this.anime.manager.speed)}seek(e){this.anime.setInstanceProgress(this.anime.adjustTime(e))}pause(){this.paused=!0,this.anime.resetTime()}play(){this.paused&&(this.completed&&this.reset(),this.paused=!1,this.anime.manager.activeInstances.push(this),this.anime.resetTime(),this.anime.manager.engine.play())}reverse(){this.anime.toggleInstanceDirection(),this.completed=!this.reversed,this.anime.resetTime()}restart(){this.reset(),this.play()}remove(e){!function(e,t){const n=t.animations,r=t.children;Vb(e,n);for(let i=r.length;i--;){const t=r[i],n=t.animations;Vb(e,n),n.length||t.children.length||r.splice(i,1)}n.length||r.length||t.pause()}(kb(e),this)}}class Fb{constructor(e,t,n){this.manager=e,void 0===n&&(n={}),this.startTime=0,this.lastTime=0,this.now=0,this.children=[],this.childrenLength=0,this.resolve=null,this.instance=t(this,n),this.promise=this.makePromise(this.instance),this.instance._onDocumentVisibility=()=>this.resetTime(),this.instance.reset(),this.instance.autoplay&&this.instance.play()}getInstance(){return this.instance}makePromise(e){const t=window.Promise&&new Promise(e=>this.resolve=e);return this.instance.finished=t,t}toggleInstanceDirection(){const e=this.instance.direction;"alternate"!==e&&(this.instance.direction="normal"!==e?"normal":"reverse"),this.instance.reversed=!this.instance.reversed,this.children.forEach(e=>e.reversed=this.instance.reversed)}adjustTime(e){return this.instance.reversed?this.instance.duration-e:e}resetTime(){this.startTime=0,this.lastTime=this.adjustTime(this.instance.currentTime)*(1/this.manager.speed)}seekChild(e,t){t&&t.seek(e-t.timelineOffset)}syncInstanceChildren(e){if(this.instance.reversePlayback)for(let t=this.childrenLength;t--;)this.seekChild(e,this.children[t]);else for(let t=0;t<this.childrenLength;t++)this.seekChild(e,this.children[t])}setAnimationsProgress(e){let t=0;const n=this.instance.animations,r=n.length;for(;t<r;){const r=n[t],i=r.animatable,o=r.tweens,s=o.length-1;let a=o[s];s&&(a=lb(o,(function(t){return e<t.end}))[0]||a);const l=Qv(e-a.start-a.delay,0,a.duration)/a.duration,c=isNaN(l)?1:a.easing(l),u=a.to.strings,d=a.round,h=[],f=a.to.numbers.length;let p=void 0;for(let e=0;e<f;e++){let t=void 0;const n=a.to.numbers[e],r=a.from.numbers[e]||0;t=a.isPath?Sb(a.value,c*n,a.isPathTargetInsideSVG):r+c*(n-r),d&&(a.isColor&&e>2||(t=Math.round(t*d)/d)),h.push(t)}const g=u.length;if(g){p=u[0];for(let e=0;e<g;e++){const t=u[e+1],n=h[e];isNaN(n)||(p+=t?n+t:n+" ")}}else p=h[0];Pb[r.type](i.target,r.property,p,i.transforms),r.currentValue=p,t++}}setCallback(e){this.instance[e]&&!this.instance.passThrough&&this.instance[e](this.instance)}countIteration(){this.instance.remaining&&!0!==this.instance.remaining&&this.instance.remaining--}setInstanceProgress(e){const t=this.instance.duration,n=this.instance.delay,r=t-this.instance.endDelay,i=this.adjustTime(e);this.instance.progress=Qv(i/t*100,0,100),this.instance.reversePlayback=i<this.instance.currentTime,this.children&&this.syncInstanceChildren(i),!this.instance.began&&this.instance.currentTime>0&&(this.instance.began=!0,this.setCallback("begin")),!this.instance.loopBegan&&this.instance.currentTime>0&&(this.instance.loopBegan=!0,this.setCallback("loopBegin")),i<=n&&0!==this.instance.currentTime&&this.setAnimationsProgress(0),(i>=r&&this.instance.currentTime!==t||!t)&&this.setAnimationsProgress(t),i>n&&i<r?(this.instance.changeBegan||(this.instance.changeBegan=!0,this.instance.changeCompleted=!1,this.setCallback("changeBegin")),this.setCallback("change"),this.setAnimationsProgress(i)):this.instance.changeBegan&&(this.instance.changeCompleted=!0,this.instance.changeBegan=!1,this.setCallback("changeComplete")),this.instance.currentTime=Qv(i,0,t),this.instance.began&&this.setCallback("update"),e>=t&&(this.lastTime=0,this.countIteration(),this.instance.remaining?(this.startTime=this.now,this.setCallback("loopComplete"),this.instance.loopBegan=!1,"alternate"===this.instance.direction&&this.toggleInstanceDirection()):(this.instance.paused=!0,this.instance.completed||(this.instance.completed=!0,this.setCallback("loopComplete"),this.setCallback("complete"),!this.instance.passThrough&&"Promise"in window&&(this.resolve(),this.promise=this.makePromise(this.instance)))))}}function Vb(e,t){for(let n=t.length;n--;)db(e,t[n].animatable.target)&&t.splice(n,1)}class zb extends Rb{constructor(e,t){super(e),this.params=t}add(e,t,n=!1){const r=this.anime.manager.activeInstances.indexOf(this),i=this.children;function o(e){e.passThrough=!0}r>-1&&Hb.splice(r,1);for(let u=0;u<i.length;u++)o(i[u]);e.parent=this;const s=pb(e,fb(Zv,this.params));s.targets=s.targets||this.params.targets;const a=this.duration;s.autoplay=!1,s.direction=this.direction,s.timelineOffset=nb.und(t)?a:Cb(t,a),o(this),this.seek(s.timelineOffset);const l=this.anime.manager.anime(s);o(l),i.push(l);const c=Ab(i,this.params);return this.delay=c.delay,this.endDelay=c.endDelay,this.duration=c.duration,this.seek(0),this.reset(),this.autoplay&&this.play(),n?l:this}}const Bb=(e,t)=>{const n=new zb(e,t);return Ib(e,t,n),n},Hb=[],Ub=new class{constructor(){this.speed=1,this.suspendWhenDocumentHidden=!0,this.activeInstances=[],this.animatables=[],this.engine=new Lb(this),this.engine.play(),Hb.push(this)}_anime(e,t){return new Fb(this,e,t)}anime(e){return this._anime(Db,e).getInstance()}timeline(e){void 0===e&&(e={});const t=this._anime(Bb,e).getInstance();return t.duration=0,t}registerAnimatable(e,t){this.animatables.push({target:e,transforms:t})}};class $b{run(e,t,n){t=Object.assign(Object.assign({},t),{rxjs:r});const i=[],o=[];Object.keys(t).forEach(e=>{i.push(e),o.push(t[e])});const s='"use strict"; let result; function returnValue(value){result = value}; function runScript(){'+e+";} runScript(); return result;";return new Function(...i,s)(...o)}}let Wb=(()=>{class e{constructor(e){this.componentState=e,this.initLifecycle()}get(t,n,r){return e._allowedMethods.some(e=>e===n)?(...e)=>this[n](...e):this.componentState.get(n)}set(e,t,n,r){return this.componentState.set(t,n)}initLifecycle(){this._init=this.componentState.stateInit.toPromise(),this._changes=this.componentState.stateChanges,this._destroy=this.componentState.stateDestroy.toPromise()}onInit(){return this._init}subscribeOnInit(e){return this.onInit().then(e)}onChanges(){return this._changes}subscribeOnChanges(e){return this.onChanges().subscribe(t=>e(t))}onChange(e){return this.componentState.getStateChange(e)}subscribeOnChange(e,t){return this.onChange(e).subscribe(e=>t(e))}onDestroy(){return this._destroy}subscribeOnDestroy(e){return this.onDestroy().then(e)}}return e._allowedMethods=["onInit","subscribeOnInit","onChanges","subscribeOnChanges","onChange","subscribeOnChange","onDestroy","subscribeOnDestroy"],e})();class qb{constructor(e,t){this.componentType=e,this.componentRef=t,this._state=new jf,this.state=this._state.asObservable(),this._stateInit=new j,this.stateInit=this._stateInit.asObservable(),this._stateChanges=new j,this.stateChanges=this._stateChanges.asObservable(),this._stateDestroy=new j,this.stateDestroy=this._stateDestroy.asObservable()}get componentState(){return this.componentRef.instance}asComponentState(){const e=new Wb(this);return new Proxy({},e)}getStateChange(e){return this.stateChanges.pipe(F(t=>t.find(t=>t.property===e)),Ic(e=>!!e))}setState(e){return this._setState(e)}_setState(e,t=!1){const n=this.componentState,r=Object.keys(e).map(t=>{const r=e[t],i={property:t,previousValue:n[t],nextValue:r};return n[t]=r,i});if(t){const e=JSON.parse(JSON.stringify(n));this._stateValue=e,this._state.next(e),this._stateInit.next(e)}else{const t=Object.assign(Object.assign({},this._stateValue),e);this._stateValue=t,this._state.next(t)}return this._stateChanges.next(r),r}getState(){return Object.assign({},this.componentState)}set(e,t){const n={property:e,previousValue:this.componentState[e],nextValue:t};return this.componentState[e]=t,this._stateChanges.next([n]),!0}get(e){return this.componentState[e]}onInit(e){this._setState(e,!0),this._stateInit.complete(),this._stateInit.unsubscribe()}onDestroy(){this._stateChanges.complete(),this._stateChanges.unsubscribe(),this._stateDestroy.next(),this._stateDestroy.complete(),this._stateDestroy.unsubscribe()}}let Gb=(()=>{class e{constructor(e,t,n,r,i,o,s,a){this.container=e,this.resolver=t,this.injector=n,this.renderer=r,this.document=i,this.shaper=o,this.shaperManager=s,this.parent=a,this.destroy=new j,this.childrenRenderers=[],this.properties={},this.scriptRunner=new $b,this._eventTypes=[{name:"mousePos",progressive:!0,timelines:{x:{min:0,max:1},y:{min:0,max:1}},build:e=>Tf(e,"mousemove").pipe(F(t=>{const n=e.getBoundingClientRect();return{x:(t.clientX-n.left)/n.width,y:(t.clientY-n.top)/n.height}}),Ic(e=>e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1),Rf(0,Af))}],this._effectTypes=[{name:"opacity",progressive:!0,handler:(e,t,n,r)=>{const i=e.options.percent,o=[Wv({opacity:i+(t.options.percent-i)*r})];this.playAnimation(o,n)},buildAnimationFrame:e=>({opacity:e.options.percent}),buildAnimeFrame:e=>({opacity:e.options.percent})},{name:"move",progressive:!0,handler:(e,t,n,r)=>{const i=e.options.x,o=e.options.y,s=[Wv({position:"relative",top:o+(t.options.y-o)*r+"px",left:i+(t.options.x-i)*r+"px"})];this.playAnimation(s,n)},buildAnimationFrame:e=>{const t={};return e.options.y&&(t.top=e.options.y),e.options.x&&(t.left=e.options.x),t},buildAnimeFrame:e=>{const t={};return e.options.y&&(t.top=e.options.y),e.options.x&&(t.left=e.options.x),t}},{name:"rotate",progressive:!0,handler:(e,t,n,r)=>{},buildAnimationFrame:e=>{const t={composite:"add",transform:""};return e.options.y&&(t.transform=t.transform+" rotateY("+e.options.y+")"),e.options.x&&(t.transform=t.transform+" rotateX("+e.options.x+")"),e.options.z&&(t.transform=t.transform+" rotateZ("+e.options.z+")"),t},buildAnimeFrame:e=>{const t={};return e.options.y&&(t.rotateY=e.options.y),e.options.x&&(t.rotateX=e.options.x),e.options.z&&(t.rotateZ=e.options.z),t}}],a&&a.registerChild(this),this.animationBuilder=this.injector.get(Hv)}onInit(e){this.component=e,this.executeExtensions(e=>e.onInit),this.fixComponent(),this.executeExtensions(e=>e.beforeRender),this.render(),this.executeExtensions(e=>e.afterRender),this.shaperManager.register(this.component.id,this)}render(){const e=this.shaper.getComponentType(this.component.type);if(!e)return;this.componentType=e;const t=this.resolver.resolveComponentFactory(e.class),n=this.createChildInjector(this.injector),r=this.shaper.config.wrappers.reduce((e,t)=>t.wrapper.wrap(e,this.shaper,this),this.container).createComponent(t,null,n);this.componentRef=r,this.executeExtensions(e=>e.beforeCreateState),this.createState(),this.executeExtensions(e=>e.afterCreateState),this.executeExtensions(e=>e.beforeStateBindings),this.mapOptions(),this.mapBindings(),this.mapActions(),this.mapAnimationActions(),this.applyScript(),this.executeExtensions(e=>e.afterCreateState),this.executeExtensions(e=>e.beforeApplyStyle),this.applyStyle(),this.executeExtensions(e=>e.afterApplyStyle),this.executeExtensions(e=>e.beforeRenderChildren),this.renderChildren(),this.executeExtensions(e=>e.afterRenderChildren),this.handleChanges()}fixComponent(){this.component.id||(this.component.id=function(e="rxshaper"){return(e?e+"-":"")+Math.random().toString(36).substr(2,9)}())}executeExtensions(e){return this.shaper.extensions.map(t=>e(t.extension)(this.shaper,this,this.properties))}createChildInjector(t){return vo.create({providers:[{provide:e,useFactory:(n=this,(e,t,r,i,o,s)=>new Gb(n.childrenContainer,e,t,r,i,o,s,n)),deps:[bs,vo,Cs,bl,df,af]}],parent:t});var n}createState(){const e=new qb(this.componentType,this.componentRef);this.componentState=e}mapOptions(){this.componentType.inputs&&this.component.options&&this.componentState.setState(this.component.options)}getBlockScope(){if(!this.blockScope){const e=this.parent?this.parent.getBlockScope():void 0,t=null;this.blockScope={element:this.componentRef.location.nativeElement,state:this.componentState.asComponentState(),parent:e,children:t}}return this.blockScope}getBaseScope(){const e=this.getBlockScope();return Object.assign(Object.assign({},e),{block:e,document:this.document,renderer:this.renderer})}getScriptScope(){return this.getBaseScope()}getBindingScope(e){const t=this.getBaseScope();return Object.assign(Object.assign({},t),{property:e})}getActionScope(e,t){const n=this.getBaseScope();return Object.assign(Object.assign({},n),{event:{name:e,value:t}})}applyScript(){if(this.component.script){if("string"!=typeof this.component.script)return void console.error("Component property script must be of type string");const e=this.getScriptScope(),t=this.scriptRunner.run(this.component.script,e);t&&(t instanceof x?t.subscribe(e=>{}):Promise.resolve(t).then(e=>{}))}}mapBindings(){this.componentType.inputs&&this.component.bindings&&this.componentType.inputs.forEach(e=>{const t=this.component.bindings[e.name];if(t)if("string"!=typeof t)console.error("Component property binding must be of type string");else{const n=this.getBindingScope(e.name),r=this.scriptRunner.run(t,n);r&&(r instanceof x?r.pipe(Bf(this.destroy)).subscribe(t=>this.componentState.set(e.name,t)):Promise.resolve(r).then(t=>this.componentState.set(e.name,t)))}})}mapActions(){this.component.actions&&Object.keys(this.component.actions).forEach(e=>{const t=this.component.actions[e];if(t)if("string"!=typeof t)console.error("Component property binding must be of type string");else{let n;if("state.init"===e)n=this.componentState.stateInit;else if("state.changes"===e)n=this.componentState.stateChanges;else if("state.destroy"===e)n=this.componentState.stateDestroy;else if(e.startsWith("state.change.")&&3===e.split(".").length){const t=e.split(".")[2];n=this.componentState.getStateChange(t)}else if(this.componentType.outputs&&this.componentType.outputs.find(t=>t.name===e)){const t=this.componentRef.instance[e];t instanceof x?n=t:console.error("Component output must be an observable")}else n=Tf(this.componentRef.location.nativeElement,e);n.pipe(Bf(this.destroy)).subscribe(n=>this.runComponentAction(e,t,n))}})}runComponentAction(e,t,n){const r=this.getActionScope(e,n),i=this.scriptRunner.run(t,r);i&&Promise.resolve(i).then(e=>{})}mapAnimationActions(){this.component.animationActions&&Object.keys(this.component.animationActions).forEach(e=>{const t=this.normalizeAnimations(this.component.animationActions[e]),n=this.buildAnimationEvent(e,this.componentRef.location.nativeElement);t&&n&&this.buildComponentAnimation(t,n)})}buildAnimationEvent(e,t){const n=this._eventTypes.find(t=>t.name===e);return n?n.build(t):null}normalizeAnimations(e){const t=Bv(Object.keys(e.timelines).reduce((t,n)=>[...t,...e.timelines[n].reduce((e,t)=>[...e,...t.effects.reduce((e,r)=>[...e,{property:n,keyframe:t.key,effect:r}],[])],[])],[]),e=>e.effect.type),n=[];return t.forEach((e,t)=>{const r=Bv(e,e=>e.effect.target),i=[];r.forEach((e,t)=>{const n=Bv(e,e=>e.property),r=[];n.forEach((e,t)=>{const n=lf(e,e=>e.keyframe);r.push({property:t,effects:n})}),i.push({target:t,properties:r})});const o=this.getEffectType(t);n.push({effectTypeName:t,effectType:o,targets:i})}),n}playAnimation(e,t){this.animationBuilder.build(e).create(t,{}).play()}getEffectType(e){return this._effectTypes.find(t=>t.name===e)}runComponentAnimation(e,t,n,r,i){i.forEach(e=>{e.targets.forEach(t=>{const r=this.getAnimationTarget(t.target);if(r){const i=t.effects.findIndex(e=>e.key>n);let o,s;i>-1?(o=t.effects[i-1],s=t.effects[i]):(o=null,s=null),e.effectType.handler(o.effect,s.effect,r.componentRef.location.nativeElement,(n-o.key)/(s.key-o.key))}})})}buildComponentAnimation(e,t){e.forEach(e=>{e.targets.forEach(n=>{jc([this.animationTargetChanges(n.target).pipe(Ic(e=>!!e),F(t=>{const r=t.componentRef.location.nativeElement;return n.properties.map(t=>{let n=0;const r=t.effects.map(t=>{const r=t.keyframe-n;return n=t.keyframe,Object.assign(Object.assign({},e.effectType.buildAnimeFrame(t.effect)),{duration:r})});return{property:t.property,frames:r}}).map(e=>{const t=Ub.anime({autoplay:!1,targets:r,keyframes:e.frames,duration:1,easing:"linear"});return{property:e.property,player:t}})})),t]).pipe(Bf(this.destroy)).subscribe(([e,t])=>{e.forEach(e=>{e.player.seek(t[e.property])})})})})}getAnimationTarget(e){switch(e){case"children":return null;case"parent":return this.parent;case"self":return this}if(e.startsWith("#")){const t=e.substring(1);return this.shaperManager.getBlock(t)}return null}animationTargetChanges(e){switch(e){case"children":return Cc(null);case"parent":return Cc(this.parent);case"self":return Cc(this)}if(e.startsWith("#")){const t=e.substring(1);return this.shaperManager.blocksChanges(t)}return Cc(null)}applyStyle(){if(null===this.document.head)throw new Error("<head> not found within DOCUMENT.");!0!==this.componentType.noBlock&&this.renderer.setStyle(this.componentRef.location.nativeElement,"display","block"),this.component.style&&Object.keys(this.component.style.large).forEach(e=>{this.renderer.setStyle(this.componentRef.location.nativeElement,e,this.component.style.large[e])}),this.renderer.addClass(this.componentRef.location.nativeElement,"rxshaper-block"),this.renderer.addClass(this.componentRef.location.nativeElement,this.component.id),this.component.class&&this.component.class.length&&this.component.class.forEach(e=>this.renderer.addClass(this.componentRef.location.nativeElement,e))}renderChildren(){if(this.hasChildren()){const e=this.componentRef.instance;if(e.getContainerRef){const t=e.getContainerRef();this.childrenContainer=t,this.component.children.forEach(e=>{this.createChildrenRenderer(e)})}}}createChildrenRenderer(t){this.createChildInjector(this.componentRef.injector).get(e).onInit(t)}hasChildren(){return this.component&&this.component.children&&this.component.children.length>0}handleChanges(){this.componentRef.changeDetectorRef.detectChanges()}onDestroy(){this.childrenRenderers.forEach(e=>e.onDestroy()),this.shaperManager.unregister(this.component.id),this.componentState.onDestroy(),this.destroy.next(),this.destroy.complete(),this.componentRef.destroy(),this.executeExtensions(e=>e.onDestroy)}registerChild(e){this.childrenRenderers.push(e)}}return e.\u0275fac=function(t){return new(t||e)(Je(Ws),Je(bs),Je(vo),Je(Cs),Je(bl),Je(df),Je(af),Je(e,12))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),Kb=(()=>{class e{constructor(e){this.service=e}ngOnInit(){this.service.onInit(this.component)}ngOnDestroy(){this.service.onDestroy()}}return e.\u0275fac=function(t){return new(t||e)(ko(Gb))},e.\u0275dir=Ot({type:e,selectors:[["","rxshaperBlockRenderer",""]],inputs:{component:"component"},features:[gs([Gb])]}),e})();const Yb=["rxshaper-renderer",""];function Zb(e,t){}function Xb(e,t){1&e&&jo(0,Zb,0,0,"ng-template",1),2&e&&To("component",t.$implicit)}let Jb=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=mt({type:e,selectors:[["","rxshaper-renderer",""]],inputs:{components:"components"},features:[gs([af])],attrs:Yb,decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["rxshaperBlockRenderer","",3,"component"]],template:function(e,t){1&e&&jo(0,Xb,1,1,void 0,0),2&e&&To("ngForOf",t.components)},directives:[zl,Kb],styles:[""]}),e})();const Qb=["containerRef"];let ey=(()=>{class e{constructor(e){this.container=e,this.mouseOver=!1}getContainer(){return this.container.nativeElement}getContainerRef(){return this.containerRef}onMouseEnter(e){e.stopPropagation(),this.mouseOver||(this.wrapper.onOver(this),this.mouseOver=!0)}onMouseOut(){this.mouseOver=!1}ngOnInit(){this.wrapper.newOver.subscribe(()=>this.mouseOver&&this.onMouseOut())}onClick(e){e.stopPropagation(),this.wrapper.onClick(this)}}return e.\u0275fac=function(t){return new(t||e)(ko(ys))},e.\u0275cmp=mt({type:e,selectors:[["wrapper-test"]],viewQuery:function(e,t){var n;1&e&&pa(Qb,!0,Ws),2&e&&fa(n=ma())&&(t.containerRef=n.first)},decls:3,vars:2,consts:[[1,"wrapper-test",3,"click","mouseover","mouseleave"],["containerRef",""]],template:function(e,t){1&e&&(Po(0,"div",0),Lo("click",(function(e){return t.onClick(e)}))("mouseover",(function(e){return t.onMouseEnter(e)}))("mouseleave",(function(){return t.onMouseOut()})),Do(1,null,1),Ao()),2&e&&Wo("over",t.mouseOver)},encapsulation:2}),e})(),ty=(()=>{class e{constructor(e){this.resolver=e,this.newOver=new j,this.newClick=new j}wrap(e,t,n){const r=this.resolver.resolveComponentFactory(ey),i=e.createComponent(r);i.instance.wrapper=this,i.instance.blockRenderer=n;const o=i.instance.containerRef;return n.properties.wrapper={component:i},o}unwrap(e,t,n){n.properties.wrapper.component.destroy()}onOver(e){this.newOver.next(e)}onClick(e){this.newClick.next(e)}}return e.\u0275fac=function(t){return new(t||e)(Je(bs))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),ny=(()=>{class e{constructor(e){this.element=e,this.drag=new na,this.dragX=this.drag.pipe(F(e=>e.x)),this.dragY=this.drag.pipe(F(e=>e.y)),this.dragStart=new na,this.dragEnd=new na,this._drag=new j,this.destroy=new j,this.throttleTime=50,this.throttleFrame=!0,this.dragging=!1,this.startingPosition=null}onMouseDown(e){var t;e.stopPropagation(),this.dragging=!0,this.startingPosition={x:(t=e).clientX,y:t.clientY},this.dragStart.emit(this.startingPosition)}onMouseUpW(e){this.dragging&&(this.dragging=!1,this.dragEnd.emit(ry(this.startingPosition,e)))}onMouseMove(e){this.dragging&&this._drag.next(ry(this.startingPosition,e))}ngOnInit(){this._drag.pipe(this.throttleFrame?Rf(0,Af):Rf(this.throttleTime)).subscribe(e=>this.drag.emit(e))}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}}return e.\u0275fac=function(t){return new(t||e)(ko(ys))},e.\u0275dir=Ot({type:e,selectors:[["","rxshaperBlockResizerHelper",""]],hostBindings:function(e,t){1&e&&Lo("mousedown",(function(e){return t.onMouseDown(e)}))("mouseup",(function(e){return t.onMouseUpW(e)}),!1,Ft)("mousemove",(function(e){return t.onMouseMove(e)}),!1,Ft)},inputs:{throttleTime:"throttleTime",throttleFrame:"throttleFrame"},outputs:{drag:"drag",dragStart:"dragStart"},exportAs:["resizer"]}),e})();function ry(e,t){return{x:t.clientX-e.x,y:t.clientY-e.y}}const iy=["blockOver"],oy=["blockSelected"],sy=["marginTop"],ay=["marginRight"],ly=["marginBottom"],cy=["marginLeft"],uy=["paddingTop"],dy=["paddingRight"],hy=["paddingBottom"],fy=["paddingLeft"],py=["resizerMarginTop"],gy=["resizerMarginRight"],my=["resizerMarginBottom"],vy=["resizerMarginLeft"],by=["resizerPaddingTop"],yy=["resizerPaddingRight"],wy=["resizerPaddingBottom"],xy=["resizerPaddingLeft"];function Oy(e,t){if(1&e&&(Po(0,"div",40),Zo(1),Ao()),2&e){const e=Fo();Ir(1),Xo(e.over.blockRenderer.componentType.friendlyName||e.over.blockRenderer.componentType.name)}}function Cy(e,t){if(1&e&&(Po(0,"div",41),Zo(1),Ao()),2&e){const e=Fo();Ir(1),Xo(e.selected.blockRenderer.componentType.friendlyName||e.selected.blockRenderer.componentType.name)}}let _y=(()=>{class e{constructor(e,t){this.wrapper=e,this.renderer=t,this.destroy=new j,this.hideOver=!0,this.hideSelected=!0,this.hideOverlay=!1,this.dragging=!1}ngOnInit(){Tf(this.builder,"scroll").pipe(Bf(this.destroy),hu(()=>this.onScrollStart()),jp(200),hu(()=>this.onScrollEnd())).subscribe(),this.wrapper.newOver.subscribe(e=>{e===this.selected&&(e=null),this.over=e,this.updateOver()}),this.wrapper.newClick.subscribe(e=>{this.over===e&&(this.over=null,this.updateOver()),this.selected=e,this.selectedBlockEl=this.selected.blockRenderer.componentRef.location.nativeElement,this.updateSelected()}),this.listenAndUpdateOnDragEvent(this.resizerMarginTopEl,"marginTop","margin-top",!0,!0),this.listenAndUpdateOnDragEvent(this.resizerMarginRightEl,"marginRight","margin-right",!1,!1),this.listenAndUpdateOnDragEvent(this.resizerMarginBottomEl,"marginBottom","margin-bottom",!0,!1),this.listenAndUpdateOnDragEvent(this.resizerMarginLeftEl,"marginLeft","margin-left",!1,!0),this.listenAndUpdateOnDragEvent(this.resizerPaddingTopEl,"paddingTop","padding-top",!0,!1),this.listenAndUpdateOnDragEvent(this.resizerPaddingRightEl,"paddingRight","padding-right",!1,!0),this.listenAndUpdateOnDragEvent(this.resizerPaddingBottomEl,"paddingBottom","padding-bottom",!0,!0),this.listenAndUpdateOnDragEvent(this.resizerPaddingLeftEl,"paddingLeft","padding-left",!1,!1)}updateOver(){if(!this.over)return void(this.hideOver=!0);this.hideOver=!1;const e=this.over.blockRenderer.componentRef.location.nativeElement,t=(window.getComputedStyle(e),e.getBoundingClientRect());this.renderer.setStyle(this.blockOverEl.nativeElement,"top",t.y+"px"),this.renderer.setStyle(this.blockOverEl.nativeElement,"left",t.x+"px"),this.renderer.setStyle(this.blockOverEl.nativeElement,"width",t.width+"px"),this.renderer.setStyle(this.blockOverEl.nativeElement,"height",t.height+"px")}updateSelected(){this.selected?(this.hideSelected=!1,this.updateSelectedOverlay()):this.hideSelected=!0}updateSelectedOverlay(){const e=this.selected.blockRenderer.componentRef.location.nativeElement,t=window.getComputedStyle(e),n=e.getBoundingClientRect(),r=(parseFloat(t.paddingLeft),parseFloat(t.paddingRight),parseFloat(t.paddingTop),parseFloat(t.paddingBottom),parseFloat(t.borderLeftWidth),parseFloat(t.borderRightWidth),parseFloat(t.borderTopWidth),parseFloat(t.borderBottomWidth),e.offsetWidth),i=e.offsetHeight,o=parseInt(t.marginTop),s=parseInt(t.marginRight),a=parseInt(t.marginBottom),l=parseInt(t.marginLeft),c=parseInt(t.paddingTop),u=parseInt(t.paddingRight),d=parseInt(t.paddingBottom),h=parseInt(t.paddingLeft);this.renderer.setStyle(this.blockSelectedEl.nativeElement,"top",n.y+"px"),this.renderer.setStyle(this.blockSelectedEl.nativeElement,"left",n.x+"px"),this.renderer.setStyle(this.blockSelectedEl.nativeElement,"width",n.width+"px"),this.renderer.setStyle(this.blockSelectedEl.nativeElement,"height",n.height+"px"),this.renderer.setStyle(this.marginTopEl.nativeElement,"top",-o+"px"),this.renderer.setStyle(this.marginTopEl.nativeElement,"height",o+"px"),this.renderer.setStyle(this.marginRightEl.nativeElement,"right",-s+"px"),this.renderer.setStyle(this.marginRightEl.nativeElement,"width",s+"px"),this.renderer.setStyle(this.marginBottomEl.nativeElement,"bottom",-a+"px"),this.renderer.setStyle(this.marginBottomEl.nativeElement,"height",a+"px"),this.renderer.setStyle(this.marginLeftEl.nativeElement,"left",-l+"px"),this.renderer.setStyle(this.marginLeftEl.nativeElement,"width",l+"px"),this.renderer.setStyle(this.paddingTopEl.nativeElement,"top",0),this.renderer.setStyle(this.paddingTopEl.nativeElement,"height",c+"px"),this.renderer.setStyle(this.paddingRightEl.nativeElement,"right",0),this.renderer.setStyle(this.paddingRightEl.nativeElement,"width",u+"px"),this.renderer.setStyle(this.paddingBottomEl.nativeElement,"bottom",0),this.renderer.setStyle(this.paddingBottomEl.nativeElement,"height",d+"px"),this.renderer.setStyle(this.paddingLeftEl.nativeElement,"left",0),this.renderer.setStyle(this.paddingLeftEl.nativeElement,"width",h+"px");const f=20;this.renderer.setStyle(this.resizerMarginTopEl.element.nativeElement,"top",-Math.max(o,f)+"px"),this.renderer.setStyle(this.resizerMarginTopEl.element.nativeElement,"left",n.width/2+"px"),this.renderer.setStyle(this.resizerMarginRightEl.element.nativeElement,"right",-Math.max(s,f)+"px"),this.renderer.setStyle(this.resizerMarginRightEl.element.nativeElement,"top",n.height/2+"px"),this.renderer.setStyle(this.resizerMarginBottomEl.element.nativeElement,"bottom",-Math.max(a,f)+"px"),this.renderer.setStyle(this.resizerMarginBottomEl.element.nativeElement,"left",n.width/2+"px"),this.renderer.setStyle(this.resizerMarginLeftEl.element.nativeElement,"left",-Math.max(l,f)+"px"),this.renderer.setStyle(this.resizerMarginLeftEl.element.nativeElement,"top",n.height/2+"px"),this.renderer.setStyle(this.resizerPaddingTopEl.element.nativeElement,"top",Math.max(c,f)+"px"),this.renderer.setStyle(this.resizerPaddingTopEl.element.nativeElement,"left",r/2+"px"),this.renderer.setStyle(this.resizerPaddingRightEl.element.nativeElement,"right",Math.max(u,f)+"px"),this.renderer.setStyle(this.resizerPaddingRightEl.element.nativeElement,"top",i/2+"px"),this.renderer.setStyle(this.resizerPaddingBottomEl.element.nativeElement,"bottom",Math.max(d,f)+"px"),this.renderer.setStyle(this.resizerPaddingBottomEl.element.nativeElement,"left",r/2+"px"),this.renderer.setStyle(this.resizerPaddingLeftEl.element.nativeElement,"left",Math.max(h,f)+"px"),this.renderer.setStyle(this.resizerPaddingLeftEl.element.nativeElement,"top",i/2+"px")}setOverlayHidden(e){this.hideOverlay=e}onScrollStart(){this.setOverlayHidden(!0)}onScrollEnd(){this.setOverlayHidden(!1),this.updateOver(),this.updateSelected()}listenAndUpdateOnDragEvent(e,t,n,r,i){this.listenDragEvent(e,e=>parseInt(window.getComputedStyle(this.selectedBlockEl)[t]),(e,t)=>{this.renderer.setStyle(this.selectedBlockEl,n,t+(i?-1:1)*(r?e.y:e.x)+"px")},(e,t)=>{})}listenDragEvent(e,t,n,r){let i;e.dragStart.pipe(hu(e=>(this.dragging=!0,i=t(e)))).pipe(Bf(this.destroy)).subscribe(),e.drag.pipe(hu(e=>{n(e,i),this.updateSelectedOverlay()})).pipe(Bf(this.destroy)).subscribe(),e.dragEnd.pipe(hu(e=>{this.dragging=!1,r(e,i)})).pipe(Bf(this.destroy)).subscribe()}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}}return e.\u0275fac=function(t){return new(t||e)(ko(ty),ko(Cs))},e.\u0275cmp=mt({type:e,selectors:[["rxshaper-wrapper-block-boundings"]],viewQuery:function(e,t){var n;1&e&&(pa(iy,!0),pa(oy,!0),pa(sy,!0),pa(ay,!0),pa(ly,!0),pa(cy,!0),pa(uy,!0),pa(dy,!0),pa(hy,!0),pa(fy,!0),pa(py,!0),pa(gy,!0),pa(my,!0),pa(vy,!0),pa(by,!0),pa(yy,!0),pa(wy,!0),pa(xy,!0)),2&e&&(fa(n=ma())&&(t.blockOverEl=n.first),fa(n=ma())&&(t.blockSelectedEl=n.first),fa(n=ma())&&(t.marginTopEl=n.first),fa(n=ma())&&(t.marginRightEl=n.first),fa(n=ma())&&(t.marginBottomEl=n.first),fa(n=ma())&&(t.marginLeftEl=n.first),fa(n=ma())&&(t.paddingTopEl=n.first),fa(n=ma())&&(t.paddingRightEl=n.first),fa(n=ma())&&(t.paddingBottomEl=n.first),fa(n=ma())&&(t.paddingLeftEl=n.first),fa(n=ma())&&(t.resizerMarginTopEl=n.first),fa(n=ma())&&(t.resizerMarginRightEl=n.first),fa(n=ma())&&(t.resizerMarginBottomEl=n.first),fa(n=ma())&&(t.resizerMarginLeftEl=n.first),fa(n=ma())&&(t.resizerPaddingTopEl=n.first),fa(n=ma())&&(t.resizerPaddingRightEl=n.first),fa(n=ma())&&(t.resizerPaddingBottomEl=n.first),fa(n=ma())&&(t.resizerPaddingLeftEl=n.first))},inputs:{builder:"builder"},decls:40,vars:8,consts:[[1,"wrapper-boundings-container"],["container",""],[1,"wrapper-boundings-block","wrapper-boundings-block-over"],["blockOver",""],["class","block-tooltip",4,"ngIf"],[1,"wrapper-boundings-block","wrapper-boundings-block-selected"],["blockSelected",""],[1,"wrapper-boundings-helper","wrapper-boundings-margin","wrapper-boundings-margin-top"],["marginTop",""],[1,"wrapper-boundings-helper","wrapper-boundings-margin","wrapper-boundings-margin-right"],["marginRight",""],[1,"wrapper-boundings-helper","wrapper-boundings-margin","wrapper-boundings-margin-bottom"],["marginBottom",""],[1,"wrapper-boundings-helper","wrapper-boundings-margin","wrapper-boundings-margin-left"],["marginLeft",""],[1,"wrapper-boundings-helper","wrapper-boundings-padding","wrapper-boundings-padding-top"],["paddingTop",""],[1,"wrapper-boundings-helper","wrapper-boundings-padding","wrapper-boundings-padding-right"],["paddingRight",""],[1,"wrapper-boundings-helper","wrapper-boundings-padding","wrapper-boundings-padding-bottom"],["paddingBottom",""],[1,"wrapper-boundings-helper","wrapper-boundings-padding","wrapper-boundings-padding-left"],["paddingLeft",""],["rxshaperBlockResizerHelper","",1,"wrapper-resizer-helper","wrapper-resizer-margin","wrapper-resizer-margin-top","vertical"],["resizerMarginTop","resizer"],["rxshaperBlockResizerHelper","",1,"wrapper-resizer-helper","wrapper-resizer-margin","wrapper-resizer-margin-right","horizontal"],["resizerMarginRight","resizer"],["rxshaperBlockResizerHelper","",1,"wrapper-resizer-helper","wrapper-resizer-margin","wrapper-resizer-margin-bottom","vertical"],["resizerMarginBottom","resizer"],["rxshaperBlockResizerHelper","",1,"wrapper-resizer-helper","wrapper-resizer-margin","wrapper-resizer-margin-left","horizontal"],["resizerMarginLeft","resizer"],["rxshaperBlockResizerHelper","",1,"wrapper-resizer-helper","wrapper-resizer-padding","wrapper-resizer-padding-top","vertical"],["resizerPaddingTop","resizer"],["rxshaperBlockResizerHelper","",1,"wrapper-resizer-helper","wrapper-resizer-padding","wrapper-resizer-padding-right","horizontal"],["resizerPaddingRight","resizer"],["rxshaperBlockResizerHelper","",1,"wrapper-resizer-helper","wrapper-resizer-padding","wrapper-resizer-padding-bottom","vertical"],["resizerPaddingBottom","resizer"],["rxshaperBlockResizerHelper","",1,"wrapper-resizer-helper","wrapper-resizer-padding","wrapper-resizer-padding-left","horizontal"],["resizerPaddingLeft","resizer"],["class","block-actions",4,"ngIf"],[1,"block-tooltip"],[1,"block-actions"]],template:function(e,t){1&e&&(Po(0,"div",0,1),Po(2,"div",2,3),jo(4,Oy,2,1,"div",4),Ao(),Po(5,"div",5,6),Mo(7,"div",7,8),Mo(9,"div",9,10),Mo(11,"div",11,12),Mo(13,"div",13,14),Mo(15,"div",15,16),Mo(17,"div",17,18),Mo(19,"div",19,20),Mo(21,"div",21,22),Mo(23,"div",23,24),Mo(25,"div",25,26),Mo(27,"div",27,28),Mo(29,"div",29,30),Mo(31,"div",31,32),Mo(33,"div",33,34),Mo(35,"div",35,36),Mo(37,"div",37,38),jo(39,Cy,2,1,"div",39),Ao(),Ao()),2&e&&(Wo("hidden",t.hideOverlay),Ir(2),Wo("hidden",t.hideOver||t.dragging),Ir(2),To("ngIf",t.over),Ir(1),Wo("hidden",t.hideSelected),Ir(34),To("ngIf",t.selected))},directives:[Hl,ny],styles:["[_nghost-%COMP%]{position:absolute;pointer-events:none;overflow:visible}.wrapper-boundings-container[_ngcontent-%COMP%], [_nghost-%COMP%]{top:0;left:0;width:100%;height:100%}.wrapper-boundings-container[_ngcontent-%COMP%]{position:relative}.wrapper-boundings-container.hidden[_ngcontent-%COMP%]{display:none}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]{position:absolute;border:1px solid #dc143c}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block.hidden[_ngcontent-%COMP%]{display:none}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper[_ngcontent-%COMP%]{position:absolute;border:1px solid #dc143c}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block.wrapper-boundings-block-over[_ngcontent-%COMP%]   .block-tooltip[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff;padding:5px;height:20px;border-radius:4px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;position:relative;top:calc(100% + 10px);left:10px}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block.wrapper-boundings-block-selected[_ngcontent-%COMP%]   .block-actions[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff;padding:5px;height:20px;border-radius:4px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;position:absolute;top:calc(100% + 10px);left:10px}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-margin[_ngcontent-%COMP%]{background-color:rgba(100,0,0,.5)}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-margin.wrapper-boundings-margin-top[_ngcontent-%COMP%]{width:100%}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-margin.wrapper-boundings-margin-right[_ngcontent-%COMP%]{height:100%}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-margin.wrapper-boundings-margin-bottom[_ngcontent-%COMP%]{width:100%}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-margin.wrapper-boundings-margin-left[_ngcontent-%COMP%]{height:100%}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-padding[_ngcontent-%COMP%]{background-color:rgba(0,100,0,.5)}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-padding.wrapper-boundings-padding-top[_ngcontent-%COMP%]{width:100%}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-padding.wrapper-boundings-padding-right[_ngcontent-%COMP%]{height:100%}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-padding.wrapper-boundings-padding-bottom[_ngcontent-%COMP%]{width:100%}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-boundings-helper.wrapper-boundings-padding.wrapper-boundings-padding-left[_ngcontent-%COMP%]{height:100%}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-resizer-helper[_ngcontent-%COMP%]{border-radius:10px;width:6px;height:6px;margin-top:-3px;margin-left:-3px;pointer-events:visible;-webkit-user-select:none;user-select:none;position:absolute}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-resizer-helper.vertical[_ngcontent-%COMP%]{cursor:s-resize}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-resizer-helper.horizontal[_ngcontent-%COMP%]{cursor:e-resize}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-resizer-helper.wrapper-resizer-margin[_ngcontent-%COMP%]{background-color:rgba(200,0,0,.8)}.wrapper-boundings-container[_ngcontent-%COMP%]   .wrapper-boundings-block[_ngcontent-%COMP%]   .wrapper-resizer-helper.wrapper-resizer-padding[_ngcontent-%COMP%]{background-color:rgba(0,200,0,.8)}"]}),e})();const Sy=["builder"];let jy=(()=>{class e{constructor(){this.title="app",this.data={property:"hello",fn:e=>alert(e)},this.components=tf}load(e){console.log("load",e)}error(e){console.log("error",e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=mt({type:e,selectors:[["app-root"]],viewQuery:function(e,t){var n;1&e&&pa(Sy,!0,ys),2&e&&fa(n=ma())&&(t.builderRef=n.first)},decls:4,vars:2,consts:[[1,"rxshaper-builder"],["rxshaper-renderer","",1,"rxshaper-renderer",3,"components"],["builder",""],[3,"builder"]],template:function(e,t){1&e&&(Po(0,"div",0),Mo(1,"div",1,2),Mo(3,"rxshaper-wrapper-block-boundings",3),Ao()),2&e&&(Ir(1),To("components",t.components),Ir(2),To("builder",t.builderRef.nativeElement))},directives:[Jb,_y],styles:[".rxshaper-builder[_ngcontent-%COMP%]{position:relative;width:100vw;height:100vh;overflow:hidden}.rxshaper-builder[_ngcontent-%COMP%]   .rxshaper-renderer[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}.gutter-left[_ngcontent-%COMP%]{margin-left:9px}.col-span-2[_ngcontent-%COMP%]{grid-column:span 2}.flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}header[_ngcontent-%COMP%]{background-color:#143055;color:#fff;padding:5px;border-radius:3px}main[_ngcontent-%COMP%]{padding:0 36px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{margin-left:18px;font-size:24px}h2[_ngcontent-%COMP%]{font-size:20px;margin:40px 0 10px}.resources[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center}.resources[_ngcontent-%COMP%]{list-style:none;padding:0;display:grid;grid-gap:9px;grid-template-columns:1fr 1fr}.resource[_ngcontent-%COMP%]{color:#0094ba;height:36px;background-color:transparent;border:1px solid rgba(0,0,0,.12);border-radius:4px;padding:3px 9px;text-decoration:none}.resource[_ngcontent-%COMP%]:hover{background-color:rgba(68,138,255,.04)}pre[_ngcontent-%COMP%]{padding:9px;border-radius:4px;background-color:#000;color:#eee}details[_ngcontent-%COMP%]{border-radius:4px;color:#333;background-color:transparent;border:1px solid rgba(0,0,0,.12);padding:3px 9px;margin-bottom:9px}summary[_ngcontent-%COMP%]{cursor:pointer;outline:none;height:36px;line-height:36px}.github-star-container[_ngcontent-%COMP%]{margin-top:12px;line-height:20px}.github-star-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;color:#333}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;display:flex;align-items:center;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:rgba(27,31,35,.35);background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}"]}),e})(),ky=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=mt({type:e,selectors:[["foo"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();function Ty(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function Ey(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function Py(e){return e.type="angular",function(e){return t=>{!function(e){e=function(e){const t=df.InputsStore.find(t=>t.class===e.class),n=e.inputs?[...e.inputs]:[];t&&n.push(...t.inputs);const r=df.OutputsStore.find(t=>t.class===e.class),i=e.outputs?[...e.outputs]:[];return r&&i.push(...r.outputs),Object.assign(Object.assign({},e),{inputs:n,outputs:i})}(e);const t=df.Components.find(t=>t.name===e.name);t?df.Components.splice(df.Components.indexOf(t),1,e):df.Components.push(e)}(Object.assign(Object.assign({},e),{class:t}))}}(e)}function Ay(e){return function(e){return(t,n)=>{!function(e,t){const n=df.Components.find(t=>t.class===e);if(n)n.inputs||(n.inputs=[]),n.inputs.push(t);else{const n=df.InputsStore.find(t=>t.class===e);n?n.inputs.push(t):df.InputsStore.push({class:e,inputs:[t]})}}(t.constructor,"string"==typeof e?n!==e?{name:n,label:e}:{name:e}:e||{name:n})}}(e)}const My=["containerRef"],Dy=["rxshaper-block-box",""],Iy=["*"];let Ly=(()=>{let e=class{constructor(e){this.container=e}getContainer(){return this.container.nativeElement}getContainerRef(){return this.containerRef}};return e.\u0275fac=function(t){return new(t||e)(ko(ys))},e.\u0275cmp=mt({type:e,selectors:[["div","rxshaper-block-box",""]],viewQuery:function(e,t){var n;1&e&&pa(My,!0,Ws),2&e&&fa(n=ma())&&(t.containerRef=n.first)},attrs:Dy,ngContentSelectors:Iy,decls:3,vars:0,consts:[["containerRef",""]],template:function(e,t){1&e&&(zo(),Do(0,null,0),Bo(2))},encapsulation:2}),e=Ty([Py({tag:"box",name:"Box",canHaveChildren:!0,noBlock:!0})],e),e})();const Ny=["rxshaper-block-text",""];let Ry=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=mt({type:e,selectors:[["p","rxshaper-block-text",""]],inputs:{text:"text"},attrs:Ny,decls:1,vars:1,template:function(e,t){1&e&&Zo(0),2&e&&Xo(t.text)},encapsulation:2}),Ty([Ay(),Ey("design:type",String)],e.prototype,"text",void 0),e=Ty([Py({tag:"text",name:"Text",canHaveChildren:!1,noBlock:!0})],e),e})();var Fy;const Vy=["container"],zy=["containerRef"];function By(e,t){if(1&e&&(Po(0,"div"),Zo(1),Ao()),2&e){const e=Fo();Ir(1),Jo("parent props: ",e.parent.test,"")}}function Hy(e,t){if(1&e&&(Po(0,"div"),Zo(1),Ao()),2&e){const e=t.$implicit;Ir(1),Jo("child props: ",e.test,"")}}function Uy(e,t){if(1&e&&(Po(0,"div"),Zo(1,"children: "),jo(2,Hy,2,1,"div",6),Ao()),2&e){const e=Fo();Ir(2),To("ngForOf",e.children)}}function $y(e,t){if(1&e&&(Po(0,"div"),Zo(1),Ao()),2&e){const e=t.$implicit;Ir(1),Jo("child props: ",e.test,"")}}function Wy(e,t){if(1&e&&(Po(0,"div"),Zo(1,"children2: "),jo(2,$y,2,1,"div",6),Ao()),2&e){const e=Fo();Ir(2),To("ngForOf",e.children2)}}const qy=["*"];let Gy=(()=>{let e=Fy=class{constructor(e,t){this.parent=e,this.factory=t,this.children=new ia,this.children2=new ia,this.doSomething=new na,this.counter=0,this.level=this.parent?this.parent.level+1:1}ngOnInit(){this.children.changes.subscribe(e=>{console.log("children",e)}),this.children2.changes.subscribe(e=>{console.log("children2",e)})}onDoSomething(){this.counter++,this.doSomething.emit({test:this.test,counter:this.counter})}getContainer(){return this.container.nativeElement}getContainerRef(){return this.containerRef}};return e.\u0275fac=function(t){return new(t||e)(ko(e,12),ko(bs))},e.\u0275cmp=mt({type:e,selectors:[["rxshaper-block"]],contentQueries:function(e,t,n){var r,i,o,s,a;1&e&&(i=n,o=Fy,s=!1,function(e,t,n,r,i,o,s,a){e.firstCreatePass&&(ba(e,new aa(n,r,!1,i),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(e.contentQueries.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(e,a)),va(e,t)}(cn(),ln(),o,s,a,0,un(),i)),2&e&&fa(r=ma())&&(t.children=r)},viewQuery:function(e,t){var n,r;1&e&&(pa(Vy,!0),pa(zy,!0,Ws),r=Fy,!0,ga(cn(),ln(),r,true,undefined,!1)),2&e&&(fa(n=ma())&&(t.container=n.first),fa(n=ma())&&(t.containerRef=n.first),fa(n=ma())&&(t.children2=n))},inputs:{test:"test"},outputs:{doSomething:"doSomething"},ngContentSelectors:qy,decls:15,vars:6,consts:[[1,"block"],[3,"click"],[4,"ngIf"],[1,"block-children-container"],["container",""],["containerRef",""],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(zo(),Po(0,"div",0),Po(1,"div"),Zo(2),Ao(),Po(3,"div"),Zo(4),Ao(),Po(5,"button",1),Lo("click",(function(){return t.onDoSomething()})),Zo(6,"do something"),Ao(),jo(7,By,2,1,"div",2),jo(8,Uy,3,1,"div",2),jo(9,Wy,3,1,"div",2),Po(10,"div",3,4),Do(12,null,5),Bo(14),Ao(),Ao()),2&e&&(Ir(2),Jo("angular block works! ",t.test,""),Ir(2),Qo("level: ",t.level," | counter: ",t.counter,""),Ir(3),To("ngIf",t.parent),Ir(1),To("ngIf",t.children.length),Ir(1),To("ngIf",t.children2.length))},directives:[Hl,zl],styles:[".block[_ngcontent-%COMP%]{background:#e5b08c;margin:10px;padding:10px}.block[_ngcontent-%COMP%]   .block-children-container[_ngcontent-%COMP%]{background:#8ce58d;margin:10px;padding:10px}"]}),Ty([Ay(),Ey("design:type",String)],e.prototype,"test",void 0),Ty([Ay("test2input"),Ey("design:type",String)],e.prototype,"test2",void 0),Ty([function(e){return(t,n)=>{!function(e,t){const n=df.Components.find(t=>t.class===e);if(n)n.outputs||(n.outputs=[]),n.outputs.push(t);else{const n=df.OutputsStore.find(t=>t.class===e);n?n.outputs.push(t):df.OutputsStore.push({class:e,outputs:[t]})}}(t.constructor,"string"==typeof e?n!==e?{name:n,label:e}:{name:e}:e||{name:n})}}(t),Ey("design:type",na)],e.prototype,"doSomething",void 0),e=Fy=Ty([Py({tag:"block",name:"Block",canHaveChildren:!0})],e),e;var t})();function Ky(){return{types:[{name:"Block",class:Gy,inputs:[{name:"test"}],outputs:[{name:"doSomething"}]},{name:"Box",class:Ly,canHaveChildren:!0,noBlock:!0},{name:"Text",class:Ry,noBlock:!0,inputs:[{name:"text"}]}],extensions:[]}}let Yy=(()=>{class e{constructor(){}static forRoot(t={}){return{ngModule:e,providers:[{provide:cf,multi:!0,useFactory:Ky,deps:[]},{provide:cf,useValue:t,multi:!0},uf,df]}}static forChild(t={}){return{ngModule:e,providers:[{provide:cf,useValue:t,multi:!0},uf,df]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=ge({factory:function(t){return new(t||e)},imports:[[]]}),e})();class Zy extends class{afterApplyStyle(e,t,n){}afterCreateState(e,t,n){}afterRender(e,t,n){}afterStateBindings(e,t,n){}beforeApplyStyle(e,t,n){}beforeCreateState(e,t,n){}beforeRender(e,t,n){}beforeStateBindings(e,t,n){}afterRenderChildren(e,t,n){}beforeRenderChildren(e,t,n){}onDestroy(e,t,n){}onInit(e,t,n){}}{afterRender(e,t){console.log("TestExtension.afterRender")}}function Xy(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Jy(e){switch(e.length){case 0:return new Gv;case 1:return e[0];default:return new Kv(e)}}function Qy(e,t,n,r,i={},o={}){const s=[],a=[];let l=-1,c=null;if(r.forEach(e=>{const n=e.offset,r=n==l,u=r&&c||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,s),a){case"!":a=i[n];break;case Uv:a=o[n];break;default:a=t.normalizeStyleValue(n,r,a,s)}u[r]=a}),r||a.push(u),c=u,l=n}),s.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${s.join(e)}`)}return a}function ew(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&tw(n,"start",e)));break;case"done":e.onDone(()=>r(n&&tw(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&tw(n,"destroy",e)))}}function tw(e,t,n){const r=n.totalTime,i=nw(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),o=e._data;return null!=o&&(i._data=o),i}function nw(e,t,n,r,i="",o=0,s){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function rw(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function iw(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let ow=(e,t)=>!1,sw=(e,t)=>!1,aw=(e,t,n)=>[];const lw=Xy();(lw||"undefined"!=typeof Element)&&(ow=(e,t)=>e.contains(t),sw=(()=>{if(lw||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):sw}})(),aw=(e,t,n)=>{let r=[];if(n)r.push(...e.querySelectorAll(t));else{const n=e.querySelector(t);n&&r.push(n)}return r});let cw=null,uw=!1;function dw(e){cw||(cw=("undefined"!=typeof document?document.body:null)||{},uw=!!cw.style&&"WebkitAppearance"in cw.style);let t=!0;return cw.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in cw.style,!t&&uw)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in cw.style),t}const hw=sw,fw=ow,pw=aw;function gw(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let mw=(()=>{class e{validateStyleProperty(e){return dw(e)}matchesElement(e,t){return hw(e,t)}containsElement(e,t){return fw(e,t)}query(e,t,n){return pw(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,i,o=[],s){return new Gv(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})(),vw=(()=>{class e{}return e.NOOP=new mw,e})();const bw="ng-enter",yw="ng-leave",ww="ng-trigger",xw=".ng-trigger",Ow="ng-animating",Cw=".ng-animating";function _w(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Sw(parseFloat(t[1]),t[2])}function Sw(e,t){switch(t){case"s":return 1e3*e;default:return e}}function jw(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,i=0,o="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=Sw(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Sw(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=e;if(!n){let n=!1,o=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(o,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:i,easing:o}}(e,t,n)}function kw(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Tw(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else kw(e,n);return n}function Ew(e,t,n){return n?t+":"+n+";":""}function Pw(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=Ew(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=Ew(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function Aw(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const i=Vw(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),Xy()&&Pw(e))}function Mw(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=Vw(t);e.style[n]=""}),Xy()&&Pw(e))}function Dw(e){return Array.isArray(e)?1==e.length?e[0]:$v(e):e}const Iw=new RegExp("{{\\s*(.+?)\\s*}}","g");function Lw(e){let t=[];if("string"==typeof e){let n;for(;n=Iw.exec(e);)t.push(n[1]);Iw.lastIndex=0}return t}function Nw(e,t,n){const r=e.toString(),i=r.replace(Iw,(e,r)=>{let i=t[r];return t.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?e:i}function Rw(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const Fw=/-+([a-z0-9])/g;function Vw(e){return e.replace(Fw,(...e)=>e[1].toUpperCase())}function zw(e,t){return 0===e||0===t}function Bw(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let o=t[0],s=[];if(r.forEach(e=>{o.hasOwnProperty(e)||s.push(e),o[e]=n[e]}),s.length)for(var i=1;i<t.length;i++){let n=t[i];s.forEach((function(t){n[t]=Uw(e,t)}))}}return t}function Hw(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #"+t.type)}}function Uw(e,t){return window.getComputedStyle(e)[t]}const $w="*";function Ww(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const i=r[1],o=r[2],s=r[3];t.push(Kw(i,s)),"<"!=o[0]||i==$w&&s==$w||t.push(Kw(s,i))}(e,n,t)):n.push(e),n}const qw=new Set(["true","1"]),Gw=new Set(["false","0"]);function Kw(e,t){const n=qw.has(e)||Gw.has(e),r=qw.has(t)||Gw.has(t);return(i,o)=>{let s=e==$w||e==i,a=t==$w||t==o;return!s&&n&&"boolean"==typeof i&&(s=i?qw.has(e):Gw.has(e)),!a&&r&&"boolean"==typeof o&&(a=o?qw.has(t):Gw.has(t)),s&&a}}const Yw=new RegExp("s*:selfs*,?","g");function Zw(e,t,n){return new Xw(e).build(t,n)}class Xw{constructor(e){this._driver=e}build(e,t){const n=new Jw(t);return this._resetContextStyleTimingState(n),Hw(this,Dw(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const i=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,i.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const i=this.visitTransition(e,t);n+=i.queryCount,r+=i.depCount,o.push(i)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(e=>{if(Qw(e)){const t=e;Object.keys(t).forEach(e=>{Lw(t[e]).forEach(e=>{o.hasOwnProperty(e)||i.add(e)})})}}),i.size){const n=Rw(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Hw(this,Dw(e.animation),t);return{type:1,matchers:Ww(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:ex(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>Hw(this,e,t)),options:ex(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const i=e.steps.map(e=>{t.currentTime=n;const i=Hw(this,e,t);return r=Math.max(r,t.currentTime),i});return t.currentTime=r,{type:3,steps:i,options:ex(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return tx(jw(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=tx(0,0,"");return e.dynamic=!0,e.strValue=r,e}return n=n||jw(r,t),tx(n.duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let i=e.styles?e.styles:Wv({});if(5==i.type)r=this.visitKeyframes(i,t);else{let i=e.styles,o=!1;if(!i){o=!0;const e={};n.easing&&(e.easing=n.easing),i=Wv(e)}t.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,t);s.isEmptyStep=o,r=s}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==Uv?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,i=null;return n.forEach(e=>{if(Qw(e)){const t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,i=t.currentTime;n&&i>0&&(i-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=t.collectedStyles[t.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},i=Lw(e);i.length&&i.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(Qw(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(Qw(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=l&&(r++,c=n.offset=l),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let u=0;r>0&&r<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(u=1/(c-1));const d=c-1,h=t.currentTime,f=t.currentAnimateTimings,p=f.duration;return l.forEach((e,r)=>{const o=u>0?r==d?1:u*r:i[r],s=o*p;t.currentTime=h+f.delay+s,f.duration=s,this._validateStyleAst(e,t),e.offset=o,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:Hw(this,Dw(e.animation),t),options:ex(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ex(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ex(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[i,o]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(Yw,"")),[e=e.replace(/@\*/g,xw).replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,Cw),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+i:i,rw(t.collectedStyles,t.currentQuerySelector,{});const s=Hw(this,Dw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:e.selector,options:ex(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:jw(e.timings,t.errors,!0);return{type:12,animation:Hw(this,Dw(e.animation),t),timings:n,options:null}}}class Jw{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Qw(e){return!Array.isArray(e)&&"object"==typeof e}function ex(e){var t;return e?(e=kw(e)).params&&(e.params=(t=e.params)?kw(t):null):e={},e}function tx(e,t,n){return{duration:e,delay:t,easing:n}}function nx(e,t,n,r,i,o,s=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class rx{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ix=new RegExp(":enter","g"),ox=new RegExp(":leave","g");function sx(e,t,n,r,i,o={},s={},a,l,c=[]){return(new ax).buildKeyframes(e,t,n,r,i,o,s,a,l,c)}class ax{buildKeyframes(e,t,n,r,i,o,s,a,l,c=[]){l=l||new rx;const u=new cx(e,t,l,r,i,c,[]);u.options=a,u.currentTimeline.setStyles([o],null,u.errors,a),Hw(this,n,u);const d=u.timelines.filter(e=>e.containsAnimation());if(d.length&&Object.keys(s).length){const e=d[d.length-1];e.allowOnlyTimelineStyles()||e.setStyles([s],null,u.errors,a)}return d.length?d.map(e=>e.buildKeyframes()):[nx(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const i=null!=n.duration?_w(n.duration):null,o=null!=n.delay?_w(n.delay):null;return 0!==i&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),Hw(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const i=e.options;if(i&&(i.params||i.delay)&&(r=t.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=lx);const e=_w(i.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>Hw(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?_w(e.options.delay):0;e.steps.forEach(o=>{const s=t.createSubContext(e.options);i&&s.delayNextStep(i),Hw(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return jw(t.params?Nw(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,o=t.createSubContext().currentTimeline;o.easing=n.easing,e.styles.forEach(e=>{o.forwardTime((e.offset||0)*i),o.setStyles(e.styles,e.easing,t.errors,t.options),o.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(r+i),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},i=r.delay?_w(r.delay):0;i&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=lx);let o=n;const s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{t.currentQueryIndex=r;const s=t.createSubContext(e.options,n);i&&s.delayNextStep(i),n===t.element&&(a=s.currentTimeline),Hw(this,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,i=e.timings,o=Math.abs(i.duration),s=o*(t.currentQueryTotal-1);let a=o*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;Hw(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const lx={};class cx{constructor(e,t,n,r,i,o,s,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lx,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new ux(this._driver,t,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=_w(n.duration)),null!=n.delay&&(r.delay=_w(n.delay));const i=n.params;if(i){let e=r.params;e||(e=this.options.params={}),Object.keys(i).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=Nw(i[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,i=new cx(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=lx,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new dx(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,i,o){let s=[];if(r&&s.push(this.element),e.length>0){e=(e=e.replace(ix,"."+this._enterClassName)).replace(ox,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),s.push(...t)}return i||0!=s.length||o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),s}}class ux{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ux(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Uv,this._currentKeyframe[e]=Uv}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const i=r&&r.params||{},o=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t),r.forEach(e=>{n[e]=Uv})):Tw(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(o).forEach(e=>{const t=Nw(o[e],i,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:Uv),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Tw(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?e.add(n):r==Uv&&t.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=e.size?Rw(e.values()):[],o=t.size?Rw(t.values()):[];if(n){const e=r[0],t=kw(e);e.offset=0,t.offset=1,r=[e,t]}return nx(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class dx extends ux{constructor(e,t,n,r,i,o,s=!1){super(e,t,o.delay),this.element=t,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],o=n+t,s=t/o,a=Tw(e[0],!1);a.offset=0,i.push(a);const l=Tw(e[0],!1);l.offset=hx(s),i.push(l);const c=e.length-1;for(let r=1;r<=c;r++){let s=Tw(e[r],!1);s.offset=hx((t+s.offset*n)/o),i.push(s)}n=o,t=0,r="",e=i}return nx(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function hx(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class fx{}class px extends fx{normalizePropertyName(e,t){return Vw(e)}normalizeStyleValue(e,t,n,r){let i="";const o=n.toString().trim();if(gx[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return o+i}}const gx=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function mx(e,t,n,r,i,o,s,a,l,c,u,d,h){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const vx={};class bx{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,i){return e.some(e=>e(t,n,r,i))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],i=this._stateStyles[e],o=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):o}build(e,t,n,r,i,o,s,a,l,c){const u=[],d=this.ast.options&&this.ast.options.params||vx,h=this.buildStyles(n,s&&s.params||vx,u),f=a&&a.params||vx,p=this.buildStyles(r,f,u),g=new Set,m=new Map,v=new Map,b="void"===r,y={params:Object.assign(Object.assign({},d),f)},w=c?[]:sx(e,t,this.ast.animation,i,o,h,p,y,l,u);let x=0;if(w.forEach(e=>{x=Math.max(e.duration+e.delay,x)}),u.length)return mx(t,this._triggerName,n,r,b,h,p,[],[],m,v,x,u);w.forEach(e=>{const n=e.element,r=rw(m,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const i=rw(v,n,{});e.postStyleProps.forEach(e=>i[e]=!0),n!==t&&g.add(n)});const O=Rw(g.values());return mx(t,this._triggerName,n,r,b,h,p,w,O,m,v,x)}}class yx{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const n={},r=kw(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let o=i[e];o.length>1&&(o=Nw(o,r,t)),n[e]=o})}}),n}}class wx{constructor(e,t){this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new yx(e.style,e.options&&e.options.params||{})}),xx(this.states,"true","1"),xx(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new bx(e,t,this.states))}),this.fallbackTransition=new bx(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(i=>i.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function xx(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const Ox=new rx;class Cx{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=Zw(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,i=Qy(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],i=this._animations[e];let o;const s=new Map;if(i?(o=sx(this._driver,t,i,bw,yw,{},{},n,Ox,r),o.forEach(e=>{const t=rw(s,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,Uv)})});const a=Jy(o.map(e=>{const t=s.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by "+e);return t}listen(e,t,n,r){const i=nw(t,"","","");return ew(this._getPlayer(e),n,i,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const _x="ng-animate-queued",Sx="ng-animate-disabled",jx=".ng-animate-disabled",kx=[],Tx={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ex={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Px{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const t=kw(e);delete t.value,this.options=t}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const Ax="void",Mx=new Px(Ax);class Dx{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,zx(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var i;const o=rw(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};o.push(s);const a=rw(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(zx(e,ww),zx(e,"ng-trigger-"+t),a[t]=Mx),()=>{this._engine.afterFlush(()=>{const e=o.indexOf(s);e>=0&&o.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const i=this._getTrigger(t),o=new Lx(this.id,t,e);let s=this._engine.statesByElement.get(e);s||(zx(e,ww),zx(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,s={}));let a=s[t];const l=new Px(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),s[t]=l,a||(a=Mx),l.value!==Ax&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,l.params)){const t=[],n=i.matchStyles(a.value,a.params,t),r=i.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{Mw(e,n),Aw(e,r)})}return}const c=rw(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let u=i.matchTransition(a.value,l.value,e,l.params),d=!1;if(!u){if(!r)return;u=i.fallbackTransition,d=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:u,fromState:a,toState:l,player:o,isFallbackTransition:d}),d||(zx(e,_x),o.onStart(()=>{Bx(e,_x)})),o.onDone(()=>{let t=this.players.indexOf(o);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(o);e>=0&&n.splice(e,1)}}),this.players.push(o),c.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,xw,!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,r){const i=this._engine.statesByElement.get(e);if(i){const o=[];if(Object.keys(i).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,Ax,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&Jy(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e);if(t){const n=new Set;t.forEach(t=>{const r=t.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(e)[r]||Mx,s=new Px(Ax),a=new Lx(this.id,r,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e.__ng_removed;r&&r!==Tx||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){zx(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(t=>{if(t.name==n.triggerName){const r=nw(i,n.triggerName,n.fromState.value,n.toState.value);r._data=e,ew(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class Ix{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new Dx(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=n[e[r]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(Nx(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!Nx(t))return;const i=t.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),zx(e,Sx)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Bx(e,Sx))}removeNode(e,t,n,r){if(Nx(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,i){return Nx(t)?this._fetchNamespace(e).listen(t,n,r,i):()=>{}}_buildInstruction(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,xw,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Cw,!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Jy(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=Tx,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,jx)&&this.markElementAsDisabled(e,!1),this.driver.query(e,jx,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)zx(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?Jy(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))}_flushAnimations(e,t){const n=new rx,r=[],i=new Map,o=[],s=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)c.add(t[n])});const u=this.bodyNode,d=Array.from(this.statesByElement.keys()),h=Vx(d,this.collectedEnterElements),f=new Map;let p=0;h.forEach((e,t)=>{const n=bw+p++;f.set(t,n),e.forEach(e=>zx(e,n))});const g=[],m=new Set,v=new Set;for(let P=0;P<this.collectedLeaveElements.length;P++){const e=this.collectedLeaveElements[P],t=e.__ng_removed;t&&t.setForRemoval&&(g.push(e),m.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>m.add(e)):v.add(e))}const b=new Map,y=Vx(d,Array.from(m));y.forEach((e,t)=>{const n=yw+p++;b.set(t,n),e.forEach(e=>zx(e,n))}),e.push(()=>{h.forEach((e,t)=>{const n=f.get(t);e.forEach(e=>Bx(e,n))}),y.forEach((e,t)=>{const n=b.get(t);e.forEach(e=>Bx(e,n))}),g.forEach(e=>{this.processLeaveNode(e)})});const w=[],x=[];for(let P=this._namespaceList.length-1;P>=0;P--)this._namespaceList[P].drainQueuedTransitions(t).forEach(e=>{const t=e.player,i=e.element;if(w.push(t),this.collectedEnterElements.length){const e=i.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const c=!u||!this.driver.containsElement(u,i),d=b.get(i),h=f.get(i),p=this._buildInstruction(e,n,h,d,c);if(p.errors&&p.errors.length)x.push(p);else{if(c)return t.onStart(()=>Mw(i,p.fromStyles)),t.onDestroy(()=>Aw(i,p.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>Mw(i,p.fromStyles)),t.onDestroy(()=>Aw(i,p.toStyles)),void r.push(t);p.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:t,element:i}),p.queriedElements.forEach(e=>rw(s,e,[]).push(t)),p.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),p.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=l.get(t);r||l.set(t,r=new Set),n.forEach(e=>r.add(e))})}});if(x.length){const e=[];x.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),w.forEach(e=>e.destroy()),this.reportError(e)}const O=new Map,C=new Map;o.forEach(e=>{const t=e.element;n.has(t)&&(C.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,O))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{rw(O,t,[]).push(e),e.destroy()})});const _=g.filter(e=>Ux(e,a,l)),S=new Map;Fx(S,this.driver,v,l,Uv).forEach(e=>{Ux(e,a,l)&&_.push(e)});const j=new Map;h.forEach((e,t)=>{Fx(j,this.driver,new Set(e),a,"!")}),_.forEach(e=>{const t=S.get(e),n=j.get(e);S.set(e,Object.assign(Object.assign({},t),n))});const k=[],T=[],E={};o.forEach(e=>{const{element:t,player:o,instruction:s}=e;if(n.has(t)){if(c.has(t))return o.onDestroy(()=>Aw(t,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let e=E;if(C.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=C.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>C.set(t,e))}const n=this._buildAnimation(o.namespaceId,s,O,i,j,S);if(o.setRealPlayer(n),e===E)k.push(o);else{const t=this.playersByElement.get(e);t&&t.length&&(o.parentPlayer=Jy(t)),r.push(o)}}else Mw(t,s.fromStyles),o.onDestroy(()=>Aw(t,s.toStyles)),T.push(o),c.has(t)&&r.push(o)}),T.forEach(e=>{const t=i.get(e.element);if(t&&t.length){const n=Jy(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let P=0;P<g.length;P++){const e=g[P],t=e.__ng_removed;if(Bx(e,yw),t&&t.hasAnimation)continue;let n=[];if(s.size){let t=s.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,Cw,!0);for(let e=0;e<r.length;e++){let t=s.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?Hx(this,e,r):this.processLeaveNode(e)}return g.length=0,k.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),k}elementContainsData(e,t){let n=!1;const r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,i){let o=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(o=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||i==Ax;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),o}_beforeAnimationBuild(e,t,n){const r=t.element,i=t.isRemovalTransition?void 0:e,o=t.isRemovalTransition?void 0:t.triggerName;for(const s of t.timelines){const e=s.element,a=e!==r,l=rw(n,e,[]);this._getPreviousPlayers(e,a,i,o,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}Mw(r,t.fromStyles)}_buildAnimation(e,t,n,r,i,o){const s=t.triggerName,a=t.element,l=[],c=new Set,u=new Set,d=t.timelines.map(t=>{const d=t.element;c.add(d);const h=d.__ng_removed;if(h&&h.removedBeforeQueried)return new Gv(t.duration,t.delay);const f=d!==a,p=function(e){const t=[];return function e(t,n){for(let r=0;r<t.length;r++){const i=t[r];i instanceof Kv?e(i.players,n):n.push(i)}}(e,t),t}((n.get(d)||kx).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===d),g=i.get(d),m=o.get(d),v=Qy(0,this._normalizer,0,t.keyframes,g,m),b=this._buildPlayer(t,v,p);if(t.subTimeline&&r&&u.add(d),f){const t=new Lx(e,s,d);t.setRealPlayer(b),l.push(t)}return b});l.forEach(e=>{rw(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>zx(e,Ow));const h=Jy(d);return h.onDestroy(()=>{c.forEach(e=>Bx(e,Ow)),Aw(a,t.toStyles)}),u.forEach(e=>{rw(r,e,[]).push(h)}),h}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Gv(e.duration,e.delay)}}class Lx{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new Gv,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>ew(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){rw(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Nx(e){return e&&1===e.nodeType}function Rx(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function Fx(e,t,n,r,i){const o=[];n.forEach(e=>o.push(Rx(e)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(e=>{const n=o[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r.__ng_removed=Ex,s.push(r))}),e.set(r,o)});let a=0;return n.forEach(e=>Rx(e,o[a++])),s}function Vx(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),i=new Map;return t.forEach(e=>{const t=function e(t){if(!t)return 1;let o=i.get(t);if(o)return o;const s=t.parentNode;return o=n.has(s)?s:r.has(s)?1:e(s),i.set(t,o),o}(e);1!==t&&n.get(t).push(e)}),n}function zx(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function Bx(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function Hx(e,t,n){Jy(n).onDone(()=>e.processLeaveNode(t))}function Ux(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(e=>i.add(e)):t.set(e,r),n.delete(e),!0}class $x{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new Ix(e,t,n),this._timelineEngine=new Cx(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,i){const o=e+"-"+r;let s=this._triggerCache[o];if(!s){const e=[],t=Zw(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);s=function(e,t){return new wx(e,t)}(r,t),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(t,r,s)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,i]=iw(n);this._timelineEngine.command(e,t,i,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,i){if("@"==n.charAt(0)){const[e,r]=iw(n);return this._timelineEngine.listen(e,t,r,i)}return this._transitionEngine.listen(e,t,n,r,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Wx(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=Gx(t[0]),t.length>1&&(r=Gx(t[t.length-1]))):t&&(n=Gx(t)),n||r?new qx(e,n,r):null}let qx=(()=>{class e{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let i=e.initialStylesByElement.get(t);i||e.initialStylesByElement.set(t,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Aw(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Aw(this._element,this._initialStyles),this._endStyles&&(Aw(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Mw(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mw(this._element,this._endStyles),this._endStyles=null),Aw(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function Gx(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];Kx(i)&&(t=t||{},t[i]=e[i])}return t}function Kx(e){return"display"===e||"position"===e}const Yx="animation",Zx="animationend";class Xx{constructor(e,t,n,r,i,o,s){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=rO(e,"").trim();n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t=`${n}, ${t}`),nO(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),tO(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Jx(this._element,this._name,"paused")}resume(){Jx(this._element,this._name,"running")}setPosition(e){const t=Qx(this._element,this._name);this._position=e*this._duration,nO(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),tO(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=rO(e,"").split(","),r=eO(n,t);r>=0&&(n.splice(r,1),nO(e,"",n.join(",")))}(this._element,this._name))}}function Jx(e,t,n){nO(e,"PlayState",n,Qx(e,t))}function Qx(e,t){const n=rO(e,"");return n.indexOf(",")>0?eO(n.split(","),t):eO([n],t)}function eO(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function tO(e,t,n){n?e.removeEventListener(Zx,t):e.addEventListener(Zx,t)}function nO(e,t,n,r){const i=Yx+t;if(null!=r){const t=e.style[i];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[i]=n}function rO(e,t){return e.style[Yx+t]}class iO{constructor(e,t,n,r,i,o,s,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Xx(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:Uw(this.element,n))})}this.currentSnapshot=e}}class oO extends Gv{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=gw(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class sO{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(e){return dw(e)}matchesElement(e,t){return hw(e,t)}containsElement(e,t){return fw(e,t)}query(e,t,n){return pw(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>gw(e));let r=`@keyframes ${t} {\n`,i="";n.forEach(e=>{i=" ";const t=parseFloat(e.offset);r+=`${i}${100*t}% {\n`,i+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${t}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(e,t,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(e=>e instanceof iO),l={};zw(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=Bw(e,t,l));if(0==n)return new oO(e,c);const u="gen_css_kf_"+this._count++,d=this.buildKeyframeElement(e,u,t);document.querySelector("head").appendChild(d);const h=Wx(e,t),f=new iO(e,t,u,n,r,i,c,h);return f.onDestroy(()=>{var e;(e=d).parentNode.removeChild(e)}),f}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class aO{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:Uw(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class lO{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(cO().toString()),this._cssKeyframesDriver=new sO}validateStyleProperty(e){return dw(e)}matchesElement(e,t){return hw(e,t)}containsElement(e,t){return fw(e,t)}query(e,t,n){return pw(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const l={},c=o.filter(e=>e instanceof aO);zw(n,r)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const u=Wx(e,t=Bw(e,t=t.map(e=>Tw(e,!1)),l));return new aO(e,t,a,u)}}function cO(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let uO=(()=>{class e extends Hv{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:ht.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?$v(e):e;return fO(this._renderer,null,t,"register",[n]),new dO(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(Je(xs),Je(bl))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();class dO extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new hO(this._id,e,t||{},this._renderer)}}class hO{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return fO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){return 0}}function fO(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}const pO="@",gO="@.disabled";let mO=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new vO("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,i=t.id+"-"+this._currentId;this._currentId++,this.engine.register(i,e);const o=t=>{Array.isArray(t)?t.forEach(o):this.engine.registerTrigger(r,i,e,t.name,t)};return t.data.animation.forEach(o),new bO(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(Je(xs),Je($x),Je(Ba))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();class vO{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==pO&&t==gO?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class bO extends vO{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==pO?"."==t.charAt(1)&&t==gO?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==pO){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.substr(1),o="";return i.charAt(0)!=pO&&([i,o]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let yO=(()=>{class e extends $x{constructor(e,t,n){super(e.body,t,n)}}return e.\u0275fac=function(t){return new(t||e)(Je(bl),Je(vw),Je(fx))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e})();const wO=[{provide:vw,useFactory:function(){return"function"==typeof cO()?new lO:new sO}},{provide:new Be("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:Hv,useClass:uO},{provide:fx,useFactory:function(){return new px}},{provide:$x,useClass:yO},{provide:xs,useFactory:function(e,t,n){return new mO(e,t,n)},deps:[uc,$x,Ba]}];let xO=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=ge({factory:function(t){return new(t||e)},providers:wO,imports:[Oc]}),e})();function OO(e){return{types:[],extensions:[{name:"test",priority:1,extension:new Zy}],wrappers:[{name:"test",priority:1,wrapper:e}]}}let CO=(()=>{class e{constructor(){}}return e.\u0275mod=wt({type:e,bootstrap:[jy]}),e.\u0275inj=ge({factory:function(t){return new(t||e)},providers:[ty,{provide:cf,multi:!0,useFactory:OO,deps:[ty]}],imports:[[Oc,xO,qh.forRoot([{path:"**",component:ky}]),Yy.forRoot({})]]}),e})();(function(){if(pr)throw new Error("Cannot enable prod mode after platform setup.");fr=!1})(),wc().bootstrapModule(CO).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);